const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/FaceAuthentication-B5DaSLHQ.js","assets/createSvgIcon-CLvP75nm.js","assets/Button-DcO0qGCa.js","assets/AuthenticatedProfile-CTOFASH8.js","assets/Paper-BJo6EO63.js","assets/TeamPage-k34W0MCQ.js","assets/proxy-Bml_j8Ev.js","assets/HomePage-DqUod3N2.js","assets/HomePage-2d6kTBOk.css"])))=>i.map(i=>d[i]);
function nA(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function J2(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eo(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var eb={exports:{}},Sf={},tb={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qu=Symbol.for("react.element"),rA=Symbol.for("react.portal"),oA=Symbol.for("react.fragment"),aA=Symbol.for("react.strict_mode"),iA=Symbol.for("react.profiler"),sA=Symbol.for("react.provider"),uA=Symbol.for("react.context"),cA=Symbol.for("react.forward_ref"),lA=Symbol.for("react.suspense"),fA=Symbol.for("react.memo"),dA=Symbol.for("react.lazy"),M1=Symbol.iterator;function hA(e){return e===null||typeof e!="object"?null:(e=M1&&e[M1]||e["@@iterator"],typeof e=="function"?e:null)}var nb={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rb=Object.assign,ob={};function os(e,t,n){this.props=e,this.context=t,this.refs=ob,this.updater=n||nb}os.prototype.isReactComponent={};os.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};os.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ab(){}ab.prototype=os.prototype;function bv(e,t,n){this.props=e,this.context=t,this.refs=ob,this.updater=n||nb}var wv=bv.prototype=new ab;wv.constructor=bv;rb(wv,os.prototype);wv.isPureReactComponent=!0;var L1=Array.isArray,ib=Object.prototype.hasOwnProperty,Cv={current:null},sb={key:!0,ref:!0,__self:!0,__source:!0};function ub(e,t,n){var r,o={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)ib.call(t,r)&&!sb.hasOwnProperty(r)&&(o[r]=t[r]);var s=arguments.length-2;if(s===1)o.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)o[r]===void 0&&(o[r]=s[r]);return{$$typeof:qu,type:e,key:a,ref:i,props:o,_owner:Cv.current}}function pA(e,t){return{$$typeof:qu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ev(e){return typeof e=="object"&&e!==null&&e.$$typeof===qu}function vA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var W1=/\/+/g;function fh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?vA(""+e.key):t.toString(36)}function il(e,t,n,r,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case qu:case rA:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+fh(i,0):r,L1(o)?(n="",e!=null&&(n=e.replace(W1,"$&/")+"/"),il(o,t,n,"",function(c){return c})):o!=null&&(Ev(o)&&(o=pA(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(W1,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",L1(e))for(var s=0;s<e.length;s++){a=e[s];var u=r+fh(a,s);i+=il(a,t,n,u,o)}else if(u=hA(e),typeof u=="function")for(e=u.call(e),s=0;!(a=e.next()).done;)a=a.value,u=r+fh(a,s++),i+=il(a,t,n,u,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Dc(e,t,n){if(e==null)return e;var r=[],o=0;return il(e,r,"","",function(a){return t.call(n,a,o++)}),r}function mA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Sn={current:null},sl={transition:null},gA={ReactCurrentDispatcher:Sn,ReactCurrentBatchConfig:sl,ReactCurrentOwner:Cv};function cb(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:Dc,forEach:function(e,t,n){Dc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Dc(e,function(){t++}),t},toArray:function(e){return Dc(e,function(t){return t})||[]},only:function(e){if(!Ev(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Oe.Component=os;Oe.Fragment=oA;Oe.Profiler=iA;Oe.PureComponent=bv;Oe.StrictMode=aA;Oe.Suspense=lA;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gA;Oe.act=cb;Oe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=rb({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=Cv.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)ib.call(t,u)&&!sb.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&s!==void 0?s[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:qu,type:e.type,key:o,ref:a,props:r,_owner:i}};Oe.createContext=function(e){return e={$$typeof:uA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:sA,_context:e},e.Consumer=e};Oe.createElement=ub;Oe.createFactory=function(e){var t=ub.bind(null,e);return t.type=e,t};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(e){return{$$typeof:cA,render:e}};Oe.isValidElement=Ev;Oe.lazy=function(e){return{$$typeof:dA,_payload:{_status:-1,_result:e},_init:mA}};Oe.memo=function(e,t){return{$$typeof:fA,type:e,compare:t===void 0?null:t}};Oe.startTransition=function(e){var t=sl.transition;sl.transition={};try{e()}finally{sl.transition=t}};Oe.unstable_act=cb;Oe.useCallback=function(e,t){return Sn.current.useCallback(e,t)};Oe.useContext=function(e){return Sn.current.useContext(e)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(e){return Sn.current.useDeferredValue(e)};Oe.useEffect=function(e,t){return Sn.current.useEffect(e,t)};Oe.useId=function(){return Sn.current.useId()};Oe.useImperativeHandle=function(e,t,n){return Sn.current.useImperativeHandle(e,t,n)};Oe.useInsertionEffect=function(e,t){return Sn.current.useInsertionEffect(e,t)};Oe.useLayoutEffect=function(e,t){return Sn.current.useLayoutEffect(e,t)};Oe.useMemo=function(e,t){return Sn.current.useMemo(e,t)};Oe.useReducer=function(e,t,n){return Sn.current.useReducer(e,t,n)};Oe.useRef=function(e){return Sn.current.useRef(e)};Oe.useState=function(e){return Sn.current.useState(e)};Oe.useSyncExternalStore=function(e,t,n){return Sn.current.useSyncExternalStore(e,t,n)};Oe.useTransition=function(){return Sn.current.useTransition()};Oe.version="18.3.1";tb.exports=Oe;var Z=tb.exports;const xA=J2(Z),z1=nA({__proto__:null,default:xA},[Z]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yA=Z,bA=Symbol.for("react.element"),wA=Symbol.for("react.fragment"),CA=Object.prototype.hasOwnProperty,EA=yA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_A={key:!0,ref:!0,__self:!0,__source:!0};function lb(e,t,n){var r,o={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)CA.call(t,r)&&!_A.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:bA,type:e,key:a,ref:i,props:o,_owner:EA.current}}Sf.Fragment=wA;Sf.jsx=lb;Sf.jsxs=lb;eb.exports=Sf;var et=eb.exports,fb={exports:{}},Zn={},db={exports:{}},hb={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,V){var G=P.length;P.push(V);e:for(;0<G;){var L=G-1>>>1,H=P[L];if(0<o(H,V))P[L]=V,P[G]=H,G=L;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var V=P[0],G=P.pop();if(G!==V){P[0]=G;e:for(var L=0,H=P.length,K=H>>>1;L<K;){var Y=2*(L+1)-1,fe=P[Y],le=Y+1,we=P[le];if(0>o(fe,G))le<H&&0>o(we,fe)?(P[L]=we,P[le]=G,L=le):(P[L]=fe,P[Y]=G,L=Y);else if(le<H&&0>o(we,G))P[L]=we,P[le]=G,L=le;else break e}}return V}function o(P,V){var G=P.sortIndex-V.sortIndex;return G!==0?G:P.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,s=i.now();e.unstable_now=function(){return i.now()-s}}var u=[],c=[],l=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(P){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=P)r(c),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(c)}}function b(P){if(m=!1,y(P),!p)if(n(u)!==null)p=!0,q(w);else{var V=n(c);V!==null&&X(b,V.startTime-P)}}function w(P,V){p=!1,m&&(m=!1,v(S),S=-1),h=!0;var G=d;try{for(y(V),f=n(u);f!==null&&(!(f.expirationTime>V)||P&&!A());){var L=f.callback;if(typeof L=="function"){f.callback=null,d=f.priorityLevel;var H=L(f.expirationTime<=V);V=e.unstable_now(),typeof H=="function"?f.callback=H:f===n(u)&&r(u),y(V)}else r(u);f=n(u)}if(f!==null)var K=!0;else{var Y=n(c);Y!==null&&X(b,Y.startTime-V),K=!1}return K}finally{f=null,d=G,h=!1}}var C=!1,E=null,S=-1,k=5,_=-1;function A(){return!(e.unstable_now()-_<k)}function D(){if(E!==null){var P=e.unstable_now();_=P;var V=!0;try{V=E(!0,P)}finally{V?T():(C=!1,E=null)}}else C=!1}var T;if(typeof x=="function")T=function(){x(D)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,$=W.port2;W.port1.onmessage=D,T=function(){$.postMessage(null)}}else T=function(){g(D,0)};function q(P){E=P,C||(C=!0,T())}function X(P,V){S=g(function(){P(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,q(w))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(P){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var G=d;d=V;try{return P()}finally{d=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,V){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var G=d;d=P;try{return V()}finally{d=G}},e.unstable_scheduleCallback=function(P,V,G){var L=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?L+G:L):G=L,P){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=G+H,P={id:l++,callback:V,priorityLevel:P,startTime:G,expirationTime:H,sortIndex:-1},G>L?(P.sortIndex=G,t(c,P),n(u)===null&&P===n(c)&&(m?(v(S),S=-1):m=!0,X(b,G-L))):(P.sortIndex=H,t(u,P),p||h||(p=!0,q(w))),P},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(P){var V=d;return function(){var G=d;d=V;try{return P.apply(this,arguments)}finally{d=G}}}})(hb);db.exports=hb;var SA=db.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA=Z,Qn=SA;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pb=new Set,su={};function Ka(e,t){Vi(e,t),Vi(e+"Capture",t)}function Vi(e,t){for(su[e]=t,e=0;e<t.length;e++)pb.add(t[e])}var bo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qp=Object.prototype.hasOwnProperty,AA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$1={},U1={};function DA(e){return qp.call(U1,e)?!0:qp.call($1,e)?!1:AA.test(e)?U1[e]=!0:($1[e]=!0,!1)}function RA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function FA(e,t,n,r){if(t===null||typeof t>"u"||RA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function kn(e,t,n,r,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var on={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){on[e]=new kn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];on[t]=new kn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){on[e]=new kn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){on[e]=new kn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){on[e]=new kn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){on[e]=new kn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){on[e]=new kn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){on[e]=new kn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){on[e]=new kn(e,5,!1,e.toLowerCase(),null,!1,!1)});var _v=/[\-:]([a-z])/g;function Sv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(_v,Sv);on[t]=new kn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(_v,Sv);on[t]=new kn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(_v,Sv);on[t]=new kn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){on[e]=new kn(e,1,!1,e.toLowerCase(),null,!1,!1)});on.xlinkHref=new kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){on[e]=new kn(e,1,!1,e.toLowerCase(),null,!0,!0)});function kv(e,t,n,r){var o=on.hasOwnProperty(t)?on[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(FA(t,n,o,r)&&(n=null),r||o===null?DA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Do=kA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),xi=Symbol.for("react.portal"),yi=Symbol.for("react.fragment"),Av=Symbol.for("react.strict_mode"),Kp=Symbol.for("react.profiler"),vb=Symbol.for("react.provider"),mb=Symbol.for("react.context"),Dv=Symbol.for("react.forward_ref"),Xp=Symbol.for("react.suspense"),Yp=Symbol.for("react.suspense_list"),Rv=Symbol.for("react.memo"),$o=Symbol.for("react.lazy"),gb=Symbol.for("react.offscreen"),H1=Symbol.iterator;function _s(e){return e===null||typeof e!="object"?null:(e=H1&&e[H1]||e["@@iterator"],typeof e=="function"?e:null)}var vt=Object.assign,dh;function Ws(e){if(dh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);dh=t&&t[1]||""}return`
`+dh+e}var hh=!1;function ph(e,t){if(!e||hh)return"";hh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),a=r.stack.split(`
`),i=o.length-1,s=a.length-1;1<=i&&0<=s&&o[i]!==a[s];)s--;for(;1<=i&&0<=s;i--,s--)if(o[i]!==a[s]){if(i!==1||s!==1)do if(i--,s--,0>s||o[i]!==a[s]){var u=`
`+o[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=s);break}}}finally{hh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ws(e):""}function IA(e){switch(e.tag){case 5:return Ws(e.type);case 16:return Ws("Lazy");case 13:return Ws("Suspense");case 19:return Ws("SuspenseList");case 0:case 2:case 15:return e=ph(e.type,!1),e;case 11:return e=ph(e.type.render,!1),e;case 1:return e=ph(e.type,!0),e;default:return""}}function Qp(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case yi:return"Fragment";case xi:return"Portal";case Kp:return"Profiler";case Av:return"StrictMode";case Xp:return"Suspense";case Yp:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case mb:return(e.displayName||"Context")+".Consumer";case vb:return(e._context.displayName||"Context")+".Provider";case Dv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rv:return t=e.displayName||null,t!==null?t:Qp(e.type)||"Memo";case $o:t=e._payload,e=e._init;try{return Qp(e(t))}catch{}}return null}function BA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qp(t);case 8:return t===Av?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function sa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xb(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function TA(e){var t=xb(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fc(e){e._valueTracker||(e._valueTracker=TA(e))}function yb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xb(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Pl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Zp(e,t){var n=t.checked;return vt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function V1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=sa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function bb(e,t){t=t.checked,t!=null&&kv(e,"checked",t,!1)}function Jp(e,t){bb(e,t);var n=sa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?e0(e,t.type,n):t.hasOwnProperty("defaultValue")&&e0(e,t.type,sa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function j1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function e0(e,t,n){(t!=="number"||Pl(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zs=Array.isArray;function Fi(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+sa(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function t0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(oe(91));return vt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function G1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(oe(92));if(zs(n)){if(1<n.length)throw Error(oe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:sa(n)}}function wb(e,t){var n=sa(t.value),r=sa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function q1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Cb(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function n0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Cb(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ic,Eb=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ic.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function uu(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PA=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(e){PA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ks[t]=Ks[e]})});function _b(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Ks.hasOwnProperty(e)&&Ks[e]?(""+t).trim():t+"px"}function Sb(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=_b(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var NA=vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function r0(e,t){if(t){if(NA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(oe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(oe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(oe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(oe(62))}}function o0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a0=null;function Fv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var i0=null,Ii=null,Bi=null;function K1(e){if(e=Yu(e)){if(typeof i0!="function")throw Error(oe(280));var t=e.stateNode;t&&(t=Ff(t),i0(e.stateNode,e.type,t))}}function kb(e){Ii?Bi?Bi.push(e):Bi=[e]:Ii=e}function Ab(){if(Ii){var e=Ii,t=Bi;if(Bi=Ii=null,K1(e),t)for(e=0;e<t.length;e++)K1(t[e])}}function Db(e,t){return e(t)}function Rb(){}var vh=!1;function Fb(e,t,n){if(vh)return e(t,n);vh=!0;try{return Db(e,t,n)}finally{vh=!1,(Ii!==null||Bi!==null)&&(Rb(),Ab())}}function cu(e,t){var n=e.stateNode;if(n===null)return null;var r=Ff(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(oe(231,t,typeof n));return n}var s0=!1;if(bo)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){s0=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{s0=!1}function OA(e,t,n,r,o,a,i,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Xs=!1,Nl=null,Ol=!1,u0=null,MA={onError:function(e){Xs=!0,Nl=e}};function LA(e,t,n,r,o,a,i,s,u){Xs=!1,Nl=null,OA.apply(MA,arguments)}function WA(e,t,n,r,o,a,i,s,u){if(LA.apply(this,arguments),Xs){if(Xs){var c=Nl;Xs=!1,Nl=null}else throw Error(oe(198));Ol||(Ol=!0,u0=c)}}function Xa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ib(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function X1(e){if(Xa(e)!==e)throw Error(oe(188))}function zA(e){var t=e.alternate;if(!t){if(t=Xa(e),t===null)throw Error(oe(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return X1(o),e;if(a===r)return X1(o),t;a=a.sibling}throw Error(oe(188))}if(n.return!==r.return)n=o,r=a;else{for(var i=!1,s=o.child;s;){if(s===n){i=!0,n=o,r=a;break}if(s===r){i=!0,r=o,n=a;break}s=s.sibling}if(!i){for(s=a.child;s;){if(s===n){i=!0,n=a,r=o;break}if(s===r){i=!0,r=a,n=o;break}s=s.sibling}if(!i)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?e:t}function Bb(e){return e=zA(e),e!==null?Tb(e):null}function Tb(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tb(e);if(t!==null)return t;e=e.sibling}return null}var Pb=Qn.unstable_scheduleCallback,Y1=Qn.unstable_cancelCallback,$A=Qn.unstable_shouldYield,UA=Qn.unstable_requestPaint,St=Qn.unstable_now,HA=Qn.unstable_getCurrentPriorityLevel,Iv=Qn.unstable_ImmediatePriority,Nb=Qn.unstable_UserBlockingPriority,Ml=Qn.unstable_NormalPriority,VA=Qn.unstable_LowPriority,Ob=Qn.unstable_IdlePriority,kf=null,Kr=null;function jA(e){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(kf,e,void 0,(e.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:KA,GA=Math.log,qA=Math.LN2;function KA(e){return e>>>=0,e===0?32:31-(GA(e)/qA|0)|0}var Bc=64,Tc=4194304;function $s(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ll(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var s=i&~o;s!==0?r=$s(s):(a&=i,a!==0&&(r=$s(a)))}else i=n&~o,i!==0?r=$s(i):a!==0&&(r=$s(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Sr(t),o=1<<n,r|=e[n],t&=~o;return r}function XA(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YA(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-Sr(a),s=1<<i,u=o[i];u===-1?(!(s&n)||s&r)&&(o[i]=XA(s,t)):u<=t&&(e.expiredLanes|=s),a&=~s}}function c0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mb(){var e=Bc;return Bc<<=1,!(Bc&4194240)&&(Bc=64),e}function mh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ku(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Sr(t),e[t]=n}function QA(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Sr(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}function Bv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Sr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Ye=0;function Lb(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Wb,Tv,zb,$b,Ub,l0=!1,Pc=[],Qo=null,Zo=null,Jo=null,lu=new Map,fu=new Map,Ho=[],ZA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Q1(e,t){switch(e){case"focusin":case"focusout":Qo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Jo=null;break;case"pointerover":case"pointerout":lu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(t.pointerId)}}function ks(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=Yu(t),t!==null&&Tv(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function JA(e,t,n,r,o){switch(t){case"focusin":return Qo=ks(Qo,e,t,n,r,o),!0;case"dragenter":return Zo=ks(Zo,e,t,n,r,o),!0;case"mouseover":return Jo=ks(Jo,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return lu.set(a,ks(lu.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,fu.set(a,ks(fu.get(a)||null,e,t,n,r,o)),!0}return!1}function Hb(e){var t=Ia(e.target);if(t!==null){var n=Xa(t);if(n!==null){if(t=n.tag,t===13){if(t=Ib(n),t!==null){e.blockedOn=t,Ub(e.priority,function(){zb(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ul(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=f0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);a0=r,n.target.dispatchEvent(r),a0=null}else return t=Yu(n),t!==null&&Tv(t),e.blockedOn=n,!1;t.shift()}return!0}function Z1(e,t,n){ul(e)&&n.delete(t)}function eD(){l0=!1,Qo!==null&&ul(Qo)&&(Qo=null),Zo!==null&&ul(Zo)&&(Zo=null),Jo!==null&&ul(Jo)&&(Jo=null),lu.forEach(Z1),fu.forEach(Z1)}function As(e,t){e.blockedOn===t&&(e.blockedOn=null,l0||(l0=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,eD)))}function du(e){function t(o){return As(o,e)}if(0<Pc.length){As(Pc[0],e);for(var n=1;n<Pc.length;n++){var r=Pc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Qo!==null&&As(Qo,e),Zo!==null&&As(Zo,e),Jo!==null&&As(Jo,e),lu.forEach(t),fu.forEach(t),n=0;n<Ho.length;n++)r=Ho[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ho.length&&(n=Ho[0],n.blockedOn===null);)Hb(n),n.blockedOn===null&&Ho.shift()}var Ti=Do.ReactCurrentBatchConfig,Wl=!0;function tD(e,t,n,r){var o=Ye,a=Ti.transition;Ti.transition=null;try{Ye=1,Pv(e,t,n,r)}finally{Ye=o,Ti.transition=a}}function nD(e,t,n,r){var o=Ye,a=Ti.transition;Ti.transition=null;try{Ye=4,Pv(e,t,n,r)}finally{Ye=o,Ti.transition=a}}function Pv(e,t,n,r){if(Wl){var o=f0(e,t,n,r);if(o===null)kh(e,t,r,zl,n),Q1(e,r);else if(JA(o,e,t,n,r))r.stopPropagation();else if(Q1(e,r),t&4&&-1<ZA.indexOf(e)){for(;o!==null;){var a=Yu(o);if(a!==null&&Wb(a),a=f0(e,t,n,r),a===null&&kh(e,t,r,zl,n),a===o)break;o=a}o!==null&&r.stopPropagation()}else kh(e,t,r,null,n)}}var zl=null;function f0(e,t,n,r){if(zl=null,e=Fv(r),e=Ia(e),e!==null)if(t=Xa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ib(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return zl=e,null}function Vb(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(HA()){case Iv:return 1;case Nb:return 4;case Ml:case VA:return 16;case Ob:return 536870912;default:return 16}default:return 16}}var Go=null,Nv=null,cl=null;function jb(){if(cl)return cl;var e,t=Nv,n=t.length,r,o="value"in Go?Go.value:Go.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[a-r];r++);return cl=o.slice(e,1<r?1-r:void 0)}function ll(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nc(){return!0}function J1(){return!1}function Jn(e){function t(n,r,o,a,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Nc:J1,this.isPropagationStopped=J1,this}return vt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),t}var as={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ov=Jn(as),Xu=vt({},as,{view:0,detail:0}),rD=Jn(Xu),gh,xh,Ds,Af=vt({},Xu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Mv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ds&&(Ds&&e.type==="mousemove"?(gh=e.screenX-Ds.screenX,xh=e.screenY-Ds.screenY):xh=gh=0,Ds=e),gh)},movementY:function(e){return"movementY"in e?e.movementY:xh}}),ex=Jn(Af),oD=vt({},Af,{dataTransfer:0}),aD=Jn(oD),iD=vt({},Xu,{relatedTarget:0}),yh=Jn(iD),sD=vt({},as,{animationName:0,elapsedTime:0,pseudoElement:0}),uD=Jn(sD),cD=vt({},as,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lD=Jn(cD),fD=vt({},as,{data:0}),tx=Jn(fD),dD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=pD[e])?!!t[e]:!1}function Mv(){return vD}var mD=vt({},Xu,{key:function(e){if(e.key){var t=dD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ll(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Mv,charCode:function(e){return e.type==="keypress"?ll(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ll(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),gD=Jn(mD),xD=vt({},Af,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nx=Jn(xD),yD=vt({},Xu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Mv}),bD=Jn(yD),wD=vt({},as,{propertyName:0,elapsedTime:0,pseudoElement:0}),CD=Jn(wD),ED=vt({},Af,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_D=Jn(ED),SD=[9,13,27,32],Lv=bo&&"CompositionEvent"in window,Ys=null;bo&&"documentMode"in document&&(Ys=document.documentMode);var kD=bo&&"TextEvent"in window&&!Ys,Gb=bo&&(!Lv||Ys&&8<Ys&&11>=Ys),rx=" ",ox=!1;function qb(e,t){switch(e){case"keyup":return SD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var bi=!1;function AD(e,t){switch(e){case"compositionend":return Kb(t);case"keypress":return t.which!==32?null:(ox=!0,rx);case"textInput":return e=t.data,e===rx&&ox?null:e;default:return null}}function DD(e,t){if(bi)return e==="compositionend"||!Lv&&qb(e,t)?(e=jb(),cl=Nv=Go=null,bi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Gb&&t.locale!=="ko"?null:t.data;default:return null}}var RD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ax(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RD[e.type]:t==="textarea"}function Xb(e,t,n,r){kb(r),t=$l(t,"onChange"),0<t.length&&(n=new Ov("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qs=null,hu=null;function FD(e){iw(e,0)}function Df(e){var t=Ei(e);if(yb(t))return e}function ID(e,t){if(e==="change")return t}var Yb=!1;if(bo){var bh;if(bo){var wh="oninput"in document;if(!wh){var ix=document.createElement("div");ix.setAttribute("oninput","return;"),wh=typeof ix.oninput=="function"}bh=wh}else bh=!1;Yb=bh&&(!document.documentMode||9<document.documentMode)}function sx(){Qs&&(Qs.detachEvent("onpropertychange",Qb),hu=Qs=null)}function Qb(e){if(e.propertyName==="value"&&Df(hu)){var t=[];Xb(t,hu,e,Fv(e)),Fb(FD,t)}}function BD(e,t,n){e==="focusin"?(sx(),Qs=t,hu=n,Qs.attachEvent("onpropertychange",Qb)):e==="focusout"&&sx()}function TD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Df(hu)}function PD(e,t){if(e==="click")return Df(t)}function ND(e,t){if(e==="input"||e==="change")return Df(t)}function OD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Fr=typeof Object.is=="function"?Object.is:OD;function pu(e,t){if(Fr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!qp.call(t,o)||!Fr(e[o],t[o]))return!1}return!0}function ux(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cx(e,t){var n=ux(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ux(n)}}function Zb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Zb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jb(){for(var e=window,t=Pl();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Pl(e.document)}return t}function Wv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function MD(e){var t=Jb(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Zb(n.ownerDocument.documentElement,n)){if(r!==null&&Wv(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=cx(n,a);var i=cx(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var LD=bo&&"documentMode"in document&&11>=document.documentMode,wi=null,d0=null,Zs=null,h0=!1;function lx(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;h0||wi==null||wi!==Pl(r)||(r=wi,"selectionStart"in r&&Wv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zs&&pu(Zs,r)||(Zs=r,r=$l(d0,"onSelect"),0<r.length&&(t=new Ov("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=wi)))}function Oc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ci={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},Ch={},ew={};bo&&(ew=document.createElement("div").style,"AnimationEvent"in window||(delete Ci.animationend.animation,delete Ci.animationiteration.animation,delete Ci.animationstart.animation),"TransitionEvent"in window||delete Ci.transitionend.transition);function Rf(e){if(Ch[e])return Ch[e];if(!Ci[e])return e;var t=Ci[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in ew)return Ch[e]=t[n];return e}var tw=Rf("animationend"),nw=Rf("animationiteration"),rw=Rf("animationstart"),ow=Rf("transitionend"),aw=new Map,fx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function da(e,t){aw.set(e,t),Ka(t,[e])}for(var Eh=0;Eh<fx.length;Eh++){var _h=fx[Eh],WD=_h.toLowerCase(),zD=_h[0].toUpperCase()+_h.slice(1);da(WD,"on"+zD)}da(tw,"onAnimationEnd");da(nw,"onAnimationIteration");da(rw,"onAnimationStart");da("dblclick","onDoubleClick");da("focusin","onFocus");da("focusout","onBlur");da(ow,"onTransitionEnd");Vi("onMouseEnter",["mouseout","mouseover"]);Vi("onMouseLeave",["mouseout","mouseover"]);Vi("onPointerEnter",["pointerout","pointerover"]);Vi("onPointerLeave",["pointerout","pointerover"]);Ka("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ka("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ka("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ka("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ka("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$D=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function dx(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,WA(r,t,void 0,e),e.currentTarget=null}function iw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var s=r[i],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==a&&o.isPropagationStopped())break e;dx(o,s,c),a=u}else for(i=0;i<r.length;i++){if(s=r[i],u=s.instance,c=s.currentTarget,s=s.listener,u!==a&&o.isPropagationStopped())break e;dx(o,s,c),a=u}}}if(Ol)throw e=u0,Ol=!1,u0=null,e}function at(e,t){var n=t[x0];n===void 0&&(n=t[x0]=new Set);var r=e+"__bubble";n.has(r)||(sw(t,e,2,!1),n.add(r))}function Sh(e,t,n){var r=0;t&&(r|=4),sw(n,e,r,t)}var Mc="_reactListening"+Math.random().toString(36).slice(2);function vu(e){if(!e[Mc]){e[Mc]=!0,pb.forEach(function(n){n!=="selectionchange"&&($D.has(n)||Sh(n,!1,e),Sh(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mc]||(t[Mc]=!0,Sh("selectionchange",!1,t))}}function sw(e,t,n,r){switch(Vb(t)){case 1:var o=tD;break;case 4:o=nD;break;default:o=Pv}n=o.bind(null,t,n,e),o=void 0,!s0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function kh(e,t,n,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var s=r.stateNode.containerInfo;if(s===o||s.nodeType===8&&s.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;i=i.return}for(;s!==null;){if(i=Ia(s),i===null)return;if(u=i.tag,u===5||u===6){r=a=i;continue e}s=s.parentNode}}r=r.return}Fb(function(){var c=a,l=Fv(n),f=[];e:{var d=aw.get(e);if(d!==void 0){var h=Ov,p=e;switch(e){case"keypress":if(ll(n)===0)break e;case"keydown":case"keyup":h=gD;break;case"focusin":p="focus",h=yh;break;case"focusout":p="blur",h=yh;break;case"beforeblur":case"afterblur":h=yh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=ex;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=aD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=bD;break;case tw:case nw:case rw:h=uD;break;case ow:h=CD;break;case"scroll":h=rD;break;case"wheel":h=_D;break;case"copy":case"cut":case"paste":h=lD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=nx}var m=(t&4)!==0,g=!m&&e==="scroll",v=m?d!==null?d+"Capture":null:d;m=[];for(var x=c,y;x!==null;){y=x;var b=y.stateNode;if(y.tag===5&&b!==null&&(y=b,v!==null&&(b=cu(x,v),b!=null&&m.push(mu(x,b,y)))),g)break;x=x.return}0<m.length&&(d=new h(d,p,null,n,l),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==a0&&(p=n.relatedTarget||n.fromElement)&&(Ia(p)||p[wo]))break e;if((h||d)&&(d=l.window===l?l:(d=l.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=c,p=p?Ia(p):null,p!==null&&(g=Xa(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=c),h!==p)){if(m=ex,b="onMouseLeave",v="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(m=nx,b="onPointerLeave",v="onPointerEnter",x="pointer"),g=h==null?d:Ei(h),y=p==null?d:Ei(p),d=new m(b,x+"leave",h,n,l),d.target=g,d.relatedTarget=y,b=null,Ia(l)===c&&(m=new m(v,x+"enter",p,n,l),m.target=y,m.relatedTarget=g,b=m),g=b,h&&p)t:{for(m=h,v=p,x=0,y=m;y;y=ri(y))x++;for(y=0,b=v;b;b=ri(b))y++;for(;0<x-y;)m=ri(m),x--;for(;0<y-x;)v=ri(v),y--;for(;x--;){if(m===v||v!==null&&m===v.alternate)break t;m=ri(m),v=ri(v)}m=null}else m=null;h!==null&&hx(f,d,h,m,!1),p!==null&&g!==null&&hx(f,g,p,m,!0)}}e:{if(d=c?Ei(c):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var w=ID;else if(ax(d))if(Yb)w=ND;else{w=TD;var C=BD}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=PD);if(w&&(w=w(e,c))){Xb(f,w,n,l);break e}C&&C(e,d,c),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&e0(d,"number",d.value)}switch(C=c?Ei(c):window,e){case"focusin":(ax(C)||C.contentEditable==="true")&&(wi=C,d0=c,Zs=null);break;case"focusout":Zs=d0=wi=null;break;case"mousedown":h0=!0;break;case"contextmenu":case"mouseup":case"dragend":h0=!1,lx(f,n,l);break;case"selectionchange":if(LD)break;case"keydown":case"keyup":lx(f,n,l)}var E;if(Lv)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else bi?qb(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(Gb&&n.locale!=="ko"&&(bi||S!=="onCompositionStart"?S==="onCompositionEnd"&&bi&&(E=jb()):(Go=l,Nv="value"in Go?Go.value:Go.textContent,bi=!0)),C=$l(c,S),0<C.length&&(S=new tx(S,e,null,n,l),f.push({event:S,listeners:C}),E?S.data=E:(E=Kb(n),E!==null&&(S.data=E)))),(E=kD?AD(e,n):DD(e,n))&&(c=$l(c,"onBeforeInput"),0<c.length&&(l=new tx("onBeforeInput","beforeinput",null,n,l),f.push({event:l,listeners:c}),l.data=E))}iw(f,t)})}function mu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $l(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=cu(e,n),a!=null&&r.unshift(mu(e,a,o)),a=cu(e,t),a!=null&&r.push(mu(e,a,o))),e=e.return}return r}function ri(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function hx(e,t,n,r,o){for(var a=t._reactName,i=[];n!==null&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(u!==null&&u===r)break;s.tag===5&&c!==null&&(s=c,o?(u=cu(n,a),u!=null&&i.unshift(mu(n,u,s))):o||(u=cu(n,a),u!=null&&i.push(mu(n,u,s)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var UD=/\r\n?/g,HD=/\u0000|\uFFFD/g;function px(e){return(typeof e=="string"?e:""+e).replace(UD,`
`).replace(HD,"")}function Lc(e,t,n){if(t=px(t),px(e)!==t&&n)throw Error(oe(425))}function Ul(){}var p0=null,v0=null;function m0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var g0=typeof setTimeout=="function"?setTimeout:void 0,VD=typeof clearTimeout=="function"?clearTimeout:void 0,vx=typeof Promise=="function"?Promise:void 0,jD=typeof queueMicrotask=="function"?queueMicrotask:typeof vx<"u"?function(e){return vx.resolve(null).then(e).catch(GD)}:g0;function GD(e){setTimeout(function(){throw e})}function Ah(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),du(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);du(t)}function ea(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function mx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var is=Math.random().toString(36).slice(2),jr="__reactFiber$"+is,gu="__reactProps$"+is,wo="__reactContainer$"+is,x0="__reactEvents$"+is,qD="__reactListeners$"+is,KD="__reactHandles$"+is;function Ia(e){var t=e[jr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wo]||n[jr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mx(e);e!==null;){if(n=e[jr])return n;e=mx(e)}return t}e=n,n=e.parentNode}return null}function Yu(e){return e=e[jr]||e[wo],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ei(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(oe(33))}function Ff(e){return e[gu]||null}var y0=[],_i=-1;function ha(e){return{current:e}}function it(e){0>_i||(e.current=y0[_i],y0[_i]=null,_i--)}function nt(e,t){_i++,y0[_i]=e.current,e.current=t}var ua={},hn=ha(ua),Bn=ha(!1),za=ua;function ji(e,t){var n=e.type.contextTypes;if(!n)return ua;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Tn(e){return e=e.childContextTypes,e!=null}function Hl(){it(Bn),it(hn)}function gx(e,t,n){if(hn.current!==ua)throw Error(oe(168));nt(hn,t),nt(Bn,n)}function uw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(oe(108,BA(e)||"Unknown",o));return vt({},n,r)}function Vl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ua,za=hn.current,nt(hn,e),nt(Bn,Bn.current),!0}function xx(e,t,n){var r=e.stateNode;if(!r)throw Error(oe(169));n?(e=uw(e,t,za),r.__reactInternalMemoizedMergedChildContext=e,it(Bn),it(hn),nt(hn,e)):it(Bn),nt(Bn,n)}var co=null,If=!1,Dh=!1;function cw(e){co===null?co=[e]:co.push(e)}function XD(e){If=!0,cw(e)}function pa(){if(!Dh&&co!==null){Dh=!0;var e=0,t=Ye;try{var n=co;for(Ye=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}co=null,If=!1}catch(o){throw co!==null&&(co=co.slice(e+1)),Pb(Iv,pa),o}finally{Ye=t,Dh=!1}}return null}var Si=[],ki=0,jl=null,Gl=0,or=[],ar=0,$a=null,ho=1,po="";function Aa(e,t){Si[ki++]=Gl,Si[ki++]=jl,jl=e,Gl=t}function lw(e,t,n){or[ar++]=ho,or[ar++]=po,or[ar++]=$a,$a=e;var r=ho;e=po;var o=32-Sr(r)-1;r&=~(1<<o),n+=1;var a=32-Sr(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,ho=1<<32-Sr(t)+o|n<<o|r,po=a+e}else ho=1<<a|n<<o|r,po=e}function zv(e){e.return!==null&&(Aa(e,1),lw(e,1,0))}function $v(e){for(;e===jl;)jl=Si[--ki],Si[ki]=null,Gl=Si[--ki],Si[ki]=null;for(;e===$a;)$a=or[--ar],or[ar]=null,po=or[--ar],or[ar]=null,ho=or[--ar],or[ar]=null}var Xn=null,Vn=null,ct=!1,Cr=null;function fw(e,t){var n=ur(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function yx(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Xn=e,Vn=ea(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Xn=e,Vn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=$a!==null?{id:ho,overflow:po}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ur(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Xn=e,Vn=null,!0):!1;default:return!1}}function b0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function w0(e){if(ct){var t=Vn;if(t){var n=t;if(!yx(e,t)){if(b0(e))throw Error(oe(418));t=ea(n.nextSibling);var r=Xn;t&&yx(e,t)?fw(r,n):(e.flags=e.flags&-4097|2,ct=!1,Xn=e)}}else{if(b0(e))throw Error(oe(418));e.flags=e.flags&-4097|2,ct=!1,Xn=e}}}function bx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Xn=e}function Wc(e){if(e!==Xn)return!1;if(!ct)return bx(e),ct=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!m0(e.type,e.memoizedProps)),t&&(t=Vn)){if(b0(e))throw dw(),Error(oe(418));for(;t;)fw(e,t),t=ea(t.nextSibling)}if(bx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(oe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vn=ea(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vn=null}}else Vn=Xn?ea(e.stateNode.nextSibling):null;return!0}function dw(){for(var e=Vn;e;)e=ea(e.nextSibling)}function Gi(){Vn=Xn=null,ct=!1}function Uv(e){Cr===null?Cr=[e]:Cr.push(e)}var YD=Do.ReactCurrentBatchConfig;function Rs(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var s=o.refs;i===null?delete s[a]:s[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,e))}return e}function zc(e,t){throw e=Object.prototype.toString.call(t),Error(oe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wx(e){var t=e._init;return t(e._payload)}function hw(e){function t(v,x){if(e){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function n(v,x){if(!e)return null;for(;x!==null;)t(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function o(v,x){return v=oa(v,x),v.index=0,v.sibling=null,v}function a(v,x,y){return v.index=y,e?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function i(v){return e&&v.alternate===null&&(v.flags|=2),v}function s(v,x,y,b){return x===null||x.tag!==6?(x=Nh(y,v.mode,b),x.return=v,x):(x=o(x,y),x.return=v,x)}function u(v,x,y,b){var w=y.type;return w===yi?l(v,x,y.props.children,b,y.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$o&&wx(w)===x.type)?(b=o(x,y.props),b.ref=Rs(v,x,y),b.return=v,b):(b=gl(y.type,y.key,y.props,null,v.mode,b),b.ref=Rs(v,x,y),b.return=v,b)}function c(v,x,y,b){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Oh(y,v.mode,b),x.return=v,x):(x=o(x,y.children||[]),x.return=v,x)}function l(v,x,y,b,w){return x===null||x.tag!==7?(x=Ma(y,v.mode,b,w),x.return=v,x):(x=o(x,y),x.return=v,x)}function f(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Nh(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rc:return y=gl(x.type,x.key,x.props,null,v.mode,y),y.ref=Rs(v,null,x),y.return=v,y;case xi:return x=Oh(x,v.mode,y),x.return=v,x;case $o:var b=x._init;return f(v,b(x._payload),y)}if(zs(x)||_s(x))return x=Ma(x,v.mode,y,null),x.return=v,x;zc(v,x)}return null}function d(v,x,y,b){var w=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:s(v,x,""+y,b);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rc:return y.key===w?u(v,x,y,b):null;case xi:return y.key===w?c(v,x,y,b):null;case $o:return w=y._init,d(v,x,w(y._payload),b)}if(zs(y)||_s(y))return w!==null?null:l(v,x,y,b,null);zc(v,y)}return null}function h(v,x,y,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return v=v.get(y)||null,s(x,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rc:return v=v.get(b.key===null?y:b.key)||null,u(x,v,b,w);case xi:return v=v.get(b.key===null?y:b.key)||null,c(x,v,b,w);case $o:var C=b._init;return h(v,x,y,C(b._payload),w)}if(zs(b)||_s(b))return v=v.get(y)||null,l(x,v,b,w,null);zc(x,b)}return null}function p(v,x,y,b){for(var w=null,C=null,E=x,S=x=0,k=null;E!==null&&S<y.length;S++){E.index>S?(k=E,E=null):k=E.sibling;var _=d(v,E,y[S],b);if(_===null){E===null&&(E=k);break}e&&E&&_.alternate===null&&t(v,E),x=a(_,x,S),C===null?w=_:C.sibling=_,C=_,E=k}if(S===y.length)return n(v,E),ct&&Aa(v,S),w;if(E===null){for(;S<y.length;S++)E=f(v,y[S],b),E!==null&&(x=a(E,x,S),C===null?w=E:C.sibling=E,C=E);return ct&&Aa(v,S),w}for(E=r(v,E);S<y.length;S++)k=h(E,v,S,y[S],b),k!==null&&(e&&k.alternate!==null&&E.delete(k.key===null?S:k.key),x=a(k,x,S),C===null?w=k:C.sibling=k,C=k);return e&&E.forEach(function(A){return t(v,A)}),ct&&Aa(v,S),w}function m(v,x,y,b){var w=_s(y);if(typeof w!="function")throw Error(oe(150));if(y=w.call(y),y==null)throw Error(oe(151));for(var C=w=null,E=x,S=x=0,k=null,_=y.next();E!==null&&!_.done;S++,_=y.next()){E.index>S?(k=E,E=null):k=E.sibling;var A=d(v,E,_.value,b);if(A===null){E===null&&(E=k);break}e&&E&&A.alternate===null&&t(v,E),x=a(A,x,S),C===null?w=A:C.sibling=A,C=A,E=k}if(_.done)return n(v,E),ct&&Aa(v,S),w;if(E===null){for(;!_.done;S++,_=y.next())_=f(v,_.value,b),_!==null&&(x=a(_,x,S),C===null?w=_:C.sibling=_,C=_);return ct&&Aa(v,S),w}for(E=r(v,E);!_.done;S++,_=y.next())_=h(E,v,S,_.value,b),_!==null&&(e&&_.alternate!==null&&E.delete(_.key===null?S:_.key),x=a(_,x,S),C===null?w=_:C.sibling=_,C=_);return e&&E.forEach(function(D){return t(v,D)}),ct&&Aa(v,S),w}function g(v,x,y,b){if(typeof y=="object"&&y!==null&&y.type===yi&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Rc:e:{for(var w=y.key,C=x;C!==null;){if(C.key===w){if(w=y.type,w===yi){if(C.tag===7){n(v,C.sibling),x=o(C,y.props.children),x.return=v,v=x;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$o&&wx(w)===C.type){n(v,C.sibling),x=o(C,y.props),x.ref=Rs(v,C,y),x.return=v,v=x;break e}n(v,C);break}else t(v,C);C=C.sibling}y.type===yi?(x=Ma(y.props.children,v.mode,b,y.key),x.return=v,v=x):(b=gl(y.type,y.key,y.props,null,v.mode,b),b.ref=Rs(v,x,y),b.return=v,v=b)}return i(v);case xi:e:{for(C=y.key;x!==null;){if(x.key===C)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(v,x.sibling),x=o(x,y.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else t(v,x);x=x.sibling}x=Oh(y,v.mode,b),x.return=v,v=x}return i(v);case $o:return C=y._init,g(v,x,C(y._payload),b)}if(zs(y))return p(v,x,y,b);if(_s(y))return m(v,x,y,b);zc(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(v,x.sibling),x=o(x,y),x.return=v,v=x):(n(v,x),x=Nh(y,v.mode,b),x.return=v,v=x),i(v)):n(v,x)}return g}var qi=hw(!0),pw=hw(!1),ql=ha(null),Kl=null,Ai=null,Hv=null;function Vv(){Hv=Ai=Kl=null}function jv(e){var t=ql.current;it(ql),e._currentValue=t}function C0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){Kl=e,Hv=Ai=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(In=!0),e.firstContext=null)}function fr(e){var t=e._currentValue;if(Hv!==e)if(e={context:e,memoizedValue:t,next:null},Ai===null){if(Kl===null)throw Error(oe(308));Ai=e,Kl.dependencies={lanes:0,firstContext:e}}else Ai=Ai.next=e;return t}var Ba=null;function Gv(e){Ba===null?Ba=[e]:Ba.push(e)}function vw(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,Gv(t)):(n.next=o.next,o.next=n),t.interleaved=n,Co(e,r)}function Co(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Uo=!1;function qv(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ta(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Co(e,n)}return o=r.interleaved,o===null?(t.next=t,Gv(r)):(t.next=o.next,o.next=t),r.interleaved=t,Co(e,n)}function fl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bv(e,n)}}function Cx(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Xl(e,t,n,r){var o=e.updateQueue;Uo=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var u=s,c=u.next;u.next=null,i===null?a=c:i.next=c,i=u;var l=e.alternate;l!==null&&(l=l.updateQueue,s=l.lastBaseUpdate,s!==i&&(s===null?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(a!==null){var f=o.baseState;i=0,l=c=u=null,s=a;do{var d=s.lane,h=s.eventTime;if((r&d)===d){l!==null&&(l=l.next={eventTime:h,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=vt({},f,d);break e;case 2:Uo=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=o.effects,d===null?o.effects=[s]:d.push(s))}else h={eventTime:h,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},l===null?(c=l=h,u=f):l=l.next=h,i|=d;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;d=s,s=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);if(l===null&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=l,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);Ha|=i,e.lanes=i,e.memoizedState=f}}function Ex(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(oe(191,o));o.call(r)}}}var Qu={},Xr=ha(Qu),xu=ha(Qu),yu=ha(Qu);function Ta(e){if(e===Qu)throw Error(oe(174));return e}function Kv(e,t){switch(nt(yu,t),nt(xu,e),nt(Xr,Qu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:n0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=n0(t,e)}it(Xr),nt(Xr,t)}function Ki(){it(Xr),it(xu),it(yu)}function gw(e){Ta(yu.current);var t=Ta(Xr.current),n=n0(t,e.type);t!==n&&(nt(xu,e),nt(Xr,n))}function Xv(e){xu.current===e&&(it(Xr),it(xu))}var dt=ha(0);function Yl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rh=[];function Yv(){for(var e=0;e<Rh.length;e++)Rh[e]._workInProgressVersionPrimary=null;Rh.length=0}var dl=Do.ReactCurrentDispatcher,Fh=Do.ReactCurrentBatchConfig,Ua=0,ht=null,zt=null,Vt=null,Ql=!1,Js=!1,bu=0,QD=0;function sn(){throw Error(oe(321))}function Qv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Fr(e[n],t[n]))return!1;return!0}function Zv(e,t,n,r,o,a){if(Ua=a,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dl.current=e===null||e.memoizedState===null?tR:nR,e=n(r,o),Js){a=0;do{if(Js=!1,bu=0,25<=a)throw Error(oe(301));a+=1,Vt=zt=null,t.updateQueue=null,dl.current=rR,e=n(r,o)}while(Js)}if(dl.current=Zl,t=zt!==null&&zt.next!==null,Ua=0,Vt=zt=ht=null,Ql=!1,t)throw Error(oe(300));return e}function Jv(){var e=bu!==0;return bu=0,e}function $r(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?ht.memoizedState=Vt=e:Vt=Vt.next=e,Vt}function dr(){if(zt===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=zt.next;var t=Vt===null?ht.memoizedState:Vt.next;if(t!==null)Vt=t,zt=e;else{if(e===null)throw Error(oe(310));zt=e,e={memoizedState:zt.memoizedState,baseState:zt.baseState,baseQueue:zt.baseQueue,queue:zt.queue,next:null},Vt===null?ht.memoizedState=Vt=e:Vt=Vt.next=e}return Vt}function wu(e,t){return typeof t=="function"?t(e):t}function Ih(e){var t=dr(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var r=zt,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}r.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,r=r.baseState;var s=i=null,u=null,c=a;do{var l=c.lane;if((Ua&l)===l)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:l,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(s=u=f,i=r):u=u.next=f,ht.lanes|=l,Ha|=l}c=c.next}while(c!==null&&c!==a);u===null?i=r:u.next=s,Fr(r,t.memoizedState)||(In=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do a=o.lane,ht.lanes|=a,Ha|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Bh(e){var t=dr(),n=t.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);Fr(a,t.memoizedState)||(In=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function xw(){}function yw(e,t){var n=ht,r=dr(),o=t(),a=!Fr(r.memoizedState,o);if(a&&(r.memoizedState=o,In=!0),r=r.queue,em(Cw.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||Vt!==null&&Vt.memoizedState.tag&1){if(n.flags|=2048,Cu(9,ww.bind(null,n,r,o,t),void 0,null),qt===null)throw Error(oe(349));Ua&30||bw(n,t,o)}return o}function bw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ww(e,t,n,r){t.value=n,t.getSnapshot=r,Ew(t)&&_w(e)}function Cw(e,t,n){return n(function(){Ew(t)&&_w(e)})}function Ew(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Fr(e,n)}catch{return!0}}function _w(e){var t=Co(e,1);t!==null&&kr(t,e,1,-1)}function _x(e){var t=$r();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wu,lastRenderedState:e},t.queue=e,e=e.dispatch=eR.bind(null,ht,e),[t.memoizedState,e]}function Cu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Sw(){return dr().memoizedState}function hl(e,t,n,r){var o=$r();ht.flags|=e,o.memoizedState=Cu(1|t,n,void 0,r===void 0?null:r)}function Bf(e,t,n,r){var o=dr();r=r===void 0?null:r;var a=void 0;if(zt!==null){var i=zt.memoizedState;if(a=i.destroy,r!==null&&Qv(r,i.deps)){o.memoizedState=Cu(t,n,a,r);return}}ht.flags|=e,o.memoizedState=Cu(1|t,n,a,r)}function Sx(e,t){return hl(8390656,8,e,t)}function em(e,t){return Bf(2048,8,e,t)}function kw(e,t){return Bf(4,2,e,t)}function Aw(e,t){return Bf(4,4,e,t)}function Dw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Rw(e,t,n){return n=n!=null?n.concat([e]):null,Bf(4,4,Dw.bind(null,t,e),n)}function tm(){}function Fw(e,t){var n=dr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qv(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Iw(e,t){var n=dr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Qv(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Bw(e,t,n){return Ua&21?(Fr(n,t)||(n=Mb(),ht.lanes|=n,Ha|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,In=!0),e.memoizedState=n)}function ZD(e,t){var n=Ye;Ye=n!==0&&4>n?n:4,e(!0);var r=Fh.transition;Fh.transition={};try{e(!1),t()}finally{Ye=n,Fh.transition=r}}function Tw(){return dr().memoizedState}function JD(e,t,n){var r=ra(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Pw(e))Nw(t,n);else if(n=vw(e,t,n,r),n!==null){var o=wn();kr(n,e,r,o),Ow(n,t,r)}}function eR(e,t,n){var r=ra(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pw(e))Nw(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,s=a(i,n);if(o.hasEagerState=!0,o.eagerState=s,Fr(s,i)){var u=t.interleaved;u===null?(o.next=o,Gv(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=vw(e,t,o,r),n!==null&&(o=wn(),kr(n,e,r,o),Ow(n,t,r))}}function Pw(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function Nw(e,t){Js=Ql=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ow(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Bv(e,n)}}var Zl={readContext:fr,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},tR={readContext:fr,useCallback:function(e,t){return $r().memoizedState=[e,t===void 0?null:t],e},useContext:fr,useEffect:Sx,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,hl(4194308,4,Dw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return hl(4194308,4,e,t)},useInsertionEffect:function(e,t){return hl(4,2,e,t)},useMemo:function(e,t){var n=$r();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=$r();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=JD.bind(null,ht,e),[r.memoizedState,e]},useRef:function(e){var t=$r();return e={current:e},t.memoizedState=e},useState:_x,useDebugValue:tm,useDeferredValue:function(e){return $r().memoizedState=e},useTransition:function(){var e=_x(!1),t=e[0];return e=ZD.bind(null,e[1]),$r().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ht,o=$r();if(ct){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=t(),qt===null)throw Error(oe(349));Ua&30||bw(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Sx(Cw.bind(null,r,a,e),[e]),r.flags|=2048,Cu(9,ww.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=$r(),t=qt.identifierPrefix;if(ct){var n=po,r=ho;n=(r&~(1<<32-Sr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=bu++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=QD++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nR={readContext:fr,useCallback:Fw,useContext:fr,useEffect:em,useImperativeHandle:Rw,useInsertionEffect:kw,useLayoutEffect:Aw,useMemo:Iw,useReducer:Ih,useRef:Sw,useState:function(){return Ih(wu)},useDebugValue:tm,useDeferredValue:function(e){var t=dr();return Bw(t,zt.memoizedState,e)},useTransition:function(){var e=Ih(wu)[0],t=dr().memoizedState;return[e,t]},useMutableSource:xw,useSyncExternalStore:yw,useId:Tw,unstable_isNewReconciler:!1},rR={readContext:fr,useCallback:Fw,useContext:fr,useEffect:em,useImperativeHandle:Rw,useInsertionEffect:kw,useLayoutEffect:Aw,useMemo:Iw,useReducer:Bh,useRef:Sw,useState:function(){return Bh(wu)},useDebugValue:tm,useDeferredValue:function(e){var t=dr();return zt===null?t.memoizedState=e:Bw(t,zt.memoizedState,e)},useTransition:function(){var e=Bh(wu)[0],t=dr().memoizedState;return[e,t]},useMutableSource:xw,useSyncExternalStore:yw,useId:Tw,unstable_isNewReconciler:!1};function br(e,t){if(e&&e.defaultProps){t=vt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function E0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:vt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Tf={isMounted:function(e){return(e=e._reactInternals)?Xa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wn(),o=ra(e),a=mo(r,o);a.payload=t,n!=null&&(a.callback=n),t=ta(e,a,o),t!==null&&(kr(t,e,o,r),fl(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wn(),o=ra(e),a=mo(r,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=ta(e,a,o),t!==null&&(kr(t,e,o,r),fl(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wn(),r=ra(e),o=mo(n,r);o.tag=2,t!=null&&(o.callback=t),t=ta(e,o,r),t!==null&&(kr(t,e,r,n),fl(t,e,r))}};function kx(e,t,n,r,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!pu(n,r)||!pu(o,a):!0}function Mw(e,t,n){var r=!1,o=ua,a=t.contextType;return typeof a=="object"&&a!==null?a=fr(a):(o=Tn(t)?za:hn.current,r=t.contextTypes,a=(r=r!=null)?ji(e,o):ua),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Tf,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ax(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Tf.enqueueReplaceState(t,t.state,null)}function _0(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},qv(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=fr(a):(a=Tn(t)?za:hn.current,o.context=ji(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(E0(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Tf.enqueueReplaceState(o,o.state,null),Xl(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Xi(e,t){try{var n="",r=t;do n+=IA(r),r=r.return;while(r);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function Th(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function S0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var oR=typeof WeakMap=="function"?WeakMap:Map;function Lw(e,t,n){n=mo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ef||(ef=!0,N0=r),S0(e,t)},n}function Ww(e,t,n){n=mo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){S0(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){S0(e,t),typeof r!="function"&&(na===null?na=new Set([this]):na.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Dx(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new oR;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=xR.bind(null,e,t,n),t.then(e,e))}function Rx(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Fx(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mo(-1,1),t.tag=2,ta(n,t,1))),n.lanes|=1),e)}var aR=Do.ReactCurrentOwner,In=!1;function yn(e,t,n,r){t.child=e===null?pw(t,null,n,r):qi(t,e.child,n,r)}function Ix(e,t,n,r,o){n=n.render;var a=t.ref;return Pi(t,o),r=Zv(e,t,n,r,a,o),n=Jv(),e!==null&&!In?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Eo(e,t,o)):(ct&&n&&zv(t),t.flags|=1,yn(e,t,r,o),t.child)}function Bx(e,t,n,r,o){if(e===null){var a=n.type;return typeof a=="function"&&!cm(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,zw(e,t,a,r,o)):(e=gl(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:pu,n(i,r)&&e.ref===t.ref)return Eo(e,t,o)}return t.flags|=1,e=oa(a,r),e.ref=t.ref,e.return=t,t.child=e}function zw(e,t,n,r,o){if(e!==null){var a=e.memoizedProps;if(pu(a,r)&&e.ref===t.ref)if(In=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(In=!0);else return t.lanes=e.lanes,Eo(e,t,o)}return k0(e,t,n,r,o)}function $w(e,t,n){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Ri,Wn),Wn|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nt(Ri,Wn),Wn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,nt(Ri,Wn),Wn|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,nt(Ri,Wn),Wn|=r;return yn(e,t,o,n),t.child}function Uw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function k0(e,t,n,r,o){var a=Tn(n)?za:hn.current;return a=ji(t,a),Pi(t,o),n=Zv(e,t,n,r,a,o),r=Jv(),e!==null&&!In?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Eo(e,t,o)):(ct&&r&&zv(t),t.flags|=1,yn(e,t,n,o),t.child)}function Tx(e,t,n,r,o){if(Tn(n)){var a=!0;Vl(t)}else a=!1;if(Pi(t,o),t.stateNode===null)pl(e,t),Mw(t,n,r),_0(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,s=t.memoizedProps;i.props=s;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=fr(c):(c=Tn(n)?za:hn.current,c=ji(t,c));var l=n.getDerivedStateFromProps,f=typeof l=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==r||u!==c)&&Ax(t,i,r,c),Uo=!1;var d=t.memoizedState;i.state=d,Xl(t,r,i,o),u=t.memoizedState,s!==r||d!==u||Bn.current||Uo?(typeof l=="function"&&(E0(t,n,l,r),u=t.memoizedState),(s=Uo||kx(t,n,s,r,d,u,c))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=s):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,mw(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:br(t.type,s),i.props=c,f=t.pendingProps,d=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=fr(u):(u=Tn(n)?za:hn.current,u=ji(t,u));var h=n.getDerivedStateFromProps;(l=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(s!==f||d!==u)&&Ax(t,i,r,u),Uo=!1,d=t.memoizedState,i.state=d,Xl(t,r,i,o);var p=t.memoizedState;s!==f||d!==p||Bn.current||Uo?(typeof h=="function"&&(E0(t,n,h,r),p=t.memoizedState),(c=Uo||kx(t,n,c,r,d,p,u)||!1)?(l||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,p,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,p,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return A0(e,t,n,r,a,o)}function A0(e,t,n,r,o,a){Uw(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&xx(t,n,!1),Eo(e,t,a);r=t.stateNode,aR.current=t;var s=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=qi(t,e.child,null,a),t.child=qi(t,null,s,a)):yn(e,t,s,a),t.memoizedState=r.state,o&&xx(t,n,!0),t.child}function Hw(e){var t=e.stateNode;t.pendingContext?gx(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gx(e,t.context,!1),Kv(e,t.containerInfo)}function Px(e,t,n,r,o){return Gi(),Uv(o),t.flags|=256,yn(e,t,n,r),t.child}var D0={dehydrated:null,treeContext:null,retryLane:0};function R0(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vw(e,t,n){var r=t.pendingProps,o=dt.current,a=!1,i=(t.flags&128)!==0,s;if((s=i)||(s=e!==null&&e.memoizedState===null?!1:(o&2)!==0),s?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),nt(dt,o&1),e===null)return w0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Of(i,r,0,null),e=Ma(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=R0(n),t.memoizedState=D0,e):nm(t,i));if(o=e.memoizedState,o!==null&&(s=o.dehydrated,s!==null))return iR(e,t,i,r,s,o,n);if(a){a=r.fallback,i=t.mode,o=e.child,s=o.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=oa(o,u),r.subtreeFlags=o.subtreeFlags&14680064),s!==null?a=oa(s,a):(a=Ma(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?R0(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=D0,r}return a=e.child,e=a.sibling,r=oa(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function nm(e,t){return t=Of({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function $c(e,t,n,r){return r!==null&&Uv(r),qi(t,e.child,null,n),e=nm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iR(e,t,n,r,o,a,i){if(n)return t.flags&256?(t.flags&=-257,r=Th(Error(oe(422))),$c(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Of({mode:"visible",children:r.children},o,0,null),a=Ma(a,o,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&qi(t,e.child,null,i),t.child.memoizedState=R0(i),t.memoizedState=D0,a);if(!(t.mode&1))return $c(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var s=r.dgst;return r=s,a=Error(oe(419)),r=Th(a,r,void 0),$c(e,t,i,r)}if(s=(i&e.childLanes)!==0,In||s){if(r=qt,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,Co(e,o),kr(r,e,o,-1))}return um(),r=Th(Error(oe(421))),$c(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=yR.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,Vn=ea(o.nextSibling),Xn=t,ct=!0,Cr=null,e!==null&&(or[ar++]=ho,or[ar++]=po,or[ar++]=$a,ho=e.id,po=e.overflow,$a=t),t=nm(t,r.children),t.flags|=4096,t)}function Nx(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),C0(e.return,t,n)}function Ph(e,t,n,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function jw(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(yn(e,t,r.children,n),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nx(e,n,t);else if(e.tag===19)Nx(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(nt(dt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Yl(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Ph(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Yl(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Ph(t,!0,n,null,a);break;case"together":Ph(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Eo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ha|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(oe(153));if(t.child!==null){for(e=t.child,n=oa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=oa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sR(e,t,n){switch(t.tag){case 3:Hw(t),Gi();break;case 5:gw(t);break;case 1:Tn(t.type)&&Vl(t);break;case 4:Kv(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;nt(ql,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(nt(dt,dt.current&1),t.flags|=128,null):n&t.child.childLanes?Vw(e,t,n):(nt(dt,dt.current&1),e=Eo(e,t,n),e!==null?e.sibling:null);nt(dt,dt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return jw(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),nt(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,$w(e,t,n)}return Eo(e,t,n)}var Gw,F0,qw,Kw;Gw=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};F0=function(){};qw=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Ta(Xr.current);var a=null;switch(n){case"input":o=Zp(e,o),r=Zp(e,r),a=[];break;case"select":o=vt({},o,{value:void 0}),r=vt({},r,{value:void 0}),a=[];break;case"textarea":o=t0(e,o),r=t0(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ul)}r0(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var s=o[c];for(i in s)s.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(su.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(s=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==s&&(u!=null||s!=null))if(c==="style")if(s){for(i in s)!s.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&s[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(a||(a=[]),a.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,s=s?s.__html:void 0,u!=null&&s!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(su.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&at("scroll",e),a||s===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}};Kw=function(e,t,n,r){n!==r&&(t.flags|=4)};function Fs(e,t){if(!ct)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function un(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function uR(e,t,n){var r=t.pendingProps;switch($v(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(t),null;case 1:return Tn(t.type)&&Hl(),un(t),null;case 3:return r=t.stateNode,Ki(),it(Bn),it(hn),Yv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Wc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Cr!==null&&(L0(Cr),Cr=null))),F0(e,t),un(t),null;case 5:Xv(t);var o=Ta(yu.current);if(n=t.type,e!==null&&t.stateNode!=null)qw(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(oe(166));return un(t),null}if(e=Ta(Xr.current),Wc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[jr]=t,r[gu]=a,e=(t.mode&1)!==0,n){case"dialog":at("cancel",r),at("close",r);break;case"iframe":case"object":case"embed":at("load",r);break;case"video":case"audio":for(o=0;o<Us.length;o++)at(Us[o],r);break;case"source":at("error",r);break;case"img":case"image":case"link":at("error",r),at("load",r);break;case"details":at("toggle",r);break;case"input":V1(r,a),at("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},at("invalid",r);break;case"textarea":G1(r,a),at("invalid",r)}r0(n,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var s=a[i];i==="children"?typeof s=="string"?r.textContent!==s&&(a.suppressHydrationWarning!==!0&&Lc(r.textContent,s,e),o=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(a.suppressHydrationWarning!==!0&&Lc(r.textContent,s,e),o=["children",""+s]):su.hasOwnProperty(i)&&s!=null&&i==="onScroll"&&at("scroll",r)}switch(n){case"input":Fc(r),j1(r,a,!0);break;case"textarea":Fc(r),q1(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ul)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Cb(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[jr]=t,e[gu]=r,Gw(e,t,!1,!1),t.stateNode=e;e:{switch(i=o0(n,r),n){case"dialog":at("cancel",e),at("close",e),o=r;break;case"iframe":case"object":case"embed":at("load",e),o=r;break;case"video":case"audio":for(o=0;o<Us.length;o++)at(Us[o],e);o=r;break;case"source":at("error",e),o=r;break;case"img":case"image":case"link":at("error",e),at("load",e),o=r;break;case"details":at("toggle",e),o=r;break;case"input":V1(e,r),o=Zp(e,r),at("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=vt({},r,{value:void 0}),at("invalid",e);break;case"textarea":G1(e,r),o=t0(e,r),at("invalid",e);break;default:o=r}r0(n,o),s=o;for(a in s)if(s.hasOwnProperty(a)){var u=s[a];a==="style"?Sb(e,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Eb(e,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&uu(e,u):typeof u=="number"&&uu(e,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(su.hasOwnProperty(a)?u!=null&&a==="onScroll"&&at("scroll",e):u!=null&&kv(e,a,u,i))}switch(n){case"input":Fc(e),j1(e,r,!1);break;case"textarea":Fc(e),q1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+sa(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Fi(e,!!r.multiple,a,!1):r.defaultValue!=null&&Fi(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ul)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return un(t),null;case 6:if(e&&t.stateNode!=null)Kw(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(oe(166));if(n=Ta(yu.current),Ta(Xr.current),Wc(t)){if(r=t.stateNode,n=t.memoizedProps,r[jr]=t,(a=r.nodeValue!==n)&&(e=Xn,e!==null))switch(e.tag){case 3:Lc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Lc(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[jr]=t,t.stateNode=r}return un(t),null;case 13:if(it(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ct&&Vn!==null&&t.mode&1&&!(t.flags&128))dw(),Gi(),t.flags|=98560,a=!1;else if(a=Wc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(oe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(oe(317));a[jr]=t}else Gi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;un(t),a=!1}else Cr!==null&&(L0(Cr),Cr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?$t===0&&($t=3):um())),t.updateQueue!==null&&(t.flags|=4),un(t),null);case 4:return Ki(),F0(e,t),e===null&&vu(t.stateNode.containerInfo),un(t),null;case 10:return jv(t.type._context),un(t),null;case 17:return Tn(t.type)&&Hl(),un(t),null;case 19:if(it(dt),a=t.memoizedState,a===null)return un(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)Fs(a,!1);else{if($t!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Yl(e),i!==null){for(t.flags|=128,Fs(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return nt(dt,dt.current&1|2),t.child}e=e.sibling}a.tail!==null&&St()>Yi&&(t.flags|=128,r=!0,Fs(a,!1),t.lanes=4194304)}else{if(!r)if(e=Yl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Fs(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!ct)return un(t),null}else 2*St()-a.renderingStartTime>Yi&&n!==1073741824&&(t.flags|=128,r=!0,Fs(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=St(),t.sibling=null,n=dt.current,nt(dt,r?n&1|2:n&1),t):(un(t),null);case 22:case 23:return sm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Wn&1073741824&&(un(t),t.subtreeFlags&6&&(t.flags|=8192)):un(t),null;case 24:return null;case 25:return null}throw Error(oe(156,t.tag))}function cR(e,t){switch($v(t),t.tag){case 1:return Tn(t.type)&&Hl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ki(),it(Bn),it(hn),Yv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xv(t),null;case 13:if(it(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(oe(340));Gi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return it(dt),null;case 4:return Ki(),null;case 10:return jv(t.type._context),null;case 22:case 23:return sm(),null;case 24:return null;default:return null}}var Uc=!1,ln=!1,lR=typeof WeakSet=="function"?WeakSet:Set,he=null;function Di(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){yt(e,t,r)}else n.current=null}function I0(e,t,n){try{n()}catch(r){yt(e,t,r)}}var Ox=!1;function fR(e,t){if(p0=Wl,e=Jb(),Wv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,s=-1,u=-1,c=0,l=0,f=e,d=null;t:for(;;){for(var h;f!==n||o!==0&&f.nodeType!==3||(s=i+o),f!==a||r!==0&&f.nodeType!==3||(u=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++c===o&&(s=i),d===a&&++l===r&&(u=i),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=s===-1||u===-1?null:{start:s,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(v0={focusedElem:e,selectionRange:n},Wl=!1,he=t;he!==null;)if(t=he,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,he=e;else for(;he!==null;){t=he;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,v=t.stateNode,x=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:br(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(b){yt(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,he=e;break}he=t.return}return p=Ox,Ox=!1,p}function eu(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&I0(t,n,a)}o=o.next}while(o!==r)}}function Pf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function B0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Xw(e){var t=e.alternate;t!==null&&(e.alternate=null,Xw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[jr],delete t[gu],delete t[x0],delete t[qD],delete t[KD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Yw(e){return e.tag===5||e.tag===3||e.tag===4}function Mx(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function T0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ul));else if(r!==4&&(e=e.child,e!==null))for(T0(e,t,n),e=e.sibling;e!==null;)T0(e,t,n),e=e.sibling}function P0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(P0(e,t,n),e=e.sibling;e!==null;)P0(e,t,n),e=e.sibling}var Qt=null,wr=!1;function Mo(e,t,n){for(n=n.child;n!==null;)Qw(e,t,n),n=n.sibling}function Qw(e,t,n){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(kf,n)}catch{}switch(n.tag){case 5:ln||Di(n,t);case 6:var r=Qt,o=wr;Qt=null,Mo(e,t,n),Qt=r,wr=o,Qt!==null&&(wr?(e=Qt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Qt.removeChild(n.stateNode));break;case 18:Qt!==null&&(wr?(e=Qt,n=n.stateNode,e.nodeType===8?Ah(e.parentNode,n):e.nodeType===1&&Ah(e,n),du(e)):Ah(Qt,n.stateNode));break;case 4:r=Qt,o=wr,Qt=n.stateNode.containerInfo,wr=!0,Mo(e,t,n),Qt=r,wr=o;break;case 0:case 11:case 14:case 15:if(!ln&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&I0(n,t,i),o=o.next}while(o!==r)}Mo(e,t,n);break;case 1:if(!ln&&(Di(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){yt(n,t,s)}Mo(e,t,n);break;case 21:Mo(e,t,n);break;case 22:n.mode&1?(ln=(r=ln)||n.memoizedState!==null,Mo(e,t,n),ln=r):Mo(e,t,n);break;default:Mo(e,t,n)}}function Lx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new lR),t.forEach(function(r){var o=bR.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function yr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,i=t,s=i;e:for(;s!==null;){switch(s.tag){case 5:Qt=s.stateNode,wr=!1;break e;case 3:Qt=s.stateNode.containerInfo,wr=!0;break e;case 4:Qt=s.stateNode.containerInfo,wr=!0;break e}s=s.return}if(Qt===null)throw Error(oe(160));Qw(a,i,o),Qt=null,wr=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){yt(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Zw(t,e),t=t.sibling}function Zw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(yr(t,e),Wr(e),r&4){try{eu(3,e,e.return),Pf(3,e)}catch(m){yt(e,e.return,m)}try{eu(5,e,e.return)}catch(m){yt(e,e.return,m)}}break;case 1:yr(t,e),Wr(e),r&512&&n!==null&&Di(n,n.return);break;case 5:if(yr(t,e),Wr(e),r&512&&n!==null&&Di(n,n.return),e.flags&32){var o=e.stateNode;try{uu(o,"")}catch(m){yt(e,e.return,m)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,s=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{s==="input"&&a.type==="radio"&&a.name!=null&&bb(o,a),o0(s,i);var c=o0(s,a);for(i=0;i<u.length;i+=2){var l=u[i],f=u[i+1];l==="style"?Sb(o,f):l==="dangerouslySetInnerHTML"?Eb(o,f):l==="children"?uu(o,f):kv(o,l,f,c)}switch(s){case"input":Jp(o,a);break;case"textarea":wb(o,a);break;case"select":var d=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var h=a.value;h!=null?Fi(o,!!a.multiple,h,!1):d!==!!a.multiple&&(a.defaultValue!=null?Fi(o,!!a.multiple,a.defaultValue,!0):Fi(o,!!a.multiple,a.multiple?[]:"",!1))}o[gu]=a}catch(m){yt(e,e.return,m)}}break;case 6:if(yr(t,e),Wr(e),r&4){if(e.stateNode===null)throw Error(oe(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){yt(e,e.return,m)}}break;case 3:if(yr(t,e),Wr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{du(t.containerInfo)}catch(m){yt(e,e.return,m)}break;case 4:yr(t,e),Wr(e);break;case 13:yr(t,e),Wr(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(am=St())),r&4&&Lx(e);break;case 22:if(l=n!==null&&n.memoizedState!==null,e.mode&1?(ln=(c=ln)||l,yr(t,e),ln=c):yr(t,e),Wr(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!l&&e.mode&1)for(he=e,l=e.child;l!==null;){for(f=he=l;he!==null;){switch(d=he,h=d.child,d.tag){case 0:case 11:case 14:case 15:eu(4,d,d.return);break;case 1:Di(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){yt(r,n,m)}}break;case 5:Di(d,d.return);break;case 22:if(d.memoizedState!==null){zx(f);continue}}h!==null?(h.return=d,he=h):zx(f)}l=l.sibling}e:for(l=null,f=e;;){if(f.tag===5){if(l===null){l=f;try{o=f.stateNode,c?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(s=f.stateNode,u=f.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,s.style.display=_b("display",i))}catch(m){yt(e,e.return,m)}}}else if(f.tag===6){if(l===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(m){yt(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;l===f&&(l=null),f=f.return}l===f&&(l=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yr(t,e),Wr(e),r&4&&Lx(e);break;case 21:break;default:yr(t,e),Wr(e)}}function Wr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Yw(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(uu(o,""),r.flags&=-33);var a=Mx(e);P0(e,a,o);break;case 3:case 4:var i=r.stateNode.containerInfo,s=Mx(e);T0(e,s,i);break;default:throw Error(oe(161))}}catch(u){yt(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function dR(e,t,n){he=e,Jw(e)}function Jw(e,t,n){for(var r=(e.mode&1)!==0;he!==null;){var o=he,a=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Uc;if(!i){var s=o.alternate,u=s!==null&&s.memoizedState!==null||ln;s=Uc;var c=ln;if(Uc=i,(ln=u)&&!c)for(he=o;he!==null;)i=he,u=i.child,i.tag===22&&i.memoizedState!==null?$x(o):u!==null?(u.return=i,he=u):$x(o);for(;a!==null;)he=a,Jw(a),a=a.sibling;he=o,Uc=s,ln=c}Wx(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,he=a):Wx(e)}}function Wx(e){for(;he!==null;){var t=he;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ln||Pf(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ln)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:br(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Ex(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ex(t,i,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var l=c.memoizedState;if(l!==null){var f=l.dehydrated;f!==null&&du(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}ln||t.flags&512&&B0(t)}catch(d){yt(t,t.return,d)}}if(t===e){he=null;break}if(n=t.sibling,n!==null){n.return=t.return,he=n;break}he=t.return}}function zx(e){for(;he!==null;){var t=he;if(t===e){he=null;break}var n=t.sibling;if(n!==null){n.return=t.return,he=n;break}he=t.return}}function $x(e){for(;he!==null;){var t=he;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Pf(4,t)}catch(u){yt(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){yt(t,o,u)}}var a=t.return;try{B0(t)}catch(u){yt(t,a,u)}break;case 5:var i=t.return;try{B0(t)}catch(u){yt(t,i,u)}}}catch(u){yt(t,t.return,u)}if(t===e){he=null;break}var s=t.sibling;if(s!==null){s.return=t.return,he=s;break}he=t.return}}var hR=Math.ceil,Jl=Do.ReactCurrentDispatcher,rm=Do.ReactCurrentOwner,lr=Do.ReactCurrentBatchConfig,$e=0,qt=null,It=null,rn=0,Wn=0,Ri=ha(0),$t=0,Eu=null,Ha=0,Nf=0,om=0,tu=null,Rn=null,am=0,Yi=1/0,uo=null,ef=!1,N0=null,na=null,Hc=!1,qo=null,tf=0,nu=0,O0=null,vl=-1,ml=0;function wn(){return $e&6?St():vl!==-1?vl:vl=St()}function ra(e){return e.mode&1?$e&2&&rn!==0?rn&-rn:YD.transition!==null?(ml===0&&(ml=Mb()),ml):(e=Ye,e!==0||(e=window.event,e=e===void 0?16:Vb(e.type)),e):1}function kr(e,t,n,r){if(50<nu)throw nu=0,O0=null,Error(oe(185));Ku(e,n,r),(!($e&2)||e!==qt)&&(e===qt&&(!($e&2)&&(Nf|=n),$t===4&&Vo(e,rn)),Pn(e,r),n===1&&$e===0&&!(t.mode&1)&&(Yi=St()+500,If&&pa()))}function Pn(e,t){var n=e.callbackNode;YA(e,t);var r=Ll(e,e===qt?rn:0);if(r===0)n!==null&&Y1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Y1(n),t===1)e.tag===0?XD(Ux.bind(null,e)):cw(Ux.bind(null,e)),jD(function(){!($e&6)&&pa()}),n=null;else{switch(Lb(r)){case 1:n=Iv;break;case 4:n=Nb;break;case 16:n=Ml;break;case 536870912:n=Ob;break;default:n=Ml}n=sC(n,eC.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function eC(e,t){if(vl=-1,ml=0,$e&6)throw Error(oe(327));var n=e.callbackNode;if(Ni()&&e.callbackNode!==n)return null;var r=Ll(e,e===qt?rn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=nf(e,r);else{t=r;var o=$e;$e|=2;var a=nC();(qt!==e||rn!==t)&&(uo=null,Yi=St()+500,Oa(e,t));do try{mR();break}catch(s){tC(e,s)}while(!0);Vv(),Jl.current=a,$e=o,It!==null?t=0:(qt=null,rn=0,t=$t)}if(t!==0){if(t===2&&(o=c0(e),o!==0&&(r=o,t=M0(e,o))),t===1)throw n=Eu,Oa(e,0),Vo(e,r),Pn(e,St()),n;if(t===6)Vo(e,r);else{if(o=e.current.alternate,!(r&30)&&!pR(o)&&(t=nf(e,r),t===2&&(a=c0(e),a!==0&&(r=a,t=M0(e,a))),t===1))throw n=Eu,Oa(e,0),Vo(e,r),Pn(e,St()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(oe(345));case 2:Da(e,Rn,uo);break;case 3:if(Vo(e,r),(r&130023424)===r&&(t=am+500-St(),10<t)){if(Ll(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){wn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=g0(Da.bind(null,e,Rn,uo),t);break}Da(e,Rn,uo);break;case 4:if(Vo(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Sr(r);a=1<<i,i=t[i],i>o&&(o=i),r&=~a}if(r=o,r=St()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hR(r/1960))-r,10<r){e.timeoutHandle=g0(Da.bind(null,e,Rn,uo),r);break}Da(e,Rn,uo);break;case 5:Da(e,Rn,uo);break;default:throw Error(oe(329))}}}return Pn(e,St()),e.callbackNode===n?eC.bind(null,e):null}function M0(e,t){var n=tu;return e.current.memoizedState.isDehydrated&&(Oa(e,t).flags|=256),e=nf(e,t),e!==2&&(t=Rn,Rn=n,t!==null&&L0(t)),e}function L0(e){Rn===null?Rn=e:Rn.push.apply(Rn,e)}function pR(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!Fr(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vo(e,t){for(t&=~om,t&=~Nf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Sr(t),r=1<<n;e[n]=-1,t&=~r}}function Ux(e){if($e&6)throw Error(oe(327));Ni();var t=Ll(e,0);if(!(t&1))return Pn(e,St()),null;var n=nf(e,t);if(e.tag!==0&&n===2){var r=c0(e);r!==0&&(t=r,n=M0(e,r))}if(n===1)throw n=Eu,Oa(e,0),Vo(e,t),Pn(e,St()),n;if(n===6)throw Error(oe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Da(e,Rn,uo),Pn(e,St()),null}function im(e,t){var n=$e;$e|=1;try{return e(t)}finally{$e=n,$e===0&&(Yi=St()+500,If&&pa())}}function Va(e){qo!==null&&qo.tag===0&&!($e&6)&&Ni();var t=$e;$e|=1;var n=lr.transition,r=Ye;try{if(lr.transition=null,Ye=1,e)return e()}finally{Ye=r,lr.transition=n,$e=t,!($e&6)&&pa()}}function sm(){Wn=Ri.current,it(Ri)}function Oa(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,VD(n)),It!==null)for(n=It.return;n!==null;){var r=n;switch($v(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hl();break;case 3:Ki(),it(Bn),it(hn),Yv();break;case 5:Xv(r);break;case 4:Ki();break;case 13:it(dt);break;case 19:it(dt);break;case 10:jv(r.type._context);break;case 22:case 23:sm()}n=n.return}if(qt=e,It=e=oa(e.current,null),rn=Wn=t,$t=0,Eu=null,om=Nf=Ha=0,Rn=tu=null,Ba!==null){for(t=0;t<Ba.length;t++)if(n=Ba[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=o,r.next=i}n.pending=r}Ba=null}return e}function tC(e,t){do{var n=It;try{if(Vv(),dl.current=Zl,Ql){for(var r=ht.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ql=!1}if(Ua=0,Vt=zt=ht=null,Js=!1,bu=0,rm.current=null,n===null||n.return===null){$t=1,Eu=t,It=null;break}e:{var a=e,i=n.return,s=n,u=t;if(t=rn,s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,l=s,f=l.tag;if(!(l.mode&1)&&(f===0||f===11||f===15)){var d=l.alternate;d?(l.updateQueue=d.updateQueue,l.memoizedState=d.memoizedState,l.lanes=d.lanes):(l.updateQueue=null,l.memoizedState=null)}var h=Rx(i);if(h!==null){h.flags&=-257,Fx(h,i,s,a,t),h.mode&1&&Dx(a,c,t),t=h,u=c;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Dx(a,c,t),um();break e}u=Error(oe(426))}}else if(ct&&s.mode&1){var g=Rx(i);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Fx(g,i,s,a,t),Uv(Xi(u,s));break e}}a=u=Xi(u,s),$t!==4&&($t=2),tu===null?tu=[a]:tu.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var v=Lw(a,u,t);Cx(a,v);break e;case 1:s=u;var x=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(na===null||!na.has(y)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=Ww(a,s,t);Cx(a,b);break e}}a=a.return}while(a!==null)}oC(n)}catch(w){t=w,It===n&&n!==null&&(It=n=n.return);continue}break}while(!0)}function nC(){var e=Jl.current;return Jl.current=Zl,e===null?Zl:e}function um(){($t===0||$t===3||$t===2)&&($t=4),qt===null||!(Ha&268435455)&&!(Nf&268435455)||Vo(qt,rn)}function nf(e,t){var n=$e;$e|=2;var r=nC();(qt!==e||rn!==t)&&(uo=null,Oa(e,t));do try{vR();break}catch(o){tC(e,o)}while(!0);if(Vv(),$e=n,Jl.current=r,It!==null)throw Error(oe(261));return qt=null,rn=0,$t}function vR(){for(;It!==null;)rC(It)}function mR(){for(;It!==null&&!$A();)rC(It)}function rC(e){var t=iC(e.alternate,e,Wn);e.memoizedProps=e.pendingProps,t===null?oC(e):It=t,rm.current=null}function oC(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cR(n,t),n!==null){n.flags&=32767,It=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{$t=6,It=null;return}}else if(n=uR(n,t,Wn),n!==null){It=n;return}if(t=t.sibling,t!==null){It=t;return}It=t=e}while(t!==null);$t===0&&($t=5)}function Da(e,t,n){var r=Ye,o=lr.transition;try{lr.transition=null,Ye=1,gR(e,t,n,r)}finally{lr.transition=o,Ye=r}return null}function gR(e,t,n,r){do Ni();while(qo!==null);if($e&6)throw Error(oe(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(oe(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(QA(e,a),e===qt&&(It=qt=null,rn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Hc||(Hc=!0,sC(Ml,function(){return Ni(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=lr.transition,lr.transition=null;var i=Ye;Ye=1;var s=$e;$e|=4,rm.current=null,fR(e,n),Zw(n,e),MD(v0),Wl=!!p0,v0=p0=null,e.current=n,dR(n),UA(),$e=s,Ye=i,lr.transition=a}else e.current=n;if(Hc&&(Hc=!1,qo=e,tf=o),a=e.pendingLanes,a===0&&(na=null),jA(n.stateNode),Pn(e,St()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(ef)throw ef=!1,e=N0,N0=null,e;return tf&1&&e.tag!==0&&Ni(),a=e.pendingLanes,a&1?e===O0?nu++:(nu=0,O0=e):nu=0,pa(),null}function Ni(){if(qo!==null){var e=Lb(tf),t=lr.transition,n=Ye;try{if(lr.transition=null,Ye=16>e?16:e,qo===null)var r=!1;else{if(e=qo,qo=null,tf=0,$e&6)throw Error(oe(331));var o=$e;for($e|=4,he=e.current;he!==null;){var a=he,i=a.child;if(he.flags&16){var s=a.deletions;if(s!==null){for(var u=0;u<s.length;u++){var c=s[u];for(he=c;he!==null;){var l=he;switch(l.tag){case 0:case 11:case 15:eu(8,l,a)}var f=l.child;if(f!==null)f.return=l,he=f;else for(;he!==null;){l=he;var d=l.sibling,h=l.return;if(Xw(l),l===c){he=null;break}if(d!==null){d.return=h,he=d;break}he=h}}}var p=a.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}he=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,he=i;else e:for(;he!==null;){if(a=he,a.flags&2048)switch(a.tag){case 0:case 11:case 15:eu(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,he=v;break e}he=a.return}}var x=e.current;for(he=x;he!==null;){i=he;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,he=y;else e:for(i=x;he!==null;){if(s=he,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Pf(9,s)}}catch(w){yt(s,s.return,w)}if(s===i){he=null;break e}var b=s.sibling;if(b!==null){b.return=s.return,he=b;break e}he=s.return}}if($e=o,pa(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(kf,e)}catch{}r=!0}return r}finally{Ye=n,lr.transition=t}}return!1}function Hx(e,t,n){t=Xi(n,t),t=Lw(e,t,1),e=ta(e,t,1),t=wn(),e!==null&&(Ku(e,1,t),Pn(e,t))}function yt(e,t,n){if(e.tag===3)Hx(e,e,n);else for(;t!==null;){if(t.tag===3){Hx(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(na===null||!na.has(r))){e=Xi(n,e),e=Ww(t,e,1),t=ta(t,e,1),e=wn(),t!==null&&(Ku(t,1,e),Pn(t,e));break}}t=t.return}}function xR(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wn(),e.pingedLanes|=e.suspendedLanes&n,qt===e&&(rn&n)===n&&($t===4||$t===3&&(rn&130023424)===rn&&500>St()-am?Oa(e,0):om|=n),Pn(e,t)}function aC(e,t){t===0&&(e.mode&1?(t=Tc,Tc<<=1,!(Tc&130023424)&&(Tc=4194304)):t=1);var n=wn();e=Co(e,t),e!==null&&(Ku(e,t,n),Pn(e,n))}function yR(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),aC(e,n)}function bR(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(t),aC(e,n)}var iC;iC=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bn.current)In=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return In=!1,sR(e,t,n);In=!!(e.flags&131072)}else In=!1,ct&&t.flags&1048576&&lw(t,Gl,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;pl(e,t),e=t.pendingProps;var o=ji(t,hn.current);Pi(t,n),o=Zv(null,t,r,e,o,n);var a=Jv();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Tn(r)?(a=!0,Vl(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,qv(t),o.updater=Tf,t.stateNode=o,o._reactInternals=t,_0(t,r,e,n),t=A0(null,t,r,!0,a,n)):(t.tag=0,ct&&a&&zv(t),yn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(pl(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=CR(r),e=br(r,e),o){case 0:t=k0(null,t,r,e,n);break e;case 1:t=Tx(null,t,r,e,n);break e;case 11:t=Ix(null,t,r,e,n);break e;case 14:t=Bx(null,t,r,br(r.type,e),n);break e}throw Error(oe(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),k0(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),Tx(e,t,r,o,n);case 3:e:{if(Hw(t),e===null)throw Error(oe(387));r=t.pendingProps,a=t.memoizedState,o=a.element,mw(e,t),Xl(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=Xi(Error(oe(423)),t),t=Px(e,t,r,n,o);break e}else if(r!==o){o=Xi(Error(oe(424)),t),t=Px(e,t,r,n,o);break e}else for(Vn=ea(t.stateNode.containerInfo.firstChild),Xn=t,ct=!0,Cr=null,n=pw(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gi(),r===o){t=Eo(e,t,n);break e}yn(e,t,r,n)}t=t.child}return t;case 5:return gw(t),e===null&&w0(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,m0(r,o)?i=null:a!==null&&m0(r,a)&&(t.flags|=32),Uw(e,t),yn(e,t,i,n),t.child;case 6:return e===null&&w0(t),null;case 13:return Vw(e,t,n);case 4:return Kv(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qi(t,null,r,n):yn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),Ix(e,t,r,o,n);case 7:return yn(e,t,t.pendingProps,n),t.child;case 8:return yn(e,t,t.pendingProps.children,n),t.child;case 12:return yn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,nt(ql,r._currentValue),r._currentValue=i,a!==null)if(Fr(a.value,i)){if(a.children===o.children&&!Bn.current){t=Eo(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var s=a.dependencies;if(s!==null){i=a.child;for(var u=s.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=mo(-1,n&-n),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var l=c.pending;l===null?u.next=u:(u.next=l.next,l.next=u),c.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),C0(a.return,n,t),s.lanes|=n;break}u=u.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(oe(341));i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),C0(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}yn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Pi(t,n),o=fr(o),r=r(o),t.flags|=1,yn(e,t,r,n),t.child;case 14:return r=t.type,o=br(r,t.pendingProps),o=br(r.type,o),Bx(e,t,r,o,n);case 15:return zw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:br(r,o),pl(e,t),t.tag=1,Tn(r)?(e=!0,Vl(t)):e=!1,Pi(t,n),Mw(t,r,o),_0(t,r,o,n),A0(null,t,r,!0,e,n);case 19:return jw(e,t,n);case 22:return $w(e,t,n)}throw Error(oe(156,t.tag))};function sC(e,t){return Pb(e,t)}function wR(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(e,t,n,r){return new wR(e,t,n,r)}function cm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function CR(e){if(typeof e=="function")return cm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dv)return 11;if(e===Rv)return 14}return 2}function oa(e,t){var n=e.alternate;return n===null?(n=ur(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function gl(e,t,n,r,o,a){var i=2;if(r=e,typeof e=="function")cm(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case yi:return Ma(n.children,o,a,t);case Av:i=8,o|=8;break;case Kp:return e=ur(12,n,t,o|2),e.elementType=Kp,e.lanes=a,e;case Xp:return e=ur(13,n,t,o),e.elementType=Xp,e.lanes=a,e;case Yp:return e=ur(19,n,t,o),e.elementType=Yp,e.lanes=a,e;case gb:return Of(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vb:i=10;break e;case mb:i=9;break e;case Dv:i=11;break e;case Rv:i=14;break e;case $o:i=16,r=null;break e}throw Error(oe(130,e==null?e:typeof e,""))}return t=ur(i,n,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function Ma(e,t,n,r){return e=ur(7,e,r,t),e.lanes=n,e}function Of(e,t,n,r){return e=ur(22,e,r,t),e.elementType=gb,e.lanes=n,e.stateNode={isHidden:!1},e}function Nh(e,t,n){return e=ur(6,e,null,t),e.lanes=n,e}function Oh(e,t,n){return t=ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ER(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mh(0),this.expirationTimes=mh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mh(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function lm(e,t,n,r,o,a,i,s,u){return e=new ER(e,t,n,s,u),t===1?(t=1,a===!0&&(t|=8)):t=0,a=ur(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},qv(a),e}function _R(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xi,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function uC(e){if(!e)return ua;e=e._reactInternals;e:{if(Xa(e)!==e||e.tag!==1)throw Error(oe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Tn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(oe(171))}if(e.tag===1){var n=e.type;if(Tn(n))return uw(e,n,t)}return t}function cC(e,t,n,r,o,a,i,s,u){return e=lm(n,r,!0,e,o,a,i,s,u),e.context=uC(null),n=e.current,r=wn(),o=ra(n),a=mo(r,o),a.callback=t??null,ta(n,a,o),e.current.lanes=o,Ku(e,o,r),Pn(e,r),e}function Mf(e,t,n,r){var o=t.current,a=wn(),i=ra(o);return n=uC(n),t.context===null?t.context=n:t.pendingContext=n,t=mo(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ta(o,t,i),e!==null&&(kr(e,o,i,a),fl(e,o,i)),i}function rf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Vx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fm(e,t){Vx(e,t),(e=e.alternate)&&Vx(e,t)}function SR(){return null}var lC=typeof reportError=="function"?reportError:function(e){console.error(e)};function dm(e){this._internalRoot=e}Lf.prototype.render=dm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(oe(409));Mf(e,t,null,null)};Lf.prototype.unmount=dm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Va(function(){Mf(null,e,null,null)}),t[wo]=null}};function Lf(e){this._internalRoot=e}Lf.prototype.unstable_scheduleHydration=function(e){if(e){var t=$b();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ho.length&&t!==0&&t<Ho[n].priority;n++);Ho.splice(n,0,e),n===0&&Hb(e)}};function hm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jx(){}function kR(e,t,n,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var c=rf(i);a.call(c)}}var i=cC(t,r,e,0,null,!1,!1,"",jx);return e._reactRootContainer=i,e[wo]=i.current,vu(e.nodeType===8?e.parentNode:e),Va(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var s=r;r=function(){var c=rf(u);s.call(c)}}var u=lm(e,0,!1,null,null,!1,!1,"",jx);return e._reactRootContainer=u,e[wo]=u.current,vu(e.nodeType===8?e.parentNode:e),Va(function(){Mf(t,u,n,r)}),u}function zf(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var s=o;o=function(){var u=rf(i);s.call(u)}}Mf(t,i,e,o)}else i=kR(n,t,e,o,r);return rf(i)}Wb=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$s(t.pendingLanes);n!==0&&(Bv(t,n|1),Pn(t,St()),!($e&6)&&(Yi=St()+500,pa()))}break;case 13:Va(function(){var r=Co(e,1);if(r!==null){var o=wn();kr(r,e,1,o)}}),fm(e,1)}};Tv=function(e){if(e.tag===13){var t=Co(e,134217728);if(t!==null){var n=wn();kr(t,e,134217728,n)}fm(e,134217728)}};zb=function(e){if(e.tag===13){var t=ra(e),n=Co(e,t);if(n!==null){var r=wn();kr(n,e,t,r)}fm(e,t)}};$b=function(){return Ye};Ub=function(e,t){var n=Ye;try{return Ye=e,t()}finally{Ye=n}};i0=function(e,t,n){switch(t){case"input":if(Jp(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Ff(r);if(!o)throw Error(oe(90));yb(r),Jp(r,o)}}}break;case"textarea":wb(e,n);break;case"select":t=n.value,t!=null&&Fi(e,!!n.multiple,t,!1)}};Db=im;Rb=Va;var AR={usingClientEntryPoint:!1,Events:[Yu,Ei,Ff,kb,Ab,im]},Is={findFiberByHostInstance:Ia,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},DR={bundleType:Is.bundleType,version:Is.version,rendererPackageName:Is.rendererPackageName,rendererConfig:Is.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Do.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Bb(e),e===null?null:e.stateNode},findFiberByHostInstance:Is.findFiberByHostInstance||SR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vc.isDisabled&&Vc.supportsFiber)try{kf=Vc.inject(DR),Kr=Vc}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AR;Zn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hm(t))throw Error(oe(200));return _R(e,t,null,n)};Zn.createRoot=function(e,t){if(!hm(e))throw Error(oe(299));var n=!1,r="",o=lC;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=lm(e,1,!1,null,null,n,!1,r,o),e[wo]=t.current,vu(e.nodeType===8?e.parentNode:e),new dm(t)};Zn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(oe(188)):(e=Object.keys(e).join(","),Error(oe(268,e)));return e=Bb(t),e=e===null?null:e.stateNode,e};Zn.flushSync=function(e){return Va(e)};Zn.hydrate=function(e,t,n){if(!Wf(t))throw Error(oe(200));return zf(null,e,t,!0,n)};Zn.hydrateRoot=function(e,t,n){if(!hm(e))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,o=!1,a="",i=lC;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=cC(t,null,e,1,n??null,o,!1,a,i),e[wo]=t.current,vu(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Lf(t)};Zn.render=function(e,t,n){if(!Wf(t))throw Error(oe(200));return zf(null,e,t,!1,n)};Zn.unmountComponentAtNode=function(e){if(!Wf(e))throw Error(oe(40));return e._reactRootContainer?(Va(function(){zf(null,null,e,!1,function(){e._reactRootContainer=null,e[wo]=null})}),!0):!1};Zn.unstable_batchedUpdates=im;Zn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Wf(n))throw Error(oe(200));if(e==null||e._reactInternals===void 0)throw Error(oe(38));return zf(e,t,n,!1,r)};Zn.version="18.3.1-next-f1338f8080-20240426";function fC(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fC)}catch(e){console.error(e)}}fC(),fb.exports=Zn;var RR=fb.exports,dC,Gx=RR;dC=Gx.createRoot,Gx.hydrateRoot;const FR="modulepreload",IR=function(e){return"/"+e},qx={},Zu=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),s=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(u=>{if(u=IR(u),u in qx)return;qx[u]=!0;const c=u.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${l}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":FR,c||(f.as="script"),f.crossOrigin="",f.href=u,s&&f.setAttribute("nonce",s),document.head.appendChild(f),c)return new Promise((d,h)=>{f.addEventListener("load",d),f.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return o.then(i=>{for(const s of i||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})},_u={black:"#000",white:"#fff"},oi={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ai={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},ii={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},si={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},ui={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Bs={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},BR={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};function Su(e){let t="https://mui.com/production-error/?code="+e;for(let n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const TR=Object.freeze(Object.defineProperty({__proto__:null,default:Su},Symbol.toStringTag,{value:"Module"})),hC="$$material";function Ce(){return Ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ce.apply(null,arguments)}const PR=Object.freeze(Object.defineProperty({__proto__:null,get default(){return Ce}},Symbol.toStringTag,{value:"Module"}));function On(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function pC(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var NR=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,OR=pC(function(e){return NR.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),MR=!1;function LR(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function WR(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var zR=function(){function e(n){var r=this;this._insertTag=function(o){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,a),r.tags.push(o)},this.isSpeedy=n.speedy===void 0?!MR:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(WR(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var a=LR(o);try{a.insertRule(r,a.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var o;return(o=r.parentNode)==null?void 0:o.removeChild(r)}),this.tags=[],this.ctr=0},e}(),cn="-ms-",of="-moz-",Ve="-webkit-",vC="comm",pm="rule",vm="decl",$R="@import",mC="@keyframes",UR="@layer",HR=Math.abs,$f=String.fromCharCode,VR=Object.assign;function jR(e,t){return Jt(e,0)^45?(((t<<2^Jt(e,0))<<2^Jt(e,1))<<2^Jt(e,2))<<2^Jt(e,3):0}function gC(e){return e.trim()}function GR(e,t){return(e=t.exec(e))?e[0]:e}function je(e,t,n){return e.replace(t,n)}function W0(e,t){return e.indexOf(t)}function Jt(e,t){return e.charCodeAt(t)|0}function ku(e,t,n){return e.slice(t,n)}function Hr(e){return e.length}function mm(e){return e.length}function jc(e,t){return t.push(e),e}function qR(e,t){return e.map(t).join("")}var Uf=1,Qi=1,xC=0,Mn=0,Ft=0,ss="";function Hf(e,t,n,r,o,a,i){return{value:e,root:t,parent:n,type:r,props:o,children:a,line:Uf,column:Qi,length:i,return:""}}function Ts(e,t){return VR(Hf("",null,null,"",null,null,0),e,{length:-e.length},t)}function KR(){return Ft}function XR(){return Ft=Mn>0?Jt(ss,--Mn):0,Qi--,Ft===10&&(Qi=1,Uf--),Ft}function Yn(){return Ft=Mn<xC?Jt(ss,Mn++):0,Qi++,Ft===10&&(Qi=1,Uf++),Ft}function Yr(){return Jt(ss,Mn)}function xl(){return Mn}function Ju(e,t){return ku(ss,e,t)}function Au(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function yC(e){return Uf=Qi=1,xC=Hr(ss=e),Mn=0,[]}function bC(e){return ss="",e}function yl(e){return gC(Ju(Mn-1,z0(e===91?e+2:e===40?e+1:e)))}function YR(e){for(;(Ft=Yr())&&Ft<33;)Yn();return Au(e)>2||Au(Ft)>3?"":" "}function QR(e,t){for(;--t&&Yn()&&!(Ft<48||Ft>102||Ft>57&&Ft<65||Ft>70&&Ft<97););return Ju(e,xl()+(t<6&&Yr()==32&&Yn()==32))}function z0(e){for(;Yn();)switch(Ft){case e:return Mn;case 34:case 39:e!==34&&e!==39&&z0(Ft);break;case 40:e===41&&z0(e);break;case 92:Yn();break}return Mn}function ZR(e,t){for(;Yn()&&e+Ft!==57;)if(e+Ft===84&&Yr()===47)break;return"/*"+Ju(t,Mn-1)+"*"+$f(e===47?e:Yn())}function JR(e){for(;!Au(Yr());)Yn();return Ju(e,Mn)}function eF(e){return bC(bl("",null,null,null,[""],e=yC(e),0,[0],e))}function bl(e,t,n,r,o,a,i,s,u){for(var c=0,l=0,f=i,d=0,h=0,p=0,m=1,g=1,v=1,x=0,y="",b=o,w=a,C=r,E=y;g;)switch(p=x,x=Yn()){case 40:if(p!=108&&Jt(E,f-1)==58){W0(E+=je(yl(x),"&","&\f"),"&\f")!=-1&&(v=-1);break}case 34:case 39:case 91:E+=yl(x);break;case 9:case 10:case 13:case 32:E+=YR(p);break;case 92:E+=QR(xl()-1,7);continue;case 47:switch(Yr()){case 42:case 47:jc(tF(ZR(Yn(),xl()),t,n),u);break;default:E+="/"}break;case 123*m:s[c++]=Hr(E)*v;case 125*m:case 59:case 0:switch(x){case 0:case 125:g=0;case 59+l:v==-1&&(E=je(E,/\f/g,"")),h>0&&Hr(E)-f&&jc(h>32?Xx(E+";",r,n,f-1):Xx(je(E," ","")+";",r,n,f-2),u);break;case 59:E+=";";default:if(jc(C=Kx(E,t,n,c,l,o,s,y,b=[],w=[],f),a),x===123)if(l===0)bl(E,t,C,C,b,a,f,s,w);else switch(d===99&&Jt(E,3)===110?100:d){case 100:case 108:case 109:case 115:bl(e,C,C,r&&jc(Kx(e,C,C,0,0,o,s,y,o,b=[],f),w),o,w,f,s,r?b:w);break;default:bl(E,C,C,C,[""],w,0,s,w)}}c=l=h=0,m=v=1,y=E="",f=i;break;case 58:f=1+Hr(E),h=p;default:if(m<1){if(x==123)--m;else if(x==125&&m++==0&&XR()==125)continue}switch(E+=$f(x),x*m){case 38:v=l>0?1:(E+="\f",-1);break;case 44:s[c++]=(Hr(E)-1)*v,v=1;break;case 64:Yr()===45&&(E+=yl(Yn())),d=Yr(),l=f=Hr(y=E+=JR(xl())),x++;break;case 45:p===45&&Hr(E)==2&&(m=0)}}return a}function Kx(e,t,n,r,o,a,i,s,u,c,l){for(var f=o-1,d=o===0?a:[""],h=mm(d),p=0,m=0,g=0;p<r;++p)for(var v=0,x=ku(e,f+1,f=HR(m=i[p])),y=e;v<h;++v)(y=gC(m>0?d[v]+" "+x:je(x,/&\f/g,d[v])))&&(u[g++]=y);return Hf(e,t,n,o===0?pm:s,u,c,l)}function tF(e,t,n){return Hf(e,t,n,vC,$f(KR()),ku(e,2,-2),0)}function Xx(e,t,n,r){return Hf(e,t,n,vm,ku(e,0,r),ku(e,r+1,-1),r)}function Oi(e,t){for(var n="",r=mm(e),o=0;o<r;o++)n+=t(e[o],o,e,t)||"";return n}function nF(e,t,n,r){switch(e.type){case UR:if(e.children.length)break;case $R:case vm:return e.return=e.return||e.value;case vC:return"";case mC:return e.return=e.value+"{"+Oi(e.children,r)+"}";case pm:e.value=e.props.join(",")}return Hr(n=Oi(e.children,r))?e.return=e.value+"{"+n+"}":""}function rF(e){var t=mm(e);return function(n,r,o,a){for(var i="",s=0;s<t;s++)i+=e[s](n,r,o,a)||"";return i}}function oF(e){return function(t){t.root||(t=t.return)&&e(t)}}var aF=function(t,n,r){for(var o=0,a=0;o=a,a=Yr(),o===38&&a===12&&(n[r]=1),!Au(a);)Yn();return Ju(t,Mn)},iF=function(t,n){var r=-1,o=44;do switch(Au(o)){case 0:o===38&&Yr()===12&&(n[r]=1),t[r]+=aF(Mn-1,n,r);break;case 2:t[r]+=yl(o);break;case 4:if(o===44){t[++r]=Yr()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=$f(o)}while(o=Yn());return t},sF=function(t,n){return bC(iF(yC(t),n))},Yx=new WeakMap,uF=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,o=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!Yx.get(r))&&!o){Yx.set(t,!0);for(var a=[],i=sF(n,a),s=r.props,u=0,c=0;u<i.length;u++)for(var l=0;l<s.length;l++,c++)t.props[c]=a[u]?i[u].replace(/&\f/g,s[l]):s[l]+" "+i[u]}}},cF=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function wC(e,t){switch(jR(e,t)){case 5103:return Ve+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ve+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ve+e+of+e+cn+e+e;case 6828:case 4268:return Ve+e+cn+e+e;case 6165:return Ve+e+cn+"flex-"+e+e;case 5187:return Ve+e+je(e,/(\w+).+(:[^]+)/,Ve+"box-$1$2"+cn+"flex-$1$2")+e;case 5443:return Ve+e+cn+"flex-item-"+je(e,/flex-|-self/,"")+e;case 4675:return Ve+e+cn+"flex-line-pack"+je(e,/align-content|flex-|-self/,"")+e;case 5548:return Ve+e+cn+je(e,"shrink","negative")+e;case 5292:return Ve+e+cn+je(e,"basis","preferred-size")+e;case 6060:return Ve+"box-"+je(e,"-grow","")+Ve+e+cn+je(e,"grow","positive")+e;case 4554:return Ve+je(e,/([^-])(transform)/g,"$1"+Ve+"$2")+e;case 6187:return je(je(je(e,/(zoom-|grab)/,Ve+"$1"),/(image-set)/,Ve+"$1"),e,"")+e;case 5495:case 3959:return je(e,/(image-set\([^]*)/,Ve+"$1$`$1");case 4968:return je(je(e,/(.+:)(flex-)?(.*)/,Ve+"box-pack:$3"+cn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ve+e+e;case 4095:case 3583:case 4068:case 2532:return je(e,/(.+)-inline(.+)/,Ve+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Hr(e)-1-t>6)switch(Jt(e,t+1)){case 109:if(Jt(e,t+4)!==45)break;case 102:return je(e,/(.+:)(.+)-([^]+)/,"$1"+Ve+"$2-$3$1"+of+(Jt(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~W0(e,"stretch")?wC(je(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Jt(e,t+1)!==115)break;case 6444:switch(Jt(e,Hr(e)-3-(~W0(e,"!important")&&10))){case 107:return je(e,":",":"+Ve)+e;case 101:return je(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ve+(Jt(e,14)===45?"inline-":"")+"box$3$1"+Ve+"$2$3$1"+cn+"$2box$3")+e}break;case 5936:switch(Jt(e,t+11)){case 114:return Ve+e+cn+je(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ve+e+cn+je(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ve+e+cn+je(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ve+e+cn+e+e}return e}var lF=function(t,n,r,o){if(t.length>-1&&!t.return)switch(t.type){case vm:t.return=wC(t.value,t.length);break;case mC:return Oi([Ts(t,{value:je(t.value,"@","@"+Ve)})],o);case pm:if(t.length)return qR(t.props,function(a){switch(GR(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Oi([Ts(t,{props:[je(a,/:(read-\w+)/,":"+of+"$1")]})],o);case"::placeholder":return Oi([Ts(t,{props:[je(a,/:(plac\w+)/,":"+Ve+"input-$1")]}),Ts(t,{props:[je(a,/:(plac\w+)/,":"+of+"$1")]}),Ts(t,{props:[je(a,/:(plac\w+)/,cn+"input-$1")]})],o)}return""})}},fF=[lF],CC=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var o=t.stylisPlugins||fF,a={},i,s=[];i=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),v=1;v<g.length;v++)a[g[v]]=!0;s.push(m)});var u,c=[uF,cF];{var l,f=[nF,oF(function(m){l.insert(m)})],d=rF(c.concat(o,f)),h=function(g){return Oi(eF(g),d)};u=function(g,v,x,y){l=x,h(g?g+"{"+v.styles+"}":v.styles),y&&(p.inserted[v.name]=!0)}}var p={key:n,sheet:new zR({key:n,container:i,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:u};return p.sheet.hydrate(s),p},EC={exports:{}},Qe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt=typeof Symbol=="function"&&Symbol.for,gm=Xt?Symbol.for("react.element"):60103,xm=Xt?Symbol.for("react.portal"):60106,Vf=Xt?Symbol.for("react.fragment"):60107,jf=Xt?Symbol.for("react.strict_mode"):60108,Gf=Xt?Symbol.for("react.profiler"):60114,qf=Xt?Symbol.for("react.provider"):60109,Kf=Xt?Symbol.for("react.context"):60110,ym=Xt?Symbol.for("react.async_mode"):60111,Xf=Xt?Symbol.for("react.concurrent_mode"):60111,Yf=Xt?Symbol.for("react.forward_ref"):60112,Qf=Xt?Symbol.for("react.suspense"):60113,dF=Xt?Symbol.for("react.suspense_list"):60120,Zf=Xt?Symbol.for("react.memo"):60115,Jf=Xt?Symbol.for("react.lazy"):60116,hF=Xt?Symbol.for("react.block"):60121,pF=Xt?Symbol.for("react.fundamental"):60117,vF=Xt?Symbol.for("react.responder"):60118,mF=Xt?Symbol.for("react.scope"):60119;function er(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gm:switch(e=e.type,e){case ym:case Xf:case Vf:case Gf:case jf:case Qf:return e;default:switch(e=e&&e.$$typeof,e){case Kf:case Yf:case Jf:case Zf:case qf:return e;default:return t}}case xm:return t}}}function _C(e){return er(e)===Xf}Qe.AsyncMode=ym;Qe.ConcurrentMode=Xf;Qe.ContextConsumer=Kf;Qe.ContextProvider=qf;Qe.Element=gm;Qe.ForwardRef=Yf;Qe.Fragment=Vf;Qe.Lazy=Jf;Qe.Memo=Zf;Qe.Portal=xm;Qe.Profiler=Gf;Qe.StrictMode=jf;Qe.Suspense=Qf;Qe.isAsyncMode=function(e){return _C(e)||er(e)===ym};Qe.isConcurrentMode=_C;Qe.isContextConsumer=function(e){return er(e)===Kf};Qe.isContextProvider=function(e){return er(e)===qf};Qe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gm};Qe.isForwardRef=function(e){return er(e)===Yf};Qe.isFragment=function(e){return er(e)===Vf};Qe.isLazy=function(e){return er(e)===Jf};Qe.isMemo=function(e){return er(e)===Zf};Qe.isPortal=function(e){return er(e)===xm};Qe.isProfiler=function(e){return er(e)===Gf};Qe.isStrictMode=function(e){return er(e)===jf};Qe.isSuspense=function(e){return er(e)===Qf};Qe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Vf||e===Xf||e===Gf||e===jf||e===Qf||e===dF||typeof e=="object"&&e!==null&&(e.$$typeof===Jf||e.$$typeof===Zf||e.$$typeof===qf||e.$$typeof===Kf||e.$$typeof===Yf||e.$$typeof===pF||e.$$typeof===vF||e.$$typeof===mF||e.$$typeof===hF)};Qe.typeOf=er;EC.exports=Qe;var gF=EC.exports,SC=gF,xF={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},yF={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},kC={};kC[SC.ForwardRef]=xF;kC[SC.Memo]=yF;var bF=!0;function bm(e,t,n){var r="";return n.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]+";"):o&&(r+=o+" ")}),r}var ed=function(t,n,r){var o=t.key+"-"+n.name;(r===!1||bF===!1)&&t.registered[o]===void 0&&(t.registered[o]=n.styles)},td=function(t,n,r){ed(t,n,r);var o=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var a=n;do t.insert(n===a?"."+o:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function wF(e){for(var t=0,n,r=0,o=e.length;o>=4;++r,o-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var CF={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},EF=!1,_F=/[A-Z]|^ms/g,SF=/_EMO_([^_]+?)_([^]*?)_EMO_/g,AC=function(t){return t.charCodeAt(1)===45},Qx=function(t){return t!=null&&typeof t!="boolean"},Mh=pC(function(e){return AC(e)?e:e.replace(_F,"-$&").toLowerCase()}),Zx=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(SF,function(r,o,a){return Vr={name:o,styles:a,next:Vr},o})}return CF[t]!==1&&!AC(t)&&typeof n=="number"&&n!==0?n+"px":n},kF="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Du(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var o=n;if(o.anim===1)return Vr={name:o.name,styles:o.styles,next:Vr},o.name;var a=n;if(a.styles!==void 0){var i=a.next;if(i!==void 0)for(;i!==void 0;)Vr={name:i.name,styles:i.styles,next:Vr},i=i.next;var s=a.styles+";";return s}return AF(e,t,n)}case"function":{if(e!==void 0){var u=Vr,c=n(e);return Vr=u,Du(e,t,c)}break}}var l=n;if(t==null)return l;var f=t[l];return f!==void 0?f:l}function AF(e,t,n){var r="";if(Array.isArray(n))for(var o=0;o<n.length;o++)r+=Du(e,t,n[o])+";";else for(var a in n){var i=n[a];if(typeof i!="object"){var s=i;t!=null&&t[s]!==void 0?r+=a+"{"+t[s]+"}":Qx(s)&&(r+=Mh(a)+":"+Zx(a,s)+";")}else{if(a==="NO_COMPONENT_SELECTOR"&&EF)throw new Error(kF);if(Array.isArray(i)&&typeof i[0]=="string"&&(t==null||t[i[0]]===void 0))for(var u=0;u<i.length;u++)Qx(i[u])&&(r+=Mh(a)+":"+Zx(a,i[u])+";");else{var c=Du(e,t,i);switch(a){case"animation":case"animationName":{r+=Mh(a)+":"+c+";";break}default:r+=a+"{"+c+"}"}}}}return r}var Jx=/label:\s*([^\s;{]+)\s*(;|$)/g,Vr;function ec(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,o="";Vr=void 0;var a=e[0];if(a==null||a.raw===void 0)r=!1,o+=Du(n,t,a);else{var i=a;o+=i[0]}for(var s=1;s<e.length;s++)if(o+=Du(n,t,e[s]),r){var u=a;o+=u[s]}Jx.lastIndex=0;for(var c="",l;(l=Jx.exec(o))!==null;)c+="-"+l[1];var f=wF(o)+c;return{name:f,styles:o,next:Vr}}var DF=function(t){return t()},DC=z1.useInsertionEffect?z1.useInsertionEffect:!1,wm=DC||DF,ey=DC||Z.useLayoutEffect,$0=!1,RC=Z.createContext(typeof HTMLElement<"u"?CC({key:"css"}):null),RF=RC.Provider,nd=function(t){return Z.forwardRef(function(n,r){var o=Z.useContext(RC);return t(n,o,r)})},us=Z.createContext({}),FC={}.hasOwnProperty,U0="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ML=function(t,n){var r={};for(var o in n)FC.call(n,o)&&(r[o]=n[o]);return r[U0]=t,r},FF=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return ed(n,r,o),wm(function(){return td(n,r,o)}),null},IF=nd(function(e,t,n){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var o=e[U0],a=[r],i="";typeof e.className=="string"?i=bm(t.registered,a,e.className):e.className!=null&&(i=e.className+" ");var s=ec(a,void 0,Z.useContext(us));i+=t.key+"-"+s.name;var u={};for(var c in e)FC.call(e,c)&&c!=="css"&&c!==U0&&!$0&&(u[c]=e[c]);return u.className=i,n&&(u.ref=n),Z.createElement(Z.Fragment,null,Z.createElement(FF,{cache:t,serialized:s,isStringTag:typeof o=="string"}),Z.createElement(o,u))}),LL=IF,BF=nd(function(e,t){var n=e.styles,r=ec([n],void 0,Z.useContext(us)),o=Z.useRef();return ey(function(){var a=t.key+"-global",i=new t.sheet.constructor({key:a,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),s=!1,u=document.querySelector('style[data-emotion="'+a+" "+r.name+'"]');return t.sheet.tags.length&&(i.before=t.sheet.tags[0]),u!==null&&(s=!0,u.setAttribute("data-emotion",a),i.hydrate([u])),o.current=[i,s],function(){i.flush()}},[t]),ey(function(){var a=o.current,i=a[0],s=a[1];if(s){a[1]=!1;return}if(r.next!==void 0&&td(t,r.next,!0),i.tags.length){var u=i.tags[i.tags.length-1].nextElementSibling;i.before=u,i.flush()}t.insert("",r,i,!1)},[t,r.name]),null});function rd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ec(t)}var Cm=function(){var t=rd.apply(void 0,arguments),n="animation-"+t.name;return{name:n,styles:"@keyframes "+n+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},TF=function e(t){for(var n=t.length,r=0,o="";r<n;r++){var a=t[r];if(a!=null){var i=void 0;switch(typeof a){case"boolean":break;case"object":{if(Array.isArray(a))i=e(a);else{i="";for(var s in a)a[s]&&s&&(i&&(i+=" "),i+=s)}break}default:i=a}i&&(o&&(o+=" "),o+=i)}}return o};function PF(e,t,n){var r=[],o=bm(e,r,n);return r.length<2?n:o+t(r)}var NF=function(t){var n=t.cache,r=t.serializedArr;return wm(function(){for(var o=0;o<r.length;o++)td(n,r[o],!1)}),null},WL=nd(function(e,t){var n=!1,r=[],o=function(){if(n&&$0)throw new Error("css can only be used during render");for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];var d=ec(l,t.registered);return r.push(d),ed(t,d,!1),t.key+"-"+d.name},a=function(){if(n&&$0)throw new Error("cx can only be used during render");for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];return PF(t.registered,o,TF(l))},i={css:o,cx:a,theme:Z.useContext(us)},s=e.children(i);return n=!0,Z.createElement(Z.Fragment,null,Z.createElement(NF,{cache:t,serializedArr:r}),s)}),OF=OR,MF=function(t){return t!=="theme"},ty=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?OF:MF},ny=function(t,n,r){var o;if(n){var a=n.shouldForwardProp;o=t.__emotion_forwardProp&&a?function(i){return t.__emotion_forwardProp(i)&&a(i)}:a}return typeof o!="function"&&r&&(o=t.__emotion_forwardProp),o},LF=!1,WF=function(t){var n=t.cache,r=t.serialized,o=t.isStringTag;return ed(n,r,o),wm(function(){return td(n,r,o)}),null},zF=function e(t,n){var r=t.__emotion_real===t,o=r&&t.__emotion_base||t,a,i;n!==void 0&&(a=n.label,i=n.target);var s=ny(t,n,r),u=s||ty(o),c=!u("as");return function(){var l=arguments,f=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(a!==void 0&&f.push("label:"+a+";"),l[0]==null||l[0].raw===void 0)f.push.apply(f,l);else{f.push(l[0][0]);for(var d=l.length,h=1;h<d;h++)f.push(l[h],l[0][h])}var p=nd(function(m,g,v){var x=c&&m.as||o,y="",b=[],w=m;if(m.theme==null){w={};for(var C in m)w[C]=m[C];w.theme=Z.useContext(us)}typeof m.className=="string"?y=bm(g.registered,b,m.className):m.className!=null&&(y=m.className+" ");var E=ec(f.concat(b),g.registered,w);y+=g.key+"-"+E.name,i!==void 0&&(y+=" "+i);var S=c&&s===void 0?ty(x):u,k={};for(var _ in m)c&&_==="as"||S(_)&&(k[_]=m[_]);return k.className=y,v&&(k.ref=v),Z.createElement(Z.Fragment,null,Z.createElement(WF,{cache:g,serialized:E,isStringTag:typeof x=="string"}),Z.createElement(x,k))});return p.displayName=a!==void 0?a:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=o,p.__emotion_styles=f,p.__emotion_forwardProp=s,Object.defineProperty(p,"toString",{value:function(){return i===void 0&&LF?"NO_COMPONENT_SELECTOR":"."+i}}),p.withComponent=function(m,g){return e(m,Ce({},n,g,{shouldForwardProp:ny(p,g,!0)})).apply(void 0,f)},p}},$F=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],H0=zF.bind();$F.forEach(function(e){H0[e]=H0(e)});let V0;typeof document=="object"&&(V0=CC({key:"css",prepend:!0}));function UF(e){const{injectFirst:t,children:n}=e;return t&&V0?et.jsx(RF,{value:V0,children:n}):n}function HF(e){return e==null||Object.keys(e).length===0}function VF(e){const{styles:t,defaultTheme:n={}}=e,r=typeof t=="function"?o=>t(HF(o)?n:o):t;return et.jsx(BF,{styles:r})}function Em(e,t){return H0(e,t)}const IC=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},jF=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:VF,StyledEngineProvider:UF,ThemeContext:us,css:rd,default:Em,internal_processStyles:IC,keyframes:Cm},Symbol.toStringTag,{value:"Module"}));function lo(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function BC(e){if(!lo(e))return e;const t={};return Object.keys(e).forEach(n=>{t[n]=BC(e[n])}),t}function Qr(e,t,n={clone:!0}){const r=n.clone?Ce({},e):e;return lo(e)&&lo(t)&&Object.keys(t).forEach(o=>{lo(t[o])&&Object.prototype.hasOwnProperty.call(e,o)&&lo(e[o])?r[o]=Qr(e[o],t[o],n):n.clone?r[o]=lo(t[o])?BC(t[o]):t[o]:r[o]=t[o]}),r}const GF=Object.freeze(Object.defineProperty({__proto__:null,default:Qr,isPlainObject:lo},Symbol.toStringTag,{value:"Module"})),qF=["values","unit","step"],KF=e=>{const t=Object.keys(e).map(n=>({key:n,val:e[n]}))||[];return t.sort((n,r)=>n.val-r.val),t.reduce((n,r)=>Ce({},n,{[r.key]:r.val}),{})};function TC(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=e,o=On(e,qF),a=KF(t),i=Object.keys(a);function s(d){return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n})`}function u(d){return`@media (max-width:${(typeof t[d]=="number"?t[d]:d)-r/100}${n})`}function c(d,h){const p=i.indexOf(h);return`@media (min-width:${typeof t[d]=="number"?t[d]:d}${n}) and (max-width:${(p!==-1&&typeof t[i[p]]=="number"?t[i[p]]:h)-r/100}${n})`}function l(d){return i.indexOf(d)+1<i.length?c(d,i[i.indexOf(d)+1]):s(d)}function f(d){const h=i.indexOf(d);return h===0?s(i[1]):h===i.length-1?u(i[h]):c(d,i[i.indexOf(d)+1]).replace("@media","@media not all and")}return Ce({keys:i,values:a,up:s,down:u,between:c,only:l,not:f,unit:n},o)}const XF={borderRadius:4};function ru(e,t){return t?Qr(e,t,{clone:!1}):e}const _m={xs:0,sm:600,md:900,lg:1200,xl:1536},ry={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${_m[e]}px)`};function _o(e,t,n){const r=e.theme||{};if(Array.isArray(t)){const a=r.breakpoints||ry;return t.reduce((i,s,u)=>(i[a.up(a.keys[u])]=n(t[u]),i),{})}if(typeof t=="object"){const a=r.breakpoints||ry;return Object.keys(t).reduce((i,s)=>{if(Object.keys(a.values||_m).indexOf(s)!==-1){const u=a.up(s);i[u]=n(t[s],s)}else{const u=s;i[u]=t[u]}return i},{})}return n(t)}function YF(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,o)=>{const a=e.up(o);return r[a]={},r},{}))||{}}function QF(e,t){return e.reduce((n,r)=>{const o=n[r];return(!o||Object.keys(o).length===0)&&delete n[r],n},t)}function ZF(e,t){if(typeof e!="object")return{};const n={},r=Object.keys(t);return Array.isArray(e)?r.forEach((o,a)=>{a<e.length&&(n[o]=!0)}):r.forEach(o=>{e[o]!=null&&(n[o]=!0)}),n}function zL({values:e,breakpoints:t,base:n}){const r=n||ZF(e,t),o=Object.keys(r);if(o.length===0)return e;let a;return o.reduce((i,s,u)=>(Array.isArray(e)?(i[s]=e[u]!=null?e[u]:e[a],a=u):typeof e=="object"?(i[s]=e[s]!=null?e[s]:e[a],a=s):i[s]=e,i),{})}function hr(e){if(typeof e!="string")throw new Error(Su(7));return e.charAt(0).toUpperCase()+e.slice(1)}const JF=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"}));function od(e,t,n=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&n){const r=`vars.${t}`.split(".").reduce((o,a)=>o&&o[a]?o[a]:null,e);if(r!=null)return r}return t.split(".").reduce((r,o)=>r&&r[o]!=null?r[o]:null,e)}function af(e,t,n,r=n){let o;return typeof e=="function"?o=e(n):Array.isArray(e)?o=e[n]||r:o=od(e,n)||r,t&&(o=t(o,r,e)),o}function At(e){const{prop:t,cssProperty:n=e.prop,themeKey:r,transform:o}=e,a=i=>{if(i[t]==null)return null;const s=i[t],u=i.theme,c=od(u,r)||{};return _o(i,s,f=>{let d=af(c,o,f);return f===d&&typeof f=="string"&&(d=af(c,o,`${t}${f==="default"?"":hr(f)}`,f)),n===!1?d:{[n]:d}})};return a.propTypes={},a.filterProps=[t],a}function eI(e){const t={};return n=>(t[n]===void 0&&(t[n]=e(n)),t[n])}const tI={m:"margin",p:"padding"},nI={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},oy={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},rI=eI(e=>{if(e.length>2)if(oy[e])e=oy[e];else return[e];const[t,n]=e.split(""),r=tI[t],o=nI[n]||"";return Array.isArray(o)?o.map(a=>r+a):[r+o]}),Sm=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],km=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Sm,...km];function tc(e,t,n,r){var o;const a=(o=od(e,t,!1))!=null?o:n;return typeof a=="number"?i=>typeof i=="string"?i:a*i:Array.isArray(a)?i=>typeof i=="string"?i:a[i]:typeof a=="function"?a:()=>{}}function PC(e){return tc(e,"spacing",8)}function nc(e,t){if(typeof t=="string"||t==null)return t;const n=Math.abs(t),r=e(n);return t>=0?r:typeof r=="number"?-r:`-${r}`}function oI(e,t){return n=>e.reduce((r,o)=>(r[o]=nc(t,n),r),{})}function aI(e,t,n,r){if(t.indexOf(n)===-1)return null;const o=rI(n),a=oI(o,r),i=e[n];return _o(e,i,a)}function NC(e,t){const n=PC(e.theme);return Object.keys(e).map(r=>aI(e,t,r,n)).reduce(ru,{})}function gt(e){return NC(e,Sm)}gt.propTypes={};gt.filterProps=Sm;function xt(e){return NC(e,km)}xt.propTypes={};xt.filterProps=km;function iI(e=8){if(e.mui)return e;const t=PC({spacing:e}),n=(...r)=>(r.length===0?[1]:r).map(a=>{const i=t(a);return typeof i=="number"?`${i}px`:i}).join(" ");return n.mui=!0,n}function ad(...e){const t=e.reduce((r,o)=>(o.filterProps.forEach(a=>{r[a]=o}),r),{}),n=r=>Object.keys(r).reduce((o,a)=>t[a]?ru(o,t[a](r)):o,{});return n.propTypes={},n.filterProps=e.reduce((r,o)=>r.concat(o.filterProps),[]),n}function ir(e){return typeof e!="number"?e:`${e}px solid`}function vr(e,t){return At({prop:e,themeKey:"borders",transform:t})}const sI=vr("border",ir),uI=vr("borderTop",ir),cI=vr("borderRight",ir),lI=vr("borderBottom",ir),fI=vr("borderLeft",ir),dI=vr("borderColor"),hI=vr("borderTopColor"),pI=vr("borderRightColor"),vI=vr("borderBottomColor"),mI=vr("borderLeftColor"),gI=vr("outline",ir),xI=vr("outlineColor"),id=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=tc(e.theme,"shape.borderRadius",4),n=r=>({borderRadius:nc(t,r)});return _o(e,e.borderRadius,n)}return null};id.propTypes={};id.filterProps=["borderRadius"];ad(sI,uI,cI,lI,fI,dI,hI,pI,vI,mI,id,gI,xI);const sd=e=>{if(e.gap!==void 0&&e.gap!==null){const t=tc(e.theme,"spacing",8),n=r=>({gap:nc(t,r)});return _o(e,e.gap,n)}return null};sd.propTypes={};sd.filterProps=["gap"];const ud=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=tc(e.theme,"spacing",8),n=r=>({columnGap:nc(t,r)});return _o(e,e.columnGap,n)}return null};ud.propTypes={};ud.filterProps=["columnGap"];const cd=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=tc(e.theme,"spacing",8),n=r=>({rowGap:nc(t,r)});return _o(e,e.rowGap,n)}return null};cd.propTypes={};cd.filterProps=["rowGap"];const yI=At({prop:"gridColumn"}),bI=At({prop:"gridRow"}),wI=At({prop:"gridAutoFlow"}),CI=At({prop:"gridAutoColumns"}),EI=At({prop:"gridAutoRows"}),_I=At({prop:"gridTemplateColumns"}),SI=At({prop:"gridTemplateRows"}),kI=At({prop:"gridTemplateAreas"}),AI=At({prop:"gridArea"});ad(sd,ud,cd,yI,bI,wI,CI,EI,_I,SI,kI,AI);function Mi(e,t){return t==="grey"?t:e}const DI=At({prop:"color",themeKey:"palette",transform:Mi}),RI=At({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Mi}),FI=At({prop:"backgroundColor",themeKey:"palette",transform:Mi});ad(DI,RI,FI);function Un(e){return e<=1&&e!==0?`${e*100}%`:e}const II=At({prop:"width",transform:Un}),Am=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=n=>{var r,o;const a=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||_m[n];return a?((o=e.theme)==null||(o=o.breakpoints)==null?void 0:o.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:Un(n)}};return _o(e,e.maxWidth,t)}return null};Am.filterProps=["maxWidth"];const BI=At({prop:"minWidth",transform:Un}),TI=At({prop:"height",transform:Un}),PI=At({prop:"maxHeight",transform:Un}),NI=At({prop:"minHeight",transform:Un});At({prop:"size",cssProperty:"width",transform:Un});At({prop:"size",cssProperty:"height",transform:Un});const OI=At({prop:"boxSizing"});ad(II,Am,BI,TI,PI,NI,OI);const rc={border:{themeKey:"borders",transform:ir},borderTop:{themeKey:"borders",transform:ir},borderRight:{themeKey:"borders",transform:ir},borderBottom:{themeKey:"borders",transform:ir},borderLeft:{themeKey:"borders",transform:ir},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:ir},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:id},color:{themeKey:"palette",transform:Mi},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Mi},backgroundColor:{themeKey:"palette",transform:Mi},p:{style:xt},pt:{style:xt},pr:{style:xt},pb:{style:xt},pl:{style:xt},px:{style:xt},py:{style:xt},padding:{style:xt},paddingTop:{style:xt},paddingRight:{style:xt},paddingBottom:{style:xt},paddingLeft:{style:xt},paddingX:{style:xt},paddingY:{style:xt},paddingInline:{style:xt},paddingInlineStart:{style:xt},paddingInlineEnd:{style:xt},paddingBlock:{style:xt},paddingBlockStart:{style:xt},paddingBlockEnd:{style:xt},m:{style:gt},mt:{style:gt},mr:{style:gt},mb:{style:gt},ml:{style:gt},mx:{style:gt},my:{style:gt},margin:{style:gt},marginTop:{style:gt},marginRight:{style:gt},marginBottom:{style:gt},marginLeft:{style:gt},marginX:{style:gt},marginY:{style:gt},marginInline:{style:gt},marginInlineStart:{style:gt},marginInlineEnd:{style:gt},marginBlock:{style:gt},marginBlockStart:{style:gt},marginBlockEnd:{style:gt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:sd},rowGap:{style:cd},columnGap:{style:ud},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Un},maxWidth:{style:Am},minWidth:{transform:Un},height:{transform:Un},maxHeight:{transform:Un},minHeight:{transform:Un},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function MI(...e){const t=e.reduce((r,o)=>r.concat(Object.keys(o)),[]),n=new Set(t);return e.every(r=>n.size===Object.keys(r).length)}function LI(e,t){return typeof e=="function"?e(t):e}function OC(){function e(n,r,o,a){const i={[n]:r,theme:o},s=a[n];if(!s)return{[n]:r};const{cssProperty:u=n,themeKey:c,transform:l,style:f}=s;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const d=od(o,c)||{};return f?f(i):_o(i,r,p=>{let m=af(d,l,p);return p===m&&typeof p=="string"&&(m=af(d,l,`${n}${p==="default"?"":hr(p)}`,p)),u===!1?m:{[u]:m}})}function t(n){var r;const{sx:o,theme:a={}}=n||{};if(!o)return null;const i=(r=a.unstable_sxConfig)!=null?r:rc;function s(u){let c=u;if(typeof u=="function")c=u(a);else if(typeof u!="object")return u;if(!c)return null;const l=YF(a.breakpoints),f=Object.keys(l);let d=l;return Object.keys(c).forEach(h=>{const p=LI(c[h],a);if(p!=null)if(typeof p=="object")if(i[h])d=ru(d,e(h,p,a,i));else{const m=_o({theme:a},p,g=>({[h]:g}));MI(m,p)?d[h]=t({sx:p,theme:a}):d=ru(d,m)}else d=ru(d,e(h,p,a,i))}),QF(f,d)}return Array.isArray(o)?o.map(s):s(o)}return t}const cs=OC();cs.filterProps=["sx"];function MC(e,t){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:n.palette.mode===e?t:{}}const WI=["breakpoints","palette","spacing","shape"];function oc(e={},...t){const{breakpoints:n={},palette:r={},spacing:o,shape:a={}}=e,i=On(e,WI),s=TC(n),u=iI(o);let c=Qr({breakpoints:s,direction:"ltr",components:{},palette:Ce({mode:"light"},r),spacing:u,shape:Ce({},XF,a)},i);return c.applyStyles=MC,c=t.reduce((l,f)=>Qr(l,f),c),c.unstable_sxConfig=Ce({},rc,i==null?void 0:i.unstable_sxConfig),c.unstable_sx=function(f){return cs({sx:f,theme:this})},c}const zI=Object.freeze(Object.defineProperty({__proto__:null,default:oc,private_createBreakpoints:TC,unstable_applyStyles:MC},Symbol.toStringTag,{value:"Module"}));function $I(e){return Object.keys(e).length===0}function UI(e=null){const t=Z.useContext(us);return!t||$I(t)?e:t}const HI=oc();function LC(e=HI){return UI(e)}const VI=["sx"],jI=e=>{var t,n;const r={systemProps:{},otherProps:{}},o=(t=e==null||(n=e.theme)==null?void 0:n.unstable_sxConfig)!=null?t:rc;return Object.keys(e).forEach(a=>{o[a]?r.systemProps[a]=e[a]:r.otherProps[a]=e[a]}),r};function Dm(e){const{sx:t}=e,n=On(e,VI),{systemProps:r,otherProps:o}=jI(n);let a;return Array.isArray(t)?a=[r,...t]:typeof t=="function"?a=(...i)=>{const s=t(...i);return lo(s)?Ce({},r,s):r}:a=Ce({},r,t),Ce({},o,{sx:a})}const GI=Object.freeze(Object.defineProperty({__proto__:null,default:cs,extendSxProp:Dm,unstable_createStyleFunctionSx:OC,unstable_defaultSxConfig:rc},Symbol.toStringTag,{value:"Module"})),ay=e=>e,qI=()=>{let e=ay;return{configure(t){e=t},generate(t){return e(t)},reset(){e=ay}}},WC=qI();function zC(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=zC(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function ld(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=zC(e))&&(r&&(r+=" "),r+=t);return r}const KI=["className","component"];function XI(e={}){const{themeId:t,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:o}=e,a=Em("div",{shouldForwardProp:s=>s!=="theme"&&s!=="sx"&&s!=="as"})(cs);return Z.forwardRef(function(u,c){const l=LC(n),f=Dm(u),{className:d,component:h="div"}=f,p=On(f,KI);return et.jsx(a,Ce({as:h,ref:c,className:ld(d,o?o(r):r),theme:t&&l[t]||l},p))})}const YI={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function fd(e,t,n="Mui"){const r=YI[t];return r?`${n}-${r}`:`${WC.generate(e)}-${t}`}function Rm(e,t,n="Mui"){const r={};return t.forEach(o=>{r[o]=fd(e,o,n)}),r}var $C={exports:{}},Ze={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fm=Symbol.for("react.element"),Im=Symbol.for("react.portal"),dd=Symbol.for("react.fragment"),hd=Symbol.for("react.strict_mode"),pd=Symbol.for("react.profiler"),vd=Symbol.for("react.provider"),md=Symbol.for("react.context"),QI=Symbol.for("react.server_context"),gd=Symbol.for("react.forward_ref"),xd=Symbol.for("react.suspense"),yd=Symbol.for("react.suspense_list"),bd=Symbol.for("react.memo"),wd=Symbol.for("react.lazy"),ZI=Symbol.for("react.offscreen"),UC;UC=Symbol.for("react.module.reference");function mr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Fm:switch(e=e.type,e){case dd:case pd:case hd:case xd:case yd:return e;default:switch(e=e&&e.$$typeof,e){case QI:case md:case gd:case wd:case bd:case vd:return e;default:return t}}case Im:return t}}}Ze.ContextConsumer=md;Ze.ContextProvider=vd;Ze.Element=Fm;Ze.ForwardRef=gd;Ze.Fragment=dd;Ze.Lazy=wd;Ze.Memo=bd;Ze.Portal=Im;Ze.Profiler=pd;Ze.StrictMode=hd;Ze.Suspense=xd;Ze.SuspenseList=yd;Ze.isAsyncMode=function(){return!1};Ze.isConcurrentMode=function(){return!1};Ze.isContextConsumer=function(e){return mr(e)===md};Ze.isContextProvider=function(e){return mr(e)===vd};Ze.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Fm};Ze.isForwardRef=function(e){return mr(e)===gd};Ze.isFragment=function(e){return mr(e)===dd};Ze.isLazy=function(e){return mr(e)===wd};Ze.isMemo=function(e){return mr(e)===bd};Ze.isPortal=function(e){return mr(e)===Im};Ze.isProfiler=function(e){return mr(e)===pd};Ze.isStrictMode=function(e){return mr(e)===hd};Ze.isSuspense=function(e){return mr(e)===xd};Ze.isSuspenseList=function(e){return mr(e)===yd};Ze.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dd||e===pd||e===hd||e===xd||e===yd||e===ZI||typeof e=="object"&&e!==null&&(e.$$typeof===wd||e.$$typeof===bd||e.$$typeof===vd||e.$$typeof===md||e.$$typeof===gd||e.$$typeof===UC||e.getModuleId!==void 0)};Ze.typeOf=mr;$C.exports=Ze;var iy=$C.exports;const JI=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function HC(e){const t=`${e}`.match(JI);return t&&t[1]||""}function VC(e,t=""){return e.displayName||e.name||HC(e)||t}function sy(e,t,n){const r=VC(t);return e.displayName||(r!==""?`${n}(${r})`:n)}function eB(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return VC(e,"Component");if(typeof e=="object")switch(e.$$typeof){case iy.ForwardRef:return sy(e,e.render,"ForwardRef");case iy.Memo:return sy(e,e.type,"memo");default:return}}}const tB=Object.freeze(Object.defineProperty({__proto__:null,default:eB,getFunctionName:HC},Symbol.toStringTag,{value:"Module"})),nB=["ownerState"],rB=["variants"],oB=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function aB(e){return Object.keys(e).length===0}function iB(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Lh(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const sB=oc(),uB=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function Gc({defaultTheme:e,theme:t,themeId:n}){return aB(t)?e:t[n]||t}function cB(e){return e?(t,n)=>n[e]:null}function wl(e,t){let{ownerState:n}=t,r=On(t,nB);const o=typeof e=="function"?e(Ce({ownerState:n},r)):e;if(Array.isArray(o))return o.flatMap(a=>wl(a,Ce({ownerState:n},r)));if(o&&typeof o=="object"&&Array.isArray(o.variants)){const{variants:a=[]}=o;let s=On(o,rB);return a.forEach(u=>{let c=!0;typeof u.props=="function"?c=u.props(Ce({ownerState:n},r,n)):Object.keys(u.props).forEach(l=>{(n==null?void 0:n[l])!==u.props[l]&&r[l]!==u.props[l]&&(c=!1)}),c&&(Array.isArray(s)||(s=[s]),s.push(typeof u.style=="function"?u.style(Ce({ownerState:n},r,n)):u.style))}),s}return o}function lB(e={}){const{themeId:t,defaultTheme:n=sB,rootShouldForwardProp:r=Lh,slotShouldForwardProp:o=Lh}=e,a=i=>cs(Ce({},i,{theme:Gc(Ce({},i,{defaultTheme:n,themeId:t}))}));return a.__mui_systemSx=!0,(i,s={})=>{IC(i,w=>w.filter(C=>!(C!=null&&C.__mui_systemSx)));const{name:u,slot:c,skipVariantsResolver:l,skipSx:f,overridesResolver:d=cB(uB(c))}=s,h=On(s,oB),p=l!==void 0?l:c&&c!=="Root"&&c!=="root"||!1,m=f||!1;let g,v=Lh;c==="Root"||c==="root"?v=r:c?v=o:iB(i)&&(v=void 0);const x=Em(i,Ce({shouldForwardProp:v,label:g},h)),y=w=>typeof w=="function"&&w.__emotion_real!==w||lo(w)?C=>wl(w,Ce({},C,{theme:Gc({theme:C.theme,defaultTheme:n,themeId:t})})):w,b=(w,...C)=>{let E=y(w);const S=C?C.map(y):[];u&&d&&S.push(A=>{const D=Gc(Ce({},A,{defaultTheme:n,themeId:t}));if(!D.components||!D.components[u]||!D.components[u].styleOverrides)return null;const T=D.components[u].styleOverrides,W={};return Object.entries(T).forEach(([$,q])=>{W[$]=wl(q,Ce({},A,{theme:D}))}),d(A,W)}),u&&!p&&S.push(A=>{var D;const T=Gc(Ce({},A,{defaultTheme:n,themeId:t})),W=T==null||(D=T.components)==null||(D=D[u])==null?void 0:D.variants;return wl({variants:W},Ce({},A,{theme:T}))}),m||S.push(a);const k=S.length-C.length;if(Array.isArray(w)&&k>0){const A=new Array(k).fill("");E=[...w,...A],E.raw=[...w.raw,...A]}const _=x(E,...S);return i.muiName&&(_.muiName=i.muiName),_};return x.withConfig&&(b.withConfig=x.withConfig),b}}const fB=lB();function sf(e,t){const n=Ce({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=Ce({},e[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const o=e[r]||{},a=t[r];n[r]={},!a||!Object.keys(a)?n[r]=o:!o||!Object.keys(o)?n[r]=a:(n[r]=Ce({},a),Object.keys(o).forEach(i=>{n[r][i]=sf(o[i],a[i])}))}else n[r]===void 0&&(n[r]=e[r])}),n}function dB(e){const{theme:t,name:n,props:r}=e;return!t||!t.components||!t.components[n]||!t.components[n].defaultProps?r:sf(t.components[n].defaultProps,r)}function hB({props:e,name:t,defaultTheme:n,themeId:r}){let o=LC(n);return r&&(o=o[r]||o),dB({theme:o,name:t,props:e})}function pB(e,t=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,n))}const vB=Object.freeze(Object.defineProperty({__proto__:null,default:pB},Symbol.toStringTag,{value:"Module"}));function Bm(e,t,n=void 0){const r={};return Object.keys(e).forEach(o=>{r[o]=e[o].reduce((a,i)=>{if(i){const s=t(i);s!==""&&a.push(s),n&&n[i]&&a.push(n[i])}return a},[]).join(" ")}),r}const mB=Z.createContext(void 0);function gB(e){const{theme:t,name:n,props:r}=e;if(!t||!t.components||!t.components[n])return r;const o=t.components[n];return o.defaultProps?sf(o.defaultProps,r):!o.styleOverrides&&!o.variants?sf(o,r):r}function xB({props:e,name:t}){const n=Z.useContext(mB);return gB({props:e,name:t,theme:{components:n}})}const yB=["className","component","disableGutters","fixed","maxWidth","classes"],bB=oc(),wB=fB("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${hr(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),CB=e=>hB({props:e,name:"MuiContainer",defaultTheme:bB}),EB=(e,t)=>{const n=u=>fd(t,u),{classes:r,fixed:o,disableGutters:a,maxWidth:i}=e,s={root:["root",i&&`maxWidth${hr(String(i))}`,o&&"fixed",a&&"disableGutters"]};return Bm(s,n,r)};function _B(e={}){const{createStyledComponent:t=wB,useThemeProps:n=CB,componentName:r="MuiContainer"}=e,o=t(({theme:i,ownerState:s})=>Ce({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!s.disableGutters&&{paddingLeft:i.spacing(2),paddingRight:i.spacing(2),[i.breakpoints.up("sm")]:{paddingLeft:i.spacing(3),paddingRight:i.spacing(3)}}),({theme:i,ownerState:s})=>s.fixed&&Object.keys(i.breakpoints.values).reduce((u,c)=>{const l=c,f=i.breakpoints.values[l];return f!==0&&(u[i.breakpoints.up(l)]={maxWidth:`${f}${i.breakpoints.unit}`}),u},{}),({theme:i,ownerState:s})=>Ce({},s.maxWidth==="xs"&&{[i.breakpoints.up("xs")]:{maxWidth:Math.max(i.breakpoints.values.xs,444)}},s.maxWidth&&s.maxWidth!=="xs"&&{[i.breakpoints.up(s.maxWidth)]:{maxWidth:`${i.breakpoints.values[s.maxWidth]}${i.breakpoints.unit}`}}));return Z.forwardRef(function(s,u){const c=n(s),{className:l,component:f="div",disableGutters:d=!1,fixed:h=!1,maxWidth:p="lg"}=c,m=On(c,yB),g=Ce({},c,{component:f,disableGutters:d,fixed:h,maxWidth:p}),v=EB(g,r);return et.jsx(o,Ce({as:f,ownerState:g,className:ld(v.root,l),ref:u},m))})}function SB(e,t){return Ce({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var Dt={},jC={exports:{}};(function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(jC);var GC=jC.exports;const kB=eo(TR),AB=eo(vB);var qC=GC;Object.defineProperty(Dt,"__esModule",{value:!0});var $L=Dt.alpha=QC;Dt.blend=zB;Dt.colorChannel=void 0;var DB=Dt.darken=Pm;Dt.decomposeColor=pr;Dt.emphasize=ZC;var RB=Dt.getContrastRatio=NB;Dt.getLuminance=uf;Dt.hexToRgb=KC;Dt.hslToRgb=YC;var FB=Dt.lighten=Nm;Dt.private_safeAlpha=OB;Dt.private_safeColorChannel=void 0;Dt.private_safeDarken=MB;Dt.private_safeEmphasize=WB;Dt.private_safeLighten=LB;Dt.recomposeColor=ls;Dt.rgbToHex=PB;var uy=qC(kB),IB=qC(AB);function Tm(e,t=0,n=1){return(0,IB.default)(e,t,n)}function KC(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let n=e.match(t);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,o)=>o<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function BB(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function pr(e){if(e.type)return e;if(e.charAt(0)==="#")return pr(KC(e));const t=e.indexOf("("),n=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,uy.default)(9,e));let r=e.substring(t+1,e.length-1),o;if(n==="color"){if(r=r.split(" "),o=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(o)===-1)throw new Error((0,uy.default)(10,o))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:n,values:r,colorSpace:o}}const XC=e=>{const t=pr(e);return t.values.slice(0,3).map((n,r)=>t.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};Dt.colorChannel=XC;const TB=(e,t)=>{try{return XC(e)}catch{return e}};Dt.private_safeColorChannel=TB;function ls(e){const{type:t,colorSpace:n}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((o,a)=>a<3?parseInt(o,10):o):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function PB(e){if(e.indexOf("#")===0)return e;const{values:t}=pr(e);return`#${t.map((n,r)=>BB(r===3?Math.round(255*n):n)).join("")}`}function YC(e){e=pr(e);const{values:t}=e,n=t[0],r=t[1]/100,o=t[2]/100,a=r*Math.min(o,1-o),i=(c,l=(c+n/30)%12)=>o-a*Math.max(Math.min(l-3,9-l,1),-1);let s="rgb";const u=[Math.round(i(0)*255),Math.round(i(8)*255),Math.round(i(4)*255)];return e.type==="hsla"&&(s+="a",u.push(t[3])),ls({type:s,values:u})}function uf(e){e=pr(e);let t=e.type==="hsl"||e.type==="hsla"?pr(YC(e)).values:e.values;return t=t.map(n=>(e.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function NB(e,t){const n=uf(e),r=uf(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function QC(e,t){return e=pr(e),t=Tm(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,ls(e)}function OB(e,t,n){try{return QC(e,t)}catch{return e}}function Pm(e,t){if(e=pr(e),t=Tm(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]*=1-t;return ls(e)}function MB(e,t,n){try{return Pm(e,t)}catch{return e}}function Nm(e,t){if(e=pr(e),t=Tm(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(e.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)e.values[n]+=(1-e.values[n])*t;return ls(e)}function LB(e,t,n){try{return Nm(e,t)}catch{return e}}function ZC(e,t=.15){return uf(e)>.5?Pm(e,t):Nm(e,t)}function WB(e,t,n){try{return ZC(e,t)}catch{return e}}function zB(e,t,n,r=1){const o=(u,c)=>Math.round((u**(1/r)*(1-n)+c**(1/r)*n)**r),a=pr(e),i=pr(t),s=[o(a.values[0],i.values[0]),o(a.values[1],i.values[1]),o(a.values[2],i.values[2])];return ls({type:"rgb",values:s})}const $B=["mode","contrastThreshold","tonalOffset"],cy={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:_u.white,default:_u.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Wh={text:{primary:_u.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:_u.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function ly(e,t,n,r){const o=r.light||r,a=r.dark||r*1.5;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:t==="light"?e.light=FB(e.main,o):t==="dark"&&(e.dark=DB(e.main,a)))}function UB(e="light"){return e==="dark"?{main:ii[200],light:ii[50],dark:ii[400]}:{main:ii[700],light:ii[400],dark:ii[800]}}function HB(e="light"){return e==="dark"?{main:ai[200],light:ai[50],dark:ai[400]}:{main:ai[500],light:ai[300],dark:ai[700]}}function VB(e="light"){return e==="dark"?{main:oi[500],light:oi[300],dark:oi[700]}:{main:oi[700],light:oi[400],dark:oi[800]}}function jB(e="light"){return e==="dark"?{main:si[400],light:si[300],dark:si[700]}:{main:si[700],light:si[500],dark:si[900]}}function GB(e="light"){return e==="dark"?{main:ui[400],light:ui[300],dark:ui[700]}:{main:ui[800],light:ui[500],dark:ui[900]}}function qB(e="light"){return e==="dark"?{main:Bs[400],light:Bs[300],dark:Bs[700]}:{main:"#ed6c02",light:Bs[500],dark:Bs[900]}}function KB(e){const{mode:t="light",contrastThreshold:n=3,tonalOffset:r=.2}=e,o=On(e,$B),a=e.primary||UB(t),i=e.secondary||HB(t),s=e.error||VB(t),u=e.info||jB(t),c=e.success||GB(t),l=e.warning||qB(t);function f(m){return RB(m,Wh.text.primary)>=n?Wh.text.primary:cy.text.primary}const d=({color:m,name:g,mainShade:v=500,lightShade:x=300,darkShade:y=700})=>{if(m=Ce({},m),!m.main&&m[v]&&(m.main=m[v]),!m.hasOwnProperty("main"))throw new Error(Su(11,g?` (${g})`:"",v));if(typeof m.main!="string")throw new Error(Su(12,g?` (${g})`:"",JSON.stringify(m.main)));return ly(m,"light",x,r),ly(m,"dark",y,r),m.contrastText||(m.contrastText=f(m.main)),m},h={dark:Wh,light:cy};return Qr(Ce({common:Ce({},_u),mode:t,primary:d({color:a,name:"primary"}),secondary:d({color:i,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:d({color:s,name:"error"}),warning:d({color:l,name:"warning"}),info:d({color:u,name:"info"}),success:d({color:c,name:"success"}),grey:BR,contrastThreshold:n,getContrastText:f,augmentColor:d,tonalOffset:r},h[t]),o)}const XB=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function YB(e){return Math.round(e*1e5)/1e5}const fy={textTransform:"uppercase"},dy='"Roboto", "Helvetica", "Arial", sans-serif';function QB(e,t){const n=typeof t=="function"?t(e):t,{fontFamily:r=dy,fontSize:o=14,fontWeightLight:a=300,fontWeightRegular:i=400,fontWeightMedium:s=500,fontWeightBold:u=700,htmlFontSize:c=16,allVariants:l,pxToRem:f}=n,d=On(n,XB),h=o/14,p=f||(v=>`${v/c*h}rem`),m=(v,x,y,b,w)=>Ce({fontFamily:r,fontWeight:v,fontSize:p(x),lineHeight:y},r===dy?{letterSpacing:`${YB(b/x)}em`}:{},w,l),g={h1:m(a,96,1.167,-1.5),h2:m(a,60,1.2,-.5),h3:m(i,48,1.167,0),h4:m(i,34,1.235,.25),h5:m(i,24,1.334,0),h6:m(s,20,1.6,.15),subtitle1:m(i,16,1.75,.15),subtitle2:m(s,14,1.57,.1),body1:m(i,16,1.5,.15),body2:m(i,14,1.43,.15),button:m(s,14,1.75,.4,fy),caption:m(i,12,1.66,.4),overline:m(i,12,2.66,1,fy),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Qr(Ce({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:o,fontWeightLight:a,fontWeightRegular:i,fontWeightMedium:s,fontWeightBold:u},g),d,{clone:!1})}const ZB=.2,JB=.14,eT=.12;function ut(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ZB})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${JB})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${eT})`].join(",")}const tT=["none",ut(0,2,1,-1,0,1,1,0,0,1,3,0),ut(0,3,1,-2,0,2,2,0,0,1,5,0),ut(0,3,3,-2,0,3,4,0,0,1,8,0),ut(0,2,4,-1,0,4,5,0,0,1,10,0),ut(0,3,5,-1,0,5,8,0,0,1,14,0),ut(0,3,5,-1,0,6,10,0,0,1,18,0),ut(0,4,5,-2,0,7,10,1,0,2,16,1),ut(0,5,5,-3,0,8,10,1,0,3,14,2),ut(0,5,6,-3,0,9,12,1,0,3,16,2),ut(0,6,6,-3,0,10,14,1,0,4,18,3),ut(0,6,7,-4,0,11,15,1,0,4,20,3),ut(0,7,8,-4,0,12,17,2,0,5,22,4),ut(0,7,8,-4,0,13,19,2,0,5,24,4),ut(0,7,9,-4,0,14,21,2,0,5,26,4),ut(0,8,9,-5,0,15,22,2,0,6,28,5),ut(0,8,10,-5,0,16,24,2,0,6,30,5),ut(0,8,11,-5,0,17,26,2,0,6,32,5),ut(0,9,11,-5,0,18,28,2,0,7,34,6),ut(0,9,12,-6,0,19,29,2,0,7,36,6),ut(0,10,13,-6,0,20,31,3,0,8,38,7),ut(0,10,13,-6,0,21,33,3,0,8,40,7),ut(0,10,14,-6,0,22,35,3,0,8,42,7),ut(0,11,14,-7,0,23,36,3,0,9,44,8),ut(0,11,15,-7,0,24,38,3,0,9,46,8)],nT=["duration","easing","delay"],rT={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},oT={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function hy(e){return`${Math.round(e)}ms`}function aT(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function iT(e){const t=Ce({},rT,e.easing),n=Ce({},oT,e.duration);return Ce({getAutoHeightDuration:aT,create:(o=["all"],a={})=>{const{duration:i=n.standard,easing:s=t.easeInOut,delay:u=0}=a;return On(a,nT),(Array.isArray(o)?o:[o]).map(c=>`${c} ${typeof i=="string"?i:hy(i)} ${s} ${typeof u=="string"?u:hy(u)}`).join(",")}},e,{easing:t,duration:n})}const sT={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},uT=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function JC(e={},...t){const{mixins:n={},palette:r={},transitions:o={},typography:a={}}=e,i=On(e,uT);if(e.vars)throw new Error(Su(18));const s=KB(r),u=oc(e);let c=Qr(u,{mixins:SB(u.breakpoints,n),palette:s,shadows:tT.slice(),typography:QB(s,a),transitions:iT(o),zIndex:Ce({},sT)});return c=Qr(c,i),c=t.reduce((l,f)=>Qr(l,f),c),c.unstable_sxConfig=Ce({},rc,i==null?void 0:i.unstable_sxConfig),c.unstable_sx=function(f){return cs({sx:f,theme:this})},c}const cT=JC();var ac={};const lT=eo(PR);var zh={exports:{}},py;function fT(){return py||(py=1,function(e){function t(n,r){if(n==null)return{};var o={};for(var a in n)if({}.hasOwnProperty.call(n,a)){if(r.includes(a))continue;o[a]=n[a]}return o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(zh)),zh.exports}const dT=eo(jF),hT=eo(GF),pT=eo(JF),vT=eo(tB),mT=eo(zI),gT=eo(GI);var fs=GC;Object.defineProperty(ac,"__esModule",{value:!0});var xT=ac.default=IT;ac.shouldForwardProp=Cl;ac.systemDefaultTheme=void 0;var rr=fs(lT),j0=fs(fT()),vy=ST(dT),yT=hT;fs(pT);fs(vT);var bT=fs(mT),wT=fs(gT);const CT=["ownerState"],ET=["variants"],_T=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function eE(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,n=new WeakMap;return(eE=function(r){return r?n:t})(e)}function ST(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var n=eE(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r}function kT(e){return Object.keys(e).length===0}function AT(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Cl(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const DT=ac.systemDefaultTheme=(0,bT.default)(),RT=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function qc({defaultTheme:e,theme:t,themeId:n}){return kT(t)?e:t[n]||t}function FT(e){return e?(t,n)=>n[e]:null}function El(e,t){let{ownerState:n}=t,r=(0,j0.default)(t,CT);const o=typeof e=="function"?e((0,rr.default)({ownerState:n},r)):e;if(Array.isArray(o))return o.flatMap(a=>El(a,(0,rr.default)({ownerState:n},r)));if(o&&typeof o=="object"&&Array.isArray(o.variants)){const{variants:a=[]}=o;let s=(0,j0.default)(o,ET);return a.forEach(u=>{let c=!0;typeof u.props=="function"?c=u.props((0,rr.default)({ownerState:n},r,n)):Object.keys(u.props).forEach(l=>{(n==null?void 0:n[l])!==u.props[l]&&r[l]!==u.props[l]&&(c=!1)}),c&&(Array.isArray(s)||(s=[s]),s.push(typeof u.style=="function"?u.style((0,rr.default)({ownerState:n},r,n)):u.style))}),s}return o}function IT(e={}){const{themeId:t,defaultTheme:n=DT,rootShouldForwardProp:r=Cl,slotShouldForwardProp:o=Cl}=e,a=i=>(0,wT.default)((0,rr.default)({},i,{theme:qc((0,rr.default)({},i,{defaultTheme:n,themeId:t}))}));return a.__mui_systemSx=!0,(i,s={})=>{(0,vy.internal_processStyles)(i,w=>w.filter(C=>!(C!=null&&C.__mui_systemSx)));const{name:u,slot:c,skipVariantsResolver:l,skipSx:f,overridesResolver:d=FT(RT(c))}=s,h=(0,j0.default)(s,_T),p=l!==void 0?l:c&&c!=="Root"&&c!=="root"||!1,m=f||!1;let g,v=Cl;c==="Root"||c==="root"?v=r:c?v=o:AT(i)&&(v=void 0);const x=(0,vy.default)(i,(0,rr.default)({shouldForwardProp:v,label:g},h)),y=w=>typeof w=="function"&&w.__emotion_real!==w||(0,yT.isPlainObject)(w)?C=>El(w,(0,rr.default)({},C,{theme:qc({theme:C.theme,defaultTheme:n,themeId:t})})):w,b=(w,...C)=>{let E=y(w);const S=C?C.map(y):[];u&&d&&S.push(A=>{const D=qc((0,rr.default)({},A,{defaultTheme:n,themeId:t}));if(!D.components||!D.components[u]||!D.components[u].styleOverrides)return null;const T=D.components[u].styleOverrides,W={};return Object.entries(T).forEach(([$,q])=>{W[$]=El(q,(0,rr.default)({},A,{theme:D}))}),d(A,W)}),u&&!p&&S.push(A=>{var D;const T=qc((0,rr.default)({},A,{defaultTheme:n,themeId:t})),W=T==null||(D=T.components)==null||(D=D[u])==null?void 0:D.variants;return El({variants:W},(0,rr.default)({},A,{theme:T}))}),m||S.push(a);const k=S.length-C.length;if(Array.isArray(w)&&k>0){const A=new Array(k).fill("");E=[...w,...A],E.raw=[...w.raw,...A]}const _=x(E,...S);return i.muiName&&(_.muiName=i.muiName),_};return x.withConfig&&(b.withConfig=x.withConfig),b}}function BT(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const TT=e=>BT(e)&&e!=="classes",ic=xT({themeId:hC,defaultTheme:cT,rootShouldForwardProp:TT});function Om(e){return xB(e)}function PT(e){return fd("MuiTypography",e)}Rm("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const NT=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],OT=e=>{const{align:t,gutterBottom:n,noWrap:r,paragraph:o,variant:a,classes:i}=e,s={root:["root",a,e.align!=="inherit"&&`align${hr(t)}`,n&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return Bm(s,PT,i)},MT=ic("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.variant&&t[n.variant],n.align!=="inherit"&&t[`align${hr(n.align)}`],n.noWrap&&t.noWrap,n.gutterBottom&&t.gutterBottom,n.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>Ce({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),my={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},LT={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},WT=e=>LT[e]||e,zT=Z.forwardRef(function(t,n){const r=Om({props:t,name:"MuiTypography"}),o=WT(r.color),a=Dm(Ce({},r,{color:o})),{align:i="inherit",className:s,component:u,gutterBottom:c=!1,noWrap:l=!1,paragraph:f=!1,variant:d="body1",variantMapping:h=my}=a,p=On(a,NT),m=Ce({},a,{align:i,color:o,className:s,component:u,gutterBottom:c,noWrap:l,paragraph:f,variant:d,variantMapping:h}),g=u||(f?"p":h[d]||my[d])||"span",v=OT(m);return et.jsx(MT,Ce({as:g,ref:n,ownerState:m,className:ld(v.root,s)},p))}),$T=Rm("MuiBox",["root"]),UT=JC(),HT=XI({themeId:hC,defaultTheme:UT,defaultClassName:$T.root,generateClassName:WC.generate});function VT(e){return fd("MuiCircularProgress",e)}Rm("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const jT=["className","color","disableShrink","size","style","thickness","value","variant"];let Cd=e=>e,gy,xy,yy,by;const Lo=44,GT=Cm(gy||(gy=Cd`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),qT=Cm(xy||(xy=Cd`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),KT=e=>{const{classes:t,variant:n,color:r,disableShrink:o}=e,a={root:["root",n,`color${hr(r)}`],svg:["svg"],circle:["circle",`circle${hr(n)}`,o&&"circleDisableShrink"]};return Bm(a,VT,t)},XT=ic("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`color${hr(n.color)}`]]}})(({ownerState:e,theme:t})=>Ce({display:"inline-block"},e.variant==="determinate"&&{transition:t.transitions.create("transform")},e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&rd(yy||(yy=Cd`
      animation: ${0} 1.4s linear infinite;
    `),GT)),YT=ic("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),QT=ic("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.circle,t[`circle${hr(n.variant)}`],n.disableShrink&&t.circleDisableShrink]}})(({ownerState:e,theme:t})=>Ce({stroke:"currentColor"},e.variant==="determinate"&&{transition:t.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&rd(by||(by=Cd`
      animation: ${0} 1.4s ease-in-out infinite;
    `),qT)),ZT=Z.forwardRef(function(t,n){const r=Om({props:t,name:"MuiCircularProgress"}),{className:o,color:a="primary",disableShrink:i=!1,size:s=40,style:u,thickness:c=3.6,value:l=0,variant:f="indeterminate"}=r,d=On(r,jT),h=Ce({},r,{color:a,disableShrink:i,size:s,thickness:c,value:l,variant:f}),p=KT(h),m={},g={},v={};if(f==="determinate"){const x=2*Math.PI*((Lo-c)/2);m.strokeDasharray=x.toFixed(3),v["aria-valuenow"]=Math.round(l),m.strokeDashoffset=`${((100-l)/100*x).toFixed(3)}px`,g.transform="rotate(-90deg)"}return et.jsx(XT,Ce({className:ld(p.root,o),style:Ce({width:s,height:s},g,u),ownerState:h,ref:n,role:"progressbar"},v,d,{children:et.jsx(YT,{className:p.svg,ownerState:h,viewBox:`${Lo/2} ${Lo/2} ${Lo} ${Lo}`,children:et.jsx(QT,{className:p.circle,style:m,ownerState:h,cx:Lo,cy:Lo,r:(Lo-c)/2,fill:"none",strokeWidth:c})})}))}),JT=_B({createStyledComponent:ic("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`maxWidth${hr(String(n.maxWidth))}`],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:e=>Om({props:e,name:"MuiContainer"})});var Mm={};Object.defineProperty(Mm,"__esModule",{value:!0});Mm.parse=iP;Mm.serialize=sP;const eP=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,tP=/^[\u0021-\u003A\u003C-\u007E]*$/,nP=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,rP=/^[\u0020-\u003A\u003D-\u007E]*$/,oP=Object.prototype.toString,aP=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function iP(e,t){const n=new aP,r=e.length;if(r<2)return n;const o=(t==null?void 0:t.decode)||uP;let a=0;do{const i=e.indexOf("=",a);if(i===-1)break;const s=e.indexOf(";",a),u=s===-1?r:s;if(i>u){a=e.lastIndexOf(";",i-1)+1;continue}const c=wy(e,a,i),l=Cy(e,i,c),f=e.slice(c,l);if(n[f]===void 0){let d=wy(e,i+1,u),h=Cy(e,u,d);const p=o(e.slice(d,h));n[f]=p}a=u+1}while(a<r);return n}function wy(e,t,n){do{const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}while(++t<n);return n}function Cy(e,t,n){for(;t>n;){const r=e.charCodeAt(--t);if(r!==32&&r!==9)return t+1}return n}function sP(e,t,n){const r=(n==null?void 0:n.encode)||encodeURIComponent;if(!eP.test(e))throw new TypeError(`argument name is invalid: ${e}`);const o=r(t);if(!tP.test(o))throw new TypeError(`argument val is invalid: ${t}`);let a=e+"="+o;if(!n)return a;if(n.maxAge!==void 0){if(!Number.isInteger(n.maxAge))throw new TypeError(`option maxAge is invalid: ${n.maxAge}`);a+="; Max-Age="+n.maxAge}if(n.domain){if(!nP.test(n.domain))throw new TypeError(`option domain is invalid: ${n.domain}`);a+="; Domain="+n.domain}if(n.path){if(!rP.test(n.path))throw new TypeError(`option path is invalid: ${n.path}`);a+="; Path="+n.path}if(n.expires){if(!cP(n.expires)||!Number.isFinite(n.expires.valueOf()))throw new TypeError(`option expires is invalid: ${n.expires}`);a+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(a+="; HttpOnly"),n.secure&&(a+="; Secure"),n.partitioned&&(a+="; Partitioned"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${n.priority}`)}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${n.sameSite}`)}return a}function uP(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function cP(e){return oP.call(e)==="[object Date]"}/**
 * react-router v7.0.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ey="popstate";function lP(e={}){function t(r,o){let{pathname:a,search:i,hash:s}=r.location;return G0("",{pathname:a,search:i,hash:s},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:Ru(o)}return dP(t,n,null,e)}function pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function va(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function fP(){return Math.random().toString(36).substring(2,10)}function _y(e,t){return{usr:e.state,key:e.key,idx:t}}function G0(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?ds(t):t,state:n,key:t&&t.key||r||fP()}}function Ru({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function ds(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function dP(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,s="POP",u=null,c=l();c==null&&(c=0,i.replaceState({...i.state,idx:c},""));function l(){return(i.state||{idx:null}).idx}function f(){s="POP";let g=l(),v=g==null?null:g-c;c=g,u&&u({action:s,location:m.location,delta:v})}function d(g,v){s="PUSH";let x=G0(m.location,g,v);c=l()+1;let y=_y(x,c),b=m.createHref(x);try{i.pushState(y,"",b)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;o.location.assign(b)}a&&u&&u({action:s,location:m.location,delta:1})}function h(g,v){s="REPLACE";let x=G0(m.location,g,v);c=l();let y=_y(x,c),b=m.createHref(x);i.replaceState(y,"",b),a&&u&&u({action:s,location:m.location,delta:0})}function p(g){let v=o.location.origin!=="null"?o.location.origin:o.location.href,x=typeof g=="string"?g:Ru(g);return x=x.replace(/ $/,"%20"),pt(v,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,v)}let m={get action(){return s},get location(){return e(o,i)},listen(g){if(u)throw new Error("A history only accepts one active listener");return o.addEventListener(Ey,f),u=g,()=>{o.removeEventListener(Ey,f),u=null}},createHref(g){return t(o,g)},createURL:p,encodeLocation(g){let v=p(g);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:h,go(g){return i.go(g)}};return m}function tE(e,t,n="/"){return hP(e,t,n,!1)}function hP(e,t,n,r){let o=typeof t=="string"?ds(t):t,a=ca(o.pathname||"/",n);if(a==null)return null;let i=nE(e);pP(i);let s=null;for(let u=0;s==null&&u<i.length;++u){let c=SP(a);s=EP(i[u],c,r)}return s}function nE(e,t=[],n=[],r=""){let o=(a,i,s)=>{let u={relativePath:s===void 0?a.path||"":s,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};u.relativePath.startsWith("/")&&(pt(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length));let c=go([r,u.relativePath]),l=n.concat(u);a.children&&a.children.length>0&&(pt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),nE(a.children,t,l,c)),!(a.path==null&&!a.index)&&t.push({path:c,score:wP(c,a.index),routesMeta:l})};return e.forEach((a,i)=>{var s;if(a.path===""||!((s=a.path)!=null&&s.includes("?")))o(a,i);else for(let u of rE(a.path))o(a,i,u)}),t}function rE(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=rE(r.join("/")),s=[];return s.push(...i.map(u=>u===""?a:[a,u].join("/"))),o&&s.push(...i),s.map(u=>e.startsWith("/")&&u===""?"/":u)}function pP(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:CP(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var vP=/^:[\w-]+$/,mP=3,gP=2,xP=1,yP=10,bP=-2,Sy=e=>e==="*";function wP(e,t){let n=e.split("/"),r=n.length;return n.some(Sy)&&(r+=bP),t&&(r+=gP),n.filter(o=>!Sy(o)).reduce((o,a)=>o+(vP.test(a)?mP:a===""?xP:yP),r)}function CP(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function EP(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let s=0;s<r.length;++s){let u=r[s],c=s===r.length-1,l=a==="/"?t:t.slice(a.length)||"/",f=cf({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},l),d=u.route;if(!f&&c&&n&&!r[r.length-1].route.index&&(f=cf({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},l)),!f)return null;Object.assign(o,f.params),i.push({params:o,pathname:go([a,f.pathname]),pathnameBase:RP(go([a,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(a=go([a,f.pathnameBase]))}return i}function cf(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_P(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce((c,{paramName:l,isOptional:f},d)=>{if(l==="*"){let p=s[d]||"";i=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const h=s[d];return f&&!h?c[l]=void 0:c[l]=(h||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:i,pattern:e}}function _P(e,t=!1,n=!0){va(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,s,u)=>(r.push({paramName:s,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function SP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return va(!1,`The URL path "${e}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ca(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function kP(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?ds(e):e;return{pathname:n?n.startsWith("/")?n:AP(n,t):t,search:FP(r),hash:IP(o)}}function AP(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function $h(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function DP(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function oE(e){let t=DP(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function aE(e,t,n,r=!1){let o;typeof e=="string"?o=ds(e):(o={...e},pt(!o.pathname||!o.pathname.includes("?"),$h("?","pathname","search",o)),pt(!o.pathname||!o.pathname.includes("#"),$h("#","pathname","hash",o)),pt(!o.search||!o.search.includes("#"),$h("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,s;if(i==null)s=n;else{let f=t.length-1;if(!r&&i.startsWith("..")){let d=i.split("/");for(;d[0]==="..";)d.shift(),f-=1;o.pathname=d.join("/")}s=f>=0?t[f]:"/"}let u=kP(o,s),c=i&&i!=="/"&&i.endsWith("/"),l=(a||i===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||l)&&(u.pathname+="/"),u}var go=e=>e.join("/").replace(/\/\/+/g,"/"),RP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),FP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function BP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var iE=["POST","PUT","PATCH","DELETE"];new Set(iE);var TP=["GET",...iE];new Set(TP);var hs=Z.createContext(null);hs.displayName="DataRouter";var Ed=Z.createContext(null);Ed.displayName="DataRouterState";var sE=Z.createContext({isTransitioning:!1});sE.displayName="ViewTransition";var PP=Z.createContext(new Map);PP.displayName="Fetchers";var NP=Z.createContext(null);NP.displayName="Await";var to=Z.createContext(null);to.displayName="Navigation";var sc=Z.createContext(null);sc.displayName="Location";var Ro=Z.createContext({outlet:null,matches:[],isDataRoute:!1});Ro.displayName="Route";var Lm=Z.createContext(null);Lm.displayName="RouteError";function OP(e,{relative:t}={}){pt(uc(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=Z.useContext(to),{hash:o,pathname:a,search:i}=cc(e,{relative:t}),s=a;return n!=="/"&&(s=a==="/"?n:go([n,a])),r.createHref({pathname:s,search:i,hash:o})}function uc(){return Z.useContext(sc)!=null}function Ya(){return pt(uc(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(sc).location}var uE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function cE(e){Z.useContext(to).static||Z.useLayoutEffect(e)}function lE(){let{isDataRoute:e}=Z.useContext(Ro);return e?XP():MP()}function MP(){pt(uc(),"useNavigate() may be used only in the context of a <Router> component.");let e=Z.useContext(hs),{basename:t,navigator:n}=Z.useContext(to),{matches:r}=Z.useContext(Ro),{pathname:o}=Ya(),a=JSON.stringify(oE(r)),i=Z.useRef(!1);return cE(()=>{i.current=!0}),Z.useCallback((u,c={})=>{if(va(i.current,uE),!i.current)return;if(typeof u=="number"){n.go(u);return}let l=aE(u,JSON.parse(a),o,c.relative==="path");e==null&&t!=="/"&&(l.pathname=l.pathname==="/"?t:go([t,l.pathname])),(c.replace?n.replace:n.push)(l,c.state,c)},[t,n,a,o,e])}Z.createContext(null);function cc(e,{relative:t}={}){let{matches:n}=Z.useContext(Ro),{pathname:r}=Ya(),o=JSON.stringify(oE(n));return Z.useMemo(()=>aE(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function LP(e,t){return fE(e,t)}function fE(e,t,n,r){var m;pt(uc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Z.useContext(to),{matches:a}=Z.useContext(Ro),i=a[a.length-1],s=i?i.params:{};i&&i.pathname;let u=i?i.pathnameBase:"/";i&&i.route;let c=Ya(),l;if(t){let g=typeof t=="string"?ds(t):t;pt(u==="/"||((m=g.pathname)==null?void 0:m.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${g.pathname}" was given in the \`location\` prop.`),l=g}else l=c;let f=l.pathname||"/",d=f;if(u!=="/"){let g=u.replace(/^\//,"").split("/");d="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let h=tE(e,{pathname:d}),p=HP(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:go([u,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:go([u,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,n,r);return t&&p?Z.createElement(sc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...l},navigationType:"POP"}},p):p}function WP(){let e=KP(),t=BP(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},t),n?Z.createElement("pre",{style:o},n):null,null)}var zP=Z.createElement(WP,null),$P=class extends Z.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?Z.createElement(Ro.Provider,{value:this.props.routeContext},Z.createElement(Lm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function UP({routeContext:e,match:t,children:n}){let r=Z.useContext(hs);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),Z.createElement(Ro.Provider,{value:e},n)}function HP(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let u=o.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);pt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,u+1))}let i=!1,s=-1;if(n)for(let u=0;u<o.length;u++){let c=o[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(s=u),c.route.id){let{loaderData:l,errors:f}=n,d=c.route.loader&&!l.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||d){i=!0,s>=0?o=o.slice(0,s+1):o=[o[0]];break}}}return o.reduceRight((u,c,l)=>{let f,d=!1,h=null,p=null;n&&(f=a&&c.route.id?a[c.route.id]:void 0,h=c.route.errorElement||zP,i&&(s<0&&l===0?(YP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,p=null):s===l&&(d=!0,p=c.route.hydrateFallbackElement||null)));let m=t.concat(o.slice(0,l+1)),g=()=>{let v;return f?v=h:d?v=p:c.route.Component?v=Z.createElement(c.route.Component,null):c.route.element?v=c.route.element:v=u,Z.createElement(UP,{match:c,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:v})};return n&&(c.route.ErrorBoundary||c.route.errorElement||l===0)?Z.createElement($P,{location:n.location,revalidation:n.revalidation,component:h,error:f,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}function Wm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function VP(e){let t=Z.useContext(hs);return pt(t,Wm(e)),t}function jP(e){let t=Z.useContext(Ed);return pt(t,Wm(e)),t}function GP(e){let t=Z.useContext(Ro);return pt(t,Wm(e)),t}function zm(e){let t=GP(e),n=t.matches[t.matches.length-1];return pt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function qP(){return zm("useRouteId")}function KP(){var r;let e=Z.useContext(Lm),t=jP("useRouteError"),n=zm("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function XP(){let{router:e}=VP("useNavigate"),t=zm("useNavigate"),n=Z.useRef(!1);return cE(()=>{n.current=!0}),Z.useCallback(async(o,a={})=>{va(n.current,uE),n.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...a}))},[e,t])}var ky={};function YP(e,t,n){ky[e]||(ky[e]=!0,va(!1,n))}Z.memo(QP);function QP({routes:e,future:t,state:n}){return fE(e,void 0,n,t)}function Hs(e){pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ZP({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){pt(!uc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),s=Z.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=ds(n));let{pathname:u="/",search:c="",hash:l="",state:f=null,key:d="default"}=n,h=Z.useMemo(()=>{let p=ca(u,i);return p==null?null:{location:{pathname:p,search:c,hash:l,state:f,key:d},navigationType:r}},[i,u,c,l,f,d,r]);return va(h!=null,`<Router basename="${i}"> is not able to match the URL "${u}${c}${l}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:Z.createElement(to.Provider,{value:s},Z.createElement(sc.Provider,{children:t,value:h}))}function JP({children:e,location:t}){return LP(q0(e),t)}function q0(e,t=[]){let n=[];return Z.Children.forEach(e,(r,o)=>{if(!Z.isValidElement(r))return;let a=[...t,o];if(r.type===Z.Fragment){n.push.apply(n,q0(r.props.children,a));return}pt(r.type===Hs,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=q0(r.props.children,a)),n.push(i)}),n}var _l="get",Sl="application/x-www-form-urlencoded";function _d(e){return e!=null&&typeof e.tagName=="string"}function e8(e){return _d(e)&&e.tagName.toLowerCase()==="button"}function t8(e){return _d(e)&&e.tagName.toLowerCase()==="form"}function n8(e){return _d(e)&&e.tagName.toLowerCase()==="input"}function r8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function o8(e,t){return e.button===0&&(!t||t==="_self")&&!r8(e)}var Kc=null;function a8(){if(Kc===null)try{new FormData(document.createElement("form"),0),Kc=!1}catch{Kc=!0}return Kc}var i8=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Uh(e){return e!=null&&!i8.has(e)?(va(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sl}"`),null):e}function s8(e,t){let n,r,o,a,i;if(t8(e)){let s=e.getAttribute("action");r=s?ca(s,t):null,n=e.getAttribute("method")||_l,o=Uh(e.getAttribute("enctype"))||Sl,a=new FormData(e)}else if(e8(e)||n8(e)&&(e.type==="submit"||e.type==="image")){let s=e.form;if(s==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=e.getAttribute("formaction")||s.getAttribute("action");if(r=u?ca(u,t):null,n=e.getAttribute("formmethod")||s.getAttribute("method")||_l,o=Uh(e.getAttribute("formenctype"))||Uh(s.getAttribute("enctype"))||Sl,a=new FormData(s,e),!a8()){let{name:c,type:l,value:f}=e;if(l==="image"){let d=c?`${c}.`:"";a.append(`${d}x`,"0"),a.append(`${d}y`,"0")}else c&&a.append(c,f)}}else{if(_d(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=_l,r=null,o=Sl,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}function $m(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function u8(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c8(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function l8(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await u8(a,n);return i.links?i.links():[]}return[]}));return p8(r.flat(1).filter(c8).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Ay(e,t,n,r,o,a){let i=(u,c)=>n[c]?u.route.id!==n[c].route.id:!0,s=(u,c)=>{var l;return n[c].pathname!==u.pathname||((l=n[c].route.path)==null?void 0:l.endsWith("*"))&&n[c].params["*"]!==u.params["*"]};return a==="assets"?t.filter((u,c)=>i(u,c)||s(u,c)):a==="data"?t.filter((u,c)=>{var f;let l=r.routes[u.route.id];if(!l||!l.hasLoader)return!1;if(i(u,c)||s(u,c))return!0;if(u.route.shouldRevalidate){let d=u.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function f8(e,t){return d8(e.map(n=>{let r=t.routes[n.route.id];if(!r)return[];let o=[r.module];return r.imports&&(o=o.concat(r.imports)),o}).flat(1))}function d8(e){return[...new Set(e)]}function h8(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function p8(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(h8(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function v8(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function m8(){let e=Z.useContext(hs);return $m(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function g8(){let e=Z.useContext(Ed);return $m(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Um=Z.createContext(void 0);Um.displayName="FrameworkContext";function dE(){let e=Z.useContext(Um);return $m(e,"You must render this element inside a <HydratedRouter> element"),e}function x8(e,t){let n=Z.useContext(Um),[r,o]=Z.useState(!1),[a,i]=Z.useState(!1),{onFocus:s,onBlur:u,onMouseEnter:c,onMouseLeave:l,onTouchStart:f}=t,d=Z.useRef(null);Z.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let m=v=>{v.forEach(x=>{i(x.isIntersecting)})},g=new IntersectionObserver(m,{threshold:.5});return d.current&&g.observe(d.current),()=>{g.disconnect()}}},[e]),Z.useEffect(()=>{if(r){let m=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(m)}}},[r]);let h=()=>{o(!0)},p=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,d,{}]:[a,d,{onFocus:Ps(s,h),onBlur:Ps(u,p),onMouseEnter:Ps(c,h),onMouseLeave:Ps(l,p),onTouchStart:Ps(f,h)}]:[!1,d,{}]}function Ps(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function y8({page:e,...t}){let{router:n}=m8(),r=Z.useMemo(()=>tE(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?Z.createElement(w8,{page:e,matches:r,...t}):(console.warn(`Tried to prefetch ${e} but no routes matched.`),null)}function b8(e){let{manifest:t,routeModules:n}=dE(),[r,o]=Z.useState([]);return Z.useEffect(()=>{let a=!1;return l8(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function w8({page:e,matches:t,...n}){let r=Ya(),{manifest:o,routeModules:a}=dE(),{loaderData:i,matches:s}=g8(),u=Z.useMemo(()=>Ay(e,t,s,o,r,"data"),[e,t,s,o,r]),c=Z.useMemo(()=>Ay(e,t,s,o,r,"assets"),[e,t,s,o,r]),l=Z.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,p=!1;if(t.forEach(g=>{var x;let v=o.routes[g.route.id];!v||!v.hasLoader||(!u.some(y=>y.route.id===g.route.id)&&g.route.id in i&&((x=a[g.route.id])!=null&&x.shouldRevalidate)||v.hasClientLoader?p=!0:h.add(g.route.id))}),h.size===0)return[];let m=v8(e);return p&&h.size>0&&m.searchParams.set("_routes",t.filter(g=>h.has(g.route.id)).map(g=>g.route.id).join(",")),[m.pathname+m.search]},[i,r,o,u,t,e,a]),f=Z.useMemo(()=>f8(c,o),[c,o]),d=b8(c);return Z.createElement(Z.Fragment,null,l.map(h=>Z.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),f.map(h=>Z.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),d.map(({key:h,link:p})=>Z.createElement("link",{key:h,...p})))}function C8(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var hE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hE&&(window.__reactRouterVersion="7.0.1")}catch{}function E8({basename:e,children:t,window:n}){let r=Z.useRef();r.current==null&&(r.current=lP({window:n,v5Compat:!0}));let o=r.current,[a,i]=Z.useState({action:o.action,location:o.location}),s=Z.useCallback(u=>{Z.startTransition(()=>i(u))},[i]);return Z.useLayoutEffect(()=>o.listen(s),[o,s]),Z.createElement(ZP,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o})}var pE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vE=Z.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:o,reloadDocument:a,replace:i,state:s,target:u,to:c,preventScrollReset:l,viewTransition:f,...d},h){let{basename:p}=Z.useContext(to),m=typeof c=="string"&&pE.test(c),g,v=!1;if(typeof c=="string"&&m&&(g=c,hE))try{let k=new URL(window.location.href),_=c.startsWith("//")?new URL(k.protocol+c):new URL(c),A=ca(_.pathname,p);_.origin===k.origin&&A!=null?c=A+_.search+_.hash:v=!0}catch{va(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=OP(c,{relative:o}),[y,b,w]=x8(r,d),C=A8(c,{replace:i,state:s,target:u,preventScrollReset:l,relative:o,viewTransition:f});function E(k){t&&t(k),k.defaultPrevented||C(k)}let S=Z.createElement("a",{...d,...w,href:g||x,onClick:v||a?t:E,ref:C8(h,b),target:u,"data-discover":!m&&n==="render"?"true":void 0});return y&&!m?Z.createElement(Z.Fragment,null,S,Z.createElement(y8,{page:x})):S});vE.displayName="Link";var _8=Z.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:o=!1,style:a,to:i,viewTransition:s,children:u,...c},l){let f=cc(i,{relative:c.relative}),d=Ya(),h=Z.useContext(Ed),{navigator:p,basename:m}=Z.useContext(to),g=h!=null&&B8(f)&&s===!0,v=p.encodeLocation?p.encodeLocation(f).pathname:f.pathname,x=d.pathname,y=h&&h.navigation&&h.navigation.location?h.navigation.location.pathname:null;n||(x=x.toLowerCase(),y=y?y.toLowerCase():null,v=v.toLowerCase()),y&&m&&(y=ca(y,m)||y);const b=v!=="/"&&v.endsWith("/")?v.length-1:v.length;let w=x===v||!o&&x.startsWith(v)&&x.charAt(b)==="/",C=y!=null&&(y===v||!o&&y.startsWith(v)&&y.charAt(v.length)==="/"),E={isActive:w,isPending:C,isTransitioning:g},S=w?t:void 0,k;typeof r=="function"?k=r(E):k=[r,w?"active":null,C?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let _=typeof a=="function"?a(E):a;return Z.createElement(vE,{...c,"aria-current":S,className:k,ref:l,style:_,to:i,viewTransition:s},typeof u=="function"?u(E):u)});_8.displayName="NavLink";var S8=Z.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=_l,action:s,onSubmit:u,relative:c,preventScrollReset:l,viewTransition:f,...d},h)=>{let p=F8(),m=I8(s,{relative:c}),g=i.toLowerCase()==="get"?"get":"post",v=typeof s=="string"&&pE.test(s),x=y=>{if(u&&u(y),y.defaultPrevented)return;y.preventDefault();let b=y.nativeEvent.submitter,w=(b==null?void 0:b.getAttribute("formmethod"))||i;p(b||y.currentTarget,{fetcherKey:t,method:w,navigate:n,replace:o,state:a,relative:c,preventScrollReset:l,viewTransition:f})};return Z.createElement("form",{ref:h,method:g,action:m,onSubmit:r?u:x,...d,"data-discover":!v&&e==="render"?"true":void 0})});S8.displayName="Form";function k8(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mE(e){let t=Z.useContext(hs);return pt(t,k8(e)),t}function A8(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let s=lE(),u=Ya(),c=cc(e,{relative:a});return Z.useCallback(l=>{if(o8(l,t)){l.preventDefault();let f=n!==void 0?n:Ru(u)===Ru(c);s(e,{replace:f,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[u,s,c,n,r,t,e,o,a,i])}var D8=0,R8=()=>`__${String(++D8)}__`;function F8(){let{router:e}=mE("useSubmit"),{basename:t}=Z.useContext(to),n=qP();return Z.useCallback(async(r,o={})=>{let{action:a,method:i,encType:s,formData:u,body:c}=s8(r,t);if(o.navigate===!1){let l=o.fetcherKey||R8();await e.fetch(l,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:u,body:c,formMethod:o.method||i,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:u,body:c,formMethod:o.method||i,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function I8(e,{relative:t}={}){let{basename:n}=Z.useContext(to),r=Z.useContext(Ro);pt(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...cc(e||".",{relative:t})},i=Ya();if(e==null){a.search=i.search;let s=new URLSearchParams(a.search),u=s.getAll("index");if(u.some(l=>l==="")){s.delete("index"),u.filter(f=>f).forEach(f=>s.append("index",f));let l=s.toString();a.search=l?`?${l}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:go([n,a.pathname])),Ru(a)}function B8(e,t={}){let n=Z.useContext(sE);pt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=mE("useViewTransitionState"),o=cc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=ca(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=ca(n.nextLocation.pathname,r)||n.nextLocation.pathname;return cf(o.pathname,i)!=null||cf(o.pathname,a)!=null}new TextEncoder;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var gE=function(e,t){return(gE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])})(e,t)};function Br(e,t){function n(){this.constructor=e}gE(e,t),e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function ve(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(c){try{u(r.next(c))}catch(l){a(l)}}function s(c){try{u(r.throw(c))}catch(l){a(l)}}function u(c){c.done?o(c.value):new n(function(l){l(c.value)}).then(i,s)}u((r=r.apply(e,[])).next())})}function me(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(l[0]===6&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(f){l=[6,f],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([u,c])}}}var xE=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=t,this.platform=n},e.prototype.registerFlag=function(t,n,r){if(this.flagRegistry[t]={evaluationFn:n,setHook:r},this.urlFlags[t]!=null){var o=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+o+"."),this.set(t,o)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,n){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=n,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(n)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,o=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(a){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return T8(r,i[0],i[1]),i.join("=")}),r);"tfjsflags"in o&&o.tfjsflags.split(",").forEach(function(a){var i=a.split(":"),s=i[0],u=i[1];t.urlFlags[s]=function(c,l){if((l=l.toLowerCase())==="true"||l==="false")return l==="true";if(""+ +l===l)return+l;throw new Error("Could not parse value flag value "+l+" for flag "+c+".")}(s,u)})}},e}();function T8(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}function ee(){return Hm}var Hm=null,Zi=new Map,Fu=new Map;function Vm(e,t){var n=Gm(e,t);return Zi.get(n)}function yE(e){return Fu.get(e)}function K0(e){for(var t=Zi.entries(),n=[];;){var r=t.next(),o=r.done,a=r.value;if(o)break;var i=a[0],s=a[1];i.split("_")[0]===e&&n.push(s)}return n}function jm(e){var t=e.kernelName,n=e.backendName,r=Gm(t,n);if(Zi.has(r))throw new Error("The kernel '"+t+"' for backend '"+n+"' is already registered");Zi.set(r,e)}function bE(e){var t=e.kernelName;Fu.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),Fu.set(t,e)}function P8(e,t){var n=Gm(e,t);if(!Zi.has(n))throw new Error("The kernel '"+e+"' for backend '"+t+"' is not registered");Zi.delete(n)}function N8(e){if(!Fu.has(e))throw new Error("The gradient '"+e+"' for backend is not registered");Fu.delete(e)}function Gm(e,t){return t+"_"+e}function Dy(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function lf(e,t,n){return Math.max(e,Math.min(t,n))}function qm(e){return e%2==0?e:e+1}function wE(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function I(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function ze(e,t,n){n===void 0&&(n=""),I(Bt(e,t),function(){return n+" Shapes "+e+" and "+t+" must match"})}function Qa(e){I(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function So(e,t,n){if(t===void 0&&(t=[]),n===void 0&&(n=!1),t==null&&(t=[]),Array.isArray(e)||en(e)&&!n)for(var r=0;r<e.length;++r)So(e[r],t,n);else t.push(e);return t}function ge(e){if(e.length===0)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function Bt(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function bt(e){return e%1==0}function CE(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function ff(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function La(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function X0(e,t,n){return t===void 0&&(t=function(r){return 0}),new Promise(function(r,o){var a=0,i=function(){if(e())r();else{a++;var s=t(a);n!=null&&a>=n?o():setTimeout(i,s)}};i()})}function EE(e,t){for(var n=1,r=-1,o=0;o<e.length;++o)if(e[o]>=0)n*=e[o];else if(e[o]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+o);r=o}else if(e[o]<0)throw Error("Shapes can not be < 0. Found "+e[o]+" at dim "+o);if(r===-1){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(n===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var a=e.slice();return a[r]=t/n,a}function Mt(e,t){var n=t.length;return I((e=e==null?t.map(function(r,o){return o}):[].concat(e)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e}),I(e.every(function(r){return bt(r)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(r){return r<0?n+r:r})}function jo(e,t){for(var n=[],r=[],o=t!=null&&Array.isArray(t)&&t.length===0,a=t==null||o?null:Mt(t,e).sort(),i=0,s=0;s<e.length;++s){if(a!=null){if(a[i]===s&&e[s]!==1)throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(a[i]==null||a[i]>s)&&e[s]===1&&(n.push(e[s]),r.push(s)),a[i]<=s&&i++}e[s]!==1&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function Ji(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function Iu(e,t){var n=null;if(e==null||e==="float32")n=new Float32Array(t);else if(e==="int32")n=new Int32Array(t);else if(e==="bool")n=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);n=new Array(t)}return n}function _E(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function SE(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function kE(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function en(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function Km(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function AE(e){if(e==null)return 0;var t=0;return e.forEach(function(n){return t+=n.length}),t}function Ko(e){return typeof e=="string"||e instanceof String}function DE(e){return typeof e=="boolean"}function RE(e){return typeof e=="number"}function ps(e){return Array.isArray(e)?ps(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":RE(e)?"float32":Ko(e)?"string":DE(e)?"bool":"float32"}function la(e){return!!(e&&e.constructor&&e.call&&e.apply)}function df(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function Ar(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function Xm(e,t,n){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=So(e)),n&&_E(e,t),function(a,i){return a instanceof Float32Array&&i==="float32"||a instanceof Int32Array&&i==="int32"||a instanceof Uint8Array&&i==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var r=new Uint8Array(e.length),o=0;o<r.length;++o)Math.round(e[o])!==0&&(r[o]=1);return r}throw new Error("Unknown data type "+t)}function Y0(e,t){if(e.length===0)return t[0];var n=e.reduce(function(r,o){return r*o});if(n===0)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function r(o,a,i){var s=new Array;if(a.length===1)for(var u=a[0],c=0;c<u;c++)s[c]=i[o+c];else{u=a[0];var l=a.slice(1),f=l.reduce(function(d,h){return d*h});for(c=0;c<u;c++)s[c]=r(o+c*f,l,i)}return s}(0,e,t)}function Ym(e,t){for(var n=vs(e,t),r=0;r<n.length;r++)n[r]=1;return n}function vs(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function Er(){return ee().platform.now()}function Qm(e){e.forEach(function(t){I(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function FE(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",ee().platform.encode(e,t)}function Bu(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",ee().platform.decode(e,t)}function Q0(e,t,n){if(t===0)return 0;if(t===1)return e[0];for(var r=e[e.length-1],o=0;o<e.length-1;++o)r+=n[o]*e[o];return r}function IE(e,t,n){if(t===0)return[];if(t===1)return[e];for(var r=new Array(t),o=0;o<r.length-1;++o)r[o]=Math.floor(e/n[o]),e-=r[o]*n[o];return r[r.length-1]=e,r}var O8=Object.freeze({shuffle:Dy,clamp:lf,nearestLargerEven:qm,sum:wE,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var o=Number(e[r])-Number(t[r]);n+=o*o}return n},assert:I,assertShapesMatch:ze,assertNonNull:Qa,flatten:So,sizeFromShape:ge,isScalarShape:function(e){return e.length===0},arraysEqual:Bt,isInt:bt,tanh:CE,sizeToSquarishShape:ff,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return Dy(t),t},rightPad:La,repeatedTry:X0,inferFromImplicitShape:EE,parseAxisParam:Mt,squeezeShape:jo,getTypedArrayFromDType:Ji,getArrayFromDType:Iu,checkConversionForErrors:_E,isValidDtype:SE,hasEncodingLoss:kE,isTypedArray:en,bytesPerElement:Km,bytesFromStringArray:AE,isString:Ko,isBoolean:DE,isNumber:RE,inferDtype:ps,isFunction:la,nearestDivisor:df,computeStrides:Ar,toTypedArray:Xm,toNestedArray:Y0,makeOnesTypedArray:Ym,makeZerosTypedArray:vs,now:Er,assertNonNegativeIntegerDimensions:Qm,fetch:function(e,t){return ee().platform.fetch(e,t)},encodeString:FE,decodeString:Bu,locToIndex:Q0,indexToLoc:IE}),M8=function(){function e(t,n){this.backendTimer=t,this.logger=n,n==null&&(this.logger=new L8)}return e.prototype.profileKernel=function(t,n,r){var o,a=this,i=this.backendTimer.time(function(){o=r()});return o.forEach(function(s){s.data().then(function(u){(function(c,l,f){if(l!=="float32")return!1;for(var d=0;d<c.length;d++){var h=c[d];if(isNaN(h)||!isFinite(h))return console.warn("Found "+h+" in the result of '"+f+"'"),!0}})(u,s.dtype,t),i.then(function(c){var l="";c.getExtraProfileInfo!=null&&(l=c.getExtraProfileInfo()),a.logger.logKernelProfile(t,s,u,c.kernelMs,n,l)})})}),o},e}(),L8=function(){function e(){}return e.prototype.logKernelProfile=function(t,n,r,o,a,i){var s=typeof o=="number"?La(o+"ms",9):o.error,u=La(t,25),c=n.rank,l=n.size,f=La(n.shape.toString(),14),d="";for(var h in a){var p=a[h].shape||n.shape,m=p.length;d+=h+": "+m+"D "+(m>0?p:"")+" "}console.log("%c"+u+"	%c"+s+"	%c"+c+"D "+f+"	%c"+l+"	%c"+d+"	%c"+i,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),Ry=20,Ns=3,Hh=7;function W8(e,t,n,r){var o=Ar(t),a=function(c,l,f,d){var h=ge(l),p=d[d.length-1],m=new Array(p).fill(0),g=l.length,v=f==="complex64"?Ms(c):c;if(g>1)for(var x=0;x<h/p;x++)for(var y=x*p,b=0;b<p;b++)m[b]=Math.max(m[b],Os(v[y+b],0,f).length);return m}(e,t,n,o),i=t.length,s=function c(l,f,d,h,p,m){m===void 0&&(m=!0);var g=d==="complex64"?2:1,v=f[0],x=f.length;if(x===0)return d==="complex64"?[Os(Ms(l)[0],0,d)]:d==="bool"?[BE(l[0])]:[l[0].toString()];if(x===1){if(v>Ry){var y=Ns*g,b=Array.from(l.slice(0,y)),w=Array.from(l.slice((v-Ns)*g,v*g));return d==="complex64"&&(b=Ms(b),w=Ms(w)),["["+b.map(function($,q){return Os($,p[q],d)}).join(", ")+", ..., "+w.map(function($,q){return Os($,p[v-Ns+q],d)}).join(", ")+"]"]}return["["+(d==="complex64"?Ms(l):Array.from(l)).map(function($,q){return Os($,p[q],d)}).join(", ")+"]"]}var C=f.slice(1),E=h.slice(1),S=h[0]*g,k=[];if(v>Ry){for(var _=0;_<Ns;_++){var A=(D=_*S)+S;k.push.apply(k,c(l.slice(D,A),C,d,E,p,!1))}for(k.push("..."),_=v-Ns;_<v;_++)A=(D=_*S)+S,k.push.apply(k,c(l.slice(D,A),C,d,E,p,_===v-1))}else for(_=0;_<v;_++){var D;A=(D=_*S)+S,k.push.apply(k,c(l.slice(D,A),C,d,E,p,_===v-1))}var T=x===2?",":"";for(k[0]="["+k[0]+T,_=1;_<k.length-1;_++)k[_]=" "+k[_]+T;var W=`,
`;for(_=2;_<x;_++)W+=`
`;return k[k.length-1]=" "+k[k.length-1]+"]"+(m?"":W),k}(e,t,n,o,a),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+i),u.push("  shape: ["+t+"]"),u.push("  values:")),u.push(s.map(function(c){return"    "+c}).join(`
`)),u.join(`
`)}function Os(e,t,n){return La(Array.isArray(e)?parseFloat(e[0].toFixed(Hh))+" + "+parseFloat(e[1].toFixed(Hh))+"j":Ko(e)?"'"+e+"'":n==="bool"?BE(e):parseFloat(e.toFixed(Hh)).toString(),t)}function BE(e){return e===0?"false":"true"}function Ms(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var es=function(){function e(t,n,r){var o=this;if(this.dtype=n,this.shape=t.slice(),this.size=ge(t),r!=null){var a=r.length;I(a===this.size,function(){return"Length of values '"+a+"' does not match the size inferred by the shape '"+o.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Iu(n,this.size),this.strides=Ar(t)}return e.prototype.set=function(t){for(var n=this,r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];r.length===0&&(r=[0]),I(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var a=this.locToIndex(r);this.values[a]=t},e.prototype.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];t.length===0&&(t=[0]);for(var r=0,o=0,a=t;o<a.length;o++){var i=a[o];if(i<0||i>=this.shape[r]){var s="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(s)}r++}for(var u=t[t.length-1],c=0;c<t.length-1;++c)u+=this.strides[c]*t[c];return this.values[u]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var n=t[t.length-1],r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return n},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(t/this.strides[r]),t-=n[r]*this.strides[r];return n[n.length-1]=t,n},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Gr().makeTensor(this.values,this.shape,this.dtype)},e}(),Gr=null,J=null,TE=null,Je=function(){function e(t,n,r,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=n||"float32",this.size=ge(t),this.strides=Ar(t),this.dataId=r,this.id=o,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),I(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,n){return this.throwIfDisposed(),this.reshape([t,n])},e.prototype.as3D=function(t,n,r){return this.throwIfDisposed(),this.reshape([t,n,r])},e.prototype.as4D=function(t,n,r,o){return this.throwIfDisposed(),this.reshape([t,n,r,o])},e.prototype.as5D=function(t,n,r,o,a){return this.throwIfDisposed(),this.reshape([t,n,r,o,a])},e.prototype.asType=function(t){return this.throwIfDisposed(),J.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return ve(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,J.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return J.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return ve(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return t=n.sent(),[2,Y0(this.shape,t)]}})})},e.prototype.arraySync=function(){return Y0(this.shape,this.dataSync())},e.prototype.data=function(){return ve(this,void 0,void 0,function(){var t,n;return me(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),t=Gr().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:n=r.sent();try{return[2,n.map(function(o){return Bu(o)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Gr().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(n){return Bu(n)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return ve(this,void 0,void 0,function(){var t;return me(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,Gr().read(this.dataId)];case 1:return t=n.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Gr().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),J.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),J.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),J.expandDims(this,t)},e.prototype.cumsum=function(t,n,r){return t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1),J.cumsum(this,t,n,r)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),J.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),J.clone(this)},e.prototype.oneHot=function(t,n,r){return this.throwIfDisposed(),J.oneHot(this,t,n,r)},e.prototype.toString=function(t){return t===void 0&&(t=!1),W8(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),J.tile(this,t)},e.prototype.gather=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),J.gather(this,t,n)},e.prototype.matMul=function(t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),J.matMul(this,t,n,r)},e.prototype.dot=function(t){return this.throwIfDisposed(),J.dot(this,t)},e.prototype.norm=function(t,n,r){return t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),J.norm(this,t,n,r)},e.prototype.slice=function(t,n){return this.throwIfDisposed(),J.slice(this,t,n)},e.prototype.reverse=function(t){return this.throwIfDisposed(),J.reverse(this,t)},e.prototype.concat=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),J.concat([this].concat(t),n)},e.prototype.split=function(t,n){return n===void 0&&(n=0),this.throwIfDisposed(),J.split(this,t,n)},e.prototype.stack=function(t,n){return n===void 0&&(n=0),J.stack([this,t],n)},e.prototype.unstack=function(t){return t===void 0&&(t=0),J.unstack(this,t)},e.prototype.pad=function(t,n){return n===void 0&&(n=0),J.pad(this,t,n)},e.prototype.batchNormalization=function(t,n,r,o,a){return r===void 0&&(r=.001),TE("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,n,a,o,r)},e.prototype.batchNorm=function(t,n,r,o,a){return a===void 0&&(a=.001),this.throwIfDisposed(),J.batchNorm(this,t,n,r,o,a)},e.prototype.all=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.all(this,t,n)},e.prototype.any=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.any(this,t,n)},e.prototype.logSumExp=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.logSumExp(this,t,n)},e.prototype.sum=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.sum(this,t,n)},e.prototype.prod=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.prod(this,t,n)},e.prototype.mean=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.mean(this,t,n)},e.prototype.min=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.min(this,t,n)},e.prototype.max=function(t,n){return t===void 0&&(t=null),n===void 0&&(n=!1),this.throwIfDisposed(),J.max(this,t,n)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),J.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),J.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),J.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),J.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),J.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),J.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),J.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),J.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),J.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),J.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),J.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),J.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),J.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),J.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),J.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),J.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),J.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),J.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),J.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),J.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),J.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),J.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),J.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),J.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),J.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),J.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),J.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),J.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),J.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),J.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),J.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),J.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),J.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),J.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),J.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),J.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),J.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),J.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),J.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),J.logicalXor(this,t)},e.prototype.where=function(t,n){return this.throwIfDisposed(),J.where(t,this,n)},e.prototype.neg=function(){return this.throwIfDisposed(),J.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),J.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),J.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),J.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),J.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),J.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),J.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),J.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),J.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),J.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),J.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),J.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),J.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),J.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),J.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),J.abs(this)},e.prototype.clipByValue=function(t,n){return this.throwIfDisposed(),J.clipByValue(this,t,n)},e.prototype.relu=function(){return this.throwIfDisposed(),J.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),J.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),J.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),J.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),J.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),J.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),J.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),J.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),J.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),J.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),J.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),J.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),J.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),J.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),J.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),J.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),J.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),J.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),J.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),J.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),J.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),J.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),J.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),J.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),J.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),J.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),J.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),J.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),J.image.resizeBilinear(this,t,n)},e.prototype.resizeNearestNeighbor=function(t,n){return n===void 0&&(n=!1),this.throwIfDisposed(),J.image.resizeNearestNeighbor(this,t,n)},e.prototype.conv1d=function(t,n,r,o,a,i){return o===void 0&&(o="NWC"),a===void 0&&(a=1),this.throwIfDisposed(),J.conv1d(this,t,n,r,o,a,i)},e.prototype.conv2d=function(t,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),J.conv2d(this,t,n,r,o,a,i)},e.prototype.conv2dTranspose=function(t,n,r,o,a){return this.throwIfDisposed(),J.conv2dTranspose(this,t,n,r,o,a)},e.prototype.depthwiseConv2D=function(t,n,r,o,a,i){return o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]),this.throwIfDisposed(),J.depthwiseConv2d(this,t,n,r,o,a,i)},e.prototype.separableConv2d=function(t,n,r,o,a,i){return a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC"),this.throwIfDisposed(),J.separableConv2d(this,t,n,r,o,a,i)},e.prototype.avgPool=function(t,n,r,o){return this.throwIfDisposed(),J.avgPool(this,t,n,r,o)},e.prototype.maxPool=function(t,n,r,o){return this.throwIfDisposed(),J.maxPool(this,t,n,r,o)},e.prototype.localResponseNormalization=function(t,n,r,o){return t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5),J.localResponseNormalization(this,t,n,r,o)},e.prototype.pool=function(t,n,r,o,a){return this.throwIfDisposed(),J.pool(this,t,n,r,o,a)},e.prototype.variable=function(t,n,r){return t===void 0&&(t=!0),this.throwIfDisposed(),Gr().makeVariable(this,t,n,r)},e.prototype.unsortedSegmentSum=function(t,n){return this.throwIfDisposed(),J.unsortedSegmentSum(this,t,n)},e.prototype.batchToSpaceND=function(t,n){return this.throwIfDisposed(),J.batchToSpaceND(this,t,n)},e.prototype.spaceToBatchND=function(t,n){return this.throwIfDisposed(),J.spaceToBatchND(this,t,n)},e.prototype.topk=function(t,n){return t===void 0&&(t=1),n===void 0&&(n=!0),this.throwIfDisposed(),J.topk(this,t,n)},e.prototype.stridedSlice=function(t,n,r,o,a,i,s,u){return o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),this.throwIfDisposed(),J.stridedSlice(this,t,n,r,o,a,i,s,u)},e.prototype.depthToSpace=function(t,n){return this.throwIfDisposed(),J.depthToSpace(this,t,n)},e.prototype.fft=function(){return this.throwIfDisposed(),J.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),J.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),J.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),J.spectral.irfft(this)},e}();Object.defineProperty(Je,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var Z0,J0,ev,tv,nv,ja=function(e){function t(n,r,o,a){var i=e.call(this,n.shape,n.dtype,n.dataId,a)||this;return i.trainable=r,i.name=o,i}return Br(t,e),t.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!Bt(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");Gr().disposeTensor(this),this.dataId=n.dataId,Gr().incRef(this,null)},t.prototype.dispose=function(){Gr().disposeVariable(this),this.isDisposedInternal=!0},t}(Je);Object.defineProperty(ja,Symbol.hasInstance,{value:function(e){return e instanceof Je&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(Z0||(Z0={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(J0||(J0={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(ev||(ev={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(tv||(tv={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(nv||(nv={}));var z8={float32:tv,int32:J0,bool:ev,complex64:nv};function jt(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return z8[e][t]}function kl(e){return jt(e,"int32")}function ft(e,t){if(e.dtype===t.dtype)return[e,t];var n=jt(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function PE(e,t){I(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function Zm(e){var t=[];return function n(r,o,a){if(r!=null){if(r instanceof Je)return void o.push(r);if(i=r,!(!Array.isArray(i)&&typeof i!="object")){var i,s=r;for(var u in s){var c=s[u];a.has(c)||(a.add(c),n(c,o,a))}}}}(e,t,new Set),t}var Vh,$8=Object.freeze({makeTypesMatch:ft,assertTypesMatch:PE,isTensorInList:function(e,t){return t.some(function(n){return n.id===e.id})},getTensorsInContainer:Zm}),Fy=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),U8=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Fy}return e.prototype.ready=function(){return ve(this,void 0,void 0,function(){var t,n,r;return me(this,function(o){switch(o.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),n=0,o.label=1;case 1:return n<t.length?(r=t[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return o.sent()?[4,this.setBackend(r)]:[3,4];case 3:return o.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),n=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,n,r){return r===void 0&&(r=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:n,priority:r},!0)},e.prototype.setBackend=function(t){return ve(this,void 0,void 0,function(){var n,r,o;return me(this,function(a){switch(a.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(t),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return o=a.sent(),[3,3];case 2:o=r,a.label=3;case 3:if(!o)return[2,!1];a.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new M8(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;K0(this.backendName).forEach(function(n){n.setupFunc!=null&&n.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var n=this;K0(t).forEach(function(r){r.disposeFunc!=null&&r.disposeFunc(n.registry[t])})},e.prototype.initializeBackend=function(t){var n=this,r=this.registryFactory[t];if(r==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var o=r.factory();if(Promise.resolve(o)===o){var a=++this.pendingBackendInitId,i=o.then(function(s){return!(a<n.pendingBackendInitId)&&(n.registry[t]=s,n.pendingBackendInit=null,!0)}).catch(function(s){return!(a<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),!1)});return this.pendingBackendInit=i,{success:i,asyncInit:!0}}return this.registry[t]=o,{success:!0,asyncInit:!1}}catch(s){return console.warn("Initialization of backend "+t+" failed"),console.warn(s.stack||s.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return t.registryFactory[r].priority-t.registryFactory[n].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),n=0;n<t.length;n++){var r=t[n],o=this.initializeBackend(r),a=o.success,i=o.asyncInit;if(i||a)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,n){var r=this.state.tensorInfo.get(n),o=r.backend,a=this.readSync(n);o.disposeData(n),r.backend=t,t.move(n,a,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,n){var r,o=this,a=null;if(n==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");n=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");a=t}return this.scopedRun(function(){return o.startScope(a)},function(){return o.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},e.prototype.scopedRun=function(t,n,r){t();try{var o=r();return n(),o}catch(a){throw n(),a}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var n=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),r={x:t};return this.addTapeNode(this.state.activeScope.name,r,[n],function(o){return{x:function(){return o.toFloat()}}},[]),n},e.prototype.runKernel=function(t,n,r,o,a){return this.runKernelFunc(null,n,null,t,r,o,a)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,n,r){var o=this.backend.numDataIds(),a=0;r.forEach(function(u){a+=u.dtype==="complex64"?3:1});var i=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],s=o-n-a-i;if(s>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+s+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,n,r,o,a,i,s){var u,c=this;i===void 0&&(i=[]),s===void 0&&(s=[]);var l=[],f=this.isTapeOn();o==null&&(o=this.state.activeScope!=null?this.state.activeScope.name:"");var d,h=function(x){f&&(l=x.map(function(y){return c.keep(c.clone(y))}))},p=this.state.numBytes,m=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var g,v=Vm(o,this.backendName);return d=v!=null?function(){var x=c.backend.numDataIds();g=v.kernelFunc({inputs:n,attrs:a,backend:c.backend});var y=Array.isArray(g)?g:[g];c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(o,x,y);var b=y.map(function(C){var E=C.dataId,S=C.shape,k=C.dtype;return c.makeTensorFromDataId(E,S,k)}),w=b.filter(function(C,E){return s[E]});return h((i||[]).slice().concat(w)),b}:function(){var x=c.backend.numDataIds();g=c.tidy(function(){return t(c.backend,h)});var y=Array.isArray(g)?g:[g];return c.shouldCheckForMemLeaks()&&c.checkKernelForMemLeak(o,x,y),y},this.scopedRun(function(){return c.state.kernelDepth++},function(){return c.state.kernelDepth--},function(){u=c.ENV.getBool("DEBUG")?c.profiler.profileKernel(o,n,function(){return d()}):d()}),f&&this.addTapeNode(o,n,u,r,l),this.state.profiling&&this.state.activeProfile.kernels.push({name:o,bytesAdded:this.state.numBytes-p,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-m,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(x){return n[x].shape}),outputShapes:u.map(function(x){return x.shape})}),Array.isArray(g)?u:u[0]},e.prototype.makeTensor=function(t,n,r,o){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;var a=t;r==="string"&&Ko(t[0])&&(a=t.map(function(l){return FE(l)}));var i=o.write(a,n,r),s=new Je(n,r,i,this.nextTensorId());if(this.incRef(s,o),r==="string"){var u=this.state.tensorInfo.get(i),c=AE(a);this.state.numBytes+=c-u.bytes,u.bytes=c}return s},e.prototype.makeTensorFromDataId=function(t,n,r,o){var a=new Je(n,r=r||"float32",t,this.nextTensorId());return this.incRef(a,o),a},e.prototype.makeVariable=function(t,n,r,o){n===void 0&&(n=!0),r=r||this.nextVariableId().toString(),o!=null&&o!==t.dtype&&(t=t.asType(o));var a=new ja(t,n,r,this.nextTensorId());if(this.state.registeredVariables[a.name]!=null)throw new Error("Variable with name "+a.name+" was already registered");return this.state.registeredVariables[a.name]=a,this.incRef(a,this.backend),a},e.prototype.incRef=function(t,n){var r=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var o=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(o=t.size*Km(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:n||this.backend,dtype:t.dtype,shape:t.shape,bytes:o,refCount:0}),this.state.numBytes+=o}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof ja||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(t.dataId);n.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var n=this.state.registeredVariables[t];this.disposeVariable(n)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return ve(this,void 0,void 0,function(){var n,r;return me(this,function(o){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(a){return a.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,n,r,o,a){var i=this,s={id:this.state.nextTapeNodeId++,kernelName:t,inputs:n,outputs:r,saved:a},u=yE(t);u!=null&&(o=u.gradFunc),o!=null&&(s.gradient=function(c){return c=c.map(function(l,f){if(l==null){var d=r[f],h=vs(d.size,d.dtype);return i.makeTensor(h,d.shape,d.dtype)}return l}),o(c.length>1?c:c[0],a)}),this.state.activeTape.push(s)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(n.name=t),this.state.scopeStack.push(n),this.state.activeScope=n},e.prototype.endScope=function(t){for(var n=this,r=Zm(t),o=new Set(r.map(function(u){return u.id})),a=0;a<this.state.activeScope.track.length;a++){var i=this.state.activeScope.track[a];i.kept||o.has(i.id)||i.dispose()}var s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==s.id||n.track(u)})},e.prototype.gradients=function(t,n,r,o){var a=this;if(o===void 0&&(o=!1),I(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var i=this.scopedRun(function(){return a.startTape()},function(){return a.endTape()},function(){return a.tidy("forward",t)});I(i instanceof Je,function(){return"The result y returned by f() must be a tensor."});var s=function(u,c,l){for(var f={},d={},h=0;h<c.length;h++)f[c[h].id]=!0;for(h=0;h<u.length;h++){var p=(C=u[h]).inputs;for(var m in p){for(var g=p[m],v=!1,x=0;x<c.length;x++)if(f[g.id]){C.outputs.forEach(function(_){return f[_.id]=!0}),v=!0,d[C.id]=!0;break}if(v)break}}var y={};y[l.id]=!0;var b={};for(h=u.length-1;h>=0;h--)for(p=(C=u[h]).inputs,x=0;x<C.outputs.length;x++)if(y[C.outputs[x].id]){for(var m in p)y[p[m].id]=!0,b[C.id]=!0;break}var w=[];for(h=0;h<u.length;h++){var C;if(d[(C=u[h]).id]&&b[C.id]){var E={};for(var m in C.inputs){var S=C.inputs[m];f[S.id]&&(E[m]=S)}var k=Object.assign({},C);k.inputs=E,k.outputs=C.outputs,w.push(k)}}return w}(this.state.activeTape,n,i);if(!o&&s.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,c,l={};l[i.id]=r??(u=i.shape,c=Ym(ge(u),"float32"),N.makeTensor(c,u,"float32")),function(d,h,p){for(var m=function(v){var x=h[v],y=[];if(x.outputs.forEach(function(E){var S=d[E.id];S!=null?y.push(S):y.push(null)}),x.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+x.kernelName+".");var b=x.gradient(y),w=function(E){if(!(E in b))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(b)+".");var S=p(function(){return b[E]()});if(S.dtype!=="float32")throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+S.dtype+"'");var k=x.inputs[E];if(!Bt(S.shape,k.shape))throw new Error("Error in gradient for op "+x.kernelName+". The gradient of input '"+E+"' has shape '"+S.shape+"', which does not match the shape of the input '"+k.shape+"'");if(d[k.id]==null)d[k.id]=S;else{var _=d[k.id];d[k.id]=_.add(S),_.dispose()}};for(var C in x.inputs)w(C)},g=h.length-1;g>=0;g--)m(g)}(l,s,function(d){return a.tidy(d)});var f=n.map(function(d){return l[d.id]});return a.state.gradientDepth===0&&(a.state.activeTape.forEach(function(d){for(var h=0,p=d.saved;h<p.length;h++)p[h].dispose()}),a.state.activeTape=null),{value:i,grads:f}})},e.prototype.customGrad=function(t){var n=this;return I(la(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];I(o.every(function(s){return s instanceof Je}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var i={};return o.forEach(function(s,u){i[u]=s}),n.runKernelFunc(function(s,u){return I((r=t.apply(void 0,o.concat([u]))).value instanceof Je,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),I(la(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},i,function(s,u){var c=r.gradFunc(s,u),l=Array.isArray(c)?c:[c];I(l.length===o.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),I(l.every(function(d){return d instanceof Je}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var f={};return l.forEach(function(d,h){f[h]=function(){return d}}),f})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return ve(this,void 0,void 0,function(){var n,r;return me(this,function(o){switch(o.label){case 0:return n=Er(),[4,this.backend.time(t)];case 1:return(r=o.sent()).wallMs=Er()-n,[2,r]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Fy,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),N=function(){var e=function(){if(Vh==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}Vh=n}return Vh}();if(e._tfengine==null){var t=new xE(e);e._tfengine=new U8(t)}return function(n){Hm=n}(e._tfengine.ENV),Gr=function(){return e._tfengine},e._tfengine}();function NE(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var io=ee();io.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),io.registerFlag("IS_BROWSER",function(){return NE()}),io.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),io.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),io.registerFlag("PROD",function(){return!1}),io.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return io.getBool("DEBUG")}),io.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),io.registerFlag("IS_TEST",function(){return!1});var Tu,jn,zn,Ra={},jh={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function OE(e,t){Ra[e]=t}function no(e){e in Ra||(Ra[e]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=function(o){if(typeof OffscreenCanvas<"u"&&o===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(n);return r.addEventListener("webglcontextlost",function(o){o.preventDefault(),delete Ra[n]},!1),n===1?r.getContext("webgl",jh)||r.getContext("experimental-webgl",jh):r.getContext("webgl2",jh)}(e));var t=Ra[e];return t.isContextLost()?(delete Ra[e],no(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Ra[e])}function Sd(e,t){return[t,e]}function ou(e){var t=ge(e);return ff(Math.ceil(t/4))}function lc(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function Jm(e,t){var n,r,o,a,i,s,u,c,l,f=e;return ee().getNumber("WEBGL_VERSION")===2?(n=f.R32F,r=f.R16F,o=f.RGBA16F,a=f.RGBA32F,i=f.RED,s=4,u=1,c=f.HALF_FLOAT,l=f.FLOAT):(n=e.RGBA,r=e.RGBA,o=e.RGBA,a=f.RGBA,i=e.RGBA,s=4,u=4,c=t!=null?t.HALF_FLOAT_OES:null,l=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:o,internalFormatPackedFloat:a,textureFormatFloat:i,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:u,textureTypeHalfFloat:c,textureTypeFloat:l}}function pe(e,t,n){var r=n();return t&&function(o){var a=o.getError();if(a!==o.NO_ERROR)throw new Error("WebGL Error: "+LE(o,a))}(e),r}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Tu||(Tu={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(jn||(jn={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(zn||(zn={}));var H8=596e-10,V8=65504;function ME(e){return!!(ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||H8<Math.abs(e)&&Math.abs(e)<V8)}function LE(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Vs(e,t,n){return Fo(e,t,function(){return e.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function WE(e,t,n){var r=Fo(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(pe(e,t,function(){return e.shaderSource(r,n)}),pe(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function zE(e,t,n){var r=Fo(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(pe(e,t,function(){return e.shaderSource(r,n)}),pe(e,t,function(){return e.compileShader(r)}),e.getShaderParameter(r,e.COMPILE_STATUS)===!1)throw function(o,a){var i=j8.exec(a);if(i==null)return console.log("Couldn't parse line number in error: "+a),void console.log(o);for(var s=+i[1],u=o.split(`
`),c=u.length.toString().length+2,l=u.map(function(g,v){return La((v+1).toString(),c)+g}),f=0,d=0;d<l.length;d++)f=Math.max(l[d].length,f);var h=l.slice(0,s-1),p=l.slice(s-1,s),m=l.slice(s);console.log(h.join(`
`)),console.log(a.split(`
`)[0]),console.log("%c "+La(p[0],f),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(m.join(`
`))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Al,Dl,j8=/ERROR: [0-9]+:([0-9]+):/g;function $E(e,t){return Fo(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function UE(e,t,n){if(pe(e,t,function(){return e.linkProgram(n)}),e.getProgramParameter(n,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Rl(e,t,n){if(pe(e,t,function(){return e.validateProgram(n)}),e.getProgramParameter(n,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function HE(e,t,n){var r=Fo(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return pe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),pe(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function VE(e,t,n){var r=Fo(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return pe(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)}),pe(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)}),r}function jE(e,t){return Fo(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function GE(e,t){var n=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function qE(e,t){return Fo(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function rv(e,t,n,r,o,a,i,s){var u=e.getAttribLocation(n,r);return u!==-1&&(pe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,o)}),pe(e,t,function(){return e.vertexAttribPointer(u,a,e.FLOAT,!1,i,s)}),pe(e,t,function(){return e.enableVertexAttribArray(u)}),!0)}function KE(e,t,n,r){JE(e,r),pe(e,t,function(){return e.activeTexture(e.TEXTURE0+r)}),pe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)})}function XE(e,t,n,r){return Fo(e,t,function(){return e.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function YE(e,t,n){return e.getUniformLocation(t,n)}function QE(e,t,n,r,o,a){pe(e,t,function(){return KE(e,t,r,a)}),pe(e,t,function(){return e.uniform1i(o,a)})}function Fl(e,t,n,r){pe(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),pe(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)})}function ov(e,t,n){pe(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),pe(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function js(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+ZE(e,t))}function ZE(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function Fo(e,t,n,r){var o=pe(e,t,function(){return n()});if(o==null)throw new Error(r);return o}function JE(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function Pu(e,t){return t===void 0&&(t=2),ge(e.slice(0,e.length-t))}function Nu(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function Il(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Pu(e)].concat(Nu(e))),t}function e_(e,t){var n;t===void 0&&(t=!1);var r=ee().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,(e=e.map(function(c,l){return l>=e.length-2?qm(e[l]):e[l]})).length===1&&(e=[2,e[0]])),e.length!==2){var o=jo(e);e=o.newShape}var a=ge(e);if(e.length<=1&&a<=r)return[1,a];if(e.length===2&&e[0]<=r&&e[1]<=r)return e;if(e.length===3&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var i=Pu(e),s=2,u=2;return e.length&&(s=(n=Nu(e))[0],u=n[1]),ff(a=i*(s/2)*(u/2)).map(function(c){return 2*c})}return ff(a)}function Xc(e){return e%2==0}function Gs(e,t){if(Bt(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r||Xc(n)&&Xc(r)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Xc(e[0])&&Xc(t[0])}function t_(e){if(Al==null){var t=no(e);Al=t.getParameter(t.MAX_TEXTURE_SIZE)}return Al}function n_(e){if(Dl==null){var t=no(e);Dl=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Dl)}function r_(e){if(e===0)return 0;var t=no(e);return Gn(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:Gn(t,"EXT_disjoint_timer_query")?1:0}function Gn(e,t){return e.getExtension(t)!=null}function av(e){try{if(no(e)!=null)return!0}catch{return!1}return!1}function o_(e){if(e===0)return!1;var t=no(e);if(e===1){if(!Gn(t,"OES_texture_float"))return!1}else if(!Gn(t,"EXT_color_buffer_float"))return!1;return iv(t)}function a_(e){if(e===0)return!1;var t=no(e);if(e!==1){if(Gn(t,"EXT_color_buffer_float"))return iv(t);if(Gn(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(r,o){var a=Jm(r,o),i=r.createTexture();r.bindTexture(r.TEXTURE_2D,i),r.texImage2D(r.TEXTURE_2D,0,a.internalFormatHalfFloat,1,1,0,a.textureFormatFloat,a.textureTypeHalfFloat,null);var s=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,s),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,i,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(i),r.deleteFramebuffer(s),u}(t,n)}return!1}return!!Gn(t,"OES_texture_float")&&!!Gn(t,"WEBGL_color_buffer_float")&&iv(t)}function iv(e){var t=Jm(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),o}function i_(e){return e===2&&no(e).fenceSync!=null}var G8=Object.freeze({callAndCheck:pe,canBeRepresented:ME,getWebGLErrorMessage:LE,getExtensionOrThrow:Vs,createVertexShader:WE,createFragmentShader:zE,createProgram:$E,linkProgram:UE,validateProgram:Rl,createStaticVertexBuffer:HE,createStaticIndexBuffer:VE,getNumChannels:function(){return ee().getNumber("WEBGL_VERSION")===2?1:4},createTexture:jE,validateTextureSize:GE,createFramebuffer:qE,bindVertexBufferToProgramAttribute:rv,bindTextureUnit:KE,unbindTextureUnit:function(e,t,n){JE(e,n),pe(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),pe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:XE,getProgramUniformLocation:YE,bindTextureToProgramUniformSampler:QE,bindCanvasToFramebuffer:function(e,t){pe(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)}),pe(e,t,function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)}),pe(e,t,function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)})},bindColorTextureToFramebuffer:Fl,unbindColorTextureFromFramebuffer:ov,validateFramebuffer:js,getFramebufferErrorMessage:ZE,getBatchDim:Pu,getRowsCols:Nu,getShapeAs3D:Il,getTextureShapeFromLogicalShape:e_,isReshapeFree:Gs,getWebGLMaxTextureSize:t_,resetMaxTextureSize:function(){Al=null},resetMaxTexturesInShader:function(){Dl=null},getMaxTexturesInShader:n_,getWebGLDisjointQueryTimerVersion:r_,hasExtension:Gn,isWebGLVersionEnabled:av,isCapableOfRenderingToFloatTexture:o_,isDownloadFloatTextureEnabled:a_,isWebGLFenceEnabled:i_}),Ee=ee();function q8(){ee().set("PROD",!0)}function K8(){ee().set("DEBUG",!0)}function X8(){ee().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function eg(e){ee().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function Y8(){N.disposeVariables()}function Q8(){return N}function Z8(){return N.memory()}function J8(e){return N.profile(e)}function de(e,t){return N.tidy(e,t)}function Cn(e){Zm(e).forEach(function(t){return t.dispose()})}function s_(e){return N.keep(e)}function e6(e){return N.time(e)}function t6(e){return N.setBackend(e)}function n6(){return N.ready()}function r6(){return N.backendName}function o6(e){N.removeBackend(e)}function a6(e){return N.findBackend(e)}function i6(e){return N.findBackendFactory(e)}function s6(e,t,n){return n===void 0&&(n=1),N.registerBackend(e,t,n)}function u6(){return N.backend}function c6(e,t){ee().setPlatform(e,t)}function hf(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];ee().getBool("IS_TEST")||console.warn.apply(console,e)}function Zr(e,t){var n=e;if(en(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||en(n)&&t!=="string";)r.push(n.length),n=n[0];return Array.isArray(e)&&ee().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function o(a,i,s){if(s=s||[],!Array.isArray(a)&&!en(a))return void I(i.length===0,function(){return"Element arr["+s.join("][")+"] is a primitive, but should be an array/TypedArray of "+i[0]+" elements"});I(i.length>0,function(){return"Element arr["+s.join("][")+"] should be a primitive, but is an array of "+a.length+" elements"}),I(a.length===i[0],function(){return"Element arr["+s.join("][")+"] should have "+i[0]+" elements, but has "+a.length+" elements"});for(var u=i.slice(1),c=0;c<a.length;++c)o(a[c],u,s.concat(c))}(e,r,[]),r}function Iy(e,t,n,r){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function F(e,t,n,r){if(r===void 0&&(r="numeric"),e instanceof Je)return Iy(r,e.dtype,t,n),e;var o=ps(e);if(o!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(o=r),Iy(r,o,t,n),e==null||!en(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var a=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+a+"'")}var i=Zr(e,o);en(e)||Array.isArray(e)||(e=[e]);var s=o!=="string"?Xm(e,o,ee().getBool("DEBUG")):So(e,[],!0);return N.makeTensor(s,i,o)}function Ou(e,t,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(o,a){return F(o,t+"["+a+"]",n)},r)}function tg(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function u_(e,t,n){for(var r=e.length+t.length,o=[],a=0,i=0,s=0;s<r;s++)n.indexOf(s)===-1?o.push(e[a++]):o.push(t[i++]);return o}function Zt(e,t){for(var n=[],r=e.length,o=0;o<r;o++)t.indexOf(o)===-1&&n.push(e[o]);return[n,t.map(function(a){return e[a]})]}function En(e,t){return u_(e,t.map(function(n){return 1}),t)}function Dn(e,t,n){I(tg(t,n),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."})}function Tr(e,t){if(tg(e,t))return null;for(var n=[],r=0;r<t;++r)e.indexOf(r)===-1&&n.push(r);return e.forEach(function(o){return n.push(o)}),n}function kd(e){return e.map(function(t,n){return[n,t]}).sort(function(t,n){return t[1]-n[1]}).map(function(t){return t[0]})}function Pr(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function c_(e,t){var n=e[0].length;e.forEach(function(o,a){I(o.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+a+"] must be the same as the rank of the rest ("+n+")"})}),I(t>=0&&t<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=e[0];e.forEach(function(o,a){for(var i=0;i<n;i++)I(i===t||o[i]===r[i],function(){return"Error in concat"+n+"D: Shape of tensors["+a+"] ("+o+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+a+"."})})}function Ga(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function O(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var o=function(){for(var a=[],i=0;i<arguments.length;i++)a[i]=arguments[i];N.startScope(n);try{var s=r.apply(void 0,a);return s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),N.endScope(s),s}catch(u){throw N.endScope(null),u}};return Object.defineProperty(o,"name",{value:n,configurable:!0}),o}Ee.registerFlag("HAS_WEBGL",function(){return Ee.getNumber("WEBGL_VERSION")>0}),Ee.registerFlag("WEBGL_VERSION",function(){return av(2)?2:av(1)?1:0}),Ee.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Ee.get("WEBGL_VERSION")===2}),Ee.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Ee.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Ee.registerFlag("WEBGL_PACK",function(){return Ee.getBool("HAS_WEBGL")}),Ee.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_PACK_CLIP",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Ee.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_PACK_REDUCE",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_CONV_IM2COL",function(){return Ee.getBool("WEBGL_PACK")}),Ee.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return t_(Ee.getNumber("WEBGL_VERSION"))}),Ee.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return n_(Ee.getNumber("WEBGL_VERSION"))}),Ee.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=Ee.getNumber("WEBGL_VERSION");return e===0?0:r_(e)}),Ee.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Ee.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),Ee.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return o_(Ee.getNumber("WEBGL_VERSION"))}),Ee.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Ee.getBool("WEBGL_FORCE_F16_TEXTURES")&&Ee.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Ee.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return a_(Ee.getNumber("WEBGL_VERSION"))}),Ee.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return i_(Ee.getNumber("WEBGL_VERSION"))}),Ee.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Ee.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),TE=eg;var Ht=O({complex_:function(e,t){var n=F(e,"real","complex"),r=F(t,"imag","complex");return ze(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),N.runKernelFunc(function(o){return o.complex(n,r)},{$real:n,$imag:r})}}),Hn=O({real_:function(e){var t=F(e,"input","real");return N.runKernelFunc(function(n){return n.real(t)},{$input:t})}}),_r=O({imag_:function(e){var t=F(e,"input","imag");return N.runKernelFunc(function(n){return n.imag(t)},{$input:t})}});function Gt(e,t,n){return ma(e,t,Zr(e,n),n)}function ma(e,t,n,r){if(r==null&&(r=ps(e)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!en(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){Qm(t);var o=ge(t),a=ge(n);I(o===a,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+o+" values but has "+a});for(var i=0;i<n.length;++i){var s=n[i],u=i!==n.length-1||s!==ge(t.slice(i));I(n[i]===t[i]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "})}}return en(e)||Array.isArray(e)||(e=[e]),t=t||n,e=r!=="string"?Xm(e,r,ee().getBool("DEBUG")):So(e,[],!0),N.makeTensor(e,t,r)}function ue(e,t){if((en(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&en(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ma(e,[],[],t)}function kt(e,t){Qa(e);var n=Zr(e,t);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ma(e,null,n,t)}function xo(e,t,n){if(Qa(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=Zr(e,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ma(e,t,r,n)}function Ad(e,t,n){if(Qa(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=Zr(e,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ma(e,t,r,n)}function bn(e,t,n){if(Qa(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=Zr(e,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ma(e,t,r,n)}function l_(e,t,n){if(Qa(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=Zr(e,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ma(e,t,r,n)}function f_(e,t,n){if(Qa(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=Zr(e,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ma(e,t=t||r,r,n)}function d_(e,t,n,r){return t===void 0&&(t=!0),N.makeVariable(e,t,n,r)}function Za(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=Za(e,"float32"),r=tt(e,"float32");return Ht(n,r)}var o=Ym(ge(e),t);return N.makeTensor(o,e,t)}function tt(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var n=tt(e,"float32"),r=tt(e,"float32");return Ht(n,r)}var o=vs(ge(e),t);return N.makeTensor(o,e,t)}function Dr(e,t,n){return N.runKernelFunc(function(r){return r.fill(e,t,n)},{})}function h_(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return N.runKernelFunc(function(r){return r.linspace(e,t,n)},{})}function Mu(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return tt([0],r);var o=vs(Math.abs(Math.ceil((t-e)/n)),r);t<e&&n===1&&(n=-1),o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+n;return kt(o,r)}var ng=O({onesLike_:function(e){var t=F(e,"x","onesLike");if(t.dtype==="complex64"){var n=ng(Hn(t)),r=Le(_r(t));return Ht(n,r)}return N.runKernelFunc(function(o){return o.onesLike(t)},{$x:t},function(o,a){return{$x:function(){return Le(o)}}})}}),Le=O({zerosLike_:function(e){var t=F(e,"x","zerosLike");return N.runKernelFunc(function(n){return n.zerosLike(t)},{$x:t},function(n,r){return{$x:function(){return Le(n)}}})}}),Tt=O({concat_:function(e,t){t===void 0&&(t=0),I(e.length>=1,function(){return"Pass at least one tensor to concat"});var n=Ou(e,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+s.dtype+". ")}),t=Mt(t,n[0].shape)[0];var r=Ga(n.map(function(s){return s.shape}),t);if(ge(r)===0)return Gt([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var o=n.map(function(s){return s.shape});c_(o,t);var a=n,i={axis:t};return N.runKernelFunc(function(s){return s.concat(n,t)},a,function(s){var u=o.map(function(c){return c[t]});return Dd(s,u,t).map(function(c){return function(){return c}})},"Concat",i)}}),p_=O({concat1d_:function(e){return Tt(e,0)}}),v_=O({concat2d_:function(e,t){return Tt(e,t)}}),m_=O({concat3d_:function(e,t){return Tt(e,t)}}),g_=O({concat4d_:function(e,t){return Tt(e,t)}}),Dd=O({split_:function(e,t,n){n===void 0&&(n=0);var r,o=F(e,"x","split");return n=Mt(n,o.shape)[0],typeof t=="number"?(I(o.shape[n]%t==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(t).fill(o.shape[n]/t)):(I(o.shape[n]===t.reduce(function(a,i){return a+i}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=t),N.runKernelFunc(function(a){return a.split(o,r,n)},{$x:o},function(a){return{$x:function(){return Tt(a,n)}}})}});function Ja(e,t){return e(t={exports:{}},t.exports),t.exports}var l6=Ja(function(e){(function(t,n,r){function o(s){var u,c=this,l=(u=4022871197,function(f){f=f.toString();for(var d=0;d<f.length;d++){var h=.02519603282416938*(u+=f.charCodeAt(d));h-=u=h>>>0,u=(h*=u)>>>0,u+=4294967296*(h-=u)}return 23283064365386963e-26*(u>>>0)});c.next=function(){var f=2091639*c.s0+23283064365386963e-26*c.c;return c.s0=c.s1,c.s1=c.s2,c.s2=f-(c.c=0|f)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(s),c.s0<0&&(c.s0+=1),c.s1-=l(s),c.s1<0&&(c.s1+=1),c.s2-=l(s),c.s2<0&&(c.s2+=1),l=null}function a(s,u){return u.c=s.c,u.s0=s.s0,u.s1=s.s1,u.s2=s.s2,u}function i(s,u){var c=new o(s),l=u&&u.state,f=c.next;return f.int32=function(){return 4294967296*c.next()|0},f.double=function(){return f()+11102230246251565e-32*(2097152*f()|0)},f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}n&&n.exports?n.exports=i:this.alea=i})(0,e)}),f6=Ja(function(e){(function(t,n,r){function o(s){var u=this,c="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var f=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^f^f>>>8},s===(0|s)?u.x=s:c+=s;for(var l=0;l<c.length+64;l++)u.x^=0|c.charCodeAt(l),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u}function i(s,u){var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}n&&n.exports?n.exports=i:this.xor128=i})(0,e)}),d6=Ja(function(e){(function(t,n,r){function o(s){var u=this,c="";u.next=function(){var f=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^f^f<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,s===(0|s)?u.x=s:c+=s;for(var l=0;l<c.length+64;l++)u.x^=0|c.charCodeAt(l),l==c.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function a(s,u){return u.x=s.x,u.y=s.y,u.z=s.z,u.w=s.w,u.v=s.v,u.d=s.d,u}function i(s,u){var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}n&&n.exports?n.exports=i:this.xorwow=i})(0,e)}),h6=Ja(function(e){(function(t,n,r){function o(s){var u=this;u.next=function(){var c,l,f=u.x,d=u.i;return c=f[d],l=(c^=c>>>7)^c<<24,l^=(c=f[d+1&7])^c>>>10,l^=(c=f[d+3&7])^c>>>3,l^=(c=f[d+4&7])^c<<7,c=f[d+7&7],l^=(c^=c<<13)^c<<9,f[d]=l,u.i=d+1&7,l},function(c,l){var f,d=[];if(l===(0|l))d[0]=l;else for(l=""+l,f=0;f<l.length;++f)d[7&f]=d[7&f]<<15^l.charCodeAt(f)+d[f+1&7]<<13;for(;d.length<8;)d.push(0);for(f=0;f<8&&d[f]===0;++f);for(f==8?d[7]=-1:d[f],c.x=d,c.i=0,f=256;f>0;--f)c.next()}(u,s)}function a(s,u){return u.x=s.x.slice(),u.i=s.i,u}function i(s,u){s==null&&(s=+new Date);var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(l.x&&a(l,c),f.state=function(){return a(c,{})}),f}n&&n.exports?n.exports=i:this.xorshift7=i})(0,e)}),p6=Ja(function(e){(function(t,n,r){function o(s){var u=this;u.next=function(){var c,l,f=u.w,d=u.X,h=u.i;return u.w=f=f+1640531527|0,l=d[h+34&127],c=d[h=h+1&127],l^=l<<13,c^=c<<17,l^=l>>>15,c^=c>>>12,l=d[h]=l^c,u.i=h,l+(f^f>>>16)|0},function(c,l){var f,d,h,p,m,g=[],v=128;for(l===(0|l)?(d=l,l=null):(l+="\0",d=0,v=Math.max(v,l.length)),h=0,p=-32;p<v;++p)l&&(d^=l.charCodeAt((p+32)%l.length)),p===0&&(m=d),d^=d<<10,d^=d>>>15,d^=d<<4,d^=d>>>13,p>=0&&(m=m+1640531527|0,h=(f=g[127&p]^=d+m)==0?h+1:0);for(h>=128&&(g[127&(l&&l.length||0)]=-1),h=127,p=512;p>0;--p)d=g[h+34&127],f=g[h=h+1&127],d^=d<<13,f^=f<<17,d^=d>>>15,f^=f>>>12,g[h]=d^f;c.w=m,c.X=g,c.i=h}(u,s)}function a(s,u){return u.i=s.i,u.w=s.w,u.X=s.X.slice(),u}function i(s,u){s==null&&(s=+new Date);var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(l.X&&a(l,c),f.state=function(){return a(c,{})}),f}n&&n.exports?n.exports=i:this.xor4096=i})(0,e)}),v6=Ja(function(e){(function(t,n,r){function o(s){var u=this,c="";u.next=function(){var f=u.b,d=u.c,h=u.d,p=u.a;return f=f<<25^f>>>7^d,d=d-h|0,h=h<<24^h>>>8^p,p=p-f|0,u.b=f=f<<20^f>>>12^d,u.c=d=d-h|0,u.d=h<<16^d>>>16^p,u.a=p-f|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,s===Math.floor(s)?(u.a=s/4294967296|0,u.b=0|s):c+=s;for(var l=0;l<c.length+20;l++)u.b^=0|c.charCodeAt(l),u.next()}function a(s,u){return u.a=s.a,u.b=s.b,u.c=s.c,u.d=s.d,u}function i(s,u){var c=new o(s),l=u&&u.state,f=function(){return(c.next()>>>0)/4294967296};return f.double=function(){do var d=((c.next()>>>11)+(c.next()>>>0)/4294967296)/2097152;while(d===0);return d},f.int32=c.next,f.quick=f,l&&(typeof l=="object"&&a(l,c),f.state=function(){return a(c,{})}),f}n&&n.exports?n.exports=i:this.tychei=i})(0,e)}),Fa=Ja(function(e){(function(t,n){var r,o=this,a=256,i=6,s="random",u=n.pow(a,i),c=n.pow(2,52),l=2*c,f=a-1;function d(v,x,y){var b=[],w=m(function S(k,_){var A,D=[],T=typeof k;if(_&&T=="object")for(A in k)try{D.push(S(k[A],_-1))}catch{}return D.length?D:T=="string"?k:k+"\0"}((x=x==1?{entropy:!0}:x||{}).entropy?[v,g(t)]:v??function(){try{var S;return r&&(S=r.randomBytes)?S=S(a):(S=new Uint8Array(a),(o.crypto||o.msCrypto).getRandomValues(S)),g(S)}catch{var k=o.navigator,_=k&&k.plugins;return[+new Date,o,_,o.screen,g(t)]}}(),3),b),C=new h(b),E=function(){for(var S=C.g(i),k=u,_=0;S<c;)S=(S+_)*a,k*=a,_=C.g(1);for(;S>=l;)S/=2,k/=2,_>>>=1;return(S+_)/k};return E.int32=function(){return 0|C.g(4)},E.quick=function(){return C.g(4)/4294967296},E.double=E,m(g(C.S),t),(x.pass||y||function(S,k,_,A){return A&&(A.S&&p(A,C),S.state=function(){return p(C,{})}),_?(n[s]=S,k):S})(E,w,"global"in x?x.global:this==n,x.state)}function h(v){var x,y=v.length,b=this,w=0,C=b.i=b.j=0,E=b.S=[];for(y||(v=[y++]);w<a;)E[w]=w++;for(w=0;w<a;w++)E[w]=E[C=f&C+v[w%y]+(x=E[w])],E[C]=x;(b.g=function(S){for(var k,_=0,A=b.i,D=b.j,T=b.S;S--;)k=T[A=f&A+1],_=_*a+T[f&(T[A]=T[D=f&D+k])+(T[D]=k)];return b.i=A,b.j=D,_})(a)}function p(v,x){return x.i=v.i,x.j=v.j,x.S=v.S.slice(),x}function m(v,x){for(var y,b=v+"",w=0;w<b.length;)x[f&w]=f&(y^=19*x[f&w])+b.charCodeAt(w++);return g(x)}function g(v){return String.fromCharCode.apply(0,v)}if(n["seed"+s]=d,m(n.random(),t),e.exports){e.exports=d;try{r=require("crypto")}catch{}}})([],Math)});Fa.alea=l6,Fa.xor128=f6,Fa.xorwow=d6,Fa.xorshift7=h6,Fa.xor4096=p6,Fa.tychei=v6;var Rd=Fa.alea,rg=function(){function e(t,n,r,o,a){this.mean=t,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=o,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var i=a||Math.random();this.random=Rd(i.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var n,r,o=!1;!o;){var a=void 0,i=void 0,s=void 0;do s=(a=2*this.random()-1)*a+(i=2*this.random()-1)*i;while(s>=1||s===0);var u=Math.sqrt(-2*Math.log(s)/s);n=this.mean+this.stdDev*a*u,r=this.mean+this.stdDev*i*u,this.truncated&&!this.isValidTruncated(n)||(o=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),m6=function(){function e(t,n,r,o){this.alpha=t,this.beta=1/n,this.dtype=r;var a=o||Math.random();this.randu=Rd(a.toString()),this.randn=new rg(0,1,r,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,n,r,o,a,i;;){do o=this.randn.nextValue(),i=1+this.c*o;while(i<=0);if(i*=i*i,n=1-.331*(t=o*o)*t,r=.5*t+this.d*(1-i+Math.log(i)),(a=this.randu())<n||Math.log(a)<r)break}return i=1/this.beta*this.d*i,this.alpha<1&&(i*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(i)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),g6=function(){function e(t,n,r,o){var a=this;if(t===void 0&&(t=0),n===void 0&&(n=1),this.canReturnFloat=function(){return a.dtype==null||a.dtype==="float32"},this.min=t,this.range=n-t,this.dtype=r,o==null&&(o=Math.random()),typeof o=="number"&&(o=o.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+n+" <= 1 and dtype is not float");this.random=Rd(o)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function Se(e,t,n){return t===void 0&&(t="float32"),t=t||"float32",Qm(e),new es(e,t,n)}function x_(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var og=O({batchToSpaceND_:function(e,t,n){var r=F(e,"x","batchToSpaceND"),o=t.reduce(function(a,i){return a*i});return I(r.rank>=1+t.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length}),I(n.length===t.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length}),I(r.shape[0]%o==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+o}),N.runKernelFunc(function(a){return a.batchToSpaceND(r,t,n)},{$x:r},function(a){return{$x:function(){return a.spaceToBatchND(t,n)}}})}}),y_=O({broadcastTo_:function(e,t){var n=F(e,"broadcastTo","x"),r=n.shape;if(t.some(function(u){return!(u>0)||u%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<n.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+n.rank+".");if(t.length>n.rank){for(var o=n.shape.slice();o.length<t.length;)o.unshift(1);n=n.reshape(o)}for(var a=Array.from(t),i=t.length-1;i>=0;i--)if(n.shape[i]===t[i])a[i]=1;else if(n.shape[i]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+t+"].");var s=a.map(function(u,c){return u>1?c:-1}).filter(function(u){return u>=0});return s.length===0?n.clone():N.runKernelFunc(function(u){return u.tile(n,a)},{input:n},function(u){return{input:function(){return u.sum(s,!0)}}})}}),b_=O({cast_:function(e,t){var n=F(e,"x","cast");if(!SE(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&n.dtype!=="string"||t!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:t};return N.runKernelFunc(function(o){return o.cast(n,t)},{x:n},function(o){return{x:function(){return o.clone()}}},"Cast",r)}}),w_=O({clone_:function(e){var t=F(e,"x","clone",null);return N.runKernelFunc(function(){return N.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(n){return{$x:function(){return n.toFloat()}}})}}),C_=O({cumsum_:function(e,t,n,r){t===void 0&&(t=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var o=F(e,"x","cumsum"),a=Tr([t|=0],o.rank),i=o;a!=null&&(i=o.transpose(a));var s=Pr(1,o.rank)[0],u=N.runKernelFunc(function(c){return c.cumsum(i,s,n,r)},{permutedX:i},function(c){return{permutedX:function(){return c.cumsum(t,n,!r)}}});return a!=null&&(u=u.transpose(a)),u}}),E_=O({depthToSpace_:function(e,t,n){n===void 0&&(n="NHWC");var r=F(e,"x","depthToSpace"),o=n==="NHWC"?r.shape[1]:r.shape[2],a=n==="NHWC"?r.shape[2]:r.shape[3],i=n==="NHWC"?r.shape[3]:r.shape[1];return I(o*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+t+`  for depthToSpace with input shape
      `+r.shape}),I(a*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+t+` for depthToSpace with input shape
          `+r.shape}),I(i%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+i+" for depthToSpace with input shape "+r.shape}),N.runKernelFunc(function(s){return s.depthToSpace(r,t,n)},{$x:r})}}),$n=O({expandDims_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","expandDims",null);I(t<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return t<0&&(I(-(n.rank+1)<=t,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),t=n.rank+t+1),r.splice(t,0,1),cr(n,r)}}),ag=O({eye_:function(e,t,n,r){r===void 0&&(r="float32"),t==null&&(t=e);for(var o=Se([e,t],r),a=e<=t?e:t,i=0;i<a;++i)o.set(1,i,i);var s=o.toTensor().as2D(e,t);if(n==null)return s;if(n.length===1)return Wa($n(s,0),[n[0],1,1]);if(n.length===2)return Wa($n($n(s,0),0),[n[0],n[1],1,1]);if(n.length===3)return Wa($n($n($n(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),__=O({multinomial_:function(e,t,n,r){r===void 0&&(r=!1);var o=F(e,"logits","multinomial"),a=o.size,i=o.rank;if(a<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+a+".");if(i>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+i);n=n||Math.random();var s=i===1?o.as2D(1,-1):o,u=N.runKernelFunc(function(c){return c.multinomial(s,r,t,n)},{logits2D:s});return i===1?u.as1D():u}}),pf=O({oneHot_:function(e,t,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var o=F(e,"indices","oneHot","int32"),a=o.shape.concat([t]);return o=o.flatten(),N.runKernelFunc(function(i){return i.oneHot(o,t,n,r)},{$indices:o},function(i){return{$indices:function(){return tt(o.shape,"float32")}}}).reshape(a)}}),ga=O({pad_:function(e,t,n){n===void 0&&(n=0);var r=F(e,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var o={paddings:t,constantValue:n};return N.runKernelFunc(function(a){return a.pad(r,t,n)},{x:r},function(a){var i=t.map(function(s){return s[0]});return{x:function(){return a.slice(i,r.shape)}}},"PadV2",o)}}),S_=O({pad1d_:function(e,t,n){return n===void 0&&(n=0),I(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),ga(e,[t],n)}}),k_=O({pad2d_:function(e,t,n){return n===void 0&&(n=0),I(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ga(e,t,n)}}),A_=O({pad3d_:function(e,t,n){return n===void 0&&(n=0),I(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ga(e,t,n)}}),D_=O({pad4d_:function(e,t,n){return n===void 0&&(n=0),I(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),ga(e,t,n)}}),R_=O({rand_:function(e,t,n){var r=ge(e),o=null;if(n==null||n==="float32")o=new Float32Array(r);else if(n==="int32")o=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);o=new Uint8Array(r)}for(var a=0;a<r;a++)o[a]=t();return N.makeTensor(o,e,n)}}),F_=O({randomNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new rg(t,n,r,!1,o),i=Se(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),I_=O({randomGamma_:function(e,t,n,r,o){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var a=new m6(t,n,r,o),i=Se(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),ig=O({randomUniform_:function(e,t,n,r,o){t===void 0&&(t=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var a=Se(e,r),i=new g6(t,n,null,o),s=0;s<a.values.length;s++)a.values[s]=i.nextValue();return a.toTensor()}}),cr=O({reshape_:function(e,t){var n=F(e,"x","reshape",null);t=EE(t,n.size),I(n.size===ge(t),function(){return"new shape and old shape must have the same number of elements."});var r={shape:t};return N.runKernelFunc(function(o){return o.reshape(n,t)},{x:n},function(o){return{x:function(){return o.reshape(n.shape)}}},"Reshape",r)}}),sg=O({spaceToBatchND_:function(e,t,n){var r=F(e,"x","spaceToBatchND");return I(r.rank>=1+t.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length}),I(n.length===t.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length}),I(r.shape.reduce(function(o,a,i){return i>0&&i<=t.length?o&&(a+n[i-1][0]+n[i-1][1])%t[i-1]==0:o},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()}),N.runKernelFunc(function(o){return o.spaceToBatchND(r,t,n)},{$x:r},function(o){return{$x:function(){return o.batchToSpaceND(t,n)}}})}}),ug=O({squeeze_:function(e,t){var n=F(e,"x","squeeze");return cr(n,jo(n.shape,t).newShape)}}),Nn=O({stack_:function(e,t){t===void 0&&(t=0);var n=Ou(e,"tensors","stack");if(I(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(t);var r=n[0].rank,o=n[0].shape,a=n[0].dtype;I(t<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(s){ze(o,s.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(s){I(a===s.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var i=n.map(function(s){return s.expandDims(t)});return Tt(i,t)}}),Wa=O({tile_:function(e,t){var n=F(e,"x","tile",null);I(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."});var r=[n],o={reps:t};return N.runKernelFunc(function(a,i){var s=a.tile(n,t);return i([n]),s},{x:n},function(a,i){var s=i[0];return{x:function(){var u=Le(s);if(s.rank===1)for(var c=0;c<t[0];++c)u=u.add(a.slice([c*s.shape[0]],[s.shape[0]]));else if(s.rank===2)for(c=0;c<t[0];++c)for(var l=0;l<t[1];++l)u=u.add(a.slice([c*s.shape[0],l*s.shape[1]],[s.shape[0],s.shape[1]]));else if(s.rank===3)for(c=0;c<t[0];++c)for(l=0;l<t[1];++l)for(var f=0;f<t[2];++f)u=u.add(a.slice([c*s.shape[0],l*s.shape[1],f*s.shape[2]],[s.shape[0],s.shape[1],s.shape[2]]));else{if(s.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+s.rank+" tensors yet.");for(c=0;c<t[0];++c)for(l=0;l<t[1];++l)for(f=0;f<t[2];++f)for(var d=0;d<t[3];++d)u=u.add(a.slice([c*s.shape[0],l*s.shape[1],f*s.shape[2],d*s.shape[3]],[s.shape[0],s.shape[1],s.shape[2],s.shape[3]]))}return u}}},"Tile",o,r)}}),B_=O({truncatedNormal_:function(e,t,n,r,o){if(t===void 0&&(t=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var a=new rg(t,n,r,!0,o),i=Se(e,r),s=0;s<i.values.length;s++)i.values[s]=a.nextValue();return i.toTensor()}}),Pt=O({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var n=F(e,"x","unstack");I(t>=-n.shape.length&&t<n.shape.length,function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),t<0&&(t+=n.shape.length);var r={axis:t};return N.runKernelFunc(function(o){return o.unstack(n,t)},{x:n},function(o){return{x:function(){return Nn(o,t)}}},"Unpack",r)}}),T_=function(e,t){return ve(this,void 0,void 0,function(){var n,r,o,a,i,s,u,c,l,f;return me(this,function(d){switch(d.label){case 0:return n=F(e,"x","setdiff1d"),r=F(t,"y","setdiff1d"),I(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),I(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),I(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return o=d.sent(),[4,r.data()];case 2:for(a=d.sent(),i=new Set(a),s=0,l=0;l<o.length;l++)i.has(o[l])||s++;for(u=new es([s],n.dtype),c=new es([s],"int32"),l=0,f=0;l<o.length;l++)i.has(o[l])||(u.values[f]=o[l],c.values[f]=l,f++);return[2,[u.toTensor(),c.toTensor()]]}})})};function vf(e,t,n,r){r===void 0&&(r=!0);var o=[];if(r)(o=o.concat(t.slice(0))).push(e[0]/n),o=o.concat(e.slice(1));else{o=o.concat(e[0]);for(var a=t.length,i=0;i<a;++i)o=o.concat([e[i+1]/t[i],t[i]]);o=o.concat(e.slice(a+1))}return o}function mf(e,t,n){n===void 0&&(n=!0);var r=[];if(n){r.push(t);for(var o=t+1;o<e;++o)o<=2*t?(r.push(o),r.push(o-(t+1))):r.push(o)}else{var a=[],i=[];for(o=1;o<e;++o)o>=2*t+1||o%2==1?i.push(o):a.push(o);r.push.apply(r,a),r.push(0),r.push.apply(r,i)}return r}function gf(e,t,n,r){r===void 0&&(r=!0);var o=[];r?o.push(e[0]/n):o.push(e[0]*n);for(var a=1;a<e.length;++a)a<=t.length?r?o.push(t[a-1]*e[a]):o.push(e[a]/t[a-1]):o.push(e[a]);return o}function P_(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function N_(e,t,n){for(var r=e.slice(0,1),o=0;o<n;++o)r.push(e[o+1]-t[o][0]-t[o][1]);return r}function cg(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],o=1,a=0;a<n.length-1;++a)o*=n[a];var i=e.shape,s=n.slice();s.pop();var u=1;for(a=r;a<e.rank;++a)u*=i[a],s.push(i[a]);var c=Ar(e.shape).map(function(l){return l/u}).concat([1]).slice(0,r);return[s,o,u,c]}var x6=Object.freeze({prepareAndValidate:cg}),lg=30;function Bl(e){return e<=lg?e:df(e,Math.floor(Math.sqrt(e)))}function O_(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,o=t.rank>1?t.rank-1:1,a="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+o+".";if(n.rank<o)throw new Error(a+" update.rank < "+o+". ");if(e.length<r+(n.rank-o))throw new Error(a+" Output shape length < "+(r+(n.rank-o)));if(n.rank!==o+e.length-r)throw new Error(a+" update.rank != "+(o+e.length-r));for(var i=0;i<o;++i)if(n.shape[i]!==t.shape[i])throw new Error(a+" updates.shape["+i+"] ("+n.shape[i]+") != indices.shape["+i+"] ("+t.shape[i]+").");for(i=0;i<n.rank-o;++i)if(n.shape[i+o]!==e[i+r])throw new Error(a+" updates.shape["+(i+o)+"] ("+n.shape[i+o]+") != shape["+(i+o)+"] ("+e[i+o]+")")}function M_(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}O_(n,t,e)}function Lu(e,t,n){for(var r=t.shape.length,o=r>1?t.shape[r-1]:1,a=n.length,i=1,s=o;s<a;++s)i*=n[s];var u=o<1?1:o;return{sliceRank:o,numUpdates:ge(t.shape)/u,sliceSize:i,strides:Ar(n.slice(0,o)).concat([1]),outputSize:ge(n)}}var y6=Object.freeze({validateUpdateShape:O_,validateInput:M_,calculateShapes:Lu});function L_(e,t,n){I(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),I(e.rank===n.length,function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."});for(var r=function(a){I(t[a]+n[a]<=e.shape[a],function(){return"Error in slice"+e.rank+"D: begin["+a+"] + size["+a+"] ("+(t[a]+n[a])+") would overflow input.shape["+a+"] ("+e.shape[a]+")"})},o=0;o<e.rank;++o)r(o)}function sv(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function Fd(e,t,n){for(var r=[],o=0;o<e.length;o++)r[o]=Math.ceil((t[o]-e[o])/n[o]);return r}function W_(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||a==null)&&(a=i>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=lf(0,a,s-1)}function z_(e,t,n,r,o){var a=t[o],i=n[o]||1;(e&1<<o||a==null)&&(a=i>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[o];return a<0&&(a+=s),a=i>0?lf(0,a,s):lf(-1,a,s-1)}function fg(e,t,n){for(var r=n.length,o=0;o<n.length;o++)if(n[o]>1){r=o;break}for(o=r+1;o<n.length;o++)if(t[o]>0||n[o]!==e[o])return!1;return!0}function dg(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}var b6=Object.freeze({assertParamsValid:L_,maskToAxes:sv,computeOutShape:Fd,startForAxis:W_,stopForAxis:z_,isSliceContinous:fg,computeFlatOffset:dg});function w6(e){return I(la(e),function(){return"The f passed in grad(f) must be a function"}),function(t,n){var r=F(t,"x","tf.grad",null),o=n!=null?F(n,"dy","tf.grad"):null;return N.tidy(function(){var a=N.gradients(function(){return e(r)},[r],o),i=a.value,s=a.grads;return o!=null&&ze(i.shape,o.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),Id(s),s[0]})}}function C6(e){return I(la(e),function(){return"The f passed in grads(f) must be a function"}),function(t,n){I(Array.isArray(t),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var r=Ou(t,"args","tf.grads",null),o=n!=null?F(n,"dy","tf.grads"):null;return N.tidy(function(){var a=N.gradients(function(){return e.apply(void 0,r)},r,o),i=a.value,s=a.grads;return o!=null&&ze(i.shape,o.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Id(s),s})}}function E6(e){return I(la(e),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(t,n){I(t instanceof Je,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),I(n==null||n instanceof Je,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var r=N.gradients(function(){return e(t)},[t],n),o=r.grads,a=r.value;return Id(o),{grad:o[0],value:a}}}function _6(e){return I(la(e),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(t,n){I(Array.isArray(t)&&t.every(function(o){return o instanceof Je}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),I(n==null||n instanceof Je,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var r=N.gradients(function(){return e.apply(void 0,t)},t,n);return n!=null&&ze(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),Id(r.grads),r}}function $_(e,t){I(la(e),function(){return"The f passed in variableGrads(f) must be a function"}),I(t==null||Array.isArray(t)&&t.every(function(l){return l instanceof ja}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=t!=null;if(!n)for(var r in t=[],N.registeredVariables)t.push(N.registeredVariables[r]);var o=n?t.filter(function(l){return!l.trainable}):null,a=t.length;I((t=t.filter(function(l){return l.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+a+" variables is trainable."});var i=N.gradients(e,t,null,!0),s=i.value,u=i.grads;I(u.some(function(l){return l!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),I(s.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"});var c={};return t.forEach(function(l,f){u[f]!=null&&(c[l.name]=u[f])}),o!=null&&o.forEach(function(l){return c[l.name]=null}),{value:s,grads:c}}function fc(e){return N.customGrad(e)}function Id(e){if(e.filter(function(t){return t==null}).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var ro=O({softmax_:function(e,t){t===void 0&&(t=-1);var n=F(e,"logits","softmax","float32");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return N.runKernelFunc(function(r,o){var a=r.softmax(n,t);return o([a]),a},{logits:n},function(r,o){var a=o[0],i=r.mul(a);return{logits:function(){return i.sub(i.sum([t],!0).mul(a))}}},"Softmax",{dim:t},[],[!0])}}),U_=O({logSoftmax_:function(e,t){t===void 0&&(t=-1);var n=F(e,"logits","logSoftmax");if(t===-1&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return fc(function(r,o){var a=r.max(t,!0),i=r.sub(a),s=i.toFloat().sub(i.exp().sum(t,!0).log());return o([s]),{value:s,gradFunc:function(u,c){var l=c[0].exp();return u.sub(u.sum(t,!0).mul(l))}}})(n)}}),hg=function(){function e(t,n){this.backend=t,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,n){this.dataIdsCount++,this.data.set(t,n)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),pg=function(){function e(){}return e.prototype.time=function(t){return Q("time")},e.prototype.read=function(t){return Q("read")},e.prototype.readSync=function(t){return Q("readSync")},e.prototype.numDataIds=function(){return Q("numDataIds")},e.prototype.disposeData=function(t){return Q("disposeData")},e.prototype.write=function(t,n,r){return Q("write")},e.prototype.move=function(t,n,r,o){return Q("move")},e.prototype.memory=function(){return Q("memory")},e.prototype.floatPrecision=function(){return Q("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,n,r,o){return Q("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Q("fusedBatchMatMul")},e.prototype.slice=function(t,n,r){return Q("slice")},e.prototype.stridedSlice=function(t,n,r,o){return Q("stridedSlice")},e.prototype.unstack=function(t,n){return Q("unstack")},e.prototype.reverse=function(t,n){return Q("reverse")},e.prototype.concat=function(t,n){return Q("concat")},e.prototype.neg=function(t){return Q("neg")},e.prototype.add=function(t,n){return Q("add")},e.prototype.addN=function(t){return Q("addN")},e.prototype.subtract=function(t,n){return Q("subtract")},e.prototype.multiply=function(t,n){return Q("multiply")},e.prototype.realDivide=function(t,n){return Q("realDivide")},e.prototype.floorDiv=function(t,n){return Q("floorDiv")},e.prototype.sum=function(t,n){return Q("sum")},e.prototype.prod=function(t,n){return Q("prod")},e.prototype.unsortedSegmentSum=function(t,n,r){return Q("unsortedSegmentSum")},e.prototype.argMin=function(t,n){return Q("argMin")},e.prototype.argMax=function(t,n){return Q("argMax")},e.prototype.equal=function(t,n){return Q("equal")},e.prototype.notEqual=function(t,n){return Q("notEqual")},e.prototype.less=function(t,n){return Q("less")},e.prototype.lessEqual=function(t,n){return Q("lessEqual")},e.prototype.greater=function(t,n){return Q("greater")},e.prototype.greaterEqual=function(t,n){return Q("greaterEqual")},e.prototype.logicalNot=function(t){return Q("logicalNot")},e.prototype.logicalAnd=function(t,n){return Q("logicalAnd")},e.prototype.logicalOr=function(t,n){return Q("logicalOr")},e.prototype.where=function(t){return Q("where")},e.prototype.select=function(t,n,r){return Q("select")},e.prototype.topk=function(t,n,r){return Q("topk")},e.prototype.min=function(t,n){return Q("min")},e.prototype.minimum=function(t,n){return Q("minimum")},e.prototype.mod=function(t,n){return Q("mod")},e.prototype.max=function(t,n){return Q("max")},e.prototype.maximum=function(t,n){return Q("maximum")},e.prototype.all=function(t,n){return Q("all")},e.prototype.any=function(t,n){return Q("any")},e.prototype.squaredDifference=function(t,n){return Q("squaredDifference")},e.prototype.ceil=function(t){return Q("ceil")},e.prototype.floor=function(t){return Q("floor")},e.prototype.round=function(t){return Q("round")},e.prototype.sign=function(t){return Q("sign")},e.prototype.isNaN=function(t){return Q("isNaN")},e.prototype.isInf=function(t){return Q("isInf")},e.prototype.isFinite=function(t){return Q("isFinite")},e.prototype.pow=function(t,n){return Q("pow")},e.prototype.exp=function(t){return Q("exp")},e.prototype.expm1=function(t){return Q("expm1")},e.prototype.softmax=function(t,n){return Q("softmax")},e.prototype.log=function(t){return Q("log")},e.prototype.log1p=function(t){return Q("log1p")},e.prototype.sqrt=function(t){return Q("sqrt")},e.prototype.rsqrt=function(t){return Q("rsqrt")},e.prototype.square=function(t){return Q("square")},e.prototype.reciprocal=function(t){return Q("reciprocal")},e.prototype.relu=function(t){return Q("relu")},e.prototype.relu6=function(t){return Q("relu6")},e.prototype.prelu=function(t,n){return Q("prelu")},e.prototype.elu=function(t){return Q("elu")},e.prototype.eluDer=function(t,n){return Q("eluDer")},e.prototype.selu=function(t){return Q("selu")},e.prototype.int=function(t){return Q("int")},e.prototype.clip=function(t,n,r){return Q("clip")},e.prototype.abs=function(t){return Q("abs")},e.prototype.complexAbs=function(t){return Q("complexAbs")},e.prototype.sigmoid=function(t){return Q("sigmoid")},e.prototype.softplus=function(t){return Q("softplus")},e.prototype.sin=function(t){return Q("sin")},e.prototype.cos=function(t){return Q("cos")},e.prototype.tan=function(t){return Q("tan")},e.prototype.asin=function(t){return Q("asin")},e.prototype.acos=function(t){return Q("acos")},e.prototype.atan=function(t){return Q("atan")},e.prototype.atan2=function(t,n){return Q("atan2")},e.prototype.sinh=function(t){return Q("sinh")},e.prototype.cosh=function(t){return Q("cosh")},e.prototype.tanh=function(t){return Q("tanh")},e.prototype.asinh=function(t){return Q("asinh")},e.prototype.acosh=function(t){return Q("acosh")},e.prototype.atanh=function(t){return Q("atanh")},e.prototype.erf=function(t){return Q("erf")},e.prototype.step=function(t,n){return Q("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Q("fusedConv2d")},e.prototype.conv2d=function(t,n,r){return Q("conv2d")},e.prototype.conv2dDerInput=function(t,n,r){return Q("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,n,r){return Q("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Q("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,n,r){return Q("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,n,r){return Q("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,n,r){return Q("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,n,r){return Q("conv3d")},e.prototype.conv3dDerInput=function(t,n,r){return Q("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,n,r){return Q("conv3dDerFilter")},e.prototype.maxPool=function(t,n){return Q("maxPool")},e.prototype.maxPoolBackprop=function(t,n,r,o){return Q("maxPoolBackprop")},e.prototype.avgPool=function(t,n){return Q("avgPool")},e.prototype.avgPoolBackprop=function(t,n,r){return Q("avgPoolBackprop")},e.prototype.avgPool3d=function(t,n){return Q("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,n,r){return Q("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,n){return Q("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,n,r,o){return Q("maxPool3dBackprop")},e.prototype.reshape=function(t,n){return Q("reshape")},e.prototype.cast=function(t,n){return Q("cast")},e.prototype.tile=function(t,n){return Q("tile")},e.prototype.pad=function(t,n,r){return Q("pad")},e.prototype.transpose=function(t,n){return Q("transpose")},e.prototype.gather=function(t,n,r){return Q("gather")},e.prototype.gatherND=function(t,n){return Q("gatherND")},e.prototype.scatterND=function(t,n,r){return Q("scatterND")},e.prototype.batchToSpaceND=function(t,n,r){return Q("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,n,r){return Q("spaceToBatchND")},e.prototype.resizeBilinear=function(t,n,r,o){return Q("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,n,r){return Q("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,n,r,o){return Q("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,n,r){return Q("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,n,r,o,a,i){return Q("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,n,r,o,a){return Q("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,n,r,o,a,i,s){return Q("LRNGrad")},e.prototype.multinomial=function(t,n,r,o){return Q("multinomial")},e.prototype.oneHot=function(t,n,r,o){return Q("oneHot")},e.prototype.cumsum=function(t,n,r,o){return Q("cumsum")},e.prototype.nonMaxSuppression=function(t,n,r,o,a){return Q("nonMaxSuppression")},e.prototype.fft=function(t){return Q("fft")},e.prototype.ifft=function(t){return Q("ifft")},e.prototype.complex=function(t,n){return Q("complex")},e.prototype.real=function(t){return Q("real")},e.prototype.imag=function(t){return Q("imag")},e.prototype.cropAndResize=function(t,n,r,o,a,i){return Q("cropAndResize")},e.prototype.depthToSpace=function(t,n,r){return Q("depthToSpace")},e.prototype.split=function(t,n,r){return Q("split")},e.prototype.sparseToDense=function(t,n,r,o){return Q("sparseToDense")},e.prototype.diag=function(t){return Q("diag")},e.prototype.fill=function(t,n,r){return Q("fill")},e.prototype.onesLike=function(t){return Q("onesLike")},e.prototype.zerosLike=function(t){return Q("zerosLike")},e.prototype.linspace=function(t,n,r){return Q("linspace")},e.prototype.dispose=function(){return Q("dispose")},e}();function Q(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function vo(e,t){for(var n=e.length,r=[],o=0;o<n;o++){var a=n-1-o,i=e[a]||1;(t[t.length-1-o]||1)>1&&i===1&&r.unshift(a)}return r}function Nt(e,t){for(var n=[],r=0;r<t.length;r++){var o=e[e.length-r-1],a=t.length-r-1,i=t[a];(o==null||o===1&&i>1)&&n.unshift(a)}return n}function Pe(e,t){for(var n=[],r=Math.max(e.length,t.length),o=0;o<r;o++){var a=e[e.length-o-1];a==null&&(a=1);var i=t[t.length-o-1];if(i==null&&(i=1),a===1)n.unshift(i);else if(i===1)n.unshift(a);else{if(a!==i)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(a)}}return n}function ts(e,t,n,r,o,a,i){i===void 0&&(i="channelsLast");var s,u=xf(t),c=u[0],l=u[1];if(i==="channelsLast")s=[c,l,e[3],e[3]];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);s=[c,l,e[1],e[1]]}return xa(e,s,n,r,o,a,!1,i)}function Wu(e,t,n,r,o,a,i){i===void 0&&(i="NDHWC");var s,u,c=uv(t),l=c[0],f=c[1],d=c[2];if(i==="NDHWC")u="channelsLast",s=[l,f,d,e[4],e[4]];else{if(i!=="NCDHW")throw new Error("Unknown dataFormat "+i);u="channelsFirst",s=[l,f,d,e[1],e[1]]}return zu(e,s,n,r,o,!1,u,a)}function xa(e,t,n,r,o,a,i,s){i===void 0&&(i=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],d=u[3];if(s==="channelsLast")c=e[0],l=e[1],f=e[2],d=e[3];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);c=e[0],d=e[1],l=e[2],f=e[3]}var h,p=t[0],m=t[1],g=t[3],v=xf(n),x=v[0],y=v[1],b=xf(r),w=b[0],C=b[1],E=Li(p,w),S=Li(m,C),k=function(W,$,q,X,P,V,G,L){var H,K,Y;if(typeof W=="number"){H={top:W,bottom:W,left:W,right:W,type:W===0?"VALID":"NUMBER"};var fe=function(Re,Me,_e,Be,Ne){Be==null&&(Be=vg(Re,Me,_e));var He=Re[0],Ut=Re[1],wt=au((He-Me+2*Be)/_e+1,Ne);I(bt(wt),function(){return"The output # of rows ("+wt+") must be an integer. Change the stride and/or zero pad parameters"});var Ct=au((Ut-Me+2*Be)/_e+1,Ne);return I(bt(Ct),function(){return"The output # of columns ("+Ct+") must be an integer. Change the stride and/or zero pad parameters"}),[wt,Ct]}([$,q],V,X,W,L);K=fe[0],Y=fe[1]}else if(W==="same"){K=Math.ceil($/X),Y=Math.ceil(q/P);var le=Math.max(0,(K-1)*X+V-$),we=Math.max(0,(Y-1)*P+G-q),ce=Math.floor(le/2),De=le-ce,qe=Math.floor(we/2);H={top:ce,bottom:De,left:qe,right:we-qe,type:"SAME"}}else{if(W!=="valid")throw Error("Unknown padding parameter: "+W);H={top:0,bottom:0,left:0,right:0,type:"VALID"},K=Math.ceil(($-V+1)/X),Y=Math.ceil((q-G+1)/P)}return{padInfo:H,outHeight:K,outWidth:Y}}(o,l,f,x,y,E,S,a),_=k.padInfo,A=k.outHeight,D=k.outWidth,T=i?g*d:g;return s==="channelsFirst"?h=[c,T,A,D]:s==="channelsLast"&&(h=[c,A,D,T]),{batchSize:c,dataFormat:s,inHeight:l,inWidth:f,inChannels:d,outHeight:A,outWidth:D,outChannels:T,padInfo:_,strideHeight:x,strideWidth:y,filterHeight:p,filterWidth:m,effectiveFilterHeight:E,effectiveFilterWidth:S,dilationHeight:w,dilationWidth:C,inShape:e,outShape:h,filterShape:t}}function zu(e,t,n,r,o,a,i,s){a===void 0&&(a=!1),i===void 0&&(i="channelsLast");var u=[-1,-1,-1,-1,-1],c=u[0],l=u[1],f=u[2],d=u[3],h=u[4];if(i==="channelsLast")c=e[0],l=e[1],f=e[2],d=e[3],h=e[4];else{if(i!=="channelsFirst")throw new Error("Unknown dataFormat "+i);c=e[0],h=e[1],l=e[2],f=e[3],d=e[4]}var p,m=t[0],g=t[1],v=t[2],x=t[4],y=uv(n),b=y[0],w=y[1],C=y[2],E=uv(r),S=E[0],k=E[1],_=E[2],A=Li(m,S),D=Li(g,k),T=Li(v,_),W=function(G,L,H,K,Y,fe,le,we,ce,De,qe){var Re,Me,_e,Be;if(typeof G=="number"){Re={top:G,bottom:G,left:G,right:G,front:G,back:G,type:G===0?"VALID":"NUMBER"};var Ne=function(An,vn,Ln,mn,gn,ao){gn==null&&(gn=vg(An,vn,mn));var Ea=An[0],gr=An[1],Or=An[2],No=au((Ea-vn+2*gn)/mn+1,ao);I(bt(No),function(){return"The output # of depths ("+No+") must be an integer. Change the stride and/or zero pad parameters"});var Mr=au((gr-vn+2*gn)/mn+1,ao);I(bt(Mr),function(){return"The output # of rows ("+Mr+") must be an integer. Change the stride and/or zero pad parameters"});var Oo=au((Or-vn+2*gn)/mn+1,ao);return I(bt(Oo),function(){return"The output # of columns ("+Oo+") must be an integer. Change the stride and/or zero pad parameters"}),[No,Mr,Oo,Ln]}([L,H,K,1],we,1,Y,G,qe);Me=Ne[0],_e=Ne[1],Be=Ne[2]}else if(G==="same"){Me=Math.ceil(L/Y),_e=Math.ceil(H/fe),Be=Math.ceil(K/le);var He=(Me-1)*Y+we-L,Ut=(_e-1)*fe+ce-H,wt=(Be-1)*le+De-K,Ct=Math.floor(He/2),an=He-Ct,ot=Math.floor(Ut/2),st=Ut-ot,Et=Math.floor(wt/2);Re={top:ot,bottom:st,left:Et,right:wt-Et,front:Ct,back:an,type:"SAME"}}else{if(G!=="valid")throw Error("Unknown padding parameter: "+G);Re={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Me=Math.ceil((L-we+1)/Y),_e=Math.ceil((H-ce+1)/fe),Be=Math.ceil((K-De+1)/le)}return{padInfo:Re,outDepth:Me,outHeight:_e,outWidth:Be}}(o,l,f,d,b,w,C,A,D,T,s),$=W.padInfo,q=W.outDepth,X=W.outHeight,P=W.outWidth,V=a?x*h:x;return i==="channelsFirst"?p=[c,V,q,X,P]:i==="channelsLast"&&(p=[c,q,X,P,V]),{batchSize:c,dataFormat:i,inDepth:l,inHeight:f,inWidth:d,inChannels:h,outDepth:q,outHeight:X,outWidth:P,outChannels:V,padInfo:$,strideDepth:b,strideHeight:w,strideWidth:C,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:A,effectiveFilterHeight:D,effectiveFilterWidth:T,dilationDepth:S,dilationHeight:k,dilationWidth:_,inShape:e,outShape:p,filterShape:t}}function vg(e,t,n,r){r===void 0&&(r=1);var o=Li(t,r);return Math.floor((e[0]*(n-1)-n+o)/2)}function xf(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function uv(e){return typeof e=="number"?[e,e,e]:e}function Li(e,t){return t<=1?e:e+(e-1)*(t-1)}function au(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function qa(e){var t=xf(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function _n(e,t){return qa(e)||qa(t)}function Bd(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function mg(e,t,n){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var r=tt(e.shape),o=e.toFloat(),a=n.complex(o,r);return r.dispose(),o.dispose(),a}if(!kE(e.dtype,t))return N.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var i=n.real(e);return a=i.cast(t),i.dispose(),a}if(t==="int32")return n.int(e);if(t==="bool"){var s=ue(0,e.dtype);return a=n.notEqual(e,s),s.dispose(),a}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function yf(e,t){return N.makeTensorFromDataId(e.dataId,t,e.dtype)}function gg(e,t,n){var r=(t-e)/(n-1),o=vs(n,"float32");o[0]=e;for(var a=1;a<o.length;a++)o[a]=o[a-1]+r;return kt(o,"float32")}var S6=Object.freeze({castTensor:mg,reshapeTensor:yf,linspaceImpl:gg,upcastType:jt,axesAreInnerMostDims:tg,combineLocations:u_,computeOutAndReduceShapes:Zt,expandShapeToKeepDim:En,assertAxesAreInnerMostDims:Dn,getAxesPermutation:Tr,getUndoAxesPermutation:kd,getInnerMostAxes:Pr,getBroadcastDims:vo,getReductionAxes:Nt,assertAndGetBroadcastShape:Pe,assertParamsConsistent:c_,computeOutShape:Ga,computePool2DInfo:ts,computePool3DInfo:Wu,computeConv2DInfo:xa,computeConv3DInfo:zu,computeDefaultPad:vg,tupleValuesAreOne:qa,eitherStridesOrDilationsAreOne:_n,convertConv2DDataFormat:Bd,PARALLELIZE_THRESHOLD:lg,computeOptimalWindowSize:Bl});function cv(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function By(e,t){return{real:e[2*t],imag:e[2*t+1]}}function k6(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function A6(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function D6(e,t,n){var r=function(a,i,s){return function(u,c,l){for(var f=0,d=u.length,h=0,p=!1;f<d;){var m=l(c,u[h=f+(d-f>>>1)]);m>0?f=h+1:(d=h,p=!m)}return p?f:-f-1}(a,i,s||R6)}(e,t,n),o=r<0?-(r+1):r;e.splice(o,0,t)}function R6(e,t){return e>t?1:e<t?-1:0}function xg(e,t,n,r,o){return H_(e,t,n,r,o,0).selectedIndices}function yg(e,t,n,r,o,a){var i=H_(e,t,n,r,o,a);return i.numValidOutputs.dispose(),{selectedIndices:i.selectedIndices,selectedScores:i.selectedScores}}function H_(e,t,n,r,o,a,i,s){s===void 0&&(s=!1);for(var u=Array.from(t).map(function(b,w){return{score:b,boxIndex:w,suppressBeginIndex:0}}).filter(function(b){return b.score>o}).sort(Ty),c=a>0?-.5/a:0,l=[],f=[];l.length<n&&u.length>0;){var d=u.pop(),h=d.score,p=d.boxIndex,m=d.suppressBeginIndex;if(h<o)break;for(var g=!1,v=l.length-1;v>=m;--v){var x=F6(e,p,l[v]);if(x>=r){g=!0;break}if(d.score=d.score*I6(r,c,x),d.score<=o)break}d.suppressBeginIndex=l.length,g||(d.score===h?(l.push(p),f.push(d.score)):d.score>o&&D6(u,d,Ty))}var y=l.length;return s&&(l.fill(0,y),f.fill(0,y)),{selectedIndices:kt(l,"int32"),selectedScores:kt(f,"float32"),numValidOutputs:ue(y,"int32")}}function F6(e,t,n){var r=e.subarray(4*t,4*t+4),o=e.subarray(4*n,4*n+4),a=Math.min(r[0],r[2]),i=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),c=Math.min(o[0],o[2]),l=Math.min(o[1],o[3]),f=Math.max(o[0],o[2]),d=Math.max(o[1],o[3]),h=(s-a)*(u-i),p=(f-c)*(d-l);if(h<=0||p<=0)return 0;var m=Math.max(a,c),g=Math.max(i,l),v=Math.min(s,f),x=Math.min(u,d),y=Math.max(v-m,0)*Math.max(x-g,0);return y/(h+p-y)}function I6(e,t,n){var r=Math.exp(t*n*n);return n<=e?r:0}function Ty(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function V_(e,t,n){var r=new Array(e.rank).fill(0),o=e.shape.slice();return t.map(function(a){o[n]=a;var i=e.slice(r,o);return r[n]+=a,i})}function j_(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var o=Se(n,e.dtype);for(r=0;r<o.values.length;++r){for(var a=o.indexToLoc(r),i=new Array(e.rank),s=0;s<i.length;s++)i[s]=a[s]%e.shape[s];var u=e.locToIndex(i);o.values[r]=e.values[u]}return o.toTensor()}function G_(e,t,n,r,o){for(var a=t[t.length-1],i=[e.length/a,a],s=i[0],u=i[1],c=Ji(n,s*r),l=Ji("int32",s*r),f=0;f<s;f++){for(var d=f*u,h=e.subarray(d,d+u),p=[],m=0;m<h.length;m++)p.push({value:h[m],index:m});p.sort(function(b,w){return w.value-b.value});var g=f*r,v=c.subarray(g,g+r),x=l.subarray(g,g+r);for(m=0;m<r;m++)v[m]=p[m].value,x[m]=p[m].index}var y=t.slice();return y[y.length-1]=r,[Gt(c,y,n),Gt(l,y,"int32")]}function bg(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var o=Se(e,"int32"),a=Se([n.length,e.length],"int32");for(r=0;r<n.length;r++){var i=o.indexToLoc(n[r]),s=r*e.length;a.values.set(i,s)}return a.toTensor()}var B6=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(o,a){return"T"+a});var n=[];this.variableNames.forEach(function(o){n.push("float v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},T6=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(o,a){return"T"+a});var n=[];this.variableNames.forEach(function(o){n.push("vec4 v"+o+" = get"+o+"AtOutCoords();")});var r=this.variableNames.map(function(o){return"v"+o}).join(" + ");this.userCode=`
      void main() {
        `+n.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},P6=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,o=e.batchSize,a=e.inSize,i=Math.ceil(a/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[o,i];var s=t==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+u+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+s+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function q_(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(n){return e+"."+n})}function Fn(e,t){return t===1?[e]:q_(e,t)}function dn(){var e,t,n,r,o,a,i,s,u,c;return ee().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",n="out",r="in",o="texture",a="outputColor",i="out vec4 outputColor;",s=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,u="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",n="varying",r="varying",o="texture2D",a="gl_FragColor",i="",s=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,u=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:o,output:a,defineOutput:i,defineSpecialNaN:s,defineSpecialInf:u,defineRound:c}}function Pa(e,t,n){n===void 0&&(n="index");var r=Ar(t);return r.map(function(o,a){return"int "+e[a]+" = "+n+" / "+o+"; "+(a===r.length-1?"int "+e[a+1]+" = "+n+" - "+e[a]+" * "+o:"index -= "+e[a]+" * "+o)+";"}).join("")}function wg(e){var t=Ar(e).map(function(n){return n.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var K_=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function N6(e,t,n,r){var o=[];e.forEach(function(h){var p=ge(h.shapeInfo.logicalShape);h.shapeInfo.isUniform?o.push("uniform float "+h.name+(p>1?"["+p+"]":"")+";"):(o.push("uniform sampler2D "+h.name+";"),o.push("uniform int offset"+h.name+";"))});var a,i,s=o.join(`
`),u=e.map(function(h){return function(p,m,g){g===void 0&&(g=!1);var v="";v+=g?X_(p):pi(p);var x=p.shapeInfo.logicalShape,y=m.logicalShape;return x.length<=y.length&&(v+=g?function(b,w){var C,E=b.name,S=E.charAt(0).toUpperCase()+E.slice(1),k="get"+S+"AtOutCoords",_=b.shapeInfo.logicalShape.length,A=w.logicalShape.length,D=vo(b.shapeInfo.logicalShape,w.logicalShape),T=rt(A),W=A-_,$=["x","y","z","w","u","v"];C=_===0?"":A<2&&D.length>=1?"coords = 0;":D.map(function(H){return"coords."+$[H+W]+" = 0;"}).join(`
`);var q="";q=A<2&&_>0?"coords":b.shapeInfo.logicalShape.map(function(H,K){return"coords."+$[K+W]}).join(", ");var X="return outputValue;",P=ge(b.shapeInfo.logicalShape)===1,V=ge(w.logicalShape)===1;if(_!==1||P||V){if(P&&!V)X=A===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(D.length){var G=_-2,L=_-1;D.indexOf(G)>-1&&D.indexOf(L)>-1?X="return vec4(outputValue.x);":D.indexOf(G)>-1?X="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":D.indexOf(L)>-1&&(X="return vec4(outputValue.xx, outputValue.zz);")}}else X=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+k+`() {
      `+T+` coords = getOutputCoords();
      `+C+`
      vec4 outputValue = get`+S+"("+q+`);
      `+X+`
    }
  `}(p,m):function(b,w){var C=b.name,E=C.charAt(0).toUpperCase()+C.slice(1),S="get"+E+"AtOutCoords",k=w.texShape,_=b.shapeInfo.texShape,A=b.shapeInfo.logicalShape.length,D=w.logicalShape.length;if(!b.shapeInfo.isUniform&&A===D&&b.shapeInfo.flatOffset==null&&Bt(_,k))return`
      float `+S+`() {
        return sampleTexture(`+C+`, resultUV);
      }
    `;var T,W=rt(D),$=vo(b.shapeInfo.logicalShape,w.logicalShape),q=D-A,X=["x","y","z","w","u","v"];T=A===0?"":D<2&&$.length>=1?"coords = 0;":$.map(function(V){return"coords."+X[V+q]+" = 0;"}).join(`
`);var P="";return P=D<2&&A>0?"coords":b.shapeInfo.logicalShape.map(function(V,G){return"coords."+X[G+q]}).join(", "),`
    float `+S+`() {
      `+W+` coords = getOutputCoords();
      `+T+`
      return get`+E+"("+P+`);
    }
  `}(p,m)),v}(h,t,r)}).join(`
`),c=t.texShape,l=dn(),f=function(h){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+h.texture2D+`(textureSampler, uv).r;
    }
  `}(l),d=function(h){return h.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+h.varyingFs+` vec2 resultUV;
    `+h.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+h.defineSpecialNaN+`
    `+h.defineSpecialInf+`
    `+h.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+O6+`
    `+M6+`
    `+L6+`
  `}(l);return t.isPacked?(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(b,w){var C=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];return C[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return 2 * (resTexRC.x * `+C[1]+` + resTexRC.y);
    }
  `}(0,p);case 2:return function(b,w){var C=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)];if(Bt(b,w))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `;var E=Math.ceil(b[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=h,g=p,v=[Math.ceil(g[0]/2),Math.ceil(g[1]/2)],x=Math.ceil(m[2]/2),y=x*Math.ceil(m[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+v[0]+", "+v[1]+`));
      int index = resTexRC.x * `+v[1]+` + resTexRC.y;

      int b = index / `+y+`;
      index -= b * `+y+`;

      int r = 2 * (index / `+x+`);
      int c = imod(index, `+x+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(b,w){for(var C=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],E=Math.ceil(b[b.length-1]/2),S=E*Math.ceil(b[b.length-2]/2),k=S,_="",A="b, r, c",D=2;D<b.length-1;D++)k*=b[b.length-D-1],_=`
      int b`+D+" = index / "+k+`;
      index -= b`+D+" * "+k+`;
    `+_,A="b"+D+", "+A;return`
    ivec`+b.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+_+`

      int b = index / `+S+`;
      index -= b * `+S+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+b.length+"("+A+`);
    }
  `}(h,p)}var m,g,v,x,y}(t.logicalShape,c),i=function(h){return`
    void setOutput(vec4 val) {
      `+h.output+` = val;
    }
  `}(l)):(a=function(h,p){switch(h.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(v,x){return x[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+x[1]+`.0);
      }
    `:x[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+x[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      return resTexRC.x * `+x[1]+` + resTexRC.y;
    }
  `}(0,p);case 2:return function(v,x){return Bt(v,x)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+x[0]+", "+x[1]+`));
      }
    `:v[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:v[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+x[0]+", "+x[1]+`));
        int index = resTexRC.x * `+x[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      int r = index / `+v[1]+`;
      int c = index - r * `+v[1]+`;
      return ivec2(r, c);
    }
  `}(h,p);case 3:return m=p,g=Pa(["r","c","d"],h),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+m[0]+", "+m[1]+`));
      int index = resTexRC.x * `+m[1]+` + resTexRC.y;
      `+g+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(v,x){var y=Pa(["r","c","d","d2"],v);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;
      `+y+`
      return ivec4(r, c, d, d2);
    }
  `}(h,p);case 5:return function(v,x){var y=Pa(["r","c","d","d2","d3"],v);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+x[0]+`,
                             `+x[1]+`));

      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(h,p);case 6:return function(v,x){var y=Pa(["r","c","d","d2","d3","d4"],v);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+x[0]+", "+x[1]+`));
      int index = resTexRC.x * `+x[1]+` + resTexRC.y;

      `+y+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(h,p);default:throw new Error(h.length+"-D output sampling is not yet supported")}var m,g}(t.logicalShape,c),i=function(h){return`
    void setOutput(float val) {
      `+h.output+` = vec4(val, 0, 0, 0);
    }
  `}(l)),r&&(d+=W6),[d,f,i,s,a,u,n].join(`
`)}function pi(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+o+"() {return "+r+";}";var a=n.shapeInfo.texShape,i=a[0],s=a[1];if(i===1&&s===1)return`
      float `+o+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=n.shapeInfo.texShape,c=u[0],l=u[1],f=_a(r);return`
    float `+o+`() {
      vec2 uv = uvFromFlat(`+c+", "+l+", "+f+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 1:return function(n){var r=n.name,o="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return`
      float `+o+`(int index) {
        `+ci(n)+`
      }
    `;var a=n.shapeInfo.texShape,i=a[0],s=a[1];if(s===1&&i===1)return`
      float `+o+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var u=_a(r);return s===1?`
      float `+o+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+u+") + 0.5) / "+i+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:i===1?`
      float `+o+`(int index) {
        vec2 uv = vec2((float(index + `+u+") + 0.5) / "+s+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+o+`(int index) {
      vec2 uv = uvFromFlat(`+i+", "+s+", index + "+u+`);
      return sampleTexture(`+r+`, uv);
    }
  `}(e);case 2:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=n.shapeInfo.texShape;if(i!=null&&Bt(r,i)){var s=i[0],u=i[1];return`
    float `+a+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+s+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `}var c=jo(r),l=c.newShape,f=c.keptDims,d=l;if(d.length<r.length){var h=vi(n,d);return`
      `+pi(h)+`
      float `+a+`(int row, int col) {
        return `+a+"("+mi(["row","col"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+ci(n)+`
      }
    `;var p=i[0],m=i[1],g=_a(o);return m===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `:p===1?`
    float `+a+`(int row, int col) {
      float index = dot(vec3(row, col, `+g+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+m+`.0, 0.5);
      return sampleTexture(`+o+`, uv);
    }
  `:`
  float `+a+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+g+`;
    vec2 uv = uvFromFlat(`+p+", "+m+`, index);
    return sampleTexture(`+o+`, uv);
  }
`}(e);case 3:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[1]*r[2],s=r[2],u=jo(r),c=u.newShape,l=u.keptDims,f=c;if(f.length<r.length){var d=vi(n,f);return`
        `+pi(d)+`
        float `+a+`(int row, int col, int depth) {
          return `+a+"("+mi(["row","col","depth"],l)+`);
        }
      `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+i+", "+s+`, 1)));
        `+ci(n)+`
      }
    `;var h=n.shapeInfo.texShape,p=h[0],m=h[1],g=n.shapeInfo.flatOffset;if(m===i&&g==null)return`
        float `+a+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+s+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+m+".0, "+p+`.0);
          return sampleTexture(`+o+`, uv);
        }
      `;if(m===s&&g==null)return`
    float `+a+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+".0, "+p+`.0);
      return sampleTexture(`+o+`, uv);
    }
  `;var v=_a(o);return`
      float `+a+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+i+" + col * "+s+" + depth + "+v+`;
        vec2 uv = uvFromFlat(`+p+", "+m+`, index);
        return sampleTexture(`+o+`, uv);
      }
  `}(e);case 4:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[3],s=r[2]*i,u=r[1]*s,c=jo(r),l=c.newShape,f=c.keptDims;if(l.length<r.length){var d=vi(n,l);return`
      `+pi(d)+`
      float `+a+`(int row, int col, int depth, int depth2) {
        return `+a+"("+mi(["row","col","depth","depth2"],f)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+u+", "+s+", "+i+`, 1)));
        `+ci(n)+`
      }
    `;var h=n.shapeInfo.flatOffset,p=n.shapeInfo.texShape,m=p[0],g=p[1];if(g===u&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(g===i&&h==null)return`
      float `+a+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+g+".0, "+m+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var v=_a(o);return`
    float `+a+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+u+" + col * "+s+` +
          depth * `+i+` + depth2;
      vec2 uv = uvFromFlat(`+m+", "+g+", index + "+v+`);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 5:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=r[4],s=r[3]*i,u=r[2]*s,c=r[1]*u,l=jo(r),f=l.newShape,d=l.keptDims;if(f.length<r.length){var h=vi(n,f);return`
      `+pi(h)+`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        return `+a+"("+mi(["row","col","depth","depth2","depth3"],d)+`);
      }
    `}if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+c+", "+u+", "+s+", "+i+`)) +
          depth3;
        `+ci(n)+`
      }
    `;var p=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,g=m[0],v=m[1];if(v===c&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+u+", "+s+", "+i+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(v===i&&p==null)return`
      float `+a+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+v+".0, "+g+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var x=_a(o);return`
    float `+a+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+u+" + depth * "+s+` +
          depth2 * `+i+" + depth3 + "+x+`;
      vec2 uv = uvFromFlat(`+g+", "+v+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);case 6:return function(n){var r=n.shapeInfo.logicalShape,o=n.name,a="get"+o.charAt(0).toUpperCase()+o.slice(1),i=jo(r),s=i.newShape,u=i.keptDims;if(s.length<r.length){var c=vi(n,s);return`
      `+pi(c)+`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+a+"("+mi(["row","col","depth","depth2","depth3","depth4"],u)+`);
      }
    `}var l=r[5],f=r[4]*l,d=r[3]*f,h=r[2]*d,p=r[1]*h;if(n.shapeInfo.isUniform)return`
      float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+p+", "+h+", "+d+", "+f+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+l+`, 1)));
        `+ci(n)+`
      }
    `;var m=n.shapeInfo.flatOffset,g=n.shapeInfo.texShape,v=g[0],x=g[1];if(x===p&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+h+", "+d+", "+f+", "+l+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+x+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;if(x===l&&m==null)return`
      float `+a+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+x+".0, "+v+`.0);
        return sampleTexture(`+o+`, uv);
      }
    `;var y=_a(o);return`
    float `+a+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+p+" + col * "+h+" + depth * "+d+` +
          depth2 * `+f+" + depth3 * "+l+" + depth4 + "+y+`;
      vec2 uv = uvFromFlat(`+v+", "+x+`, index);
      return sampleTexture(`+o+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function X_(e){var t,n,r;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=dn(),`
    vec4 `+n+`() {
      return `+r.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(o){var a=o.name,i="get"+a.charAt(0).toUpperCase()+a.slice(1),s=o.shapeInfo.texShape,u=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)],c=dn();return`
    vec4 `+i+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+u[0]+", "+u[1]+`, index);
      return `+c.texture2D+"("+a+`, uv);
    }
  `}(e);case 2:return function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,c=u[0],l=u[1],f=dn();if(u!=null&&Bt(a,u))return`
      vec4 `+s+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+l+".0, "+c+`.0);

        return `+f.texture2D+"("+i+`, uv);
      }
    `;var d=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],h=Math.ceil(a[1]/2);return`
    vec4 `+s+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+h+", "+d[0]+", "+d[1]+`, row, col);
      return `+f.texture2D+"("+i+`, uv);
    }
  `}(e);case 3:return function(o){var a=o.shapeInfo.logicalShape,i=o.name,s="get"+i.charAt(0).toUpperCase()+i.slice(1),u=o.shapeInfo.texShape,c=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(a[0]===1){var l=a.slice(1),f=vi(o,l);return`
        `+X_(f)+`
        vec4 `+s+`(int b, int row, int col) {
          return `+s+"("+mi(["b","row","col"],[1,2])+`);
        }
      `}var d=c[0],h=c[1],p=Math.ceil(a[2]/2),m=p*Math.ceil(a[1]/2),g=dn();return`
    vec4 `+s+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+d+", "+h+", "+m+", "+p+`, b, row, col);
      return `+g.texture2D+"("+i+`, uv);
    }
  `}(e);default:return function(o){for(var a=o.shapeInfo.logicalShape,i=a.length,s=o.name,u="get"+s.charAt(0).toUpperCase()+s.slice(1),c=o.shapeInfo.texShape,l=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],f=l[0],d=l[1],h=Math.ceil(a[i-1]/2),p=h*Math.ceil(a[i-2]/2),m="int b, int row, int col",g="b * "+p+" + (row / 2) * "+h+" + (col / 2)",v=2;v<i-1;v++)m="int b"+v+", "+m,p*=a[i-v-1],g="b"+v+" * "+p+" + "+g;var x=dn();return`
    vec4 `+u+"("+m+`) {
      int index = `+g+`;
      int texR = index / `+d+`;
      int texC = index - texR * `+d+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+d+", "+f+`);
      return `+x.texture2D+"("+s+`, uv);
    }
  `}(e)}}var O6=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,M6=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,L6=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,W6=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function _a(e){return"offset"+e}function ci(e){var t=e.name,n=ge(e.shapeInfo.logicalShape);return n<2?"return "+t+";":`
    for (int i = 0; i < `+n+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function rt(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function vi(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function mi(e,t){return t.map(function(n){return e[n]}).join(", ")}var z6=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,I(e.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var o=e[e.length-1],a=Math.ceil(o/t);this.outputShape=e.slice(0,-1),a>1&&this.outputShape.push(a),r||this.variableNames.push("bestIndicesA");var i,s,u=this.outputShape,c=u.length,l=rt(c),f=Fn("coords",c);if(a===1){var d=rt(s=c+1);i=`
        `+d+" sourceLocR = "+d+"("+f.join()+`, 0);
        ++`+f[c-1]+`;
        `+d+" sourceLocG = "+d+"("+f.join()+`, 0);
        ++`+f[c-2]+`;
        `+d+" sourceLocA = "+d+"("+f.join()+`, 0);
        --`+f[c-1]+`;
        `+d+" sourceLocB = "+d+"("+f.join()+`, 0);
        --`+f[c-2]+";"}else s=c,i=`
        `+l+` sourceLocR = coords;
        ++`+f[c-1]+`;
        `+l+` sourceLocG = coords;
        ++`+f[c-2]+`;
        `+l+` sourceLocA = coords;
        --`+f[c-1]+`;
        `+l+` sourceLocB = coords;
        --`+f[c-2]+";";var h=["x","y","z","w","u","v"].slice(0,s),p="."+h[s-1],m=h.map(function(S){return"int "+S}),g=Fn("sourceLocR",s-1).concat("inIdx.r"),v=Fn("sourceLocG",s-1).concat("inIdx.g"),x=Fn("sourceLocB",s-1).concat("inIdx.b"),y=Fn("sourceLocA",s-1).concat("inIdx.a"),b=n==="max"?"greaterThan":"lessThan",w=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+g.join()+`),
                             getBestIndicesAChannel(`+v.join()+`),
                             getBestIndicesAChannel(`+x.join()+`),
                             getBestIndicesAChannel(`+y.join()+")));",C=`vec4(
            getAChannel(`+g.join()+`),
            hasNextCol ? getAChannel(`+v.join()+`) : 0.,
            hasNextRow ? getAChannel(`+x.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+y.join()+") : 0.)",E=r?"":`
      float getBestIndicesAChannel(`+m.join()+`) {
        return getChannel(getBestIndicesA(`+h.join()+`),
                                          vec2(`+h.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+m.join()+`) {
        return getChannel(getA(`+h.join()+`),
                               vec2(`+h.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+l+` coords = getOutputCoords();
        bool hasNextCol = `+f[c-1]+" < "+(u[c-1]-1)+`;
        bool hasNextRow = `+f[c-2]+" < "+(u[c-2]-1)+`;
        `+i+`
        ivec4 srcIdx = ivec4(sourceLocR`+p+", sourceLocG"+p+`,
          sourceLocB`+p+", sourceLocA"+p+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+C+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+w+`
          vec4 candidate = `+C+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+b+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},$6=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.top,l=u-1-e.padInfo.left,f=1/(t*n);this.userCode=`
      const ivec2 pads = ivec2(`+c+", "+l+`);
      const float avgMultiplier = float(`+f+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
            wR += `+a+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+u+`;
            wC+= `+i+`) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},U6=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=l-1-e.padInfo.front,p=f-1-e.padInfo.top,m=d-1-e.padInfo.left,g=1/(t*n*r);this.userCode=`
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float avgMultiplier = float(`+g+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
            wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+o+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+f+`;
              wR += `+u+`) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+c+`) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},H6=function(e,t,n,r,o,a){this.outputShape=[],this.variableNames=["x","mean","variance"],Pe(e,t),Pe(e,n);var i="0.0";r!=null&&(Pe(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="1.0";o!=null&&(Pe(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+i+`;
        float scale = `+s+`;
        float inv = scale * inversesqrt(variance + float(`+a+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},V6=function(e,t,n,r,o,a){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Pe(e,t),Pe(e,n);var i="vec4(0.0)";r!=null&&(Pe(e,r),this.variableNames.push("offset"),i="getOffsetAtOutCoords()");var s="vec4(1.0)";o!=null&&(Pe(e,o),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+i+`;
        vec4 scale = `+s+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+a+`));

        setOutput((x - mean) * inv + offset);
      }
    `},j6="return areal * breal - aimag * bimag;",G6="return areal * bimag + aimag * breal;",Py=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Pe(t,n),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},Gh="return a + b;",qh="return a - b;",Ny="return a * b;",Y_="return (a < 0.) ? b * a : a;",mt=function(e,t,n){this.variableNames=["A","B"],this.outputShape=Pe(t,n),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},Q_=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,so=function(e,t,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Pe(t,n);var o=this.outputShape.length,a="";if(r)if(o===0||ge(this.outputShape)===1)a=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(a=`
          `+rt(o)+` coords = getOutputCoords();
        `,o===1)a+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var i=Fn("coords",o);a+=`
            bool nextRowOutOfBounds =
              (`+i[o-2]+" + 1) >= "+this.outputShape[o-2]+`;
            bool nextColOutOfBounds =
              (`+i[o-1]+" + 1) >= "+this.outputShape[o-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+a+`

        setOutput(result);
      }
    `},q6=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),K6=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,n){var r=this;return function(o,a){r.minLoc==null&&(r.minLoc=o.getUniformLocationNoThrow(a,"minVal"),r.maxLoc=o.getUniformLocationNoThrow(a,"maxVal")),o.gl.uniform1f(r.minLoc,t),o.gl.uniform1f(r.maxLoc,n)}},e}(),X6=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},Y6=function(e){this.outputShape=[],this.outputShape=Ga(e,1),this.variableNames=e.map(function(s,u){return"T"+u});var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var o=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+o+"));")}var a=t.length,i=t[t.length-1];r.push("else setOutput(getT"+a+"(yR, yC-"+i+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},Q6=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ga(e,t);var n=this.outputShape,r=n.length,o=rt(r),a=Fn("coords",r),i=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map(function(g,v){return"T"+v});var s=new Array(e.length-1);s[0]=e[0][t];for(var u=1;u<s.length;u++)s[u]=s[u-1]+e[u][t];var c=i[t],l=i.slice(-2),f=i.join(),d="if ("+c+" < "+s[0]+`) {
        return getChannel(
            getT0(`+f+"), vec2("+l.join()+`));
        }`;for(u=1;u<s.length;u++){var h=s[u-1];d+=`
        if (`+c+" < "+s[u]+"  && "+c+" >= "+s[u-1]+`) {
          return getChannel(
            getT`+u+"("+Yc(i,c,h)+`),
            vec2(`+Yc(l,c,h)+`));
        }`}var p=s.length,m=s[s.length-1];d+=`
        return getChannel(
          getT`+p+"("+Yc(i,c,m)+`),
          vec2(`+Yc(l,c,m)+"));",this.userCode=`
      float getValue(`+i.map(function(g){return"int "+g})+`) {
        `+d+`
      }

      void main() {
        `+o+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+a+`), 0., 0., 0.);

        `+a[r-1]+" = "+a[r-1]+` + 1;
        if (`+a[r-1]+" < "+n[r-1]+`) {
          result.g = getValue(`+a+`);
        }

        `+a[r-2]+" = "+a[r-2]+` + 1;
        if (`+a[r-2]+" < "+n[r-2]+`) {
          result.a = getValue(`+a+`);
        }

        `+a[r-1]+" = "+a[r-1]+` - 1;
        if (`+a[r-2]+" < "+n[r-2]+` &&
            `+a[r-1]+" < "+n[r-1]+`) {
          result.b = getValue(`+a+`);
        }
        setOutput(result);
      }
    `};function Yc(e,t,n){var r=e.indexOf(t);return e.map(function(o,a){return a===r?o+" - "+n:o}).join()}var Z6=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+a+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},J6=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=e.dataFormat==="channelsLast",i=t-1-e.padInfo.top,s=n-1-e.padInfo.left,u=a?1:2,c=a?2:3,l=a?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+l+`];

        ivec2 dyCorner = ivec2(coords[`+u+"], coords["+c+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+a+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},eN=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.padInfo.front,a=e.padInfo.top,i=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+o+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+n+" - "+a+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+i+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},tN=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=t-1-e.padInfo.front,u=n-1-e.padInfo.top,c=r-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+s+", "+u+", "+c+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+o+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+n+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+a+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+n+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+i+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},nN=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,o=e.padInfo.left,a=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+a+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+r+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+n+" - "+o+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},rN=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,o=e.strideWidth,a=t-1-e.padInfo.top,i=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+a+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+n+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+o+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+n+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+s+`; dm++) {
              int d2 = d1 * `+s+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Oy=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.padInfo.top,a=e.padInfo.left,i=e.strideHeight,s=e.strideWidth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterHeight,f=e.filterWidth,d=4*Math.floor(e.inChannels/4),h=e.inChannels%4,p=e.dataFormat==="channelsLast",m=p?1:2,g=p?2:3,v=p?3:1,x="",y="";n&&(x=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,y="result = activation(result);");var b=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+x+`

      const ivec2 strides = ivec2(`+i+", "+s+`);
      const ivec2 pads = ivec2(`+o+", "+a+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+v+`];

        ivec2 xRCCorner =
            ivec2(coords[`+m+"], coords["+g+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+f+`; wC++) {
            int xC = xCCorner + wC * `+c+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+d+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+p+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(h===1)+`) {

              if (`+p+`) {
                dotProd +=
                    getX(batch, xR, xC, `+d+`) *
                    getW(wR, wC, `+d+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+d+`, xR, xC) *
                    getW(wR, wC, `+d+`, d2);
              }

            } else if (`+(h===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2)
              );

              if (`+p+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(h===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+d+`, d2),
                getW(wR, wC, `+d+` + 1, d2),
                getW(wR, wC, `+d+` + 2, d2)
              );

              if (`+p+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+d+`),
                  getX(batch, xR, xC, `+d+` + 1),
                  getX(batch, xR, xC, `+d+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+d+`, xR, xC),
                  getX(batch, `+d+` + 1, xR, xC),
                  getX(batch, `+d+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+b+`
        `+y+`
        setOutput(result);
      }
    `},oN=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.filterDepth,f=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+t+", "+n+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+l+`; wF++) {
          int xF = xFCorner + wF * `+s+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`; wR++) {
            int xR = xRCorner + wR * `+u+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`; wC++) {
              int xC = xCCorner + wC * `+c+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+h+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(p===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+h+`) *
                  getW(wF, wR, wC, `+h+`, d2);
              } else if (`+(p===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(p===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+h+`),
                  getX(batch, xF, xR, xC, `+h+` + 1),
                  getX(batch, xF, xR, xC, `+h+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+h+`, d2),
                  getW(wF, wR, wC, `+h+` + 1, d2),
                  getW(wF, wR, wC, `+h+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},My=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=e.outChannels/e.inChannels,m="",g="";n&&(m=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`
          float activation(float x) {
            `+n+`
          }
        `,g="result = activation(result);");var v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+m+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+p+`;
        int q = d2 - d1 * `+p+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+l+`;

          if (xR < 0 || xR >= `+o+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+f+`;

            if (xC < 0 || xC >= `+a+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+v+`
        `+g+`
        setOutput(result);
      }
    `},Ly=function(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var o=e.inHeight,a=e.inWidth,i=e.padInfo.top,s=e.padInfo.left,u=e.strideHeight,c=e.strideWidth,l=e.dilationHeight,f=e.dilationWidth,d=e.filterHeight,h=e.filterWidth,p=h,m="int xR; int xC; int xCOffset;",g=0;g<d;g++)for(var v=0;v<h;v++)m+=`
          vec4 xTexelR`+g+"C"+2*v+` = vec4(0.);
          vec4 wR`+g+"C"+v+` = vec4(0.);
          vec4 xR`+g+"C"+v+" = vec4(0.);";for(g=0;g<d;g++)for(var x=0;x<p;x++){if(m+=`
          xR = xRCorner + `+g*l+`;
          xC = xCCorner + `+(v=2*x)*f+`;
        `,c===1){if(v<h&&(m+=s%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    xTexelR`+g+"C"+v+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+o+" && xCOffset >= 0 && xCOffset < "+a+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+a+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+`.xy);
                } else {
                  xR`+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+o+" && xC >= 0 && xC < "+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xR`+g+"C"+v+" = xTexelR"+g+"C"+v+`;
              `,v+1<h)){var y=s%2==0?qm(f):f;f%2==0&&s%2==1||f%2!=0&&s%2!=1?(m+=`
                  xCOffset = xC + `+s%2+" + "+y+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,f>1&&(m+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+o+` &&
                      xCOffset >= 0 && xCOffset < `+a+`) {
                      xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+g+"C"+v+` = vec4(0.);
                    }
                  `),m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.xy);
                `):m+=`
                  xCOffset = xC + `+y+`;

                  if(xR >= 0 && xR < `+o+` &&
                    xCOffset >= 0 && xCOffset < `+a+`) {
                    xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+`;
                `}}else v<h&&(m+=`
              if(xR >= 0 && xR < `+o+`) {
            `,s%2==1?(m+=`
                xCOffset = xC + 1 - `+c+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+a+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
              `,v+1<h&&(m+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+c+`;
                  if(xCOffset >= 0 && xCOffset < `+a+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+`.xy, final.xy);
                `)):(m+=`
                if(xC >= 0 && xC < `+a+`) {
                  xTexelR`+g+"C"+v+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+g+"C"+v+` = vec4(0.);
                }

                xCOffset = xC + `+c+`;
                if(xCOffset >= 0 && xCOffset < `+a+`) {
                  xTexelR`+g+"C"+(v+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+g+"C"+(v+2)+` = vec4(0.);
                }

                xR`+g+"C"+v+` = vec4(
                  xTexelR`+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+`.xy);
              `,v+1<h&&(m+=`
                  xR`+g+"C"+(v+1)+` = vec4(
                    xTexelR`+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+`.zw);
                `)),m+="}");v<h&&(m+=`
            vec4 wTexelR`+g+"C"+v+" = getW("+g+", "+v+`, d1, q);
            wR`+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+`.xz);
          `,v+1<h&&(m+=`
              vec4 wTexelR`+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+`, d1, q);
              wR`+g+"C"+(v+1)+` =
                vec4(wTexelR`+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<d;g++)for(v=0;v<h;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var b="",w="";n&&(b=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+n+`
        }`:`vec4 activation(vec4 x) {
          `+n+`
        }`,w="result = activation(result);");var C=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+b+`

      const ivec2 strides = ivec2(`+u+", "+c+`);
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+m+`

        vec4 result = dotProd;
        `+C+`
        `+w+`
        setOutput(result);
      }
    `},aN=function(e,t,n,r,o){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var a=e[0],i=e[1],s=e[2],u=e[3],c=t[0],l=n[0],f=n[1];this.outputShape=[c,l,f,u];var d=r==="bilinear"?1:0,h=[i-1+".0",s-1+".0"],p=h[0],m=h[1],g=l>1?[""+(i-1)/(l-1),"(y2-y1) * height_ratio","y1*"+p+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+p],v=g[0],x=g[1],y=g[2],b=f>1?[""+(s-1)/(f-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=b[0],C=b[1],E=b[2];this.userCode=`
      const float height_ratio = float(`+v+`);
      const float width_ratio = float(`+w+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+a+`) {
          return;
        }

        float height_scale = `+x+`;
        float width_scale = `+C+`;

        float in_y = `+y+`;
        if( in_y < 0.0 || in_y > `+p+` ) {
          setOutput(float(`+o+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+m+` ) {
          setOutput(float(`+o+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+d+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},iN=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,o=e[e.length-1],a=n?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(n?"return "+o+" -i - 1;":"return i;")+`
      }

      void main() {
        `+rt(r)+` coords = getOutputCoords();
        int end = `+Wy(r,"coords")+`;
        float val = 0.0;
        for (int i = `+o+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+a+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+Wy(r,"coords")+` = idx;
          val += getX(`+function(i,s){if(i===1)return""+s;if(i===2)return s+".x, "+s+".y";if(i===3)return s+".x, "+s+".y, "+s+".z";if(i===4)return s+".x, "+s+".y, "+s+".z, "+s+".w";throw Error("Cumulative sum for rank "+i+" is not yet supported")}(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function Wy(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var sN=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Tu.DENSE;var t=ou(e),n=dn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Pa(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+n.output+` = result;
      }
    `},uN=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Tu.DENSE;var t=ou(e),n=dn();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Pa(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+n.output+` = result;
      }
    `},cN=function(){function e(t,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+n+`;
      int offset_h = imod(h, `+n+`);
      int in_w = w / `+n+`;
      int offset_w = imod(w, `+n+`);
      int offset_d = (offset_h * `+n+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),lN=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},fN=function(e){this.variableNames=["A"],this.outTexUsage=jn.DOWNLOAD;var t=dn();this.outputShape=e,this.userCode=`
      `+K_+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},dN=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=jn.DOWNLOAD;var t=dn();this.outputShape=e,this.userCode=`
      `+K_+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},hN=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=dn(),o=t[0],a=t[1];this.outputShape=e;var i="result";n&&(i="floor(result * 255. + 0.5)"),this.userCode=`
      `+wg(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+a+`;
        int c = imod(flatIndex, `+a+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+i+`, 0., 0., 0.);
      }
    `},pN=function(e,t,n){n===void 0&&(n=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=dn(),o=t[0],a=t[1];this.outputShape=e;var i="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var c=0;c<=1;c++){var l=2*u+c;i+=`
          localCoords = coords;
          if(localCoords[2] + `+c+" < "+e[2]+`) {
            localCoords[2] += `+c+`;
            if(localCoords[1] + `+u+" < "+e[1]+`) {
              localCoords[1] += `+u+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+a+`;
              c = imod(flatIndex, `+a+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+a+".0, "+o+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+l+`] = values[0];
              } else if(offset == 1) {
                result[`+l+`] = values[1];
              } else if(offset == 2) {
                result[`+l+`] = values[2];
              } else {
                result[`+l+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+wg(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+i+`

        `+r.output+" = "+s+`;
      }
    `},vN="return real * expR - imag * expI;",mN="return real * expI + imag * expR;",zy=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var o=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,a=n?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+o+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+a+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},gN=function(){function e(t,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(o,"value")),r.gl.uniform1f(n.valueLoc,t)}},e}(),xN=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var o=rt(this.rank),a=function(i,s){var u=i.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],f=0;f<i.length;f++)f===s?l.push("int(getIndices("+c[f]+"))"):l.push(""+c[f]);return l.join()}(e,n);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},yN=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=rt(t.length),o=rt(n.length),a=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+o+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+a+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function Z_(e,t){var n=dn();return WE(e,t,n.version+`
    precision highp float;
    `+n.attribute+` vec3 clipSpacePos;
    `+n.attribute+` vec2 uv;
    `+n.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function J_(e,t){return HE(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function e4(e,t){return VE(e,t,new Uint16Array([0,1,2,2,1,3]))}function dc(e,t,n,r,o,a,i){GE(n,r);var s=jE(e,t),u=e.TEXTURE_2D;return pe(e,t,function(){return e.bindTexture(u,s)}),pe(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),pe(e,t,function(){return e.texParameteri(u,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),pe(e,t,function(){return e.texParameteri(u,e.TEXTURE_MIN_FILTER,e.NEAREST)}),pe(e,t,function(){return e.texParameteri(u,e.TEXTURE_MAG_FILTER,e.NEAREST)}),pe(e,t,function(){return e.texImage2D(u,0,o,n,r,0,a,i,null)}),pe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),s}function t4(e,t,n,r,o){var a=Sd(n,r);return dc(e,t,a[0],a[1],o.internalFormatFloat,o.textureFormatFloat,e.FLOAT)}function n4(e,t,n,r,o){var a=Sd(n,r);return dc(e,t,a[0],a[1],o.internalFormatHalfFloat,o.textureFormatFloat,o.textureTypeHalfFloat)}function r4(e,t,n,r,o){var a=Sd(n,r);return dc(e,t,a[0],a[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function o4(e,t,n,r,o){var a=lc(n,r);return dc(e,t,a[0],a[1],o.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function a4(e,t,n,r,o){var a=lc(n,r);return dc(e,t,a[0],a[1],o.internalFormatPackedHalfFloat,e.RGBA,o.textureTypeHalfFloat)}function i4(e,t,n,r){return pe(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,r)}),rv(e,t,n,"clipSpacePos",r,3,20,0)&&rv(e,t,n,"uv",r,2,20,12)}function s4(e,t,n,r,o,a,i){var s,u,c;pe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),a instanceof Uint8Array?(s=new Uint8Array(r*o*4),u=e.UNSIGNED_BYTE,c=e.RGBA):(s=new Float32Array(r*o*4),u=e.FLOAT,c=i.internalFormatPackedFloat),s.set(a),pe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,c,r,o,0,e.RGBA,u,s)}),pe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function u4(e,t,n,r){pe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,n)}),r.data instanceof Uint8Array?pe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)}):pe(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}),pe(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function c4(e,t,n,r,o){var a=e.createBuffer();pe(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,a)});var i=16*n*r;return pe(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,i,e.STREAM_READ)}),pe(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)}),pe(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),a}function l4(e,t,n){var r=e,o=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,o),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),o}function f4(e,t,n,r,o){var a=Sd(n,r),i=a[0],s=a[1],u=new Uint8Array(n*r*4);return pe(e,t,function(){return e.readPixels(0,0,i,s,o.downloadTextureFormat,e.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function d4(e,t,n,r,o,a,i,s){var u=e,c=new Float32Array(function(l,f){var d=lc(l,f);return d[0]*d[1]*4}(a,i));return u.bindBuffer(u.PIXEL_PACK_BUFFER,t),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,c),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),c}function h4(e,t,n,r){var o=new Float32Array(n*r*4);return pe(e,t,function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,o)}),o}var bN=Object.freeze({createVertexShader:Z_,createVertexBuffer:J_,createIndexBuffer:e4,createFloat32MatrixTexture:t4,createFloat16MatrixTexture:n4,createUnsignedBytesMatrixTexture:r4,createPackedMatrixTexture:o4,createFloat16PackedMatrixTexture:a4,bindVertexProgramAttributeStreams:i4,uploadDenseMatrixToTexture:s4,uploadPixelDataToTexture:u4,createBufferFromOutputTexture:c4,downloadFloat32MatrixFromBuffer:l4,downloadByteEncodedFloatMatrixFromOutputTexture:f4,downloadPackedMatrixFromBuffer:d4,downloadMatrixFromPackedOutputTexture:h4}),p4=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=ee().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,OE(n,t)):this.gl=no(n);var r="WEBGL_color_buffer_float";if(ee().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Vs(this.gl,this.debug,"OES_texture_float"),Gn(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Vs(this.gl,this.debug,"OES_texture_half_float");else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),Gn(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Vs(this.gl,this.debug,"EXT_color_buffer_half_float");else if(ee().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",Gn(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!Gn(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=J_(this.gl,this.debug),this.indexBuffer=e4(this.gl,this.debug),this.framebuffer=qE(this.gl,this.debug),this.textureConfig=Jm(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return ee().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;pe(n,this.debug,function(){return n.finish()}),pe(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),pe(n,this.debug,function(){return n.deleteFramebuffer(t.framebuffer)}),pe(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),pe(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),pe(n,this.debug,function(){return n.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,n){return this.throwIfDisposed(),t4(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,n){return this.throwIfDisposed(),n4(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,n){return this.throwIfDisposed(),r4(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,n){this.throwIfDisposed(),u4(this.gl,this.debug,t,n)},e.prototype.uploadDenseMatrixToTexture=function(t,n,r,o){this.throwIfDisposed(),s4(this.gl,this.debug,t,n,r,o,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,n){return this.throwIfDisposed(),a4(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,n){return this.throwIfDisposed(),o4(this.gl,this.debug,t,n,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var n=this;this.throwIfDisposed(),this.outputTexture===t&&(ov(this.gl,this.debug,this.framebuffer),this.outputTexture=null),pe(this.gl,this.debug,function(){return n.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return f4(o.gl,o.debug,n,r,o.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,n,r,o,a,i){return d4(this.gl,t,0,0,0,a,i,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,n){return l4(this.gl,t,n)},e.prototype.createBufferFromTexture=function(t,n,r){this.bindTextureToFrameBuffer(t);var o=c4(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),o},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var n,r,o=this;if(ee().getBool("WEBGL_FENCE_API_ENABLED")){var a=t,i=a.fenceSync(a.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),r=function(){var s=a.clientWaitSync(i,0,0);return s===a.ALREADY_SIGNALED||s===a.CONDITION_SATISFIED},n=i}else ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return o.isQueryAvailable(n,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},e.prototype.downloadMatrixFromPackedTexture=function(t,n,r){var o=this;return this.downloadMatrixDriver(t,function(){return h4(o.gl,o.debug,n,r)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var n=this.gl,r=zE(n,this.debug,t),o=Z_(n,this.debug),a=$E(n,this.debug);return pe(n,this.debug,function(){return n.attachShader(a,o)}),pe(n,this.debug,function(){return n.attachShader(a,r)}),UE(n,this.debug,a),this.debug&&Rl(n,this.debug,a),this.vertexAttrsAreBound||(this.setProgram(a),this.vertexAttrsAreBound=i4(n,this.debug,this.program,this.vertexBuffer)),a},e.prototype.deleteProgram=function(t){var n=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&pe(this.gl,this.debug,function(){return n.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var n=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&Rl(this.gl,this.debug,this.program),pe(this.gl,this.debug,function(){return n.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?XE(this.gl,this.debug,t,n):YE(this.gl,t,n)},e.prototype.getAttributeLocation=function(t,n){var r=this;return this.throwIfDisposed(),pe(this.gl,this.debug,function(){return r.gl.getAttribLocation(t,n)})},e.prototype.getUniformLocationNoThrow=function(t,n){return this.throwIfDisposed(),this.gl.getUniformLocation(t,n)},e.prototype.setInputMatrixTexture=function(t,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),QE(this.gl,this.debug,this.program,t,n,r)},e.prototype.setOutputMatrixTexture=function(t,n,r){this.setOutputMatrixTextureDriver(t,r,n)},e.prototype.setOutputPackedMatrixTexture=function(t,n,r){this.throwIfDisposed();var o=lc(n,r),a=o[0],i=o[1];this.setOutputMatrixTextureDriver(t,a,i)},e.prototype.setOutputMatrixWriteRegion=function(t,n,r,o){this.setOutputMatrixWriteRegionDriver(r,t,o,n)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,n,r,o){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&Rl(this.gl,this.debug,this.program),js(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),pe(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),pe(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Vs(this.gl,this.debug,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=t.createQuery();return t.beginQuery(n.TIME_ELAPSED_EXT,r),r}var o=this.getQueryTimerExtensionWebGL1(),a=o.createQueryEXT();return o.beginQueryEXT(o.TIME_ELAPSED_EXT,a),a},e.prototype.endQuery=function(){if(ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return ve(this,void 0,void 0,function(){var n=this;return me(this,function(r){switch(r.label){case 0:return[4,X0(function(){return n.disposed||n.isQueryAvailable(t,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(t,ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(t,r.QUERY_RESULT)/1e6}var o=this.getQueryTimerExtensionWebGL1();return o.getQueryObjectEXT(t,o.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,n){if(n===0)return!0;if(n===2){var r=this.gl,o=this.getQueryTimerExtensionWebGL2(),a=r.getQueryParameter(t,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint}return a=(o=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,o.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(o.GPU_DISJOINT_EXT)),a&&!this.disjoint},e.prototype.pollFence=function(t){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return t.isFencePassed()},function(){return r()})})},e.prototype.pollItems=function(){for(var t=function(r){for(var o=0;o<r.length&&r[o]();++o);return o-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=t;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,n){var r=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:n}),this.itemsToPoll.length>1||X0(function(){return r.pollItems(),r.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),Fl(this.gl,this.debug,t,this.framebuffer),this.debug&&js(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Fl(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&js(this.gl)):ov(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,n){this.bindTextureToFrameBuffer(t);var r=n();return this.unbindTextureToFrameBuffer(),r},e.prototype.setOutputMatrixTextureDriver=function(t,n,r){this.throwIfDisposed();var o=this.gl;Fl(o,this.debug,t,this.framebuffer),this.debug&&js(o),this.outputTexture=t,pe(o,this.debug,function(){return o.viewport(0,0,n,r)}),pe(o,this.debug,function(){return o.scissor(0,0,n,r)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,n,r,o){var a=this;this.throwIfDisposed(),pe(this.gl,this.debug,function(){return a.gl.scissor(t,n,r,o)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function $y(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(n,r){var o=n.logicalShape,a=t[r],i=a.shape;if(!Bt(o,i))throw Error("Binary was compiled with different shapes than the current args. Shapes "+o+" and "+i+" must match");if(!n.isUniform||!a.isUniform){var s=n.texShape,u=a.isUniform?null:a.texData.texShape;if(!Bt(s,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+s+" and "+u+" must match")}})}var wN=function(e,t,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r=n.filterWidth,o=n.inChannels,a=n.strideWidth,i=n.strideHeight,s=n.padInfo,u=n.outWidth,c=n.dilationWidth,l=n.dilationHeight,f=n.dataFormat,d=s.left,h=s.top,p=o*r,m=dn(),g=f==="channelsLast",v=g?0:1,x=g?1:2,y="",b=0;b<=1;b++)for(var w=0;w<=1;w++)y+=`
          blockIndex = rc.y + `+w+`;
          pos = rc.x + `+b+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+u+")) * "+i+" - "+h+`;
            d0 = offsetY + `+l+" * (pos / "+p+`);

            if(d0 < `+t[v]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+u+".) * "+a+". - "+d+`.);
              d1 = offsetX + `+c+" * (int(mod(float(pos), "+p+".) / "+o+`.));

              if(d1 < `+t[x]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+o+`.));

                if (`+g+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*b+w)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+y+`

        `+m.output+` = result;
      }
    `},CN=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[];var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+i+"; j <= "+i+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+s+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+a+`;
        setOutput(val);
      }
    `},EN=function(e,t,n,r,o){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=o,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+n+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+o+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+o+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},_N=function(e,t,n,r,o){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var a,i=t,s=e[3]-1;this.outputShape=e;var u="float("+n+") + float("+r+") * sum";a=o===.5?"inversesqrt("+u+")":o===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+o+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+i+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+i+"; j <= "+i+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+s+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+a+`;
        setOutput(result);
      }
    `},SN=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,o=e.effectiveFilterHeight,a=e.effectiveFilterWidth,i=o-1-e.padInfo.top,s=a-1-e.padInfo.left,u=o*a-1;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+s+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+o+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+a+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+n+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+u+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+a+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},kN=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,i=e.dilationWidth,s=e.effectiveFilterDepth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=s-1-e.padInfo.front,f=u-1-e.padInfo.top,d=c-1-e.padInfo.left,h=s*u*c-1;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+f+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+s+`;
           wD += `+o+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+u+`;
              wR += `+a+`) {
            float dyR = float(dyRCorner + wR) / `+n+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+c+`;
                wC += `+i+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+h+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+u+" * "+c+` +
                  wR * `+c+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},Kh=function(e,t,n,r,o,a,i){n===void 0&&(n=!1),r===void 0&&(r=!1),o===void 0&&(o=!1),a===void 0&&(a=null),i===void 0&&(i=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var s=n?e[1]:e[2],u=Math.ceil(s/2),c=n?"i * 2, rc.y":"rc.y, i * 2",l=r?"rc.z, i * 2":"i * 2, rc.z",f=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],d=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],h="",p="";a&&(h=i?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+a+`
        }`:`vec4 activation(vec4 x) {
          `+a+`
        }`,p="result = activation(result);");var m=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),i&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+h+`

      const float sharedDimension = `+u+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+u+`; i++) {
          vec4 a = getMatrixA(rc.x, `+c+`);
          vec4 b = getMatrixB(rc.x, `+l+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+f[0]+" * "+d[0]+`);
          result += (`+f[1]+" * "+d[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+m+`

        `+p+`

        setOutput(result);
      }
    `},AN=function(){function e(t,n,r){this.variableNames=["probs"],this.outputShape=[t,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(n-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(n-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;return function(r,o){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(o,"seed")),r.gl.uniform1f(n.seedLoc,t)}},e}(),DN=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+n+`),
                      float(index == coords.y)));
      }
    `},RN=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var n=Fn("rc",t),r=rt(t),o=function(s,u,c){if(s===1)return"rc > "+u[0];for(var l="",f=s-2;f<s;f++)l+=c[f]+" >= "+u[f],f<s-1&&(l+="||");return l}(t,e,n),a=function(s,u,c,l){if(s===1)return"";var f=l.slice(-2);return`
    int r = `+f[0]+`;
    int c = `+f[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+u+`;
    bool rEdge = rp1 >= `+c+`;
  `}(t,e[e.length-1],e[e.length-2],n),i=function(s,u){var c=s.length,l=function(f,d){for(var h=[],p=0;p<=1;p++)for(var m=0;m<=1;m++){for(var g=(p===0?"r":"rp1")+", "+(m===0?"c":"cp1"),v=2;v<f;v++)g=d[d.length-1-v]+","+g;h.push(g)}return h}(c,u);return c===1?`getA(rc),
            rc + 1 >= `+s[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+l[0]+`),
          cEdge ? 0. : getA(`+l[1]+`),
          rEdge ? 0. : getA(`+l[2]+`),
          rEdge || cEdge ? 0. : getA(`+l[3]+")"}(e,n);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+o+`) {
            setOutput(vec4(0));
          } else {
            `+a+`

            setOutput(vec4(`+i+`));
          }
        }
      `}},FN=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map(function(u,c){return u[0]+e[c]+u[1]});var r=e.length,o=rt(r),a=t.map(function(u){return u[0]}).join(","),i=t.map(function(u,c){return u[0]+e[c]}).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+o+" start = "+o+"("+a+`);
      `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+n+`));
        } else {
          `+o+` coords = outC - start;
          setOutput(getX(`+s+`));
        }
      }
    `:`
        int start = `+a+`;
        int end = `+i+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+n+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},IN=function(e,t,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(g,v){return g[0]+e[v]+g[1]});for(var r=e.length,o=rt(r),a=t.map(function(g){return g[0]}).join(","),i=t.map(function(g,v){return g[0]+e[v]}).join(","),s=Fn("rc",r),u=Fn("source",r),c=s[r-1]+" < "+this.outputShape[r-1],l=r===1?"source":"vec2("+u.slice(-2).join()+")",f=[o+" rc = outputLoc;",s[r-1]+` += 1;
       if(`+c+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+s[r-2]+` += 1;
       if(`+s[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+s[r-1]+` += 1;
         if(`+c+") {"],d=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",h="",p=0,m=r===1?2:4;p<m;p++)h+=`
        `+f[p]+`
        if (`+d+`) {
          result[`+p+"] = float("+n+`);
        } else {
          `+o+` source = rc - start;
          result[`+p+"] = getChannel(getX("+u.join()+"), "+l+`);
        }
      `;h+=r===1?"} ":"}}",this.userCode=`
      const `+o+" start = "+o+"("+a+`);
      const `+o+" end = "+o+"("+i+`);

      void main() {
        `+o+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+h+`
        setOutput(result);
      }
    `},Xh=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideHeight,a=e.strideWidth,i=e.dilationHeight,s=e.dilationWidth,u=e.effectiveFilterHeight,c=e.effectiveFilterWidth,l=e.padInfo.top,f=e.padInfo.left;this.outputShape=e.outShape;var d=t==="avg",h="0.0";if(d||(h="-1.0 / 1e-20"),n)this.userCode=`
        const ivec2 strides = ivec2(`+o+", "+a+`);
        const ivec2 pads = ivec2(`+l+", "+f+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+u+`;
              wR += `+i+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+c+`;
                wC += `+s+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+c+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var p=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(p="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v=`
      if (`+d+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+o+", "+a+`);
      const ivec2 pads = ivec2(`+l+", "+f+`);
      const float initializationValue = `+h+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+h+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+u+`;
            wR += `+i+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+m+`; wC += 4) {
            int xC = xCCorner + wC * `+s+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              getValue(batch, xR, xC + 3 * `+s+`, d)
            );

            `+v+`
          }

          int xC = xCCorner + `+m+`;
          if (`+(g===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              initializationValue,
              initializationValue
            );

            `+v+`
          } else if (`+(g===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+s+`, d),
              getValue(batch, xR, xC + 2 * `+s+`, d),
              initializationValue
            );

            `+v+`
          }
        }
        setOutput(`+p+`);
      }
    `}},Yh=function(e,t,n){if(this.variableNames=["x"],t==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,o=e.strideDepth,a=e.strideHeight,i=e.strideWidth,s=e.dilationDepth,u=e.dilationHeight,c=e.dilationWidth,l=e.effectiveFilterDepth,f=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,p=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var g=t==="avg",v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode=`
        const ivec3 strides =
            ivec3(`+o+", "+a+", "+i+`);
        const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+l+`;
              wD += `+s+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+f+`;
                wR += `+u+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+d+`;
                  wC += `+c+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+f+" * "+d+` +
                      wR * `+d+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(x="avgValue / count");var y=4*Math.floor(r/4),b=r%4,w=`
      if (`+g+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+o+", "+a+", "+i+`);
      const ivec3 pads = ivec3(`+h+", "+p+", "+m+`);
      const float initializationValue = `+v+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+v+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+l+`;
            wD += `+s+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+f+`;
            wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+y+`; wC += 4) {
              int xC = xCCorner + wC * `+c+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+c+`, ch)
              );

              `+w+`
            }

            int xC = xCCorner + `+y+`;
            if (`+(b===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                initializationValue,
                initializationValue
              );

              `+w+`
            } else if (`+(b===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+c+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+c+`, ch),
                initializationValue
              );

              `+w+`
            }
          }
          setOutput(`+x+`);
        }
      }
    `}},BN=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=Math.ceil(o/n);this.outputShape=[r,a];var i="0.0",s="";t==="prod"?i="1.0":t==="min"?(i="1.0 / 1e-20",s="min"):t==="max"&&(i="-1.0 / 1e-20",s="max");var u=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?u="sumValue":t==="prod"?u="prodValue":t==="all"?u="allValue":t==="any"&&(u="anyValue");var c=4*Math.floor(n/4),l=n%4,f=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+s+`(values, minMaxValue);
      }
    `,d="vec4";t==="all"?(i="1.0",f=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,d="bvec4"):t==="any"&&(i="0.0",f=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,d="bvec4");var h="";o%n>0&&(h=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+i+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+h+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        vec4 minMaxValue = vec4(`+i+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+c+`; i += 4) {
          int inIdx = inOffset + i;
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+f+`
        }

        int inIdx = inOffset + `+c+`;
        if (`+(l===1)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(l===2)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+f+`
        } else if (`+(l===3)+`) {
          `+d+" values = "+d+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+f+`
        }
        setOutput(`+u+`);
      }
    `},TN=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var o="thisRC = rc;";r%2==1&&(o+="thisRC.z += 1;"),r>1&&(o+="thisRC.y += 1;"),n+=`
        `+o+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Pa(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+wg(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+n+`

        setOutput(result);
      }
    `},PN=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],c=[n&&s>1?o-1:o,n&&u>1?a-1:a],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=c[0]/l[0],d=c[1]/l[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(o-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(a-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},NN=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ON=function(e,t,n,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`,
          `+u[1]/c[1]+`);
      const vec3 inputShapeRC = vec3(`+a+".0, "+i+`.0,
                                     `+i+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(s-1)+`;
        bool hasNextRow = coords.z < `+(n-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},MN=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,o=r[1],a=r[2],i=e.shape,s=i[1],u=i[2],c=[n&&s>1?o-1:o,n&&u>1?a-1:a],l=[n&&s>1?s-1:s,n&&u>1?u-1:u],f=c[0]/l[0],d=c[1]/l[1],h=1/f,p=1/d,m=2*Math.ceil(h)+2,g=2*Math.ceil(p)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+f+`);
        const float widthScale = float(`+d+`);

        const float invHeightScale = float(`+h+`);
        const float invWidthScale = float(`+p+`);

        const int winHeight = int(`+m+`);
        const int winWidth = int(`+g+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+s+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+u+`) {
              continue;
            }

            float sourceFracRow =
              float(`+c[0]+`) *
                (float(dyR) / float(`+l[0]+`));

            float sourceFracCol =
                float(`+c[1]+`) *
                  (float(dyC) / float(`+l[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+o+`) - 1),
                `+n+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+a+`) - 1),
                `+n+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},LN=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var o=e[0],a=e[1],i=e[2],s=e[3];this.outputShape=[o,t,n,s];var u=[r&&t>1?a-1:a,r&&n>1?i-1:i],c=[r&&t>1?t-1:t,r&&n>1?n-1:n],l=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+u[0]/c[0]+`,
          `+u[1]/c[1]+`);
      const vec2 inputShapeRC = vec2(`+a+".0, "+i+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+l+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},WN=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,n!==1){var r=e.map(function(a,i){return function(s){return t.indexOf(s)!==-1&&e[s]!==1?e[s]+" - coords["+s+"] - 1":"coords["+s+"]"}(i)}).join(","),o=rt(n);this.userCode=`
      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},zN=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=Fn("rc",n),o=r[n-1]+" + 1 < "+this.outputShape[n-1],a=r[n-2]+" + 1 < "+this.outputShape[n-2],i=rt(n);function s(u){var c=e.map(function(l,f){return function(d,h){return t.indexOf(d)!==-1&&e[d]!==1?e[d]+" - "+h[d]+" - 1":""+h[d]}(f,u)});return"getChannel(getX("+c.join(",")+"), vec2("+c.slice(-2).join(",")+"))"}this.userCode=n===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+o+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+i+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(u){return s(u)}(r.slice())+`;
          if(`+o+`){
            result.g = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",s(u)}(r.slice())+`;
          }
          if(`+a+`) {
            result.b = `+function(u){return u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            if(`+o+`) {
              result.a = `+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",s(u)}(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},Uy=function(e,t,n,r,o,a,i){this.variableNames=["updates","indices","defaultValue"],this.outputShape=a;var s=rt(o.length),u=rt(a.length),c="";n===1?c="i":n===2&&(c="i, j");var l="getIndices("+c+")",f="";r===1?f="i":r===2&&(f="i, coords[1]");var d="getUpdates("+f+")",h=t>1?"strides[j]":"strides";this.userCode=`
        `+s+" strides = "+s+"("+o+`);

        void main() {
          `+u+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+l+`);
              flattenedIndex += index * `+h+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+d+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},$N=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,o=e.inSize,a=e.numSegments,i=a*Math.ceil(o/n);this.outputShape=[r,i];var s=4*Math.floor(n/4),u=n%4,c=`
        sumValue += dot(values, segFilter);
    `,l="";o%n>0&&(l=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return initializationValue;
        }
      `);var f="";o%n>0&&(f=`
        if (inIdx < 0 || inIdx >= `+o+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+l+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+f+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+a+")) * float("+n+`));
        int currentSeg = int(mod(float(outIdx), float(`+a+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+s+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+c+`
        }

        int inIdx = inOffset + `+s+`;
        if (`+(u===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+c+`
        } else if (`+(u===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+c+`
        } else if (`+(u===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+c+`
        }
        setOutput(sumValue);
      }
    `},UN=function(e,t,n){var r,o;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)o="resRC",r="resRC";else{for(var a=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],s=[],u=0;u<t.length;u++)s.push(""+a[u]),u<e&&i.push(""+a[u]);r=i.join(),o=s.join()}var c=rt(n);this.userCode=`
      void main() {
        `+c+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+o+`));
        } else {
          setOutput(getB(`+o+`));
        }
      }
    `},HN=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var n,r=rt(this.rank),o="uniform int start["+this.rank+"];",a=function(i){if(i===1)return"sourceLoc";if(i<=6)return Qh.slice(0,i).map(function(s){return"sourceLoc."+s}).join(",");throw Error("Slicing for rank "+i+" is not yet supported")}(this.rank);n=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+t.map(function(i,s){return"sourceLoc."+Qh[s]+" = start["+s+"] + coords."+Qh[s]+";"}).join(`
`)+`
      `,this.userCode=`
      `+o+`
      void main() {
        `+n+`
        setOutput(getSource(`+a+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),Qh=["x","y","z","w","u","v"],VN=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var n=rt(this.rank),r=Fn("coords",this.rank),o=Fn("sourceLoc",this.rank),a=this.rank===1?"sourceLoc":"vec2("+o.slice(-2).join()+")",i="getChannel(getSource("+o.join()+"), "+a+")",s=`
      result.x = `+i+`;
      if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+o[this.rank-1]+`;
        result.y = `+i+`;
        --`+o[this.rank-1]+`;
      }
    `,u=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+o[this.rank-2]+`;
        result.z = `+i+`;
        if (++`+r[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+o[this.rank-1]+`;
          result.w = `+i+`;
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            `+n+"("+t.map(function(l,f){return"start["+f+"]"}).join()+");":t.map(function(l,f){return o[f]+" = "+r[f]+" + start["+f+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+n+` coords = getOutputCoords();
        `+n+` sourceLoc;
        `+c+`
        vec4 result = vec4(0.);
        `+s+`
        `+u+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var n=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(r,o){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(o,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,t)}},e}(),jN=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,o=rt(n.length),a=rt(n.length),i="";if(r===1)i="coords * strides + begin";else{var s=0;i=n.map(function(u,c){return s++,n.length===1?"coords * strides["+c+"] + begin["+c+"]":"coords["+(s-1)+"] * strides["+c+"] + begin["+c+"]"}).join(",")}this.userCode=`
      `+o+" begin = "+o+"("+e+`);
      `+o+" strides = "+o+"("+t+`);

      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+i+`));
      }
    `},GN=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,n,r){var o,a=Hy(n,r),i=Vy(t,a,r);if(i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]),this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var s=this.freeTextures[i].shift();return this.usedTextures[i].push(s),s}return this.numUsedTextures++,this.log(),a===zn.PACKED_2X2_FLOAT32?o=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):a===zn.PACKED_2X2_FLOAT16?o=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):a===zn.UNPACKED_FLOAT32?o=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):a===zn.UNPACKED_FLOAT16?o=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):a===zn.PACKED_4X1_UNSIGNED_BYTE&&(o=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[i].push(o),o},e.prototype.releaseTexture=function(t,n,r,o){if(this.freeTextures!=null){var a=Vy(n,Hy(r,o),o);a in this.freeTextures||(this.freeTextures[a]=[]),this.freeTextures[a].push(t),this.numFreeTextures++,this.numUsedTextures--;var i=this.usedTextures[a],s=i.indexOf(t);if(s<0)throw new Error("Cannot release a texture that was never provided by this texture manager");i.splice(s,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){t.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(o){t.gpgpu.deleteMatrixTexture(o)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function Hy(e,t){if(e===jn.UPLOAD)return zn.PACKED_2X2_FLOAT32;if(e===jn.RENDER||e==null)return function(n){return ee().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?zn.PACKED_2X2_FLOAT32:zn.UNPACKED_FLOAT32:n?zn.PACKED_2X2_FLOAT16:zn.UNPACKED_FLOAT16}(t);if(e===jn.DOWNLOAD||e===jn.PIXELS)return zn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function Vy(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var qN=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var o=rt(this.rank),a=function(i){var s=i.length;if(s>5)throw Error("Tile for rank "+s+" is not yet supported");if(s===1)return"imod(resRC, "+i[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],c=[],l=0;l<i.length;l++)c.push("imod("+u[l]+", "+i[l]+")");return c.join()}(e);this.userCode=`
      void main() {
        `+o+` resRC = getOutputCoords();
        setOutput(getA(`+a+`));
      }
    `},KN=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var o=rt(this.rank),a=function(i){var s=i.length;if(s>6)throw Error("Transpose for rank "+s+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],c=new Array(s),l=0;l<i.length;l++)c[i[l]]=u[l];return c.join()}(t);this.userCode=`
    void main() {
      `+o+` resRC = getOutputCoords();
      setOutput(getA(`+a+`));
    }
    `},XN=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var o=rt(this.rank),a=q_("rc",this.rank),i=new Array(this.rank);for(r=0;r<t.length;r++)i[t[r]]=a[r];var s="vec2("+i.slice(-2).join()+")",u="++"+a[this.rank-1]+" < "+n[this.rank-1],c="getChannel(getA("+i.join()+"), "+s+")";this.userCode=`
    void main() {
      `+o+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+c+`;
      if(`+u+`) {
        result[1] = `+c+`;
      }
      --`+a[this.rank-1]+`;
      if(++`+a[this.rank-2]+" < "+n[this.rank-2]+`) {
        result[2] = `+c+`;
        if(`+u+`) {
          result[3] = `+c+`;
        }
      }
      setOutput(result);
    }
    `},Cg=1.7580993408473768,Eg=1.0507009873554805,Fe=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Nr="if (isnan(x)) return x;",YN="return x;",jy="return abs(x);",v4=Nr+`
  return (x < 0.0) ? 0.0 : x;
`,m4=Nr+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,g4="return (x >= 0.0) ? x : (exp(x) - 1.0);",QN=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+Cg+`;
  float scale = `+Eg+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Gy="return -x;",qy="return ceil(x);",Ky="return floor(x);",Xy="return exp(x);",Yy="return exp(x) - 1.0;",ZN=Nr+`
  return sin(x);
`,JN=Nr+`
  return cos(x);
`,e5=Nr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,t5=Nr+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,n5=Nr+`
  return atan(x);
`,r5=Nr+"return log(x + sqrt(x * x + 1.0));",o5=Nr+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,a5=Nr+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,Qc="return x;",i5="return x;",x4=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,y4=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,b4=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Ls=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},s5=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,n=Fn("rc",t),r=rt(t),o=function(s,u){if(s===1)return"rc";for(var c="",l=0;l<s;l++)c+=u[l],l<s-1&&(c+=",");return c}(t,n),a=n.slice(-2),i=t<=1?"rc":"vec2("+a.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+o+`);

        setOutput(getChannel(packedInput, `+i+`));
      }
    `},Zc={};function Jc(e,t){if(t===void 0&&(t=!1),e==="linear")return t?i5:YN;if(e==="relu")return t?x4:v4;if(e==="elu")return t?b4:g4;if(e==="relu6")return t?y4:m4;if(e==="prelu")return t?Q_:Y_;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var u5=600,w4=function(e){function t(n){var r,o=e.call(this)||this;if(o.pendingRead=new WeakMap,o.pendingDisposal=new WeakSet,o.dataRefCount=new WeakMap,o.numBytesInGPU=0,o.uploadWaitMs=0,o.downloadWaitMs=0,o.warnedAboutMemory=!1,o.pendingDeletes=0,o.disposed=!1,!ee().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(n==null){var a=no(ee().getNumber("WEBGL_VERSION"));o.binaryCache=((r=ee().getNumber("WEBGL_VERSION"))in Zc||(Zc[r]={}),Zc[r]),o.gpgpu=new p4(a),o.canvas=a.canvas,o.gpgpuCreatedLocally=!0}else o.gpgpu=n,o.binaryCache={},o.gpgpuCreatedLocally=!1,o.canvas=n.gl.canvas;return o.textureManager=new GN(o.gpgpu),o.numMBBeforeWarning=ee().global.screen==null?1024:ee().global.screen.height*ee().global.screen.width*window.devicePixelRatio*u5/1024/1024,o.texData=new hg(o,N),o}return Br(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(n,r,o){if(ee().getBool("DEBUG")&&this.checkNumericalProblems(n),o==="complex64"&&n!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var a={};return this.texData.set(a,{shape:r,dtype:o,values:n,usage:jn.UPLOAD}),a},t.prototype.move=function(n,r,o,a){if(ee().getBool("DEBUG")&&this.checkNumericalProblems(r),a==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(n,{shape:o,dtype:a,values:r,usage:jn.UPLOAD})},t.prototype.readSync=function(n){var r=this.texData.get(n),o=r.values,a=r.dtype,i=r.complexTensors,s=r.slice,u=r.shape,c=r.isPacked;if(s!=null){var l=void 0;l=c?new Ls(u,Qc):new Fe(u,Qc);var f=this.runWebGLProgram(l,[{dataId:n,shape:u,dtype:a}],a),d=this.readSync(f.dataId);return this.disposeData(f.dataId),d}if(o!=null)return this.convertAndCacheOnCPU(n);if(a==="string")return o;var h,p,m=this.activeTimers!=null;return m&&(h=Er()),a==="complex64"?p=cv(i.real.dataSync(),i.imag.dataSync()):p=this.getValuesFromTexture(n),m&&(this.downloadWaitMs+=Er()-h),this.convertAndCacheOnCPU(n,p)},t.prototype.read=function(n){return ve(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f,d,h,p,m,g,v,x,y,b,w,C,E,S;return me(this,function(k){switch(k.label){case 0:if(this.pendingRead.has(n))return r=this.pendingRead.get(n),[2,new Promise(function(_){return r.push(_)})];if(o=this.texData.get(n),a=o.values,i=o.shape,s=o.slice,u=o.dtype,c=o.complexTensors,l=o.isPacked,s!=null)return f=void 0,f=l?new Ls(i,Qc):new Fe(i,Qc),d=this.runWebGLProgram(f,[{dataId:n,shape:i,dtype:u}],u),h=this.read(d.dataId),this.disposeData(d.dataId),[2,h];if(a!=null)return[2,this.convertAndCacheOnCPU(n)];if(!ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ee().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return p=null,u!=="complex64"&&ee().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(n),g=this.texData.get(m.dataId),p=(S=this.gpgpu).createBufferFromTexture.apply(S,[g.texture].concat(ou(i)))),this.pendingRead.set(n,[]),u==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:k.sent(),k.label=2;case 2:return u!=="complex64"?[3,4]:[4,Promise.all([c.real.data(),c.imag.data()])];case 3:return x=k.sent(),y=x[0],b=x[1],v=cv(y,b),[3,5];case 4:p==null?v=this.getValuesFromTexture(n):(w=ge(i),v=this.gpgpu.downloadFloat32MatrixFromBuffer(p,w)),k.label=5;case 5:return m!=null&&this.disposeData(m.dataId),C=this.convertAndCacheOnCPU(n,v),E=this.pendingRead.get(n),this.pendingRead.delete(n),E.forEach(function(_){return _(C)}),this.pendingDisposal.has(n)&&(this.pendingDisposal.delete(n),this.disposeData(n),this.pendingDeletes--),[2,C]}})})},t.prototype.checkNumericalProblems=function(n){if(n!=null)for(var r=0;r<n.length;r++){var o=n[r];if(!ME(o))throw ee().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+o+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+o+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(n){var r,o=this.texData.get(n),a=o.shape,i=o.dtype,s=o.isPacked,u=ge(a);if(ee().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var c=this.decode(n),l=this.texData.get(c.dataId),f=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[l.texture].concat(ou(a))).subarray(0,u);return this.disposeData(c.dataId),f}var d=ee().getBool("WEBGL_PACK")&&s===!0,h=d?Il(a):a,p=d?new dN(h):new fN(h),m=this.runWebGLProgram(p,[{shape:h,dtype:i,dataId:n}],"float32"),g=this.texData.get(m.dataId),v=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(g.texture,g.texShape[0],g.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),v},t.prototype.time=function(n){return ve(this,void 0,void 0,function(){var r,o,a,i,s,u,c;return me(this,function(l){switch(l.label){case 0:return r=this.activeTimers,o=[],a=!1,this.programTimersStack==null?(this.programTimersStack=o,a=!0):this.activeTimers.push(o),this.activeTimers=o,n(),i=So(this.activeTimers.map(function(f){return f.query})).filter(function(f){return f!=null}),s=So(this.activeTimers.map(function(f){return f.name})).filter(function(f){return f!=null}),this.activeTimers=r,a&&(this.programTimersStack=null),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(i)]:[3,2];case 1:return c=l.sent(),u.kernelMs=wE(c),u.getExtraProfileInfo=function(){return c.map(function(f,d){return{name:s[d],ms:f}}).map(function(f){return f.name+": "+f.ms}).join(", ")},[3,3];case 2:u.kernelMs={error:"WebGL query timers are not supported in this environment."},l.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Er(),endMs:null}},t.prototype.endTimer=function(n){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),n):(n.endMs=Er(),n)},t.prototype.getQueryTime=function(n){return ve(this,void 0,void 0,function(){var r;return me(this,function(o){return ee().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(n)]:[2,(r=n).endMs-r.startMs]})})},t.prototype.disposeData=function(n){if(!this.pendingDisposal.has(n)){if(this.pendingRead.has(n))return this.pendingDisposal.add(n),void this.pendingDeletes++;if(this.texData.has(n)){this.releaseGPUData(n);var r=this.texData.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(n)}}},t.prototype.releaseGPUData=function(n){var r=this.texData.get(n),o=r.texture,a=r.dtype,i=r.texShape,s=r.usage,u=r.isPacked,c=r.slice,l=c&&c.origDataId||n,f=this.dataRefCount.get(l);f>1?this.dataRefCount.set(l,f-1):(this.dataRefCount.delete(l),o!=null&&(this.numBytesInGPU-=this.computeBytes(i,a),this.textureManager.releaseTexture(o,i,s,u)));var d=this.texData.get(n);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},t.prototype.getTexture=function(n){return this.uploadToGPU(n),this.texData.get(n).texture},t.prototype.getDataInfo=function(n){return this.texData.get(n)},t.prototype.getCPUBackend=function(){return ee().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=N.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(n,r){var o=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&n.every(function(a){return o.texData.get(a.dataId).texture==null&&a.size<r})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(n,r){var o=this.makeOutput(n.shape,"complex64");return this.texData.get(o.dataId).complexTensors={real:N.keep(n.clone()),imag:N.keep(r.clone())},o},t.prototype.real=function(n){return this.texData.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.texData.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.slice(n,r,o);if(ge(o)===0)return Gt([],o,n.dtype);var a=this.texData.get(n.dataId).isPacked,i=fg(n.shape,r,o);if(a||!i){var s=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new VN(o):new HN(o),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[n],null,u)}return this.uploadToGPU(n.dataId),this.shallowSlice(n,r,o)},t.prototype.shallowSlice=function(n,r,o){var a=this.texData.get(n.dataId),i=this.makeOutput(o,n.dtype),s=this.texData.get(i.dataId);Object.assign(s,a),s.shape=o,s.dtype=n.dtype;var u=dg(r,n.strides);a.slice&&(u+=a.slice.flatOffset),s.slice={flatOffset:u,origDataId:a.slice&&a.slice.origDataId||n.dataId};var c=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,c+1),i},t.prototype.stridedSlice=function(n,r,o,a){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.stridedSlice(n,r,o,a);var i=Fd(r,o,a);if(i.some(function(u){return u===0}))return Gt([],i);var s=new jN(r,a,i);return this.compileAndRun(s,[n])},t.prototype.reverse=function(n,r){var o=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new zN(n.shape,r):new WN(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.concat=function(n,r){if(n[0].dtype==="complex64"){var o=n.map(function(h){return Hn(h)}),a=n.map(function(h){return _r(h)});return Ht(this.concat(o,r),this.concat(a,r))}if(this.shouldExecuteOnCPU(n))return this.cpuBackend.concat(n,r);if(n.length===1)return n[0];if(n.length>ee().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(n.length/2),s=this.concat(n.slice(0,i),r),u=this.concat(n.slice(i),r);return this.concat([s,u],r)}if(ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&n[0].rank>1){var c=new Q6(n.map(function(h){return h.shape}),r);return this.compileAndRun(c,n)}var l=Ga(n.map(function(h){return h.shape}),r),f=n.map(function(h){return h.as2D(-1,ge(h.shape.slice(r)))}),d=new Y6(f.map(function(h){return h.shape}));return this.compileAndRun(d,f).reshape(l)},t.prototype.neg=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.neg(n);if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Gy,n.dtype);var r=new Fe(n.shape,Gy);return this.compileAndRun(r,[n])},t.prototype.batchMatMul=function(n,r,o,a){var i=o?n.shape[2]:n.shape[1],s=a?r.shape[1]:r.shape[2],u=o?n.shape[1]:n.shape[2],c=n.shape[0];if((i===1||s===1)&&u>1e3){o&&(n=n.transpose([0,2,1])),a&&(r=r.transpose([0,2,1]));var l=s===1?n:n.as3D(c,u,1),f=s===1?2:1,d=s===1?r.as3D(c,1,u):r;return this.multiply(l,d).sum(f,!0)}var h=jt(n.dtype,r.dtype),p=new Kh(n.shape,[c,i,s],o,a);return this.compileAndRun(p,[n,r],h)},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,a=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,c=n.preluActivationWeights,l=a?r.shape[2]:r.shape[1],f=i?o.shape[1]:o.shape[2],d=r.shape[0],h=jt(r.dtype,o.dtype),p=s!=null,m=c!=null,g=u?Jc(u,!0):null,v=new Kh(r.shape,[d,l,f],a,i,p,g,m),x=[r,o];return s&&x.push(s),c&&x.push(c),this.compileAndRun(v,x,h)},t.prototype.multiply=function(n,r){if(n.dtype==="complex64"){var o=this.texData.get(n.dataId),a=this.texData.get(r.dataId),i=new Py(j6,n.shape,r.shape),s=new Py(G6,n.shape,r.shape),u=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag),this.makeComplexComponentTensorInfo(r,a.complexTensors.real),this.makeComplexComponentTensorInfo(r,a.complexTensors.imag)],c=this.compileAndRun(i,u),l=this.compileAndRun(s,u),f=this.complex(c,l);return c.dispose(),l.dispose(),f}if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.multiply(n,r);if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Ny,n.dtype);var d=new mt(Ny,n.shape,r.shape);return this.compileAndRun(d,[n,r],n.dtype)},t.prototype.batchNormalization=function(n,r,o,a,i,s){var u=[n,r,o],c=null;s!=null&&(c=s.shape,u.push(s));var l=null;if(i!=null&&(l=i.shape,u.push(i)),ee().getBool("WEBGL_PACK_NORMALIZATION")){var f=new V6(n.shape,r.shape,o.shape,c,l,a);return this.compileAndRun(f,u)}var d=new H6(n.shape,r.shape,o.shape,c,l,a);return this.compileAndRun(d,u)},t.prototype.localResponseNormalization4D=function(n,r,o,a,i){var s=ee().getBool("WEBGL_PACK_NORMALIZATION")?new _N(n.shape,r,o,a,i):new CN(n.shape,r,o,a,i);return this.compileAndRun(s,[n])},t.prototype.LRNGrad=function(n,r,o,a,i,s,u){var c=new EN(r.shape,a,i,s,u);return this.compileAndRun(c,[r,o,n])},t.prototype.tile=function(n,r){if(n.dtype==="string"){var o=this.readSync(n.dataId).map(function(i){return Bu(i)});return j_(Se(n.shape,n.dtype,o),r)}var a=new qN(n.shape,r);return this.compileAndRun(a,[n])},t.prototype.pad=function(n,r,o){var a=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new IN(n.shape,r,o):new FN(n.shape,r,o);return this.compileAndRun(a,[n])},t.prototype.transpose=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.transpose(n,r);var o=ee().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new XN(n.shape,r):new KN(n.shape,r);return this.compileAndRun(o,[n])},t.prototype.gather=function(n,r,o){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.gather(n,r,o);var a=new xN(n.shape,r.size,o);return this.compileAndRun(a,[n,r])},t.prototype.batchToSpaceND=function(n,r,o){I(n.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(f,d){return f*d}),i=vf(n.shape,r,a),s=mf(i.length,r.length),u=gf(n.shape,r,a),c=P_(o,r.length),l=N_(u,o,r.length);return n.reshape(i).transpose(s).reshape(u).slice(c,l)},t.prototype.spaceToBatchND=function(n,r,o){I(n.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var a=r.reduce(function(d,h){return d*h}),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),c=vf(u.shape,r,a,!1),l=mf(c.length,r.length,!1),f=gf(u.shape,r,a,!1);return u.reshape(c).transpose(l).reshape(f)},t.prototype.reduce=function(n,r,o){var a=n.shape[0],i=n.shape[1],s=Bl(i),u=new BN({windowSize:s,inSize:i,batchSize:a},r),c=this.compileAndRun(u,[n],o);return c.shape[1]===1?c:this.reduce(c,r,o)},t.prototype.argReduce=function(n,r,o){o===void 0&&(o=null);var a=n.shape[0],i=n.shape[1];o!=null&&(a=o.shape[0],i=o.shape[1]);var s=Bl(i),u=new P6({windowSize:s,inSize:i,batchSize:a},r,o==null),c=[n];o!=null&&c.push(o);var l=this.compileAndRun(u,c,"int32");return l.shape[1]===1?l:this.argReduce(n,r,l)},t.prototype.argReducePacked=function(n,r,o){o===void 0&&(o=null);var a=o!=null?o.shape:n.shape,i=Bl(a[a.length-1]),s=new z6(a,i,r,o==null),u=o==null?[n]:[n,o],c=this.compileAndRun(s,u,"int32");return c.rank===n.rank?this.argReducePacked(n,r,c):c},t.prototype.sum=function(n,r){Dn("sum",r,n.rank);var o=Zt(n.shape,r),a=o[0],i=ge(o[1]),s=n.as2D(-1,i),u=kl(n.dtype);return this.reduce(s,"sum",u).reshape(a)},t.prototype.prod=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.prod(n,r);var o=Zt(n.shape,r),a=o[0],i=ge(o[1]),s=n.as2D(-1,i),u=kl(n.dtype);return this.reduce(s,"prod",u).reshape(a)},t.prototype.unsortedSegmentSum=function(n,r,o){var a=0,i=Tr([a],n.rank),s=n;i!=null&&(s=n.transpose(i),a=Pr(1,n.rank)[0]);var u=function(h,p,m){for(var g=[],v=h.length,x=0;x<v;x++)x!==p?g.push(h[x]):g.push(m);return g}(s.shape,a,o),c=ge([s.shape[a]]),l=s.as2D(-1,c),f=kl(n.dtype),d=this.segOpCompute(l,"unsortedSegmentSum",r,f,o).reshape(u);return i!=null&&(d=d.transpose(kd(i))),d},t.prototype.segOpCompute=function(n,r,o,a,i){var s=n.shape[0],u=n.shape[1],c=function(d,h){var p,m=!1;for(d<=lg?(p=d,m=!0):p=df(d,Math.floor(Math.sqrt(d)));!m;)p>h||p===d?m=!0:p=df(d,p+1);return p}(u,i),l=new $N({windowSize:c,inSize:u,batchSize:s,numSegments:i}),f=this.compileAndRun(l,[n,o],a);return f.shape[1]===i?f:(o=Mu(0,i).tile([u/c]),this.segOpCompute(f,r,o,a,i))},t.prototype.argMinMaxReduce=function(n,r,o){var a=[r];if(Dn("arg"+o.charAt(0).toUpperCase()+o.slice(1),a,n.rank),!ee().getBool("WEBGL_PACK_REDUCE")||n.rank<=2){var i=Zt(n.shape,a),s=i[0],u=ge(i[1]),c=n.as2D(-1,u);return this.argReduce(c,o).reshape(s)}return this.argReducePacked(n,o)},t.prototype.argMin=function(n,r){return this.argMinMaxReduce(n,r,"min")},t.prototype.argMax=function(n,r){return this.argMinMaxReduce(n,r,"max")},t.prototype.cumsum=function(n,r,o,a){if(r!==n.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(n.rank-1)+" but got axis="+r);var i=new iN(n.shape,o,a);return this.compileAndRun(i,[n])},t.prototype.equal=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(equal(a, b));
`,"bool");var o=new mt("return float(a == b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.notEqual=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(notEqual(a, b));
`,"bool");var o=new mt("return float(a != b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.less=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.less(n,r);if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThan(a, b));
`,"bool");var o=new mt("return float(a < b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.lessEqual=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var o=new mt("return float(a <= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greater=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.greater(n,r);if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThan(a, b));
`,"bool");var o=new mt("return float(a > b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.greaterEqual=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var o=new mt("return float(a >= b);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalNot=function(n){var r=new Fe(n.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[n])},t.prototype.logicalAnd=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var o=new mt("return float(a >= 1.0 && b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.logicalOr=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var o=new mt("return float(a >= 1.0 || b >= 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r],"bool")},t.prototype.select=function(n,r,o){var a=new UN(n.rank,r.shape,r.rank);return this.compileAndRun(a,[n,r,o],jt(r.dtype,o.dtype))},t.prototype.where=function(n){hf("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=n.dataSync();return bg(n.shape,r)},t.prototype.topk=function(n,r,o){return G_(n.dataSync(),n.shape,n.dtype,r)},t.prototype.min=function(n,r){Dn("min",r,n.rank);var o=Zt(n.shape,r),a=o[0],i=ge(o[1]),s=n.as2D(-1,i);return this.reduce(s,"min",s.dtype).reshape(a)},t.prototype.minimum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.minimum(n,r);var o=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new mt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.mod=function(n,r){var o=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new mt(`if (b == 0.0) return NAN;
  return mod(a, b);`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.max=function(n,r){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.max(n,r);Dn("max",r,n.rank);var o=Zt(n.shape,r),a=o[0],i=ge(o[1]),s=n.as2D(-1,i);return this.reduce(s,"max",s.dtype).reshape(a)},t.prototype.maximum=function(n,r){if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.maximum(n,r);var o=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new mt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.all=function(n,r){Dn("all",r,n.rank);var o=Zt(n.shape,r),a=o[0],i=ge(o[1]),s=n.as2D(-1,i);return this.reduce(s,"all",s.dtype).reshape(a)},t.prototype.any=function(n,r){Dn("any",r,n.rank);var o=Zt(n.shape,r),a=o[0],i=ge(o[1]),s=n.as2D(-1,i);return this.reduce(s,"any",s.dtype).reshape(a)},t.prototype.realDivide=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var o=new mt(`
if (a == b) {
  return 1.0;
};
return a / b;`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"float32")},t.prototype.floorDiv=function(n,r){if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var o=new mt(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,n.shape,r.shape);return this.compileAndRun(o,[n,r],"int32")},t.prototype.add=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,Gh);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.add(n,r);var o=jt(n.dtype,r.dtype);if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,Gh,o);var a=new mt(Gh,n.shape,r.shape);return this.compileAndRun(a,[n,r],o)},t.prototype.packedUnaryOp=function(n,r,o){var a=new Ls(n.shape,r);return this.compileAndRun(a,[n],o)},t.prototype.packedBinaryOp=function(n,r,o,a,i){i===void 0&&(i=!1);var s=new so(o,n.shape,r.shape,i);return this.compileAndRun(s,[n,r],a)},t.prototype.complexSeparableBinaryOp=function(n,r,o){var a=this,i=this.texData.get(n.dataId),s=this.texData.get(r.dataId),u=[[i.complexTensors.real,s.complexTensors.real],[i.complexTensors.imag,s.complexTensors.imag]].map(function(d){var h=d[0],p=d[1],m=a.makeComplexComponentTensorInfo(n,h),g=a.makeComplexComponentTensorInfo(r,p),v=new mt(o,n.shape,r.shape);return a.compileAndRun(v,[m,g],jt(h.dtype,p.dtype))}),c=u[0],l=u[1],f=this.complex(c,l);return c.dispose(),l.dispose(),f},t.prototype.makeComplexComponentTensorInfo=function(n,r){return{dataId:r.dataId,dtype:r.dtype,shape:n.shape}},t.prototype.addN=function(n){if(n.length===1)return n[0];if(n.length>ee().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(n.length/2),o=this.addN(n.slice(0,r)),a=this.addN(n.slice(r));return this.addN([o,a])}var i=n.map(function(c){return c.dtype}).reduce(function(c,l){return jt(c,l)}),s=n.map(function(c){return c.shape}),u=ee().getBool("WEBGL_PACK")?new T6(n[0].shape,s):new B6(n[0].shape,s);return this.compileAndRun(u,n,i)},t.prototype.subtract=function(n,r){if(n.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(n,r,qh);if(this.shouldExecuteOnCPU([n,r]))return this.cpuBackend.subtract(n,r);var o=jt(n.dtype,r.dtype);if(ee().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(n,r,qh,n.dtype);var a=new mt(qh,n.shape,r.shape);return this.compileAndRun(a,[n,r],o)},t.prototype.pow=function(n,r){var o=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new mt(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,n.shape,r.shape),a=jt(n.dtype,r.dtype);return this.compileAndRun(o,[n,r],a)},t.prototype.ceil=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.ceil(n);if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,qy,n.dtype);var r=new Fe(n.shape,qy);return this.compileAndRun(r,[n])},t.prototype.floor=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.floor(n);if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Ky,n.dtype);var r=new Fe(n.shape,Ky);return this.compileAndRun(r,[n])},t.prototype.sign=function(n){var r=new Fe(n.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[n])},t.prototype.isNaN=function(n){var r=new Fe(n.shape,"return float(isnan(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isInf=function(n){var r=new Fe(n.shape,"return float(isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.isFinite=function(n){var r=new Fe(n.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[n],"bool")},t.prototype.round=function(n){var r=new Fe(n.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[n])},t.prototype.exp=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.exp(n);if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Xy,n.dtype);var r=new Fe(n.shape,Xy);return this.compileAndRun(r,[n])},t.prototype.expm1=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.expm1(n);if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,Yy,n.dtype);var r=new Fe(n.shape,Yy);return this.compileAndRun(r,[n])},t.prototype.softmax=function(n,r){var o=Mt([r],n.shape),a=this.max(n,o),i=En(a.shape,o),s=this.subtract(n,a.reshape(i)),u=this.exp(s),c=this.sum(u,o).reshape(i);return this.realDivide(u,c)},t.prototype.log=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.log(n);if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,n.dtype);var r=new Fe(n.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[n])},t.prototype.log1p=function(n){var r=new Fe(n.shape,"return log(1.0 + x);");return this.compileAndRun(r,[n])},t.prototype.sqrt=function(n){var r=new Fe(n.shape,"return sqrt(x);");return this.compileAndRun(r,[n])},t.prototype.rsqrt=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.rsqrt(n);var r=new Fe(n.shape,"return inversesqrt(x);");return this.compileAndRun(r,[n])},t.prototype.reciprocal=function(n){var r=new Fe(n.shape,"return 1.0 / x;");return this.compileAndRun(r,[n])},t.prototype.relu=function(n){var r;return r=ee().getBool("WEBGL_PACK")?new Ls(n.shape,x4):new Fe(n.shape,v4),this.compileAndRun(r,[n])},t.prototype.relu6=function(n){var r;return r=ee().getBool("WEBGL_PACK")?new Ls(n.shape,y4):new Fe(n.shape,m4),this.compileAndRun(r,[n])},t.prototype.prelu=function(n,r){var o=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so(Q_,n.shape,r.shape):new mt(Y_,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.elu=function(n){if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,b4,n.dtype);var r=new Fe(n.shape,g4);return this.compileAndRun(r,[n])},t.prototype.eluDer=function(n,r){var o=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,n.shape,r.shape):new mt("return (b >= 1.0) ? a : a * (b + 1.0);",n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.selu=function(n){var r=new Fe(n.shape,QN);return this.compileAndRun(r,[n])},t.prototype.int=function(n){var r=new Fe(n.shape,"return float(int(x));");return this.compileAndRun(r,[n],"int32")},t.prototype.clip=function(n,r,o){var a,i=(a=ee().getBool("WEBGL_PACK_CLIP")?new K6(n.shape):new q6(n.shape)).getCustomSetupFunc(r,o);return this.compileAndRun(a,[n],null,i)},t.prototype.abs=function(n){if(this.shouldExecuteOnCPU([n]))return this.cpuBackend.abs(n);if(ee().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(n,jy,n.dtype);var r=new Fe(n.shape,jy);return this.compileAndRun(r,[n])},t.prototype.complexAbs=function(n){var r=this.texData.get(n.dataId),o=new X6(n.shape),a=[this.makeComplexComponentTensorInfo(n,r.complexTensors.real),this.makeComplexComponentTensorInfo(n,r.complexTensors.imag)];return this.compileAndRun(o,a)},t.prototype.sigmoid=function(n){var r=new Fe(n.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[n])},t.prototype.softplus=function(n){var r=new Fe(n.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[n])},t.prototype.sin=function(n){var r=new Fe(n.shape,ZN);return this.compileAndRun(r,[n])},t.prototype.cos=function(n){var r=new Fe(n.shape,JN);return this.compileAndRun(r,[n])},t.prototype.tan=function(n){var r=new Fe(n.shape,"return tan(x);");return this.compileAndRun(r,[n])},t.prototype.asin=function(n){var r=new Fe(n.shape,e5);return this.compileAndRun(r,[n])},t.prototype.acos=function(n){var r=new Fe(n.shape,t5);return this.compileAndRun(r,[n])},t.prototype.atan=function(n){var r=new Fe(n.shape,n5);return this.compileAndRun(r,[n])},t.prototype.atan2=function(n,r){var o=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,n.shape,r.shape):new mt(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,n.shape,r.shape);return this.compileAndRun(o,[n,r])},t.prototype.sinh=function(n){var r=new Fe(n.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.cosh=function(n){var r=new Fe(n.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[n])},t.prototype.tanh=function(n){var r=new Fe(n.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[n])},t.prototype.asinh=function(n){var r=new Fe(n.shape,r5);return this.compileAndRun(r,[n])},t.prototype.acosh=function(n){var r=new Fe(n.shape,o5);return this.compileAndRun(r,[n])},t.prototype.atanh=function(n){var r=new Fe(n.shape,a5);return this.compileAndRun(r,[n])},t.prototype.erf=function(n){var r=new Fe(n.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[n])},t.prototype.step=function(n,r){var o=new Fe(n.shape,function(a){return a===void 0&&(a=0),Nr+`
    return x > 0.0 ? 1.0 : float(`+a+`);
  `}(r));return this.compileAndRun(o,[n])},t.prototype.conv2dByMatMul=function(n,r,o,a,i,s){var u=n.shape,c=this.texData.get(n.dataId),l=o.inChannels,f=u[0]*u[1]*u[2],d=o.outChannels,h=o.dataFormat==="channelsLast",p=(f===1||d===1)&&l>1e3,m=u[2]%2!=0&&!!c.isPacked;if(p||!ee().getBool("WEBGL_LAZILY_UNPACK")||!ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var g=h?u[0]*u[1]*u[2]:u[0]*u[2]*u[3],v=this.reshape(n,[1,g,o.inChannels]),x=this.reshape(r,[1,o.inChannels,o.outChannels]);return this.reshape(this.fusedBatchMatMul({a:v,b:x,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),o.outShape)}var y=h?u[0]*u[1]*(u[2]+1):u[0]*u[2]*(u[3]+1),b={dataId:n.dataId,shape:[1,y,o.inChannels],dtype:n.dtype},w=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,I(Gs(c.shape,b.shape),function(){return"packed reshape "+c.shape+" to "+b.shape+" isn't free"});var C=this.reshape(r,[1,o.inChannels,o.outChannels]),E=this.fusedBatchMatMul({a:b,b:C,transposeA:!1,transposeB:!1,bias:a,activation:i,preluActivationWeights:s}),S=this.texData.get(E.dataId);return I(S.isPacked,function(){return"batchMatMul result is expected to be packed"}),c.shape=w,S.shape=o.outShape,N.makeTensorFromDataId(E.dataId,o.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(n,r,o,a,i,s){var u=o.filterWidth,c=o.filterHeight,l=o.inChannels,f=o.outWidth,d=o.outHeight,h=o.dataFormat==="channelsLast",p=u*c*l,m=d*f,g=[p,m],v=n.squeeze([0]),x=r.reshape([1,p,-1]),y=new wN(g,v.shape,o),b=this.compileAndRun(y,[v]).reshape([1,g[0],g[1]]),w=a!=null,C=s!=null,E=i?Jc(i,!0):null,S=new Kh(b.shape,[1,m,o.outChannels],!0,!1,w,E,C),k=[b,x];a&&k.push(a),C&&k.push(s);var _=this.compileAndRun(S,k);return h?_.reshape([1,d,f,o.outChannels]):_.reshape([1,o.outChannels,d,f])},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights;if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(r,o,a,i,s,u);if(ee().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,o,a,i,s,u);var c=i!=null,l=u!=null,f=s?Jc(s,!1):null,d=new Oy(a,c,f,l),h=[r,o];return i&&h.push(i),u&&h.push(u),this.compileAndRun(d,h)},t.prototype.conv2d=function(n,r,o){if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,o);if(ee().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,o);var a=new Oy(o);return this.compileAndRun(a,[n,r])},t.prototype.conv2dDerInput=function(n,r,o){var a=new J6(o);return this.compileAndRun(a,[n,r])},t.prototype.conv2dDerFilter=function(n,r,o){var a=new Z6(o);return this.compileAndRun(a,[n,r])},t.prototype.fusedDepthwiseConv2D=function(n){var r,o=n.input,a=n.filter,i=n.convInfo,s=n.bias,u=n.activation,c=n.preluActivationWeights,l=ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,f=u?Jc(u,l):null,d=[o,a],h=s!=null,p=c!=null;return h&&d.push(s),p&&d.push(c),l?(r=new Ly(i,h,f,p),this.compileAndRun(r,d)):(r=new My(i,h,f,p),this.compileAndRun(r,d))},t.prototype.depthwiseConv2D=function(n,r,o){var a;return ee().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1?(a=new Ly(o),this.compileAndRun(a,[n,r])):(a=new My(o),this.compileAndRun(a,[n,r]))},t.prototype.depthwiseConv2DDerInput=function(n,r,o){var a=new rN(o);return this.compileAndRun(a,[n,r])},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){var a=new nN(o);return this.compileAndRun(a,[n,r])},t.prototype.conv3d=function(n,r,o){var a=new oN(o);return this.compileAndRun(a,[n,r])},t.prototype.conv3dDerInput=function(n,r,o){var a=new tN(o);return this.compileAndRun(a,[n,r])},t.prototype.conv3dDerFilter=function(n,r,o){var a=new eN(o);return this.compileAndRun(a,[n,r])},t.prototype.maxPool=function(n,r){var o=new Xh(r,"max",!1);return this.compileAndRun(o,[n])},t.prototype.avgPool=function(n,r){var o=new Xh(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPoolBackprop=function(n,r,o,a){var i=new Xh(a,"max",!0),s=this.compileAndRun(i,[r]),u=new SN(a),c=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),c},t.prototype.avgPoolBackprop=function(n,r,o){var a=new $6(o);return this.compileAndRun(a,[n],r.dtype)},t.prototype.cast=function(n,r){return mg(n,r,this)},t.prototype.unstack=function(n,r){for(var o=n.shape[r],a=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(a[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),c=n.shape.slice();c[r]=1;var l=new Array(o);for(s=0;s<l.length;s++)u[r]=s,l[s]=this.slice(n,u,c).reshape(a);return l},t.prototype.avgPool3d=function(n,r){var o=new Yh(r,"avg",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.avgPool3dBackprop=function(n,r,o){var a=new U6(o);return this.compileAndRun(a,[n],r.dtype)},t.prototype.maxPool3d=function(n,r){var o=new Yh(r,"max",!1);return this.compileAndRun(o,[n],"float32")},t.prototype.maxPool3dBackprop=function(n,r,o,a){var i=new Yh(a,"max",!0),s=this.compileAndRun(i,[r]),u=new kN(a),c=this.compileAndRun(u,[n,s],r.dtype);return s.dispose(),c},t.prototype.reshape=function(n,r){var o=this.texData.get(n.dataId);if(o.isPacked&&!Gs(n.shape,r)&&(o.texture===null||!Gs(o.shape,r))){var a=this.packedReshape(n,r);return N.makeTensorFromDataId(a.dataId,a.shape,a.dtype)}return yf(n,r)},t.prototype.resizeBilinear=function(n,r,o,a){var i=ee().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ON(n.shape,r,o,a):new NN(n.shape,r,o,a);return this.compileAndRun(i,[n],"float32")},t.prototype.resizeBilinearBackprop=function(n,r,o){var a=new PN(n,r,o);return this.compileAndRun(a,[n])},t.prototype.resizeNearestNeighbor=function(n,r,o,a){var i=new LN(n.shape,r,o,a);return this.compileAndRun(i,[n])},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){var a=new MN(n,r,o);return this.compileAndRun(a,[n])},t.prototype.multinomial=function(n,r,o,a){var i=r?n:ro(n),s=i.shape[0],u=i.shape[1],c=new AN(s,u,o),l=c.getCustomSetupFunc(a);return this.compileAndRun(c,[i],"int32",l)},t.prototype.oneHot=function(n,r,o,a){var i=new DN(n.size,r,o,a);return this.compileAndRun(i,[n])},t.prototype.diag=function(n){var r=new lN(n.size);return this.compileAndRun(r,[n])},t.prototype.nonMaxSuppression=function(n,r,o,a,i){return hf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),xg(n.dataSync(),r.dataSync(),o,a,i)},t.prototype.cropAndResize=function(n,r,o,a,i,s){var u=new aN(n.shape,r.shape,a,i,s);return this.compileAndRun(u,[n,r,o],"float32")},t.prototype.depthToSpace=function(n,r,o){I(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});var a=n.shape[0],i=o==="NHWC"?n.shape[1]:n.shape[2],s=o==="NHWC"?n.shape[2]:n.shape[3],u=o==="NHWC"?n.shape[3]:n.shape[1],c=i*r,l=s*r,f=u/(r*r),d=new cN(o==="NHWC"?[a,c,l,f]:[a,f,c,l],r,o);return this.compileAndRun(d,[n])},t.prototype.split=function(n,r,o){return V_(n,r,o)},t.prototype.scatterND=function(n,r,o){var a=Lu(0,n,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,c=a.strides,l=a.outputSize,f=[l/u,u],d=n.reshape([s,i]),h=r.reshape([s,u]);if(l===0)return yf(Gt([]),o);var p=ue(0),m=new Uy(s,i,d.rank,h.rank,c,f);return this.compileAndRun(m,[h,d,p]).reshape(o)},t.prototype.sparseToDense=function(n,r,o,a){var i=Lu(0,n,o),s=i.sliceRank,u=i.numUpdates,c=i.strides,l=i.outputSize,f=new Uy(u,s,n.rank,r.rank,c,[l,1]);return this.compileAndRun(f,[r,n,a]).reshape(o)},t.prototype.fft=function(n){return this.fftImpl(n,!1)},t.prototype.ifft=function(n){return this.fftImpl(n,!0)},t.prototype.fftImpl=function(n,r){var o=this.texData.get(n.dataId),a=new zy(vN,n.shape,r),i=new zy(mN,n.shape,r),s=[this.makeComplexComponentTensorInfo(n,o.complexTensors.real),this.makeComplexComponentTensorInfo(n,o.complexTensors.imag)],u=this.compileAndRun(a,s),c=this.compileAndRun(i,s),l=this.complex(u,c).as2D(n.shape[0],n.shape[1]);return u.dispose(),c.dispose(),l},t.prototype.gatherND=function(n,r){var o=r.shape,a=o[o.length-1],i=cg(n,r),s=i[0],u=i[1],c=i[2],l=i[3],f=r.reshape([u,a]),d=n.reshape([n.size/c,c]),h=new yN(a,l,[u,c]);return this.compileAndRun(h,[d,f]).reshape(s)},t.prototype.fill=function(n,r,o){if((o=o||ps(r))==="string"){var a=Iu(o,ge(n));return a.fill(r),N.makeTensor(a,n,o,this)}var i=new gN(n,r),s=i.getCustomSetupFunc(r);return this.compileAndRun(i,[],o,s)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){return this.fill(n.shape,n.dtype==="string"?"":0,n.dtype)},t.prototype.linspace=function(n,r,o){return gg(n,r,o)},t.prototype.makeTensorInfo=function(n,r){var o=this.write(null,n,r);return this.texData.get(o).usage=null,{dataId:o,shape:n,dtype:r}},t.prototype.makeOutput=function(n,r){var o=this.makeTensorInfo(n,r).dataId;return N.makeTensorFromDataId(o,n,r,this)},t.prototype.unpackTensor=function(n){var r=new s5(n.shape);return this.runWebGLProgram(r,[n],n.dtype)},t.prototype.packTensor=function(n){var r=new RN(n.shape);return this.runWebGLProgram(r,[n],n.dtype,null,!0)},t.prototype.packedReshape=function(n,r){var o=[Pu(n.shape)].concat(Nu(n.shape)),a={dtype:n.dtype,shape:o,dataId:n.dataId},i=[Pu(r)].concat(Nu(r)),s=new TN(i,o),u=this.runWebGLProgram(s,[a],n.dtype,null,!0);return{dataId:u.dataId,shape:r,dtype:u.dtype}},t.prototype.decode=function(n){var r,o=this.texData.get(n),a=o.isPacked,i=o.shape,s=o.dtype,u=Il(i);return r=a?new uN(u):new sN(u),{dtype:s,shape:i,dataId:this.runWebGLProgram(r,[{shape:u,dtype:s,dataId:n}],s,null,!0).dataId}},t.prototype.runWebGLProgram=function(n,r,o,a,i){var s=this;i===void 0&&(i=!1);var u=this.makeTensorInfo(n.outputShape,o),c=this.texData.get(u.dataId);if(n.packedOutput&&(c.isPacked=!0),n.outPackingScheme===Tu.DENSE){var l=ou(n.outputShape);c.texShape=l.map(function(y){return 2*y})}if(n.outTexUsage!=null&&(c.usage=n.outTexUsage),ge(u.shape)===0)return c.values=Ji(u.dtype,0),u;var f=[],d=r.map(function(y){if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var b=s.texData.get(y.dataId);if(b.texture==null){if(!n.packedInputs&&ge(y.shape)<=ee().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};n.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}else if(!!b.isPacked!=!!n.packedInputs)y=b.isPacked?s.unpackTensor(y):s.packTensor(y),f.push(y),b=s.texData.get(y.dataId);else if(b.isPacked&&!Gs(b.shape,y.shape)){var w=y,C=y.shape;y.shape=b.shape,y=s.packedReshape(y,C),f.push(y),b=s.texData.get(y.dataId),w.shape=C}return s.uploadToGPU(y.dataId),{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(u.dataId);var h,p={shape:u.shape,texData:c,isUniform:!1},m=function(y,b,w){var C="";b.concat(w).forEach(function(k){var _=k.texData!=null&&k.texData.slice!=null&&k.texData.slice.flatOffset>0,A=k.isUniform?"uniform":k.texData.texShape;C+=k.shape+"_"+A+"_"+_});var E=y.userCode,S=y.constructor.name;return S+="_"+C+"_"+E}(n,d,p),g=this.getAndSaveBinary(m,function(){return function(y,b,w,C){var E=b.userCode,S=w.map(function(P,V){var G={logicalShape:P.shape,texShape:P.isUniform?null:P.texData.texShape,isUniform:P.isUniform,isPacked:!P.isUniform&&P.texData.isPacked,flatOffset:null};return P.texData!=null&&P.texData.slice!=null&&P.texData.slice.flatOffset>0&&(G.flatOffset=P.texData.slice.flatOffset),{name:b.variableNames[V],shapeInfo:G}}),k=S.map(function(P){return P.shapeInfo}),_={logicalShape:C.shape,texShape:C.texData.texShape,isUniform:!1,isPacked:C.texData.isPacked,flatOffset:null},A=N6(S,_,E,b.packedInputs),D=y.createProgram(A),T=null,W=y.getUniformLocation(D,"NAN",!1);ee().getNumber("WEBGL_VERSION")===1&&(T=y.getUniformLocation(D,"INFINITY",!1));for(var $={},q=0;q<b.variableNames.length;q++){var X=b.variableNames[q];$[X]=y.getUniformLocation(D,X,!1),$["offset"+X]=y.getUniformLocation(D,"offset"+X,!1)}return{program:b,source:A,webGLProgram:D,uniformLocations:$,inShapeInfos:k,outShapeInfo:_,infLoc:T,nanLoc:W}}(s.gpgpu,n,d,p)}),v=this.activeTimers!=null;if(v&&(h=this.startTimer()),function(y,b,w,C,E){$y(b.inShapeInfos,w),$y([b.outShapeInfo],[C]);var S=C.texData.texture,k=C.texData.texShape;C.texData.isPacked?y.setOutputPackedMatrixTexture(S,k[0],k[1]):y.setOutputMatrixTexture(S,k[0],k[1]),y.setProgram(b.webGLProgram),ee().getNumber("WEBGL_VERSION")===1&&b.infLoc!==null&&y.gl.uniform1f(b.infLoc,1/0),b.nanLoc!==null&&y.gl.uniform1f(b.nanLoc,NaN),w.forEach(function(_,A){var D=b.program.variableNames[A],T=b.uniformLocations[D],W=b.uniformLocations["offset"+D];if(T!=null)if(_.isUniform)if(ge(_.shape)<2)y.gl.uniform1f(T,_.uniformValues[0]);else{var $=_.uniformValues;$ instanceof Float32Array||($=new Float32Array($)),y.gl.uniform1fv(T,$)}else _.texData.slice!=null&&W!=null&&y.gl.uniform1i(W,_.texData.slice.flatOffset),y.setInputMatrixTexture(_.texData.texture,T,A)}),E!=null&&E(y,b.webGLProgram),y.executeProgram()}(this.gpgpu,g,d,p,a),f.forEach(function(y){return s.disposeData(y.dataId)}),v&&(h=this.endTimer(h),this.activeTimers.push({name:n.constructor.name,query:this.getQueryTime(h)})),!ee().getBool("WEBGL_LAZILY_UNPACK")&&c.isPacked&&i===!1){var x=this.unpackTensor(u);return this.disposeData(u.dataId),x}return u},t.prototype.compileAndRun=function(n,r,o,a,i){i===void 0&&(i=!1),o=o||r[0].dtype;var s=this.runWebGLProgram(n,r,o,a,i);return N.makeTensorFromDataId(s.dataId,s.shape,s.dtype)},t.prototype.getAndSaveBinary=function(n,r){return n in this.binaryCache||(this.binaryCache[n]=r()),this.binaryCache[n]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var n=this;this.disposed||(ee().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(r){n.gpgpu.deleteProgram(n.binaryCache[r].webGLProgram),delete n.binaryCache[r]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var n=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=de(function(){if(!ee().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=ee().getBool("DEBUG");ee().set("DEBUG",!1);var o=n.abs(ue(1e-8)).dataSync()[0];if(ee().set("DEBUG",r),o>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(n){var r,o=this.texData.get(n),a=o.shape,i=o.dtype,s=o.values,u=o.texture,c=o.usage,l=o.isPacked;if(u==null){var f,d=this.activeTimers!=null;d&&(f=Er());var h=o.texShape;if(h==null&&(h=e_(a,l),o.texShape=h),s!=null){var p=Il(a),m=void 0,g=h[1],v=h[0],x=s instanceof Uint8Array;l?(g=(r=lc(h[0],h[1]))[0],v=r[1],m=new pN(p,[v,g],x)):m=new hN(p,[v,g],x);var y=this.makeTensorInfo([v,g],i);this.texData.get(y.dataId).usage=x?jn.PIXELS:jn.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(y.dataId),g,v,s);var b=this.runWebGLProgram(m,[y],i,null,!0),w=this.texData.get(b.dataId);o.texture=w.texture,o.texShape=w.texShape,o.isPacked=w.isPacked,o.usage=w.usage,this.disposeData(y.dataId),this.texData.delete(b.dataId),o.values=null,d&&(this.uploadWaitMs+=Er()-f)}else{var C=this.acquireTexture(h,c,i,l);o.texture=C}}},t.prototype.convertAndCacheOnCPU=function(n,r){var o=this.texData.get(n),a=o.dtype;return this.releaseGPUData(n),r!=null&&(o.values=function(i,s){if(s==="float32"||s==="complex64")return i;if(s==="int32"||s==="bool"){for(var u=s==="int32"?new Int32Array(i.length):new Uint8Array(i.length),c=0;c<u.length;++c)u[c]=Math.round(i[c]);return u}throw new Error("Unknown dtype "+s)}(r,a)),o.values},t.prototype.acquireTexture=function(n,r,o,a){if(this.numBytesInGPU+=this.computeBytes(n,o),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(n,r,a)},t.prototype.computeBytes=function(n,r){return n[0]*n[1]*Km(r)},t}(pg);NE()&&N.registerBackend("webgl",function(){return new w4},2);var C4=O({square_:function(e){var t=F(e,"x","square"),n=[t];return N.runKernelFunc(function(r,o){return o([t]),r.square(t)},{x:t},null,"Square",{},n,[])}}),$u="SquaredDifference",_g=O({squaredDifference_:function(e,t){var n,r=F(e,"a","squaredDifference"),o=F(t,"b","squaredDifference");n=ft(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape);var a={a:r,b:o},i=[r,o];return N.runKernelFunc(function(s,u){var c=s.squaredDifference(r,o);return u([r,o]),c},a,function(s,u){var c=u[0],l=u[1],f=ue(2);return{a:function(){return s.mul(c.sub(l).mul(f))},b:function(){return s.mul(l.sub(c).mul(f))}}},$u,{},i,[])}}),E4=O({abs_:function(e){var t=F(e,"x","abs");return t.dtype==="complex64"?N.runKernelFunc(function(n){return n.complexAbs(t)},{$x:t}):N.runKernelFunc(function(n,r){var o=n.abs(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.toFloat().step(-1))}}},"Abs")}}),_4=O({acos_:function(e){var t=F(e,"x","acos");return N.runKernelFunc(function(n,r){var o=n.acos(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(ue(1).sub(o.toFloat().square()).sqrt()).neg()}}})}}),S4=O({acosh_:function(e){var t=F(e,"x","acosh");return N.runKernelFunc(function(n,r){var o=n.acosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(o.toFloat().square().sub(1).sqrt())}}})}}),k4=O({asin_:function(e){var t=F(e,"x","asin");return N.runKernelFunc(function(n,r){var o=n.asin(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(ue(1).sub(o.toFloat().square()).sqrt())}}})}}),A4=O({asinh_:function(e){var t=F(e,"x","asinh");return N.runKernelFunc(function(n,r){var o=n.asinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.divStrict(ue(1).add(o.toFloat().square()).sqrt())}}})}}),D4=O({atan_:function(e){var t=F(e,"x","atan");return N.runKernelFunc(function(n,r){var o=n.atan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().square().add(1))}}})}}),R4=O({atanh_:function(e){var t=F(e,"x","atanh");return N.runKernelFunc(function(n,r){var o=n.atanh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(ue(1).sub(o.toFloat().square()))}}})}}),F4=O({ceil_:function(e){var t=F(e,"x","ceil");return N.runKernelFunc(function(n){return n.ceil(t)},{$x:t},function(n){return{$x:function(){return Le(n)}}})}}),Td=O({clipByValue_:function(e,t,n){var r=F(e,"x","clipByValue");I(t<=n,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."});var o=[r],a={min:t,max:n};return N.runKernelFunc(function(i,s){var u=i.clip(r,t,n);return s([r]),u},{x:r},function(i,s){var u=s[0];return{x:function(){return i.where(u.greaterEqual(t).logicalAnd(u.lessEqual(n)),Le(i))}}},"ClipByValue",a,o)}}),I4=O({cos_:function(e){var t=F(e,"x","cos"),n=[t];return N.runKernelFunc(function(r,o){var a=r.cos(t);return o([t]),a},{x:t},function(r,o){var a=o[0];return{x:function(){return a.toFloat().sin().neg().mul(r)}}},"Cos",{},n)}}),B4=O({cosh_:function(e){var t=F(e,"x","cosh");return N.runKernelFunc(function(n,r){var o=n.cosh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().sinh().mulStrict(n)}}})}}),T4=O({erf_:function(e){var t=F(e,"x","erf");return I(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),N.runKernelFunc(function(n,r){var o=n.erf(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),bf=O({exp_:function(e){var t=F(e,"x","exp");return N.runKernelFunc(function(n,r){var o=n.exp(t);return r([o]),o},{x:t},function(n,r){return{x:function(){return n.mulStrict(r[0])}}},"Exp",{},[],[!0])}}),P4=O({expm1_:function(e){var t=F(e,"x","expm1");return N.runKernelFunc(function(n,r){var o=n.expm1(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.exp())}}})}}),N4=O({floor_:function(e){var t=F(e,"x","floor");return N.runKernelFunc(function(n){return n.floor(t)},{$x:t},function(n){return{$x:function(){return Le(n)}}})}}),O4=O({log_:function(e){var t=F(e,"x","log"),n=[t];return N.runKernelFunc(function(r,o){var a=r.log(t);return o([t]),a},{x:t},function(r,o){var a=o[0];return{x:function(){return r.div(a.toFloat())}}},"Log",{},n)}}),M4=O({log1p_:function(e){var t=F(e,"x","log1p");return N.runKernelFunc(function(n,r){var o=n.log1p(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.add(1))}}})}}),L4=O({logSigmoid_:function(e){var t=F(e,"x","logSigmoid");return N.runKernelFunc(function(n,r){var o=n.softplus(t.neg()).neg();return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.neg().sigmoid())}}})}}),Uu=O({neg_:function(e){var t=F(e,"x","neg"),n=[t];return N.runKernelFunc(function(r){return r.neg(t)},{x:t},function(r){return{x:function(){return r.neg()}}},"Neg",{},n)}}),W4=O({reciprocal_:function(e){var t=F(e,"x","reciprocal");return N.runKernelFunc(function(n,r){var o=n.reciprocal(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.square().neg())}}})}}),z4=O({round_:function(e){var t=F(e,"x","round");return N.runKernelFunc(function(n){return n.round(t)},{$x:t},function(n){return{$x:function(){return Le(n)}}})}}),Sg=O({rsqrt_:function(e){var t=F(e,"x","rsqrt"),n=[t];return N.runKernelFunc(function(r,o){var a=r.rsqrt(t);return o([t]),a},{x:t},function(r,o){var a=o[0];return{x:function(){return r.div(a.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},n)}}),kg=O({sigmoid_:function(e){var t=F(e,"x","sigmoid");return N.runKernelFunc(function(n,r){var o=n.sigmoid(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mul(o.mul(ue(1).sub(o)))}}},"Sigmoid")}}),$4=O({sign_:function(e){var t=F(e,"x","sign");return N.runKernelFunc(function(n){return n.sign(t)},{$x:t},function(n){return{$x:function(){return Le(n)}}})}}),U4=O({isNaN_:function(e){var t=F(e,"x","isNaN");return N.runKernelFunc(function(n){return n.isNaN(t)},{$x:t},function(n){return{$x:function(){return Le(n)}}})}}),H4=O({isInf_:function(e){var t=F(e,"x","isInf");return N.runKernelFunc(function(n){return n.isInf(t)},{$x:t},function(n){return{$x:function(){return Le(n)}}})}}),V4=O({isFinite_:function(e){var t=F(e,"x","isFinite");return N.runKernelFunc(function(n){return n.isFinite(t)},{$x:t},function(n){return{$x:function(){return Le(n)}}})}}),j4=O({sin_:function(e){var t=F(e,"x","sin"),n=[t];return N.runKernelFunc(function(r,o){var a=r.sin(t);return o([t]),a},{x:t},function(r,o){var a=o[0];return{x:function(){return a.toFloat().cos().mul(r)}}},"Sin",{},n)}}),G4=O({sinh_:function(e){var t=F(e,"x","sinh");return N.runKernelFunc(function(n,r){var o=n.sinh(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return o.toFloat().cosh().mulStrict(n)}}})}}),q4=O({softplus_:function(e){var t=F(e,"x","softplus");return N.runKernelFunc(function(n,r){var o=n.softplus(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.mul(o.sigmoid())}}})}}),K4=O({sqrt_:function(e){var t=F(e,"x","sqrt");return N.runKernelFunc(function(n,r){var o=n.sqrt(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.toFloat().sqrt().mul(2))}}})}}),X4=O({step_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","step");return N.runKernelFunc(function(r){return r.step(n,t)},{$x:n},function(r){return{$x:function(){return Le(r)}}})}}),Y4=O({tan_:function(e){var t=F(e,"x","tan");return N.runKernelFunc(function(n,r){var o=n.tan(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return n.div(o.cos().square())}}})}}),Q4=O({tanh_:function(e){var t=F(e,"x","tanh");return N.runKernelFunc(function(n,r){var o=n.tanh(t);return r([o]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return ue(1).sub(o.square()).mulStrict(n)}}},"Tanh",{},null,[!0])}});function Z4(e,t,n,r,o,a){var i,s,u=F(e,"x","batchNorm"),c=F(t,"mean","batchNorm"),l=F(n,"variance","batchNorm");return o!=null&&(i=F(o,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),I(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),I(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+c.rank+"."}),I(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+l.rank+"."}),i!=null&&I(i.rank===2||i.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+i.rank+"."}),s!=null&&I(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."}),hc(u,c,l,s,i,a)}function J4(e,t,n,r,o,a){var i,s,u=F(e,"x","batchNorm"),c=F(t,"mean","batchNorm"),l=F(n,"variance","batchNorm");return o!=null&&(i=F(o,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),I(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),I(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+c.rank+"."}),I(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+l.rank+"."}),i!=null&&I(i.rank===3||i.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+i.rank+"."}),s!=null&&I(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."}),hc(u,c,l,s,i,a)}function e3(e,t,n,r,o,a){var i,s,u=F(e,"x","batchNorm"),c=F(t,"mean","batchNorm"),l=F(n,"variance","batchNorm");return o!=null&&(i=F(o,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),I(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),I(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+c.rank+"."}),I(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+l.rank+"."}),i!=null&&I(i.rank===4||i.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+i.rank+"."}),s!=null&&I(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."}),hc(u,c,l,s,i,a)}function hc(e,t,n,r,o,a){a==null&&(a=.001);var i,s,u,c=F(e,"x","batchNorm"),l=F(t,"mean","batchNorm"),f=F(n,"variance","batchNorm");o!=null&&(i=F(o,"scale","batchNorm")),r!=null&&(s=F(r,"offset","batchNorm")),I(l.rank===f.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),I(s==null||l.rank===s.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),I(i==null||l.rank===i.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=c.rank===0||c.rank===1?c.as4D(1,1,1,c.size):c.rank===2?c.as4D(1,1,c.shape[0],c.shape[1]):c.rank===3?c.as4D(1,c.shape[0],c.shape[1],c.shape[2]):c;var d=[c,l,f,i];return N.runKernelFunc(function(h,p){var m=h.batchNormalization(u,el(l),el(f),a,el(i),el(s));return p([c,l,f,i]),m},{x:c,mean:l,variance:f,scale:i,offset:s},function(h,p){var m=p,g=m[0],v=m[1],x=m[2],y=m[3],b=y??ue(1),w=Nt(v.shape,u.shape),C=[];if(v.rank===1){for(var E=0;E<u.shape.length-1;++E)C.push(u.shape[E]);C.push(1)}var S=g.sub(v),k=h.mul(b),_=Sg(x.add(ue(a))),A=_.mul(_).mul(_).mul(ue(-.5));return{x:function(){return v.rank===1?h.mul(Wa(_.as4D(1,1,1,v.shape[0]),C)).mul(b).reshape(g.shape):h.mul(_).mul(b).reshape(g.shape)},mean:function(){var D=_.mul(ue(-1)).mul(k);return v.rank===1&&(D=D.sum(w)),D.reshape(v.shape)},variance:function(){var D=A.mul(S).mul(k);return v.rank===1&&(D=D.sum(w)),D.reshape(v.shape)},scale:function(){var D=S.mul(_),T=h.mul(D);return v.rank===1&&(T=T.sum(w)),T.reshape(v.shape)},offset:function(){var D=h;return v.rank===1&&(D=D.sum(w)),D.reshape(v.shape)}}},"BatchNormalization",{varianceEpsilon:a},d).reshape(c.shape)}function el(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function Pd(){eg("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var t3=O({batchNormalization2d_:function(e,t,n,r,o,a){return r===void 0&&(r=.001),Pd(),Z4(e,t,n,a,o,r)}}),n3=O({batchNormalization3d_:function(e,t,n,r,o,a){return r===void 0&&(r=.001),Pd(),J4(e,t,n,a,o,r)}}),r3=O({batchNormalization4d_:function(e,t,n,r,o,a){return r===void 0&&(r=.001),Pd(),e3(e,t,n,a,o,r)}}),o3=O({batchNormalization_:function(e,t,n,r,o,a){return r===void 0&&(r=.001),Pd(),hc(e,t,n,a,o,r)}}),Ag=O({batchNorm_:hc}),a3=O({batchNorm2d_:Z4}),i3=O({batchNorm3d_:J4}),s3=O({batchNorm4d_:e3}),pc=O({logicalAnd_:function(e,t){var n=F(e,"a","logicalAnd","bool"),r=F(t,"b","logicalAnd","bool");return Pe(n.shape,r.shape),N.runKernelFunc(function(o){return o.logicalAnd(n,r)},{a:n,b:r},null,"LogicalAnd")}}),u3=O({logicalNot_:function(e){var t=F(e,"x","logicalNot","bool");return N.runKernelFunc(function(n){return n.logicalNot(t)},{$x:t})}}),Dg=O({logicalOr_:function(e,t){var n=F(e,"a","logicalOr","bool"),r=F(t,"b","logicalOr","bool");return Pe(n.shape,r.shape),N.runKernelFunc(function(o){return o.logicalOr(n,r)},{$a:n,$b:r})}}),c3=O({logicalXor_:function(e,t){var n=F(e,"a","logicalXor","bool"),r=F(t,"b","logicalXor","bool");return Pe(n.shape,r.shape),Dg(e,t).logicalAnd(pc(e,t).logicalNot())}}),fa=O({where_:function(e,t,n){var r=F(t,"a","where"),o=F(n,"b","where"),a=F(e,"condition","where","bool");return ze(r.shape,o.shape,"Error in where: "),a.rank===1?I(a.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):ze(a.shape,o.shape,"Error in where: "),N.runKernelFunc(function(i,s){var u=i.select(a,r,o);return s([a]),u},{$condition:a,$a:r,$b:o},function(i,s){var u=s[0];return{$condition:function(){return Le(u).toFloat()},$a:function(){return i.mul(u.cast(i.dtype))},$b:function(){return i.mul(u.logicalNot().cast(i.dtype))}}})}}),Rg=function(e){return ve(this,void 0,void 0,function(){var t,n,r;return me(this,function(o){switch(o.label){case 0:return[4,(t=F(e,"condition","whereAsync","bool")).data()];case 1:return n=o.sent(),r=bg(t.shape,n),e!==t&&t.dispose(),[2,r]}})})},Ie=O({add_:function(e,t){var n,r=F(e,"a","add"),o=F(t,"b","add");n=ft(r,o),r=n[0],o=n[1];var a=Pe(r.shape,o.shape);return N.runKernelFunc(function(i){return i.add(r,o)},{a:r,b:o},function(i){return{a:function(){var s=i,u=Nt(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=Nt(o.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(o.shape)}}},"Add")}}),l3=O({addN_:function(e){I(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),I(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(o,a){return F(o,"tensors"+a,"addN")}),n=t[0];t.forEach(function(o){if(o.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(o){if(!Bt(o.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=t;return N.runKernelFunc(function(o){return o.addN(t)},r,function(o){var a={};return t.forEach(function(i,s){a[s]=function(){return o.clone()}}),a},"AddN")}}),f3=O({addStrict_:function(e,t){var n=F(e,"a","addStrict"),r=F(t,"b","addStrict");return ze(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),d3=O({atan2_:function(e,t){var n,r=F(e,"a","atan2"),o=F(t,"b","atan2");n=ft(r,o),r=n[0],o=n[1];var a=Pe(r.shape,o.shape);return N.runKernelFunc(function(i,s){var u=i.atan2(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],c=s[1];return{$a:function(){var l=Ie(u.square(),c.square()),f=i.mul(c.div(l)),d=Nt(u.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(u.shape)},$b:function(){var l=Ie(u.square(),c.square()),f=Uu(i.mul(u.div(l))),d=Nt(c.shape,a);return d.length>0&&(f=f.sum(d)),f.reshape(c.shape)}}})}}),sr=O({div_:function(e,t){var n,r=F(e,"a","div"),o=F(t,"b","div");if(n=ft(r,o),r=n[0],o=n[1],r.dtype==="int32"&&o.dtype==="int32")return Fg(r,o);var a=Pe(r.shape,o.shape);return N.runKernelFunc(function(i,s){var u=i.realDivide(r,o);return s([r,o]),u},{a:r,b:o},function(i,s){var u=s[0],c=s[1];return{a:function(){var l=i.div(c.toFloat()),f=Nt(u.shape,a);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=i.mul(u.toFloat()),f=Nt(c.shape,a);f.length>0&&(l=l.sum(f).reshape(c.shape));var d=c.square();return l.div(d.toFloat()).neg()}}},"Div")}}),h3=O({divNoNan_:function(e,t){var n,r=F(e,"a","div"),o=F(t,"b","div");r=(n=ft(r,o))[0],o=n[1];var a=sr(r,o),i=Le(a),s=o.equal(i);return fa(s,i,a)}}),p3=O({divStrict_:function(e,t){var n=F(e,"a","div"),r=F(t,"b","div");return ze(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),Fg=O({floorDiv_:function(e,t){var n,r=F(e,"a","floorDiv"),o=F(t,"b","floorDiv");n=ft(r,o),r=n[0],o=n[1];var a=Pe(r.shape,o.shape);return N.runKernelFunc(function(i,s){var u=i.floorDiv(r,o);return s([r,o]),u},{a:r,b:o},function(i,s){var u=s[0],c=s[1];return{a:function(){var l=i.div(c.toFloat()),f=Nt(u.shape,a);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=i.mul(u.toFloat()),f=Nt(c.shape,a);f.length>0&&(l=l.sum(f).reshape(c.shape));var d=c.square();return l.div(d.toFloat()).neg()}}},"FloorDiv")}}),Nd=O({maximum_:function(e,t){var n,r=F(e,"a","maximum"),o=F(t,"b","maximum");return n=ft(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Pe(r.shape,o.shape),N.runKernelFunc(function(a,i){var s=a.maximum(r,o);return i([r,o]),s},{a:r,b:o},function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.greaterEqual(u).toFloat())},b:function(){return a.mul(s.less(u).toFloat())}}},"Maximum")}}),v3=O({maximumStrict_:function(e,t){var n=F(e,"a","maximumStrict"),r=F(t,"b","maximumStrict");return ze(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),Ig=O({minimum_:function(e,t){var n,r=F(e,"a","minimum"),o=F(t,"b","minimum");return n=ft(r,o),r=n[0],o=n[1],r.dtype==="bool"&&(r=r.toInt(),o=o.toInt()),Pe(r.shape,o.shape),N.runKernelFunc(function(a,i){var s=a.minimum(r,o);return i([r,o]),s},{a:r,b:o},function(a,i){var s=i[0],u=i[1];return{a:function(){return a.mul(s.lessEqual(u).toFloat())},b:function(){return a.mul(s.greater(u).toFloat())}}},"Minimum")}}),m3=O({minimumStrict_:function(e,t){var n=F(e,"a","minimumStrict"),r=F(t,"b","minimumStrict");return ze(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),g3=O({mod_:function(e,t){var n,r=F(e,"a","mod"),o=F(t,"b","mod");n=ft(r,o),r=n[0],o=n[1];var a=Pe(r.shape,o.shape);return N.runKernelFunc(function(i,s){var u=i.mod(r,o);return s([r,o]),u},{$a:r,$b:o},function(i,s){var u=s[0],c=s[1];return{$a:function(){var l=Nt(u.shape,a);return l.length>0?i.sum(l).reshape(u.shape):i},$b:function(){var l=i.mul(u.div(c).floor().neg()),f=Nt(c.shape,a);return f.length>0?l.sum(f).reshape(c.shape):l}}})}}),x3=O({modStrict_:function(e,t){var n=F(e,"a","modStrict"),r=F(t,"b","modStrict");return ze(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),nn=O({mul_:function(e,t){var n,r=F(e,"a","mul"),o=F(t,"b","mul");n=ft(r,o),r=n[0],o=n[1];var a=Pe(r.shape,o.shape);return N.runKernelFunc(function(i,s){var u=i.multiply(r,o);return s([r,o]),u},{a:r,b:o},function(i,s){var u=s[0],c=s[1];return{a:function(){var l=i.mul(c.toFloat()),f=Nt(u.shape,a);return f.length>0?l.sum(f).reshape(u.shape):l},b:function(){var l=i.mul(u.toFloat()),f=Nt(c.shape,a);return f.length>0?l.sum(f).reshape(c.shape):l}}},"Mul")}}),y3=O({mulStrict_:function(e,t){var n=F(e,"a","mul"),r=F(t,"b","mul");return ze(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Hu=O({pow_:function(e,t){var n,r=F(e,"base","pow"),o=F(t,"exp","pow");n=ft(r,o),r=n[0],o=n[1];var a=Pe(r.shape,o.shape),i=[r,o];return N.runKernelFunc(function(s,u){var c=s.pow(r,o);return u([r,o,c]),c},{a:r,b:o},function(s,u){var c=u[0],l=u[1],f=u[2];return{a:function(){var d=l.toFloat(),h=s.mul(d.mul(c.pow(d.sub(ue(1))))),p=Nt(c.shape,a);return p.length>0&&(h=h.sum(p)),h.reshape(c.shape)},b:function(){var d=c.greater(0),h=c.log().where(d,Le(c)),p=s.mul(f.mul(h)),m=Nt(l.shape,a);return m.length>0&&(p=p.sum(m)),p.reshape(l.shape)}}},"Pow",{},i,[!0])}}),b3=O({powStrict_:function(e,t){return ze(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),w3=O({squaredDifferenceStrict_:function(e,t){var n=F(e,"a","squaredDifferenceStrict"),r=F(t,"b","squaredDifferenceStrict");return ze(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Ot=O({sub_:function(e,t){var n,r=F(e,"a","sub"),o=F(t,"b","sub");n=ft(r,o),r=n[0],o=n[1];var a=Pe(r.shape,o.shape);return N.runKernelFunc(function(i){return i.subtract(r,o)},{a:r,b:o},function(i){return{a:function(){var s=i,u=Nt(r.shape,a);return u.length>0&&(s=s.sum(u)),s.reshape(r.shape)},b:function(){var s=i,u=Nt(o.shape,a);return u.length>0&&(s=s.sum(u)),s.neg().reshape(o.shape)}}},"Sub")}}),C3=O({subStrict_:function(e,t){var n=F(e,"a","subStrict"),r=F(t,"b","subStrict");return ze(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),Bg=O({equal_:function(e,t){var n,r=F(e,"a","equal"),o=F(t,"b","equal");return n=ft(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),N.runKernelFunc(function(a){return a.equal(r,o)},{$a:r,$b:o})}}),E3=O({equalStrict_:function(e,t){var n=F(e,"a","equalStrict"),r=F(t,"b","equalStrict");return ze(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),_3=O({greater_:function(e,t){var n,r=F(e,"a","greater"),o=F(t,"b","greater");return n=ft(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),N.runKernelFunc(function(a){return a.greater(r,o)},{a:r,b:o},null,"Greater")}}),Tg=O({greaterEqual_:function(e,t){var n,r=F(e,"a","greaterEqual"),o=F(t,"b","greaterEqual");return n=ft(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),N.runKernelFunc(function(a,i){var s=a.greaterEqual(r,o);return i([r,o]),s},{a:r,b:o},function(a,i){var s=i[0],u=i[1];return{a:function(){return Le(s)},b:function(){return Le(u)}}},"GreaterEqual")}}),S3=O({greaterEqualStrict_:function(e,t){var n=F(e,"a","greaterEqualStrict"),r=F(t,"b","greaterEqualStrict");return ze(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),k3=O({greaterStrict_:function(e,t){var n=F(e,"a","greaterStrict"),r=F(t,"b","greaterStrict");return ze(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),A3=O({less_:function(e,t){var n,r=F(e,"a","less"),o=F(t,"b","less");return n=ft(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),N.runKernelFunc(function(a){return a.less(r,o)},{a:r,b:o},null,"Less")}}),D3=O({lessEqual_:function(e,t){var n,r=F(e,"a","lessEqual"),o=F(t,"b","lessEqual");return n=ft(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),N.runKernelFunc(function(a,i){var s=a.lessEqual(r,o);return i([r,o]),s},{a:r,b:o},null,"LessEqual")}}),R3=O({lessEqualStrict_:function(e,t){var n=F(e,"a","lessEqualStrict"),r=F(t,"b","lessEqualStrict");return ze(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),F3=O({lessStrict_:function(e,t){var n=F(e,"a","lessStrict"),r=F(t,"b","lessStrict");return ze(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),I3=O({notEqual_:function(e,t){var n,r=F(e,"a","notEqual"),o=F(t,"b","notEqual");return n=ft(r,o),r=n[0],o=n[1],Pe(r.shape,o.shape),N.runKernelFunc(function(a){return a.notEqual(r,o)},{a:r,b:o},null,"NotEqual")}}),B3=O({notEqualStrict_:function(e,t){var n=F(e,"a","notEqualStrict"),r=F(t,"b","notEqualStrict");return ze(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function Qy(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function Zy(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var Od=O({gather_:function(e,t,n){n===void 0&&(n=0);var r=F(e,"x","gather"),o=F(t,"indices","gather","int32");n=Mt(n,r.shape)[0];var a=function(i,s,u){for(var c=i.shape[u],l=[],f=1,d=1,h=0;h<u;h++)l.push(i.shape[h]),f*=i.shape[h];for(h=0;h<s.rank;h++)l.push(s.shape[h]);for(h=u+1;h<i.rank;h++)l.push(i.shape[h]),d*=i.shape[h];return{batchSize:f,sliceSize:d,dimSize:c,outputShape:l}}(r,o,n);return N.runKernelFunc(function(i,s){var u=i.gather(r,o.flatten(),n);return s([o]),u},{x:r,indices:o},function(i,s){var u=s[0];return{x:function(){var c=r.shape,l=u.size,f=c.slice(0,n),d=f.length,h=c.slice(n,c.length).slice(1),p=h.length,m=Qy(0,d),g=Qy(d+1,d+1+p),v=Zy([f,[l],h]),x=i.reshape(v),y=u.reshape([l]),b=Zy([[d],m,g]),w=x.transpose(b),C=Pg(w,y,r.shape[n]),E=kd(b);return C=C.transpose(E)},indices:function(){return u}}},"Gather",{axis:n}).reshape(a.outputShape)}}),Pg=O({unsortedSegmentSum_:function(e,t,n){var r=F(e,"x","unsortedSegmentSum"),o=F(t,"segmentIds","unsortedSegmentSum","int32");return I(bt(n),function(){return"numSegments must be of dtype int"}),N.runKernelFunc(function(a,i){var s=a.unsortedSegmentSum(r,o,n);return i([o]),s},{$x:r},function(a,i){var s=i[0];return{$x:function(){return function(u,c){for(var l=Nd(c,Le(c)),f=Od(u,l),d=Tg(c,ue(0,"int32")),h=f.rank-d.rank,p=0;p<h;++p)d=$n(d,p+1);d=pc(d,Za(f.shape,"bool"));var m=Le(f);return fa(d,f,m)}(a,s)}}})}}),T3=function(e,t,n){return ve(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f,d,h,p,m;return me(this,function(g){switch(g.label){case 0:for(r=F(e,"tensor","boolMask"),o=F(t,"mask","boolMask","bool"),a=n??0,i=o.rank,s=r.shape,I(i>0,function(){return"mask cannot be scalar"}),ze(s.slice(a,a+i),o.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,c=a;c<a+i;c++)u*=s[c];return l=s.slice(0,a).concat([u],s.slice(a+i)),f=r.reshape(l),d=o.reshape([-1]),[4,Rg(d)];case 1:return h=g.sent(),p=h.squeeze([1]),m=Od(f,p,a),e!==r&&r.dispose(),t!==o&&o.dispose(),p.dispose(),f.dispose(),d.dispose(),h.dispose(),[2,m]}})})};function P3(e,t,n,r,o,a,i){a===void 0&&(a="NHWC"),I(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var s=e,u=t,c=!1;t.rank===3&&(c=!0,u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),I(s.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."}),I(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),I(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var l=a==="NHWC"?s[3]:s[1],f=a==="NHWC"?u.shape[3]:u.shape[1];I(l===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[2]+"."}),I(f===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+f+") must match output depth for filter "+n.shape[3]+"."}),i!=null&&I(bt(o),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var d=Bd(a),h=xa(s,n.shape,r,1,o,i,!1,d),p=N.runKernelFunc(function(m,g){var v=m.conv2dDerInput(u,n,h);return g([n,u]),v},{dy4D:u,filter:n},function(m,g){var v=g[0],x=g[1];return{dy4D:function(){return tr(m,v,r,o,a,1,i)},filter:function(){return Ng(m,x,v.shape,r,o,a,i)}}});return c?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}function Zh(e){var t=function(a){return typeof a=="number"?[a,a,a]:a.length===2?[a[0],a[1],1]:a}(e),n=t[0],r=t[1],o=t[2];return n===1&&r===1&&o===1}function N3(e,t,n,r,o){I(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var a=e,i=t,s=!1;t.rank===4&&(s=!0,i=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),a=[1,e[0],e[1],e[2],e[3]]);var u=a[4],c=i.shape[4];I(a.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+a.length+"."}),I(i.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+i.rank}),I(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),I(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),I(c===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+c+") must match output depth for filter "+n.shape[4]+"."});var l=zu(a,n.shape,r,1,o),f=N.runKernelFunc(function(d){return d.conv3dDerInput(i,n,l)},{dy5D:i});return s?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}var O3=O({conv1d_:function(e,t,n,r,o,a,i){o===void 0&&(o="NWC"),a===void 0&&(a=1);var s=F(e,"x","conv1d"),u=F(t,"filter","conv1d"),c=s,l=!1;s.rank===2&&(l=!0,c=s.as3D(1,s.shape[0],s.shape[1])),I(c.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+c.rank+"."}),I(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),i!=null&&I(bt(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}),I(c.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+c.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),I(_n(n,a),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+a+"'"}),I(o==="NWC",function(){return"Error in conv1d: got dataFormat of "+o+" but only NWC is currently supported."});var f=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),d=c.as4D(c.shape[0],1,c.shape[1],c.shape[2]),h=tr(d,f,[1,n],r,"NHWC",[1,a],i);return l?h.as2D(h.shape[2],h.shape[3]):h.as3D(h.shape[0],h.shape[2],h.shape[3])}}),tr=O({conv2d_:function(e,t,n,r,o,a,i){o===void 0&&(o="NHWC"),a===void 0&&(a=[1,1]);var s=F(e,"x","conv2d"),u=F(t,"filter","conv2d"),c=s,l=!1;s.rank===3&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),I(c.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+c.rank+"."}),I(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),i!=null&&I(bt(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=o==="NHWC"?c.shape[3]:c.shape[1];I(f===u.shape[2],function(){return"Error in conv2d: depth of input ("+f+") must match input depth for filter "+u.shape[2]+"."}),I(_n(n,a),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"});var d=Bd(o),h=xa(c.shape,u.shape,n,a,r,i,!1,d),p=[u,c],m=N.runKernelFunc(function(g,v){var x=g.conv2d(c,u,h);return v([u,c]),x},{x:c,filter:u},function(g,v){var x=v,y=x[0],b=x[1];return I(qa(a),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"}),{x:function(){return L3(b.shape,g,y,n,r,o)},filter:function(){return Ng(b,g,y.shape,n,r,o)}}},"Conv2D",h,p);return l?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),M3=O({conv3d_:function(e,t,n,r,o,a){o===void 0&&(o="NDHWC"),a===void 0&&(a=[1,1,1]);var i=F(e,"x","conv3d"),s=F(t,"filter","conv3d"),u=i,c=!1;i.rank===4&&(c=!0,u=i.as5D(1,i.shape[0],i.shape[1],i.shape[2],i.shape[3])),I(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),I(s.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."}),I(u.shape[4]===s.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+s.shape[3]+"."}),I(function(d,h){return Zh(d)||Zh(h)}(n,a),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),I(o==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+o+" but only NDHWC is currently supported."});var l=zu(u.shape,s.shape,n,a,r),f=N.runKernelFunc(function(d,h){var p=d.conv3d(u,s,l);return h([u,s]),p},{x:u,$filter:s},function(d,h){I(Zh(a),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+a+"'"});var p=h[0],m=h[1];return{x:function(){return N3(p.shape,d,m,n,r)},$filter:function(){return function(g,v,x,y,b){var w=g;g.rank===4&&(w=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3]));var C=v;C.rank===4&&(C=v.as5D(1,v.shape[0],v.shape[1],v.shape[2],v.shape[3])),I(w.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+w.shape+"."}),I(C.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+C.shape+"."}),I(x.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+x+"."}),I(w.shape[4]===x[3],function(){return"Error in conv3dDerFilter: depth of input "+w.shape[4]+") must match input depth in filter ("+x[3]+"."}),I(C.shape[4]===x[4],function(){return"Error in conv3dDerFilter: depth of dy ("+C.shape[4]+") must match output depth for filter ("+x[4]+")."});var E=zu(w.shape,x,y,1,b);return N.runKernelFunc(function(S){return S.conv3dDerFilter(w,C,E)},{x5D:w,dy5D:C})}(p,d,m.shape,n,r)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Ng=O({conv2dDerFilter_:function(e,t,n,r,o,a,i){a===void 0&&(a="NHWC");var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=t;u.rank===3&&(u=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),I(s.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."}),I(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),I(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var c=a==="NHWC"?s.shape[3]:s.shape[1],l=a==="NHWC"?u.shape[3]:u.shape[1];I(c===n[2],function(){return"Error in conv2dDerFilter: depth of input "+c+") must match input depth in filter ("+n[2]+"."}),I(l===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+l+") must match output depth for filter ("+n[3]+")."}),i!=null&&I(bt(o),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+o+"."});var f=Bd(a),d=xa(s.shape,n,r,1,o,i,!1,f);return N.runKernelFunc(function(h){return h.conv2dDerFilter(s,u,d)},{x4D:s,dy4D:u})}}),L3=O({conv2dDerInput_:P3}),vc=O({depthwiseConv2d_:function(e,t,n,r,o,a,i){a===void 0&&(a=[1,1]);var s=F(e,"x","depthwiseConv2d"),u=F(t,"filter","depthwiseConv2d"),c=s,l=!1;s.rank===3&&(l=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),I(c.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+c.rank+"."}),I(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),I(c.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+c.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),a==null&&(a=[1,1]),I(_n(n,a),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"}),i!=null&&I(bt(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var f=xa(c.shape,u.shape,n,a,r,i,!0),d=[c,u],h=N.runKernelFunc(function(p,m){var g=p.depthwiseConv2D(c,u,f);return m([c,u]),g},{x:c,filter:u},function(p,m){I(qa(a),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"});var g=m[0],v=m[1];return{x:function(){return W3(g.shape,p,v,f)},filter:function(){return z3(g,p,v.shape,f)}}},"DepthwiseConv2dNative",f,d);return l?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),W3=O({depthwiseConv2dDerInput_:function(e,t,n,r){var o=t,a=!1;t.rank===3&&(a=!0,o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var i=N.runKernelFunc(function(s){return s.depthwiseConv2DDerInput(o,n,r)},{dy4D:o});return a?i.as3D(i.shape[1],i.shape[2],i.shape[3]):i}}),z3=O({depthwiseConv2dDerFilter_:function(e,t,n,r){var o=e;e.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var a=t;return a.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),N.runKernelFunc(function(i){return i.depthwiseConv2DDerFilter(o,a,r)},{x4D:o,dy4D:a})}}),Md=O({separableConv2d_:function(e,t,n,r,o,a,i){a===void 0&&(a=[1,1]),i===void 0&&(i="NHWC");var s=F(e,"x","separableConv2d"),u=F(t,"depthwiseFilter","separableConv2d"),c=F(n,"pointwiseFilter","separableConv2d"),l=s,f=!1;if(s.rank===3&&(f=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),i==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");I(l.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+l.rank+"."}),I(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),I(c.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),I(c.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+c.shape[0]+"."}),I(c.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+c.shape[1]+"."});var d=u.shape[2],h=u.shape[3];I(c.shape[2]===d*h,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+d*h+", but got "+c.shape[2]+"."});var p=vc(l,u,r,o,i,a),m=tr(p,c,1,"valid",i);return f?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),$3=O({conv2dTranspose_:function(e,t,n,r,o,a){return P3(n,F(e,"x","conv2dTranspose"),F(t,"filter","conv2dTranspose"),r,o,"NHWC",a)}}),U3=O({conv3dTranspose_:function(e,t,n,r,o){return N3(n,F(e,"x","conv3dTranspose"),F(t,"filter","conv3dTranspose"),r,o)}}),mc=O({matMul_:function(e,t,n,r){var o;n===void 0&&(n=!1),r===void 0&&(r=!1);var a=F(e,"a","matMul"),i=F(t,"b","matMul");o=ft(a,i),a=o[0],i=o[1];var s=n?a.shape[a.rank-2]:a.shape[a.rank-1],u=r?i.shape[i.rank-1]:i.shape[i.rank-2],c=n?a.shape[a.rank-1]:a.shape[a.rank-2],l=r?i.shape[i.rank-2]:i.shape[i.rank-1],f=a.shape.slice(0,-2),d=i.shape.slice(0,-2),h=ge(f),p=ge(d);I(a.rank>=2&&i.rank>=2&&a.rank===i.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+a.rank+" and "+i.rank+"."}),I(Bt(f,d),function(){return"Error in matMul: outer dimensions ("+f+") and ("+d+") of Tensors with shapes "+a.shape+" and "+i.shape+" must match."}),I(s===u,function(){return"Error in matMul: inner shapes ("+s+") and ("+u+") of Tensors with shapes "+a.shape+" and "+i.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var m=a.shape.slice(0,-2).concat([c,l]),g=n?a.as3D(h,s,c):a.as3D(h,c,s),v=r?i.as3D(p,l,u):i.as3D(p,u,l),x={transposeA:n,transposeB:r};return N.runKernelFunc(function(y,b){var w=y.batchMatMul(g,v,n,r);return b([g,v]),w},{a:g,b:v},function(y,b){var w=b,C=w[0],E=w[1];return n||r?!n&&r?{a:function(){return y.matMul(E,!1,!1)},b:function(){return y.matMul(C,!0,!1)}}:n&&!r?{a:function(){return E.matMul(y,!1,!0)},b:function(){return C.matMul(y,!1,!1)}}:{a:function(){return E.matMul(y,!0,!0)},b:function(){return y.matMul(C,!0,!0)}}:{a:function(){return y.matMul(E,!1,!0)},b:function(){return C.matMul(y,!0,!1)}}},"BatchMatMul",x).reshape(m)}}),H3=O({dot_:function(e,t){var n=F(e,"t1","dot"),r=F(t,"t2","dot");I(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var o=n.rank===1?n.size:n.shape[1],a=r.rank===1?r.size:r.shape[0];return I(o===a,function(){return"Error in dot: inner dimensions of inputs must match, but got "+o+" and "+a+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),V3=O({outerProduct_:function(e,t){var n=F(e,"v1","outerProduct"),r=F(t,"v2","outerProduct");return I(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),ms=O({reverse_:function(e,t){var n=F(e,"x","reverse");if(n.rank===0)return n.clone();var r=Mt(t,n.shape);return N.runKernelFunc(function(o){return o.reverse(n,r)},{$x:n},function(o){return{$x:function(){return o.reverse(r)}}}).reshapeAs(n)}}),j3=O({reverse1d_:function(e){var t=F(e,"x","reverse");return I(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),ms(t,0)}}),G3=O({reverse2d_:function(e,t){var n=F(e,"x","reverse");return I(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),ms(n,t)}}),q3=O({reverse3d_:function(e,t){var n=F(e,"x","reverse");return I(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),ms(n,t)}}),K3=O({reverse4d_:function(e,t){var n=F(e,"x","reverse");return I(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),ms(n,t)}});function X3(e,t,n,r,o,a){var i=F(e,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(s.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."}),I(_n(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),a!=null&&I(bt(o),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=ts(s.shape,t,n,r,o,a);if(c.filterWidth===1&&c.filterHeight===1&&Bt(c.inShape,c.outShape))return i.clone();var l=[s],f=N.runKernelFunc(function(d,h){var p=d.maxPool(s,c);return h([s,p]),p},{x:s},function(d,h){var p=h[0],m=h[1];return{x:function(){return function(g,v,x,y,b,w,C,E){var S=F(g,"dy","maxPoolBackprop"),k=F(v,"input","maxPoolBackprop"),_=F(x,"output","maxPoolBackprop");I(k.rank===S.rank,function(){return"Rank of input ("+k.rank+") does not match rank of dy ("+S.rank+")"}),I(_n(b,w),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),I(S.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+S.rank+"."}),I(k.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var A=ts(k.shape,y,b,w,C,E);return N.runKernelFunc(function(D){return D.maxPoolBackprop(S,k,_,A)},{$dy:S,$input:k})}(d,p,m,t,n,r,o)}}},"MaxPool",c,l);return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function Y3(e,t,n,r,o,a){var i=F(e,"x","avgPool","float32");I(_n(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(s.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."}),a!=null&&I(bt(o),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."});var c=ts(s.shape,t,n,r,o,a);if(c.filterWidth===1&&c.filterHeight===1&&Bt(c.inShape,c.outShape))return i.clone();var l=N.runKernelFunc(function(f){return f.avgPool(s,c)},{x:s},function(f){return{x:function(){return function(d,h,p,m,g,v){var x=F(d,"dy","avgPoolBackprop"),y=F(h,"input","avgPoolBackprop");I(y.rank===x.rank,function(){return"Rank of input ("+y.rank+") does not match rank of dy ("+x.rank+")"}),I(_n(m,g),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+m+" and dilations '"+g+"'"});var b=y,w=x,C=!1;y.rank===3&&(C=!0,b=y.as4D(1,y.shape[0],y.shape[1],y.shape[2]),w=x.as4D(1,x.shape[0],x.shape[1],x.shape[2])),I(w.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+w.rank+"."}),I(b.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+b.rank+"."});var E=ts(b.shape,p,m,g,v),S=N.runKernelFunc(function(k){return k.avgPoolBackprop(w,b,E)},{dy4D:w,input4D:b});return C?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}(f,s,t,n,r,o)}}},"AvgPool",c);return l=l.cast(i.dtype),u?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}var Wt=O({maxPool_:function(e,t,n,r,o){return X3(e,t,n,1,r,o)}}),gs=O({avgPool_:function(e,t,n,r,o){return Y3(e,t,n,1,r,o)}}),Q3=O({pool_:function(e,t,n,r,o,a){o==null&&(o=[1,1]),a==null&&(a=1),r===0&&(r="valid");var i=F(e,"x","maxPool"),s=i,u=!1;i.rank===3&&(u=!0,s=i.as4D(1,i.shape[0],i.shape[1],i.shape[2])),I(_n(a,o),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+a+" and dilations '"+o+"'"});var c,l=ts(s.shape,t,a,o,r),f=[l.dilationHeight,l.dilationWidth];c=r==="same"?function(b,w){var C=b.map(function(k,_){return k+(k-1)*(w[_]-1)}).map(function(k){return k-1}),E=C.map(function(k){return Math.floor(k/2)}),S=C.map(function(k,_){return k-E[_]});return C.map(function(k,_){return[E[_],S[_]]})}([l.filterHeight,l.filterWidth],f):[[0,0],[0,0]];var d=f[0]===1&&f[1]===1,h=function(b,w,C){var E=C.map(function(W){return W[0]}),S=C.map(function(W){return W[1]}),k=b.concat(E,S),_=w.map(function(W,$){return(W-k[$]%W)%W}),A=S.map(function(W,$){return W+_[$]}),D=w.map(function(W,$){return[E[$],A[$]]}),T=w.map(function(W,$){return[0,_[$]]});return[D,T]}([l.inHeight,l.inWidth],f,c),p=h[0],m=h[1],g=d?r:"valid",v=d?s:sg(s,f,p),x=(n==="avg"?function(){return Y3(v,t,a,1,g)}:function(){return X3(v,t,a,1,g)})(),y=d?x:og(x,f,m);return u?y.as3D(y.shape[1],y.shape[2],y.shape[3]):y}}),Z3=O({maxPool3d_:function(e,t,n,r,o,a,i){a===void 0&&(a="NDHWC");var s=F(e,"x","maxPool3d"),u=s,c=!1;s.rank===4&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),I(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),I(a==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),I(_n(n,i),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),o!=null&&I(bt(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=Wu(u.shape,t,n,i,r,o,a),f=N.runKernelFunc(function(d,h){var p=d.maxPool3d(u,l);return h([u,p]),p},{x:u},function(d,h){var p=h[0],m=h[1];return{x:function(){return function(g,v,x,y,b,w,C,E){var S=F(g,"dy","maxPool3dBackprop"),k=F(v,"input","maxPool3dBackprop"),_=F(x,"output","maxPool3dBackprop"),A=S,D=k,T=_,W=!1;k.rank===4&&(W=!0,A=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),D=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),T=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),I(A.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+A.rank+"."}),I(D.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),I(T.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+T.rank+"."}),w==null&&(w=[1,1,1]),I(_n(b,w),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+w+"'"}),E!=null&&I(bt(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+C+"."});var $=Wu(D.shape,y,b,w,C,E),q=N.runKernelFunc(function(X){return X.maxPool3dBackprop(A,D,T,$)},{dy5D:A,input5D:D});return W?q.as4D(q.shape[1],q.shape[2],q.shape[3],q.shape[4]):q}(d,p,m,t,n,i,r,o)}}});return c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),J3=O({avgPool3d_:function(e,t,n,r,o,a,i){a===void 0&&(a="NDHWC");var s=F(e,"x","avgPool3d","float32"),u=s,c=!1;s.rank===4&&(c=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),i==null&&(i=[1,1,1]),I(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),I(a==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+a}),I(_n(n,i),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+i+"'"}),o!=null&&I(bt(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+r+"."});var l=Wu(u.shape,t,n,i,r,o,a),f=N.runKernelFunc(function(d){return d.avgPool3d(u,l)},{x:u},function(d){return{x:function(){return function(h,p,m,g,v,x,y){var b=F(h,"dy","avgPool3dBackprop"),w=F(p,"input","avgPool3dBackprop"),C=b,E=w,S=!1;w.rank===4&&(S=!0,C=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]),E=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3])),I(C.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+C.rank+"."}),I(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),v==null&&(v=[1,1,1]),I(_n(g,v),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+v+"'"}),y!=null&&I(bt(x),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+y+" but got pad "+x+"."});var k=Wu(E.shape,m,g,v,x,y),_=N.runKernelFunc(function(A){return A.avgPool3dBackprop(C,E,k)},{dy5D:C,input5D:E});return S?_.as4D(_.shape[1],_.shape[2],_.shape[3],_.shape[4]):_}(d,u,t,n,i,r,o)}}});return f=f.cast(u.dtype),c?f.as4D(f.shape[1],f.shape[2],f.shape[3],f.shape[4]):f}}),Ir=O({slice_:function(e,t,n){var r,o,a=F(e,"x","slice");if(a.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof t=="number"?[t].concat(new Array(a.rank-1).fill(0)):t.length<a.rank?t.concat(new Array(a.rank-t.length).fill(0)):t.slice()).forEach(function(u){I(u!==-1,function(){return"slice() does not support negative begin indexing."})}),o=(o=n==null?new Array(a.rank).fill(-1):typeof n=="number"?[n].concat(new Array(a.rank-1).fill(-1)):n.length<a.rank?n.concat(new Array(a.rank-n.length).fill(-1)):n).map(function(u,c){return u>=0?u:(I(u===-1,function(){return"Negative size values should be exactly -1 but got "+u+" for the slice() size at index "+c+"."}),a.shape[c]-r[c])}),L_(a,r,o);var i=a.shape,s={begin:r,size:o};return N.runKernelFunc(function(u){return u.slice(a,r,o)},{x:a},function(u){for(var c=[],l=0;l<u.rank;l++)c.push([r[l],i[l]-r[l]-o[l]]);return{x:function(){return u.pad(c)}}},"Slice",s)}}),eS=O({slice1d_:function(e,t,n){var r=F(e,"x","slice1d");return I(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Ir(r,[t],[n])}}),tS=O({slice2d_:function(e,t,n){var r=F(e,"x","slice2d");return I(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Ir(r,t,n)}}),Og=O({slice3d_:function(e,t,n){var r=F(e,"x","slice3d");return I(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Ir(r,t,n)}}),nS=O({slice4d_:function(e,t,n){var r=F(e,"x","slice4d");return I(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Ir(r,t,n)}});function rS(e,t,n,r,o){return t.rank<n.rank&&(t=t.reshape(En(t.shape,r))),e.rank<n.rank&&(e=e.reshape(En(e.shape,r))),{x:function(){var a=e.mul(n.equal(t).cast(e.dtype));return o==null?a:a.transpose(o)}}}var oS=O({all_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","all","bool"),o=Mt(t,r.shape),a=o,i=Tr(a,r.rank);i!=null&&(r=r.transpose(i),a=Pr(a.length,r.rank));var s=N.runKernelFunc(function(c){return c.all(r,a)},{$x:r});if(n){var u=En(s.shape,o);return s.reshape(u)}return s}}),aS=O({any_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","any","bool"),o=Mt(t,r.shape),a=o,i=Tr(a,r.rank);i!=null&&(r=r.transpose(i),a=Pr(a.length,r.rank));var s=N.runKernelFunc(function(c){return c.any(r,a)},{$x:r});if(n){var u=En(s.shape,o);return s.reshape(u)}return s}}),iS=O({argMax_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","argMax");t==null&&(t=0);var r=Mt(t,n.shape),o=Tr(r,n.rank);o!=null&&(n=n.transpose(o),r=Pr(r.length,n.rank));var a={axis:r[0]},i=[n];return N.runKernelFunc(function(s,u){var c=s.argMax(n,r[0]);return u([n]),c},{x:n},function(s,u){var c=u[0];return{x:function(){return Le(c)}}},"ArgMax",a,i)}}),sS=O({argMin_:function(e,t){t===void 0&&(t=0);var n=F(e,"x","argMin");t==null&&(t=0);var r=Mt(t,n.shape),o=Tr(r,n.rank);return o!=null&&(n=n.transpose(o),r=Pr(r.length,n.rank)),N.runKernelFunc(function(a,i){var s=a.argMin(n,r[0]);return i([n]),s},{$x:n},function(a,i){var s=i[0];return{$x:function(){return Le(s)}}})}}),uS=O({logSumExp_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","logSumExp"),o=Mt(t,r.shape),a=r.max(o,!0),i=r.sub(a).exp().sum(o).log(),s=a.reshape(i.shape).add(i);if(n){var u=En(s.shape,o);return s.reshape(u)}return s}}),gc=O({max_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","max"),o=r,a=Mt(t,r.shape),i=a,s=Tr(i,r.rank);s!=null&&(r=r.transpose(s),i=Pr(i.length,r.rank));var u=[r],c=N.runKernelFunc(function(f,d){var h=f.max(r,i);return d([o,h]),h},{x:r},function(f,d){return rS(f,d[1],d[0],a,s)},"Max",{axes:i},u,[!0]);if(n){var l=En(c.shape,a);c=c.reshape(l)}return c}}),cS=O({mean_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","mean"),o=Mt(t,r.shape),a=ge(Zt(r.shape,o)[1]);return fc(function(i){var s=ue(a);return{value:(s.dtype===i.dtype?i:i.cast(s.dtype)).div(s).sum(t,n),gradFunc:function(u){var c=i.shape.slice();return o.forEach(function(l){c[l]=1}),u.reshape(c).mul(Za(i.shape,"float32")).div(a)}}})(r)}}),lS=O({min_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","min"),o=r,a=Mt(t,r.shape),i=a,s=Tr(i,r.rank);s!=null&&(r=r.transpose(s),i=Pr(i.length,r.rank));var u=[r],c=N.runKernelFunc(function(f,d){var h=f.min(r,i);return d([o,h]),h},{x:r},function(f,d){return rS(f,d[1],d[0],a,s)},"Min",{axes:i},u,[!0]);if(n){var l=En(c.shape,a);c=c.reshape(l)}return c}}),fS=O({moments_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=Mt(t,(e=F(e,"x","moments")).shape),o=e.mean(r,n),a=o.shape;n||(a=En(o.shape,r));var i=e.toFloat().sub(o.reshape(a)).square();return{mean:o,variance:i.mean(r,n)}}}),Mg=O({sum_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","sum");r.dtype==="bool"&&(r=r.toInt());var o=Mt(t,r.shape);return fc(function(a){var i=Tr(o,a.rank),s=o,u=a;i!=null&&(u=a.transpose(i),s=Pr(s.length,a.rank));var c=function(h){var p=a.shape.slice();return o.forEach(function(m){p[m]=1}),h.reshape(p).mul(Za(a.shape,"float32"))},l={axes:s},f=N.runKernelFunc(function(h){return h.sum(u,s)},{x:u},function(h){return{x:function(){return c(h)}}},"Sum",l);if(n){var d=En(f.shape,o);f=f.reshape(d)}return{value:f,gradFunc:c}})(r)}}),dS=O({prod_:function(e,t,n){t===void 0&&(t=null),n===void 0&&(n=!1);var r=F(e,"x","prod");r.dtype==="bool"&&(r=r.toInt());var o=Mt(t,r.shape),a=Tr(o,r.rank),i=o,s=r;a!=null&&(s=r.transpose(a),i=Pr(i.length,r.rank));var u=N.runKernelFunc(function(l){return l.prod(s,i)},{permutedX:s});if(n){var c=En(u.shape,o);u=u.reshape(c)}return u}}),Lg=O({elu_:function(e){var t=F(e,"x","elu");return N.runKernelFunc(function(n,r){var o=n.elu(t);return r([o]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){return N.runKernelFunc(function(a){return a.eluDer(n,o)},{dy:n,y:o})}}})}}),hS=O({leakyRelu_:function(e,t){t===void 0&&(t=.2);var n=F(e,"x","leakyRelu");return Nd(ue(t).mul(n),n)}}),Wg=O({prelu_:function(e,t){var n=F(e,"x","prelu"),r=F(t,"alpha","prelu");return N.runKernelFunc(function(o,a){var i=o.prelu(n,r);return a([n,r]),i},{x:n,alpha:r},function(o,a){var i=a[0],s=a[1],u=i.greater(0);return{x:function(){return fa(u,o,o.mul(s))},alpha:function(){var c=fa(u,Le(o),o.mul(i)),l=Nt(s.shape,o.shape);return l.length>0&&(c=c.sum(l)),c.reshape(s.shape)}}},"Prelu")}}),lt=O({relu_:function(e){var t=F(e,"x","relu");return t.dtype==="bool"?t.toInt():N.runKernelFunc(function(n,r){var o=n.relu(t);return r([t]),o},{x:t},function(n,r){var o=r[0];return{x:function(){return n.mulStrict(o.step().toFloat())}}},"Relu")}}),zg=O({relu6_:function(e){var t=F(e,"x","relu6");return t.dtype==="bool"?t.toInt():N.runKernelFunc(function(n,r){var o=n.relu6(t);return r([t]),o},{x:t},function(n,r){var o=r[0],a=o.lessEqual(6).mul(o.step());return{x:function(){return n.mulStrict(a.toFloat())}}},"Relu6")}}),pS=O({selu_:function(e){var t=F(e,"x","selu");return N.runKernelFunc(function(n,r){var o=n.selu(t);return r([t]),o},{$x:t},function(n,r){var o=r[0];return{$x:function(){var a=o.greater(ue(0)),i=ue(Cg),s=ue(Eg),u=n.mul(s),c=n.mul(i).mul(o.toFloat().exp());return fa(a,u,c)}}})}}),ko=O({transpose_:function(e,t){var n=F(e,"x","transpose");if(t==null&&(t=n.shape.map(function(o,a){return a}).reverse()),I(n.rank===t.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."}),t.forEach(function(o){I(o>=0&&o<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t})}),n.rank<=1)return n.clone();var r={perm:t};return N.runKernelFunc(function(o){return o.transpose(n,t)},{x:n},function(o){var a=kd(t);return{x:function(){return o.transpose(a)}}},"Transpose",r)}}),vS=O({localResponseNormalization_:function(e,t,n,r,o){t===void 0&&(t=5),n===void 0&&(n=1),r===void 0&&(r=1),o===void 0&&(o=.5);var a=F(e,"x","localResponseNormalization");I(a.rank===4||a.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+a.rank+"."}),I(bt(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var i=a,s=!1;a.rank===3&&(s=!0,i=a.as4D(1,a.shape[0],a.shape[1],a.shape[2]));var u=N.runKernelFunc(function(c,l){var f=c.localResponseNormalization4D(i,t,n,r,o);return l([i,f]),f},{x4D:i},function(c,l){var f=l[0],d=l[1];return{x4D:function(){return N.runKernelFunc(function(h){return h.LRNGrad(c,f,d,t,n,r,o)},{})}}});return s?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),$g=O({norm_:function(e,t,n,r){t===void 0&&(t="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var o=function s(u,c,l){if(l===void 0&&(l=null),u.rank===0)return u.abs();if(u.rank!==1&&l===null)return s(u.reshape([-1]),c,l);if(u.rank===1||typeof l=="number"||Array.isArray(l)&&l.length===1){if(c===1)return u.abs().sum(l);if(c===1/0)return u.abs().max(l);if(c===-1/0)return u.abs().min(l);if(c==="euclidean"||c===2)return u.abs().pow(ue(2,"int32")).sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}if(Array.isArray(l)&&l.length===2){if(c===1)return u.abs().sum(l[0]).max(l[1]-1);if(c===1/0)return u.abs().sum(l[1]).max(l[0]);if(c===-1/0)return u.abs().sum(l[1]).min(l[0]);if(c==="fro"||c==="euclidean")return u.square().sum(l).sqrt();throw new Error("Error in norm: invalid ord value: "+c)}throw new Error("Error in norm: invalid axis: "+l)}(e=F(e,"x","norm"),t,n),a=o.shape;if(r){var i=Mt(n,e.shape);a=En(o.shape,i)}return o.reshape(a)}}),mS=O({basicLSTMCell_:function(e,t,n,r,o,a){var i=F(e,"forgetBias","basicLSTMCell"),s=F(t,"lstmKernel","basicLSTMCell"),u=F(n,"lstmBias","basicLSTMCell"),c=F(r,"data","basicLSTMCell"),l=F(o,"c","basicLSTMCell"),f=F(a,"h","basicLSTMCell"),d=c.concat(f,1).matMul(s).add(u),h=d.shape[0],p=d.shape[1]/4,m=[h,p],g=d.slice([0,0],m),v=d.slice([0,p],m),x=d.slice([0,2*p],m),y=d.slice([0,3*p],m),b=g.sigmoid().mulStrict(v.tanh()).addStrict(l.mulStrict(i.add(x).sigmoid())),w=b.tanh().mulStrict(y.sigmoid());return[b,w]}}),gS=O({multiRNNCell_:function(e,t,n,r){for(var o=F(t,"data","multiRNNCell"),a=Ou(n,"c","multiRNNCell"),i=Ou(r,"h","multiRNNCell"),s=o,u=[],c=0;c<e.length;c++){var l=e[c](s,a[c],i[c]);u.push(l[0]),u.push(l[1]),s=l[1]}var f=[],d=[];for(c=0;c<u.length;c+=2)f.push(u[c]),d.push(u[c+1]);return[f,d]}}),xS=O({movingAverage_:function(e,t,n,r,o){o===void 0&&(o=!0);var a=F(e,"v","movingAverage"),i=F(t,"x","movingAverage"),s=F(n,"decay","movingAverage");PE(a,i),I(Bt(a.shape,i.shape),function(){return"Shape mismatch in v and x"});var u=ue(1),c=u.sub(s),l=i.sub(a).mul(c);if(o){I(r!=null,function(){return"When using zeroDebias: true, step is required."});var f=F(r,"step","movingAverage");l=l.div(u.sub(Hu(s,f)))}return a.add(l)}}),yS=O({stridedSlice_:function(e,t,n,r,o,a,i,s,u){if(o===void 0&&(o=0),a===void 0&&(a=0),i===void 0&&(i=0),s===void 0&&(s=0),u===void 0&&(u=0),r==null&&(r=new Array(t.length)),i!==0)throw new Error("ellipsis mask is not yet supported");var c=F(e,"x","stridedSlice"),l=sv(s),f=c.shape.slice();l.forEach(function(g){t[g]=0,n[g]=1,f.splice(g,0,1)}),c=c.reshape(f);for(var d=0;d<c.rank;d++)t[d]=W_(o,t,r,c.shape,d),n[d]=z_(a,n,r,c.shape,d),r[d]=r[d]||1;var h=sv(u);h.forEach(function(g){n[g]=t[g]+1,r[g]=1});var p=Fd(t,n,r),m=p.filter(function(g,v){return h.indexOf(v)===-1});return r.every(function(g){return g===1})?Ir(c,t,p).reshape(m):N.runKernelFunc(function(g){return g.stridedSlice(c,t,n,r)},{$x:c}).reshape(m)}}),bS=O({topk_:function(e,t,n){t===void 0&&(t=1),n===void 0&&(n=!0);var r=F(e,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var o=r.shape[r.shape.length-1];if(t>o)throw new Error("'k' passed to topk() must be <= the last dimension ("+o+") but got "+t);var a=N.runKernelFunc(function(i){return i.topk(r,t,n)},{$x:r});return{values:a[0],indices:a[1]}}}),wS=O({scatterND_:function(e,t,n){var r=F(e,"indices","scatterND","int32"),o=F(t,"updates","scatterND");return M_(o,r,n),N.runKernelFunc(function(a){return a.scatterND(r,o,n)},{indices:r,updates:o},null,"ScatterNd",{shape:n})}}),Ld=O({fft_:function(e){I(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return N.runKernelFunc(function(o){return o.fft(r)},{input:e}).reshape(e.shape)}}),Vu=O({ifft_:function(e){I(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return N.runKernelFunc(function(o){return o.ifft(r)},{input:e}).reshape(e.shape)}}),Wd=O({rfft_:function(e,t){I(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var n,r=e.shape[e.shape.length-1],o=e.size/r;if(t!=null&&t<r){var a=e.shape.map(function(v){return 0}),i=e.shape.map(function(v){return v});i[e.shape.length-1]=t,n=e.slice(a,i),r=t}else if(t!=null&&t>r){var s=e.shape.map(function(v){return v});s[e.shape.length-1]=t-r,n=e.concat(tt(s),e.shape.length-1),r=t}else n=e;var u=n.zerosLike(),c=Ht(n,u).as2D(o,r),l=Ld(c),f=Math.floor(r/2)+1,d=Hn(l),h=_r(l),p=d.split([f,r-f],d.shape.length-1),m=h.split([f,r-f],h.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=f,Ht(p[0],m[0]).reshape(g)}}),Ug=O({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),o=Vu(r);return Hn(o)}var a=[n,2*(t-1)],i=Hn(e).as2D(n,t),s=_r(e).as2D(n,t),u=i.slice([0,1],[n,t-2]).reverse(1),c=s.slice([0,1],[n,t-2]).reverse(1).mul(ue(-1)),l=i.concat(u,1),f=s.concat(c,1);return r=Ht(l,f).as2D(a[0],a[1]),o=Vu(r),Hn(o)}}),CS=Object.freeze({fft:Ld,ifft:Vu,rfft:Wd,irfft:Ug}),ES=O({sparseToDense_:function(e,t,n,r){r===void 0&&(r=0);var o=F(e,"sparseIndices","sparseToDense","int32"),a=F(t,"sparseValues","sparseToDense"),i=F(r,"defaultValue","sparseToDense",a.dtype);return function(s,u,c,l){if(s.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+s.dtype+".");if(s.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+s.shape+".");var f=s.rank>0?s.shape[0]:1,d=s.rank>1?s.shape[1]:1;if(c.length!==d)throw new Error("outputShape has incorrect number of elements:, "+c.length+", should be: "+d+".");var h=u.size;if(u.rank!==0&&(u.rank!==1||h!==f))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+f+"]");if(u.dtype!==l.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(o,a,n,i),N.runKernelFunc(function(s){return s.sparseToDense(o,a,n,i)},{$sparseIndices:o,$sparseValues:a,$defaultValue:i})}}),_S=O({gatherND_:function(e,t){var n=F(t,"indices","gatherND","int32"),r=F(e,"x","gatherND");return N.runKernelFunc(function(o){return o.gatherND(r,n)},{x:r,indices:n},null,"GatherNd")}}),SS=O({diag_:function(e){var t=F(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return N.runKernelFunc(function(r){return r.diag(t)},{$x:t}).reshape(n)}}),kS=O({dropout_:function(e,t,n,r){var o=F(e,"x","dropout");if(I(o.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+o.dtype+" tensor instead."}),I(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof Je?o.clone():o;var a=function(u,c){if(c==null)return u.shape.slice();if(Bt(u.shape,c))return c;if(u.shape.length===c.length){for(var l=[],f=0;f<u.shape.length;f++)c[f]==null&&u.shape[f]!=null?l.push(u.shape[f]):l.push(c[f]);return l}return c}(o,n),i=1-t,s=ig(a,0,1,"float32",r).add(i).floor().div(i);return o.mul(s)}});function AS(e,t,n){for(var r=1-e%2,o=new Float32Array(e),a=0;a<e;++a){var i=2*Math.PI*a/(e+r-1);o[a]=t-n*Math.cos(i)}return kt(o,"float32")}var zd=O({hannWindow_:function(e){return AS(e,.5,.5)}}),Hg=O({hammingWindow_:function(e){return AS(e,.54,.46)}}),$d=O({frame_:function(e,t,n,r,o){r===void 0&&(r=!1),o===void 0&&(o=0);for(var a=0,i=[];a+t<=e.size;)i.push(Ir(e,a,t)),a+=n;if(r)for(;a<e.size;){var s=a+t-e.size,u=Tt([Ir(e,a,t-s),Dr([s],o)]);i.push(u),a+=n}return i.length===0?xo([],[0,t]):Tt(i).as2D(i.length,t)}}),Vg=O({stft_:function(e,t,n,r,o){var a;o===void 0&&(o=zd),r==null&&(a=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(a)/Math.log(2)))));for(var i=$d(e,t,n),s=nn(i,o(t)),u=[],c=0;c<i.shape[0];c++)u.push(Wd(s.slice([c,0],[1,t]),r));return Tt(u)}}),DS=Object.freeze({hannWindow:zd,hammingWindow:Hg,frame:$d,stft:Vg}),tn,RS=function(e,t,n){return n===void 0&&(n=1),ve(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f,d,h,p,m,g;return me(this,function(v){switch(v.label){case 0:return r=F(e,"predictions","inTopK"),o=F(t,"targets","inTopK"),I(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),I(r.rank-1===o.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+o.rank}),ze(r.shape.slice(0,r.shape.length-1),o.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),a=r.shape[r.shape.length-1],I(n>0&&n<=a,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+a+"), but got "+n}),[4,r.data()];case 1:return i=v.sent(),[4,o.data()];case 2:for(s=v.sent(),u=[i.length/a,a],l=u[1],f=Ji("bool",c=u[0]),d=0;d<c;d++){for(h=d*l,p=i.subarray(h,h+l),m=[],g=0;g<p.length;g++)m.push({value:p[g],index:g});for(m.sort(function(x,y){return y.value-x.value}),f[d]=0,g=0;g<n;g++)if(m[g].index===s[d]){f[d]=1;break}}return e!==r&&r.dispose(),t!==o&&o.dispose(),[2,Gt(f,o.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(tn||(tn={}));var c5=O({absoluteDifference_:function(e,t,n,r){r===void 0&&(r=tn.SUM_BY_NONZERO_WEIGHTS);var o=F(e,"labels","absoluteDifference"),a=F(t,"predictions","absoluteDifference"),i=null;n!=null&&(i=F(n,"weights","absoluteDifference")),ze(o.shape,a.shape,"Error in absoluteDifference: ");var s=o.sub(a).abs();return Io(s,i,r)}}),Io=O({computeWeightedLoss_:function(e,t,n){n===void 0&&(n=tn.SUM_BY_NONZERO_WEIGHTS);var r=F(e,"losses","computeWeightedLoss"),o=null;t!=null&&(o=F(t,"weights","computeWeightedLoss"));var a=o==null?r:r.mul(o);if(n===tn.NONE)return a;if(n===tn.SUM)return a.sum();if(n===tn.MEAN){if(o==null)return a.mean();var i=r.size/o.size,s=a.sum().div(o.sum());return i>1?s.div(ue(i)):s}if(n===tn.SUM_BY_NONZERO_WEIGHTS){if(o==null)return a.sum().div(ue(r.size));var u=o.mul(Za(r.shape)).notEqual(ue(0)).sum().toFloat();return a.sum().div(u)}throw Error("Unknown reduction: "+n)}}),l5=O({cosineDistance_:function(e,t,n,r,o){o===void 0&&(o=tn.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"labels","cosineDistance"),i=F(t,"predictions","cosineDistance"),s=null;r!=null&&(s=F(r,"weights","cosineDistance")),ze(a.shape,i.shape,"Error in cosineDistance: ");var u=ue(1).sub(a.mul(i).sum(n,!0));return Io(u,s,o)}}),f5=O({hingeLoss_:function(e,t,n,r){r===void 0&&(r=tn.SUM_BY_NONZERO_WEIGHTS);var o=F(e,"labels","hingeLoss"),a=F(t,"predictions","hingeLoss"),i=null;n!=null&&(i=F(n,"weights","hingeLoss")),ze(o.shape,a.shape,"Error in hingeLoss: ");var s=ue(1);o=ue(2).mul(o).sub(s);var u=s.sub(o.mul(a)).relu();return Io(u,i,r)}}),d5=O({huberLoss_:function(e,t,n,r,o){r===void 0&&(r=1),o===void 0&&(o=tn.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"labels","huberLoss"),i=F(t,"predictions","huberLoss"),s=null;n!=null&&(s=F(n,"weights","huberLoss")),ze(a.shape,i.shape,"Error in huberLoss: ");var u=ue(r),c=i.sub(a).abs(),l=Ig(c,u),f=c.sub(l),d=ue(.5).mul(l.square()).add(u.mul(f));return Io(d,s,o)}}),h5=O({logLoss_:function(e,t,n,r,o){r===void 0&&(r=1e-7),o===void 0&&(o=tn.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"labels","logLoss"),i=F(t,"predictions","logLoss"),s=null;n!=null&&(s=F(n,"weights","logLoss")),ze(a.shape,i.shape,"Error in logLoss: ");var u=ue(1),c=ue(r),l=a.mul(i.add(c).log()).neg().sub(u.sub(a).mul(u.sub(i).add(c).log()));return Io(l,s,o)}}),p5=O({meanSquaredError_:function(e,t,n,r){r===void 0&&(r=tn.SUM_BY_NONZERO_WEIGHTS);var o=F(e,"labels","meanSquaredError"),a=F(t,"predictions","meanSquaredError"),i=null;n!=null&&(i=F(n,"weights","meanSquaredError")),ze(o.shape,a.shape,"Error in meanSquaredError: ");var s=o.squaredDifference(a);return Io(s,i,r)}}),v5=O({sigmoidCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=tn.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"multiClassLabels","sigmoidCrossEntropy"),i=F(t,"logits","sigmoidCrossEntropy"),s=null;if(n!=null&&(s=F(n,"weights","sigmoidCrossEntropy")),ze(a.shape,i.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=ue(r),c=ue(1),l=ue(.5);a=a.mul(c.sub(u)).add(l.mul(u))}var f=function(d,h){var p=F(d,"labels","sigmoidCrossEntropyWithLogits"),m=F(h,"logits","sigmoidCrossEntropyWithLogits");ze(p.shape,m.shape,"Error in sigmoidCrossEntropyWithLogits: ");var g=m.relu(),v=m.mul(p),x=m.abs().neg().exp().log1p();return g.sub(v).add(x)}(a,i);return Io(f,s,o)}}),m5=O({softmaxCrossEntropy_:function(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=tn.SUM_BY_NONZERO_WEIGHTS);var a=F(e,"onehotLabels","softmaxCrossEntropy"),i=F(t,"logits","softmaxCrossEntropy"),s=null;if(n!=null&&(s=F(n,"weights","softmaxCrossEntropy")),ze(a.shape,i.shape,"Error in softmaxCrossEntropy: "),r>0){var u=ue(r),c=ue(1),l=ue(a.shape[1]);a=a.mul(c.sub(u)).add(u.div(l))}var f=function(d,h,p){if(p===void 0&&(p=-1),p===-1&&(p=h.rank-1),p!==h.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+h.rank+" and dim was "+p);return fc(function(m,g,v){var x=g.logSumExp([p],!0),y=g.toFloat().sub(x);return v([m,y]),{value:y.mul(m).neg().sum([p]),gradFunc:function(b,w){var C=w[0],E=w[1],S=En(b.shape,[p]);return[b.reshape(S).mul(C.toFloat().sub(E.exp())),b.reshape(S).mul(E.exp().sub(C.toFloat()))]}}})(d,h)}(a,i);return Io(f,s,o)}}),FS=Object.freeze({get Reduction(){return tn},absoluteDifference:c5,computeWeightedLoss:Io,cosineDistance:l5,hingeLoss:f5,huberLoss:d5,logLoss:h5,meanSquaredError:p5,sigmoidCrossEntropy:v5,softmaxCrossEntropy:m5});function Jy(e,t){return t===void 0&&(t=!1),N.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],o=ag(n),a=e.clone(),i=xo([[1]],[1,1]),s=i.clone(),u=n>=r?r:n,c=function(f){var d,h=a,p=s,m=o;d=N.tidy(function(){var g=a.slice([f,f],[n-f,1]),v=g.norm(),x=a.slice([f,f],[1,1]),y=xo([[-1]]).where(x.greater(0),xo([[1]])),b=x.sub(y.mul(v)),w=g.div(b);s=w.shape[0]===1?i.clone():i.concat(w.slice([1,0],[w.shape[0]-1,w.shape[1]]),0);var C=y.matMul(b).div(v).neg(),E=a.slice([f,0],[n-f,r]),S=C.mul(s);if(f===0)a=E.sub(S.matMul(s.transpose().matMul(E)));else{var k=E.sub(S.matMul(s.transpose().matMul(E)));a=a.slice([0,0],[f,r]).concat(k,0)}var _=o.slice([0,f],[n,o.shape[1]-f]);if(f===0)o=_.sub(_.matMul(s).matMul(S.transpose()));else{var A=_.sub(_.matMul(s).matMul(S.transpose()));o=o.slice([0,0],[n,f]).concat(A,1)}return[s,a,o]}),s=d[0],a=d[1],o=d[2],Cn([h,p,m])},l=0;l<u;++l)c(l);return!t&&n>r&&(o=o.slice([0,0],[n,r]),a=a.slice([0,0],[r,r])),[o,a]})}var g5=O({bandPart_:function(e,t,n){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(n%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+n+".");var r=F(e,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var o=r.shape,a=r.shape.slice(-2),i=a[0],s=a[1];if(!(t<=i))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+i+").");if(!(n<=s))throw new Error("bandPart(): numUpper ("+n+") must not be greater than the number of columns ("+s+").");t<0&&(t=i),n<0&&(n=s);var u=Mu(0,i,1,"int32").reshape([-1,1]),c=Mu(0,s,1,"int32"),l=Ot(u,c),f=pc(l.lessEqual(ue(+t,"int32")),l.greaterEqual(ue(-n,"int32"))),d=tt([i,s],r.dtype);return Nn(Pt(r.reshape([-1,i,s])).map(function(h){return fa(f,h,d)})).reshape(o)}}),x5=O({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,I(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=e[0].shape[0],r=function(u){I(e[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[u].shape[0]+" vs. "+n+")"})},o=1;o<e.length;++o)r(o)}else t=!0,e=Dd(e,e.shape[0],0).map(function(u){return ug(u,[0])});I(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var a=[],i=e,s=function(u){a.push(N.tidy(function(){var c=i[u];if(u>0)for(var l=0;l<u;++l){var f=Mg(a[l].mulStrict(c)).mul(a[l]);c=c.sub(f)}return c.div($g(c,"euclidean"))}))};for(o=0;o<e.length;++o)s(o);return t?Nn(a,0):a}}),y5=O({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return Jy(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce(function(i,s){return i*s}),r=Pt(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),o=[],a=[];return r.forEach(function(i){var s=Jy(i,t),u=s[0],c=s[1];o.push(u),a.push(c)}),[Nn(o,0).reshape(e.shape),Nn(a,0).reshape(e.shape)]}}),IS=Object.freeze({bandPart:g5,gramSchmidt:x5,qr:y5});function Ud(e,t,n,r,o,a){r==null&&(r=.5),o==null&&(o=Number.NEGATIVE_INFINITY),a==null&&(a=0);var i=e.shape[0];return n=Math.min(n,i),I(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),I(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),I(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),I(t.rank===1,function(){return"scores must be a 1D tensor"}),I(t.shape[0]===i,function(){return"scores has incompatible shape with boxes. Expected "+i+", but was "+t.shape[0]}),I(0<=a&&a<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+a+"'"}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:o,softNmsSigma:a}}var b5=O({resizeBilinear_:function(e,t,n){n===void 0&&(n=!1);var r=F(e,"images","resizeBilinear");I(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),I(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=N.runKernelFunc(function(c,l){return l([o]),c.resizeBilinear(o,i,s,n)},{x:o},function(c,l){return{x:function(){return N.runKernelFunc(function(f){return f.resizeBilinearBackprop(c,l[0],n)},{})}}},"ResizeBilinear",{alignCorners:n,newHeight:i,newWidth:s});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),w5=O({resizeNearestNeighbor_:function(e,t,n){n===void 0&&(n=!1);var r=F(e,"images","resizeNearestNeighbor");I(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),I(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),I(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var o=r,a=!1;r.rank===3&&(a=!0,o=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var i=t[0],s=t[1],u=N.runKernelFunc(function(c,l){return l([o]),c.resizeNearestNeighbor(o,i,s,n)},{batchImages:o},function(c,l){return{batchImages:function(){return N.runKernelFunc(function(f){return f.resizeNearestNeighborBackprop(c,l[0],n)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),C5=O({nonMaxSuppression_:function(e,t,n,r,o){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY);var a=F(e,"boxes","nonMaxSuppression"),i=F(t,"scores","nonMaxSuppression"),s=Ud(a,i,n,r,o);n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold;var u={maxOutputSize:n,iouThreshold:r,scoreThreshold:o};return N.runKernelFunc(function(c){return c.nonMaxSuppression(a,i,n,r,o)},{boxes:a,scores:i},null,"NonMaxSuppressionV3",u)}}),E5=function(e,t,n,r,o){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),ve(this,void 0,void 0,function(){var a,i,s,u,c,l,f;return me(this,function(d){switch(d.label){case 0:return a=F(e,"boxes","nonMaxSuppressionAsync"),i=F(t,"scores","nonMaxSuppressionAsync"),s=Ud(a,i,n,r,o),n=s.maxOutputSize,r=s.iouThreshold,o=s.scoreThreshold,[4,Promise.all([a.data(),i.data()])];case 1:return u=d.sent(),c=u[0],l=u[1],f=xg(c,l,n,r,o),a!==e&&a.dispose(),i!==t&&i.dispose(),[2,f]}})})},_5=O({nonMaxSuppressionWithScore_:function(e,t,n,r,o,a){r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0);var i=F(e,"boxes","nonMaxSuppression"),s=F(t,"scores","nonMaxSuppression"),u=Ud(i,s,n,r,o,a),c={maxOutputSize:n=u.maxOutputSize,iouThreshold:r=u.iouThreshold,scoreThreshold:o=u.scoreThreshold,softNmsSigma:a=u.softNmsSigma},l=N.runKernel("NonMaxSuppressionV5",{boxes:i,scores:s},c);return{selectedIndices:l[0],selectedScores:l[1]}}}),S5=function(e,t,n,r,o,a){return r===void 0&&(r=.5),o===void 0&&(o=Number.NEGATIVE_INFINITY),a===void 0&&(a=0),ve(this,void 0,void 0,function(){var i,s,u,c,l,f,d;return me(this,function(h){switch(h.label){case 0:return i=F(e,"boxes","nonMaxSuppressionAsync"),s=F(t,"scores","nonMaxSuppressionAsync"),u=Ud(i,s,n,r,o,a),n=u.maxOutputSize,r=u.iouThreshold,o=u.scoreThreshold,a=u.softNmsSigma,[4,Promise.all([i.data(),s.data()])];case 1:return c=h.sent(),l=c[0],f=c[1],d=yg(l,f,n,r,o,a),i!==e&&i.dispose(),s!==t&&s.dispose(),[2,d]}})})},k5=O({cropAndResize_:function(e,t,n,r,o,a){var i=F(e,"image","cropAndResize"),s=F(t,"boxes","cropAndResize","float32"),u=F(n,"boxInd","cropAndResize","int32");o=o||"bilinear",a=a||0;var c=s.shape[0];return I(i.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+i.rank+"."}),I(s.rank===2&&s.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+c+",4] but had shape "+s.shape+"."}),I(u.rank===1&&u.shape[0]===c,function(){return"Error in cropAndResize: boxInd must be have size ["+c+"] but had shape "+s.shape+"."}),I(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),I(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),I(o==="bilinear"||o==="nearest",function(){return"method must be bilinear or nearest, but was "+o}),N.runKernelFunc(function(l,f){return l.cropAndResize(i,s,u,r,o,a)},{images:i,boxes:s,boxInd:u},null,"CropAndResize",{method:o,extrapolationValue:a,cropSize:r})}}),Hd=Object.freeze({resizeBilinear:b5,resizeNearestNeighbor:w5,nonMaxSuppression:C5,nonMaxSuppressionAsync:E5,nonMaxSuppressionWithScore:_5,nonMaxSuppressionWithScoreAsync:S5,cropAndResize:k5}),jg=function(e,t){return!(e>0)||t==="linear"},Gg=function(e,t,n){if(n==null||n==="linear")return e;if(n==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+n+" has not been implemented yet.")},qg=function(e,t){var n=t,r=Nt(e.shape,t.shape);return r.length>0&&(n=n.sum(r)),n.reshape(e.shape)},Kg=function(e,t,n){if(t==="linear")return e;if(t==="relu")return lt(e);if(t==="elu")return Lg(e);if(t==="relu6")return zg(e);if(t==="prelu")return Wg(e,n);throw new Error("Unknown fused activation "+t+".")},A5=O({fusedMatMul_:function(e){var t,n=e.a,r=e.b,o=e.transposeA,a=o!==void 0&&o,i=e.transposeB,s=i!==void 0&&i,u=e.bias,c=e.activation,l=c===void 0?"linear":c,f=e.preluActivationWeights;if(jg(N.state.gradientDepth,l)===!1){var d=mc(n,r,a,s);return u!=null&&(d=Ie(d,u)),Kg(d,l,f)}var h=F(n,"a","fused matMul"),p=F(r,"b","fused matMul");t=ft(h,p),h=t[0],p=t[1];var m=a?h.shape[h.rank-2]:h.shape[h.rank-1],g=s?p.shape[p.rank-1]:p.shape[p.rank-2],v=a?h.shape[h.rank-1]:h.shape[h.rank-2],x=s?p.shape[p.rank-2]:p.shape[p.rank-1],y=h.shape.slice(0,-2),b=p.shape.slice(0,-2),w=ge(y),C=ge(b);I(h.rank>=2&&p.rank>=2&&h.rank===p.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."}),I(Bt(y,b),function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."}),I(m===g,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+g+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+a+" and transposeB="+s+" must match."});var E,S,k=h.shape.slice(0,-2).concat([v,x]),_=a?h.as3D(w,m,v):h.as3D(w,v,m),A=s?p.as3D(C,x,g):p.as3D(C,g,x);u!=null&&Pe(k,(E=ft(E=F(u,"bias","fused matMul"),h)[0]).shape),f!=null&&(S=F(f,"prelu weights","fused matMul"));var D={a:_,b:A};u!=null&&(D.bias=E),f!=null&&(D.preluActivationWeights=S);var T=[_,A];return N.runKernelFunc(function(W,$){var q=W.fusedBatchMatMul({a:_,b:A,transposeA:a,transposeB:s,bias:E,activation:l,preluActivationWeights:S});return $([_,A,q]),q},D,function(W,$){var q=$[0],X=$[1],P=$[2],V=Gg(W,P,l),G={};return u!=null&&(G={bias:function(){return qg(E,V)}}),Object.assign(a||s?!a&&s?{a:function(){return V.matMul(X,!1,!1)},b:function(){return V.matMul(q,!0,!1)}}:a&&!s?{a:function(){return X.matMul(V,!1,!0)},b:function(){return q.matMul(V,!1,!1)}}:{a:function(){return X.matMul(V,!0,!0)},b:function(){return V.matMul(q,!0,!0)}}:{a:function(){return V.matMul(X,!1,!0)},b:function(){return q.matMul(V,!0,!1)}},G)},"_FusedMatMul",{transposeA:a,transposeB:s,activation:l},T,[!0]).reshape(k)}}),D5=O({fusedConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=a===void 0?"NHWC":a,s=e.dilations,u=s===void 0?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=f===void 0?"linear":f,h=e.preluActivationWeights;if(d=d||"linear",jg(N.state.gradientDepth,d)===!1){var p=tr(t,n,r,o,i,u,c);return l!=null&&(p=Ie(p,l)),Kg(p,d,h)}var m=F(t,"x","conv2d"),g=F(n,"filter","conv2d"),v=m,x=!1;m.rank===3&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),I(v.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+v.rank+"."}),I(g.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+g.rank+"."}),c!=null&&I(bt(o),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+c+" but got pad "+o+"."}),I(v.shape[3]===g.shape[2],function(){return"Error in conv2d: depth of input ("+v.shape[3]+") must match input depth for filter "+g.shape[2]+"."}),I(_n(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),I(i==="NHWC",function(){return"Error in conv2d: got dataFormat of "+i+" but only NHWC is currently supported."});var y,b,w=xa(v.shape,g.shape,r,u,o,c);l!=null&&(y=ft(y=F(l,"bias","fused conv2d"),m)[0],Pe(w.outShape,y.shape)),h!=null&&(b=F(h,"prelu weights","fused conv2d"));var C={x:v,filter:g};l!=null&&(C.bias=y),h!=null&&(C.preluActivationWeights=b);var E=[g,v],S=N.runKernelFunc(function(k,_){var A=k.fusedConv2d({input:v,filter:g,convInfo:w,bias:y,activation:d,preluActivationWeights:b});return _([g,v,A]),A},C,function(k,_){var A=_,D=A[0],T=A[1],W=A[2],$=Gg(k,W,d);I(qa(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var q={};return l!=null&&(q={bias:function(){return qg(y,$)}}),Object.assign({x:function(){return L3(T.shape,$,D,r,o)},filter:function(){return Ng(T,$,D.shape,r,o)}},q)},"FusedConv2D",{convInfo:w,activation:d},E,[!0]);return x?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),R5=O({fusedDepthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,o=e.pad,a=e.dataFormat,i=a===void 0?"NHWC":a,s=e.dilations,u=s===void 0?[1,1]:s,c=e.dimRoundingMode,l=e.bias,f=e.activation,d=f===void 0?"linear":f,h=e.preluActivationWeights;if(jg(N.state.gradientDepth,d)===!1){var p=vc(t,n,r,o,i,u,c);return l!=null&&(p=Ie(p,l)),Kg(p,d,h)}var m=F(t,"x","depthwiseConv2d"),g=F(n,"filter","depthwiseConv2d"),v=m,x=!1;m.rank===3&&(x=!0,v=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),I(v.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+v.rank+"."}),I(g.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+g.rank+"."}),I(v.shape[3]===g.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+v.shape[3]+") must match the inChannels dimension in filter "+g.shape[2]+"."}),u==null&&(u=[1,1]),I(_n(r,u),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),c!=null&&I(bt(o),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+c+" but got pad "+o+"."});var y,b,w=xa(v.shape,g.shape,r,u,o,c,!0);l!=null&&(y=ft(y=F(l,"bias","fused conv2d"),m)[0],Pe(w.outShape,y.shape)),h!=null&&(b=F(h,"prelu weights","fused depthwiseConv2d"));var C={x:v,filter:g};l!=null&&(C.bias=y),h!=null&&(C.preluActivationWeights=b);var E=[g,v],S=N.runKernelFunc(function(k,_){var A=k.fusedDepthwiseConv2D({input:v,filter:g,convInfo:w,bias:y,activation:d,preluActivationWeights:b});return _([g,v,A]),A},C,function(k,_){I(qa(u),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+u+"'"});var A=_[0],D=_[1],T=_[2],W=Gg(k,T,d),$={};return l!=null&&($={bias:function(){return qg(y,W)}}),Object.assign({x:function(){return W3(D.shape,W,A,w)},filter:function(){return z3(D,W,A.shape,w)}},$)},"FusedDepthwiseConv2D",{convInfo:w,activation:d},E,[!0]);return x?S.as3D(S.shape[1],S.shape[2],S.shape[3]):S}}),BS=Object.freeze({matMul:A5,conv2d:D5,depthwiseConv2d:R5}),F5=Object.freeze({image:Hd,linalg:IS,losses:FS,spectral:CS,fused:BS,signal:DS,square:C4,squaredDifference:_g,conv1d:O3,conv2d:tr,conv3d:M3,depthwiseConv2d:vc,separableConv2d:Md,conv2dTranspose:$3,conv3dTranspose:U3,op:O,batchNormalization2d:t3,batchNormalization3d:n3,batchNormalization4d:r3,batchNormalization:o3,batchNorm:Ag,batchNorm2d:a3,batchNorm3d:i3,batchNorm4d:s3,booleanMaskAsync:T3,complex:Ht,real:Hn,imag:_r,concat:Tt,concat1d:p_,concat2d:v_,concat3d:m_,concat4d:g_,split:Dd,matMul:mc,dot:H3,outerProduct:V3,reverse:ms,reverse1d:j3,reverse2d:G3,reverse3d:q3,reverse4d:K3,maxPool:Wt,avgPool:gs,pool:Q3,maxPool3d:Z3,avgPool3d:J3,slice:Ir,slice1d:eS,slice2d:tS,slice3d:Og,slice4d:nS,abs:E4,acos:_4,acosh:S4,asin:k4,asinh:A4,atan:D4,atanh:R4,ceil:F4,clipByValue:Td,cos:I4,cosh:B4,erf:T4,exp:bf,expm1:P4,floor:N4,log:O4,log1p:M4,logSigmoid:L4,neg:Uu,reciprocal:W4,round:z4,rsqrt:Sg,sigmoid:kg,sign:$4,isNaN:U4,isInf:H4,isFinite:V4,sin:j4,sinh:G4,softplus:q4,sqrt:K4,step:X4,tan:Y4,tanh:Q4,all:oS,any:aS,argMax:iS,argMin:sS,logSumExp:uS,max:gc,mean:cS,min:lS,moments:fS,sum:Mg,prod:dS,equal:Bg,equalStrict:E3,greater:_3,greaterEqual:Tg,greaterEqualStrict:S3,greaterStrict:k3,less:A3,lessEqual:D3,lessEqualStrict:R3,lessStrict:F3,notEqual:I3,notEqualStrict:B3,add:Ie,addN:l3,addStrict:f3,atan2:d3,div:sr,divNoNan:h3,divStrict:p3,floorDiv:Fg,maximum:Nd,maximumStrict:v3,minimum:Ig,minimumStrict:m3,mod:g3,modStrict:x3,mul:nn,mulStrict:y3,pow:Hu,powStrict:b3,squaredDifferenceStrict:w3,sub:Ot,subStrict:C3,elu:Lg,leakyRelu:hS,prelu:Wg,relu:lt,relu6:zg,selu:pS,logicalAnd:pc,logicalNot:u3,logicalOr:Dg,logicalXor:c3,where:fa,whereAsync:Rg,buffer:Se,print:x_,batchToSpaceND:og,broadcastTo:y_,cast:b_,clone:w_,cumsum:C_,depthToSpace:E_,expandDims:$n,eye:ag,multinomial:__,oneHot:pf,pad:ga,pad1d:S_,pad2d:k_,pad3d:A_,pad4d:D_,rand:R_,randomNormal:F_,randomGamma:I_,randomUniform:ig,reshape:cr,spaceToBatchND:sg,squeeze:ug,stack:Nn,tile:Wa,truncatedNormal:B_,unstack:Pt,setdiff1dAsync:T_,fill:Dr,linspace:h_,ones:Za,range:Mu,scalar:ue,tensor:Gt,tensor1d:kt,tensor2d:xo,tensor3d:Ad,tensor4d:bn,tensor5d:l_,tensor6d:f_,variable:d_,zeros:tt,onesLike:ng,zerosLike:Le,transpose:ko,softmax:ro,logSoftmax:U_,localResponseNormalization:vS,norm:$g,gather:Od,unsortedSegmentSum:Pg,basicLSTMCell:mS,multiRNNCell:gS,movingAverage:xS,stridedSlice:yS,topk:bS,scatterND:wS,fft:Ld,ifft:Vu,rfft:Wd,irfft:Ug,sparseToDense:ES,gatherND:_S,diag:SS,dropout:kS,hannWindow:zd,hammingWindow:Hg,frame:$d,stft:Vg,inTopKAsync:RS});function ne(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(n){n!=null&&I(n.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function Jh(e,t,n,r){if(n==="linear")return e.linear(t);if(n==="relu")return e.relu(t);if(n==="elu")return e.elu(t);if(n==="relu6")return e.relu6(t);if(n==="prelu")return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var I5=function(e){function t(){var n=e.call(this)||this;return n.blockSize=48,n.firstUse=!0,n.data=new hg(n,N),n}return Br(t,e),t.prototype.write=function(n,r,o){this.firstUse&&(this.firstUse=!1,ee().get("IS_NODE")&&hf(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var a={};return this.data.set(a,{values:n,dtype:o}),a},t.prototype.move=function(n,r,o,a){this.data.set(n,{values:r,dtype:a})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(n){return ve(this,void 0,void 0,function(){return me(this,function(r){return[2,this.readSync(n)]})})},t.prototype.readSync=function(n){var r=this.data.get(n),o=r.dtype,a=r.complexTensors;return o==="complex64"?cv(this.readSync(a.real.dataId),this.readSync(a.imag.dataId)):this.data.get(n).values},t.prototype.bufferSync=function(n){var r=this.readSync(n.dataId),o=r;if(n.dtype==="string")try{o=r.map(function(a){return Bu(a)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Se(n.shape,n.dtype,o)},t.prototype.makeOutput=function(n,r,o){var a=this.write(n,r,o);return N.makeTensorFromDataId(a,r,o,this)},t.prototype.disposeData=function(n){if(this.data.has(n)){var r=this.data.get(n).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(n)}},t.prototype.time=function(n){return ve(this,void 0,void 0,function(){var r;return me(this,function(o){return r=Er(),n(),[2,{kernelMs:Er()-r}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(n,r){var o=this.makeOutput(null,n.shape,"complex64");return this.data.get(o.dataId).complexTensors={real:N.keep(n.clone()),imag:N.keep(r.clone())},o},t.prototype.real=function(n){return this.data.get(n.dataId).complexTensors.real.clone()},t.prototype.imag=function(n){return this.data.get(n.dataId).complexTensors.imag.clone()},t.prototype.slice=function(n,r,o){if(ne(n,"slice"),fg(n.shape,r,o)){var a=dg(r,n.strides),i=ge(o);return Gt(this.readSync(n.dataId).subarray(a,a+i),o,n.dtype)}for(var s=Se(o,n.dtype),u=this.bufferSync(n),c=0;c<s.size;++c){var l=s.indexToLoc(c).map(function(f,d){return f+r[d]});s.values[c]=u.get.apply(u,l)}return s.toTensor()},t.prototype.stridedSlice=function(n,r,o,a){ne(n,"stridedSlice");var i=Fd(r,o,a);if(i.some(function(h){return h===0}))return Gt([],i);for(var s=Se(i,n.dtype),u=this.bufferSync(n),c=0;c<s.size;c++){for(var l=s.indexToLoc(c),f=new Array(l.length),d=0;d<f.length;d++)f[d]=l[d]*a[d]+r[d];s.set.apply(s,[u.get.apply(u,f)].concat(l))}return s.toTensor()},t.prototype.diag=function(n){for(var r=this.readSync(n.dataId),o=Se([n.size,n.size],n.dtype),a=o.values,i=0;i<r.length;i++)a[i*n.size+i]=r[i];return o.toTensor()},t.prototype.unstack=function(n,r){for(var o=n.shape[r],a=new Array(n.rank-1),i=0,s=0;s<n.rank;s++)s!==r&&(a[i++]=n.shape[s]);var u=new Array(n.rank).fill(0),c=n.shape.slice();c[r]=1;var l=new Array(o);for(s=0;s<l.length;s++)u[r]=s,l[s]=this.slice(n,u,c).reshape(a);return l},t.prototype.reverse=function(n,r){ne(n,"reverse");for(var o=Se(n.shape,n.dtype),a=this.bufferSync(n),i=function(u){var c=o.indexToLoc(u),l=c.slice();r.forEach(function(f){return l[f]=n.shape[f]-1-l[f]}),o.set.apply(o,[a.get.apply(a,l)].concat(c))},s=0;s<o.size;s++)i(s);return o.toTensor()},t.prototype.concat=function(n,r){var o=this;if(n[0].dtype==="complex64"){var a=n.map(function(h){return Hn(h)}),i=n.map(function(h){return _r(h)});return Ht(this.concat(a,r),this.concat(i,r))}var s=n.map(function(h){var p=ge(h.shape.slice(r));return h.as2D(-1,p)}),u=Ga(s.map(function(h){return h.shape}),1),c=Se(u,n[0].dtype).values;if(s[0].shape[0]===1){var l=0;s.forEach(function(h){c.set(o.readSync(h.dataId),l),l+=h.size})}else{var f=0;s.forEach(function(h){for(var p=o.readSync(h.dataId),m=0,g=0;g<h.shape[0];++g)for(var v=g*u[1]+f,x=0;x<h.shape[1];++x)c[v+x]=p[m++];f+=h.shape[1]})}var d=Ga(n.map(function(h){return h.shape}),r);return Gt(c,d,n[0].dtype)},t.prototype.neg=function(n){return ne(n,"neg"),this.multiply(ue(-1),n)},t.prototype.add=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,a,i,s){return{real:o+i,imag:a+s}}):this.broadcastedBinaryOp(n,r,jt(n.dtype,r.dtype),function(o,a){return o+a})},t.prototype.addN=function(n){var r=this;ne(n,"addN");for(var o=n.map(function(l){return r.readSync(l.dataId)}),a=Se(n[0].shape,n[0].dtype),i=a.values,s=0;s<n.length;s++)for(var u=o[s],c=0;c<i.length;c++)i[c]+=u[c];return a.toTensor()},t.prototype.softmax=function(n,r){var o=Mt([r],n.shape),a=this.max(n,o),i=En(a.shape,o),s=this.subtract(n,a.reshape(i)),u=this.exp(s),c=this.sum(u,o).reshape(i);return this.realDivide(u,c)},t.prototype.subtract=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,a,i,s){return{real:o-i,imag:a-s}}):this.broadcastedBinaryOp(n,r,jt(n.dtype,r.dtype),function(o,a){return o-a})},t.prototype.pow=function(n,r){return ne([n,r],"pow"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,a){return Math.pow(o,a)})},t.prototype.batchMatMul=function(n,r,o,a){ne([n,r],"matMul");for(var i=o?n.shape[1]:n.shape[2],s=o?n.shape[2]:n.shape[1],u=a?r.shape[1]:r.shape[2],c=n.shape[0],l=this.readSync(n.dataId),f=this.readSync(r.dataId),d=o?[n.strides[0],1,n.strides[1]]:[n.strides[0],n.strides[1],1],h=d[0],p=d[1],m=d[2],g=a?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],v=g[0],x=g[1],y=g[2],b=s*u,w=Se([c,s,u],n.dtype),C=w.values,E=this.blockSize,S=0;S<c;S++)for(var k=0;k<s;k+=E)for(var _=0;_<u;_+=E)for(var A=0;A<i;A+=E)for(var D=Math.min(k+E,s),T=Math.min(_+E,u),W=Math.min(A+E,i),$=k;$<D;$++)for(var q=_;q<T;q++){for(var X=0,P=A;P<W;P++)X+=l[S*h+$*p+P*m]*f[P*v+q*x+S*y];C[S*b+($*u+q)]+=X}return w.toTensor()},t.prototype.fusedBatchMatMul=function(n){var r=n.a,o=n.b,a=n.transposeA,i=n.transposeB,s=n.bias,u=n.activation,c=n.preluActivationWeights,l=this.batchMatMul(r,o,a,i);return s&&(l=this.add(l,s)),u&&(l=Jh(this,l,u,c)),l},t.prototype.multiply=function(n,r){return n.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(n.cast("complex64"),r.cast("complex64"),function(o,a,i,s){return{real:o*i-a*s,imag:o*s+a*i}}):this.broadcastedBinaryOp(n,r,jt(n.dtype,r.dtype),function(o,a){return o*a})},t.prototype.realDivide=function(n,r){return ne([n,r],"realDivide"),this.broadcastedBinaryOp(n,r,"float32",function(o,a){return o/a})},t.prototype.floorDiv=function(n,r){return ne([n,r],"floorDiv"),this.broadcastedBinaryOp(n,r,"int32",function(o,a){return Math.floor(o/a)})},t.prototype.sum=function(n,r){ne(n,"sum"),Dn("sum",r,n.rank);for(var o=Zt(n.shape,r),a=o[0],i=o[1],s=tt(a,jt(n.dtype,"int32")),u=ge(i),c=this.readSync(s.dataId),l=this.readSync(n.dataId),f=0;f<c.length;++f){for(var d=f*u,h=0,p=0;p<u;++p)h+=l[d+p];c[f]=h}return s},t.prototype.prod=function(n,r){ne(n,"sum");for(var o=Zt(n.shape,r),a=o[0],i=o[1],s=tt(a,jt(n.dtype,"int32")),u=ge(i),c=this.readSync(s.dataId),l=this.readSync(n.dataId),f=0;f<c.length;++f){for(var d=f*u,h=1,p=0;p<u;++p)h*=l[d+p];c[f]=h}return s},t.prototype.unsortedSegmentSum=function(n,r,o){ne(n,"unsortedSegmentSum");for(var a=[],i=n.rank-r.rank,s=0;s<i;++s)r=r.expandDims(s+1);for(s=0;s<o;++s){var u=ue(s,"int32"),c=Bg(u,r).asType("float32").mul(n).sum(0);a.push(c)}return Nn(a)},t.prototype.argMin=function(n,r){ne(n,"argMin");var o=[r];Dn("argMin",o,n.rank);for(var a=Zt(n.shape,o),i=a[0],s=a[1],u=tt(i,"int32"),c=ge(s),l=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*c,p=f[h],m=0,g=0;g<c;++g){var v=f[h+g];v<p&&(p=v,m=g)}l[d]=m}return u},t.prototype.argMax=function(n,r){ne(n,"argMax");var o=[r];Dn("argMax",o,n.rank);for(var a=Zt(n.shape,o),i=a[0],s=a[1],u=tt(i,"int32"),c=ge(s),l=this.readSync(u.dataId),f=this.readSync(n.dataId),d=0;d<l.length;++d){for(var h=d*c,p=f[h],m=0,g=0;g<c;++g){var v=f[h+g];v>p&&(p=v,m=g)}l[d]=m}return u},t.prototype.cumsum=function(n,r,o,a){if(ne(n,"cumsum"),r!==n.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(n.rank-1)+" but got axis="+r);for(var i=jt(n.dtype,"int32"),s=tt(n.shape,i),u=this.readSync(s.dataId),c=this.readSync(n.dataId),l=n.shape[n.rank-1],f=a?function(g,v){return g+l-v-1}:function(g,v){return g+v},d=0;d<c.length;d+=l)for(var h=0;h<l;h++){var p=f(d,h);if(h===0)u[p]=o?0:c[p];else{var m=f(d,h-1);u[p]=o?c[m]+u[m]:c[p]+u[m]}}return s},t.prototype.equal=function(n,r){return ne([n,r],"equal"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o===a?1:0})},t.prototype.notEqual=function(n,r){return ne([n,r],"notEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o!==a?1:0})},t.prototype.less=function(n,r){return ne([n,r],"less"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o<a?1:0})},t.prototype.lessEqual=function(n,r){return ne([n,r],"lessEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o<=a?1:0})},t.prototype.greater=function(n,r){return ne([n,r],"greater"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o>a?1:0})},t.prototype.greaterEqual=function(n,r){return ne([n,r],"greaterEqual"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o>=a?1:0})},t.prototype.logicalNot=function(n){ne(n,"logicalNot");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)o[a]=r[a]?0:1;return this.makeOutput(o,n.shape,"bool")},t.prototype.logicalAnd=function(n,r){return ne([n,r],"logicalAnd"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o&&a})},t.prototype.logicalOr=function(n,r){return ne([n,r],"logicalOr"),this.broadcastedBinaryOp(n,r,"bool",function(o,a){return o||a})},t.prototype.select=function(n,r,o){ne([n,r,o],"select");for(var a=this.readSync(n.dataId),i=this.readSync(r.dataId),s=this.readSync(o.dataId),u=tt(r.shape,jt(r.dtype,o.dtype)),c=this.readSync(u.dataId),l=0,f=n.rank===0||n.rank>1||r.rank===1?1:ge(r.shape.slice(1)),d=0;d<a.length;d++)for(var h=0;h<f;h++)a[d]===1?c[l++]=i[d]:c[l++]=s[d];return u},t.prototype.where=function(n){ne([n],"where");var r=this.readSync(n.dataId);return bg(n.shape,r)},t.prototype.topk=function(n,r,o){return ne(n,"topk"),G_(this.readSync(n.dataId),n.shape,n.dtype,r)},t.prototype.min=function(n,r){ne(n,"min"),Dn("min",r,n.rank);for(var o=Zt(n.shape,r),a=o[0],i=o[1],s=tt(a,n.dtype),u=ge(i),c=this.readSync(s.dataId),l=this.readSync(n.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var m=l[d+p];m<h&&(h=m)}c[f]=h}return s},t.prototype.minimum=function(n,r){return ne([n,r],"minimum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,a){return Math.min(o,a)})},t.prototype.mod=function(n,r){return ne([n,r],"mod"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,a){var i=o%a;return o<0&&a<0||o>=0&&a>=0?i:(i+a)%a})},t.prototype.max=function(n,r){ne(n,"max"),Dn("max",r,n.rank);for(var o=Zt(n.shape,r),a=o[0],i=o[1],s=tt(a,n.dtype),u=ge(i),c=this.readSync(s.dataId),l=this.readSync(n.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var m=l[d+p];m>h&&(h=m)}c[f]=h}return s},t.prototype.maximum=function(n,r){return ne([n,r],"maximum"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,a){return Math.max(o,a)})},t.prototype.all=function(n,r){ne(n,"all"),Dn("all",r,n.rank);for(var o=Zt(n.shape,r),a=o[0],i=o[1],s=tt(a,n.dtype),u=ge(i),c=this.readSync(s.dataId),l=this.readSync(n.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var m=l[d+p];h=h&&m}c[f]=h}return s},t.prototype.any=function(n,r){ne(n,"any"),Dn("any",r,n.rank);for(var o=Zt(n.shape,r),a=o[0],i=o[1],s=tt(a,n.dtype),u=ge(i),c=this.readSync(s.dataId),l=this.readSync(n.dataId),f=0;f<c.length;++f){for(var d=f*u,h=l[d],p=0;p<u;++p){var m=l[d+p];h=h||m}c[f]=h}return s},t.prototype.squaredDifference=function(n,r){return ne([n,r],"squaredDifference"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,a){var i=o-a;return i*i})},t.prototype.ceil=function(n){ne(n,"ceil");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.ceil(r[a]);return this.makeOutput(o,n.shape,"float32")},t.prototype.floor=function(n){ne(n,"floor");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.floor(r[a]);return this.makeOutput(o,n.shape,"float32")},t.prototype.sign=function(n){ne(n,"x");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)r[a]<0?o[a]=-1:r[a]>0?o[a]=1:o[a]=0;return this.makeOutput(o,n.shape,"float32")},t.prototype.isNaN=function(n){ne(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isNaN(r[a])&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isInf=function(n){ne(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Math.abs(r[a])===1/0&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.isFinite=function(n){ne(n,"x");for(var r=this.readSync(n.dataId),o=new Uint8Array(r.length),a=0;a<r.length;++a)Number.isFinite(r[a])&&(o[a]=1);return this.makeOutput(o,n.shape,"bool")},t.prototype.round=function(n){ne(n,"round");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=Math.floor(r[a]);r[a]-i<.5?o[a]=Math.floor(r[a]):r[a]-i>.5?o[a]=Math.ceil(r[a]):o[a]=i%2==0?i:i+1}return this.makeOutput(o,n.shape,"float32")},t.prototype.exp=function(n){ne(n,"exp");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.exp(r[a]);return this.makeOutput(o,n.shape,"float32")},t.prototype.expm1=function(n){ne(n,"expm1");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=Math.expm1(r[a]);return this.makeOutput(o,n.shape,"float32")},t.prototype.log=function(n){ne(n,"log");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log(i)}return this.makeOutput(o,n.shape,"float32")},t.prototype.log1p=function(n){ne(n,"log1p");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.log1p(i)}return this.makeOutput(o,n.shape,"float32")},t.prototype.sqrt=function(n){ne(n,"sqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},t.prototype.rsqrt=function(n){ne(n,"rsqrt");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a){var i=r[a];o[a]=1/Math.sqrt(i)}return this.makeOutput(o,n.shape,"float32")},t.prototype.reciprocal=function(n){ne(n,"reciprocal");for(var r=this.readSync(n.dataId),o=new Float32Array(r.length),a=0;a<r.length;++a)o[a]=1/r[a];return this.makeOutput(o,n.shape,"float32")},t.prototype.linear=function(n){return n},t.prototype.relu=function(n){ne(n,"relu");for(var r=tt(n.shape,n.dtype),o=this.readSync(r.dataId),a=this.readSync(n.dataId),i=0;i<a.length;++i)o[i]=Math.max(0,a[i]);return r},t.prototype.relu6=function(n){ne(n,"relu");for(var r=tt(n.shape,n.dtype),o=this.readSync(r.dataId),a=this.readSync(n.dataId),i=0;i<a.length;++i)o[i]=Math.min(Math.max(0,a[i]),6);return r},t.prototype.prelu=function(n,r){return ne([n,r],"prelu"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,a){return o<0?a*o:o})},t.prototype.elu=function(n){ne(n,"elu");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var i=o[a];r[a]=i>=0?i:Math.exp(i)-1}return this.makeOutput(r,n.shape,"float32")},t.prototype.eluDer=function(n,r){ne([n,r],"eluDer");for(var o=new Float32Array(r.size),a=this.readSync(r.dataId),i=this.readSync(n.dataId),s=0;s<a.length;++s){var u=a[s];o[s]=u>=1?i[s]:i[s]*(u+1)}return this.makeOutput(o,r.shape,"float32")},t.prototype.selu=function(n){ne(n,"selu");for(var r=Cg,o=Eg,a=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>=0?o*u:r*(Math.exp(u)-1)}return this.makeOutput(a,n.shape,"float32")},t.prototype.clip=function(n,r,o){ne(n,"clip");for(var a=new Float32Array(n.size),i=this.readSync(n.dataId),s=0;s<i.length;++s){var u=i[s];a[s]=u>o?o:u<r?r:u}return this.makeOutput(a,n.shape,"float32")},t.prototype.abs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.abs(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.complexAbs=function(n){for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<n.size;++a){var i=o[2*a],s=o[2*a+1];r[a]=Math.hypot(i,s)}return this.makeOutput(r,n.shape,"float32")},t.prototype.int=function(n){ne(n,"int");for(var r=new Int32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=o[a];return this.makeOutput(r,n.shape,"int32")},t.prototype.sigmoid=function(n){ne(n,"sigmoid");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=1/(1+Math.exp(-o[a]));return this.makeOutput(r,n.shape,"float32")},t.prototype.softplus=function(n){ne(n,"softplus");for(var r=Math.log(11920928955078125e-23)+2,o=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var s=a[i]>-r,u=a[i]<r,c=Math.exp(a[i]),l=void 0;l=u?c:s?a[i]:Math.log(1+c),o[i]=l}return this.makeOutput(o,n.shape,"float32")},t.prototype.sin=function(n){ne(n,"sin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.sin(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cos=function(n){ne(n,"cos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.cos(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tan=function(n){ne(n,"tan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.tan(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asin=function(n){ne(n,"asin");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.asin(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acos=function(n){ne(n,"acos");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.acos(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan=function(n){ne(n,"atan");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.atan(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atan2=function(n,r){return ne([n,r],"atan2"),this.broadcastedBinaryOp(n,r,n.dtype,function(o,a){return Math.atan2(o,a)})},t.prototype.sinh=function(n){ne(n,"sinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.sinh(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.cosh=function(n){ne(n,"cosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.cosh(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.tanh=function(n){ne(n,"tanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=CE(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.asinh=function(n){ne(n,"asinh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.asinh(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.acosh=function(n){ne(n,"acosh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.acosh(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.atanh=function(n){ne(n,"atanh");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a)r[a]=Math.atanh(o[a]);return this.makeOutput(r,n.shape,"float32")},t.prototype.erf=function(n){ne(n,"erf");for(var r=new Float32Array(n.size),o=this.readSync(n.dataId),a=0;a<o.length;++a){var i=Math.sign(o[a]),s=Math.abs(o[a]),u=1/(1+.3275911*s);r[a]=i*(1-((((1.061405429*u-1.453152027)*u+1.421413741)*u-.284496736)*u+.254829592)*u*Math.exp(-s*s))}return this.makeOutput(r,n.shape,"float32")},t.prototype.step=function(n,r){r===void 0&&(r=0),ne(n,"step");for(var o=new Float32Array(n.size),a=this.readSync(n.dataId),i=0;i<a.length;++i){var s=a[i];isNaN(s)?o[i]=NaN:o[i]=s>0?1:r}return this.makeOutput(o,n.shape,"float32")},t.prototype.fusedConv2d=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,c=this.conv2d(r,o,a);return i&&(c=this.add(c,i)),s&&(c=Jh(this,c,s,u)),c},t.prototype.conv2d=function(n,r,o){ne([n,r],"conv2d");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,c=o.padInfo.left,l=o.padInfo.top,f=o.dataFormat==="channelsLast",d=Se(o.outShape,n.dtype),h=n.strides[0],p=f?n.strides[1]:n.strides[2],m=f?n.strides[2]:1,g=f?1:n.strides[1],v=d.strides[0],x=f?d.strides[1]:d.strides[2],y=f?d.strides[2]:1,b=f?1:d.strides[1],w=this.readSync(n.dataId),C=this.readSync(r.dataId),E=d.values,S=0;S<o.batchSize;++S)for(var k=S*h,_=S*v,A=0;A<o.outHeight;++A)for(var D=_+A*x,T=A*o.strideHeight-l,W=0;W<a;W++){var $=T+W*s;if(!($<0||$>=o.inHeight))for(var q=W*r.strides[0],X=k+$*p,P=0;P<o.outWidth;++P)for(var V=D+P*y,G=P*o.strideWidth-c,L=0;L<i;L++){var H=G+L*u;if(!(H<0||H>=o.inWidth))for(var K=X+H*m,Y=q+L*r.strides[1],fe=0;fe<o.inChannels;++fe){for(var le=w[K+fe*g],we=0;we<o.outChannels;++we)E[V+we*b]+=le*C[Y+we];Y+=o.outChannels}}}return d.toTensor()},t.prototype.conv3d=function(n,r,o){for(var a=o.filterDepth,i=o.filterHeight,s=o.filterWidth,u=o.dilationDepth,c=o.dilationHeight,l=o.dilationWidth,f=o.padInfo.front,d=o.padInfo.left,h=o.padInfo.top,p=Se(o.outShape,n.dtype),m=this.readSync(n.dataId),g=this.readSync(r.dataId),v=p.values,x=0;x<o.batchSize;++x)for(var y=x*n.strides[0],b=x*p.strides[0],w=0;w<o.outDepth;++w)for(var C=b+w*p.strides[1],E=w*o.strideDepth-f,S=0;S<a;S++){var k=E+S*u;if(!(k<0||k>=o.inDepth))for(var _=S*r.strides[0],A=y+k*n.strides[1],D=0;D<o.outHeight;++D)for(var T=C+D*p.strides[2],W=D*o.strideHeight-h,$=0;$<i;$++){var q=W+$*c;if(!(q<0||q>=o.inHeight))for(var X=_+$*r.strides[1],P=A+q*n.strides[2],V=0;V<o.outWidth;++V)for(var G=T+V*o.outChannels,L=V*o.strideWidth-d,H=0;H<s;H++){var K=L+H*l;if(!(K<0||K>=o.inWidth))for(var Y=X+H*r.strides[2],fe=P+K*o.inChannels,le=Y,we=0;we<o.inChannels;++we){for(var ce=m[fe+we],De=0;De<o.outChannels;++De)v[G+De]+=ce*g[le+De];le+=o.outChannels}}}}return p.toTensor()},t.prototype.conv2dDerInput=function(n,r,o){ne([n,r],"conv2dDerInput");for(var a=Se(o.inShape,"float32"),i=a.values,s=this.readSync(n.dataId),u=this.readSync(r.dataId),c=r.strides,l=c[0],f=c[1],d=c[2],h=o.batchSize,p=o.filterHeight,m=o.filterWidth,g=o.inChannels,v=o.inHeight,x=o.inWidth,y=o.outChannels,b=o.outHeight,w=o.outWidth,C=o.strideHeight,E=o.strideWidth,S=o.dataFormat,k=p-1-o.padInfo.top,_=m-1-o.padInfo.left,A=S==="channelsLast",D=a.strides[0],T=A?a.strides[1]:a.strides[2],W=A?a.strides[2]:1,$=A?1:a.strides[1],q=n.strides[0],X=A?n.strides[1]:n.strides[2],P=A?n.strides[2]:1,V=A?1:n.strides[1],G=0;G<h;++G)for(var L=0;L<g;++L)for(var H=0;H<v;++H)for(var K=H-k,Y=Math.max(0,Math.ceil(K/C)),fe=Math.min(b,(p+K)/C),le=0;le<x;++le){for(var we=le-_,ce=Math.max(0,Math.ceil(we/E)),De=Math.min(w,(m+we)/E),qe=0,Re=Y;Re<fe;++Re)for(var Me=Re*C-K,_e=ce;_e<De;++_e)for(var Be=q*G+X*Re+P*_e,Ne=l*(p-1-Me)+f*(m-1-(_e*E-we))+d*L,He=0;He<y;++He)qe+=s[Be+V*He]*u[Ne+He];i[D*G+T*H+W*le+$*L]=qe}return a.toTensor()},t.prototype.conv3dDerInput=function(n,r,o){for(var a=Se(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],c=s[1],l=s[2],f=s[3],d=this.readSync(n.dataId),h=n.strides,p=h[0],m=h[1],g=h[2],v=h[3],x=this.readSync(r.dataId),y=r.strides,b=y[0],w=y[1],C=y[2],E=y[3],S=o.batchSize,k=o.filterDepth,_=o.filterHeight,A=o.filterWidth,D=o.inChannels,T=o.inDepth,W=o.inHeight,$=o.inWidth,q=o.outChannels,X=o.outDepth,P=o.outHeight,V=o.outWidth,G=o.strideDepth,L=o.strideHeight,H=o.strideWidth,K=k-1-o.padInfo.front,Y=_-1-o.padInfo.top,fe=A-1-o.padInfo.left,le=0;le<S;++le)for(var we=0;we<D;++we)for(var ce=0;ce<T;++ce)for(var De=ce-K,qe=Math.max(0,Math.ceil(De/G)),Re=Math.min(X,(k+De)/G),Me=0;Me<W;++Me)for(var _e=Me-Y,Be=Math.max(0,Math.ceil(_e/L)),Ne=Math.min(P,(_+_e)/L),He=0;He<$;++He){for(var Ut=He-fe,wt=Math.max(0,Math.ceil(Ut/H)),Ct=Math.min(V,(A+Ut)/H),an=0,ot=qe;ot<Re;++ot)for(var st=ot*G-De,Et=Be;Et<Ne;++Et)for(var An=Et*L-_e,vn=wt;vn<Ct;++vn)for(var Ln=p*le+m*ot+g*Et+v*vn,mn=b*(k-1-st)+w*(_-1-An)+C*(A-1-(vn*H-Ut))+E*we,gn=0;gn<q;++gn)an+=d[Ln+gn]*x[mn+gn];i[u*le+c*ce+l*Me+f*He+we]=an}return a.toTensor()},t.prototype.conv2dDerFilter=function(n,r,o){ne([n,r],"conv2dDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,c=o.dataFormat==="channelsLast",l=Se(o.filterShape,"float32"),f=o.padInfo.left,d=o.padInfo.top,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((d-m)/a)),v=Math.min(o.outHeight,(o.inHeight+d-m)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((f-x)/i)),b=Math.min(o.outWidth,(o.inWidth+f-x)/i),w=0;w<o.inChannels;++w)for(var C=0;C<o.outChannels;++C){for(var E=0,S=0;S<o.batchSize;++S)for(var k=g;k<v;++k)for(var _=m+k*a-d,A=y;A<b;++A){var D=x+A*i-f;E+=c?h.get(S,_,D,w)*p.get(S,k,A,C):h.get(S,w,_,D)*p.get(S,C,k,A)}l.set(E,m,x,w,C)}return l.toTensor()},t.prototype.conv3dDerFilter=function(n,r,o){for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,c=o.filterHeight,l=o.filterWidth,f=Se(o.filterShape,"float32"),d=f.values,h=f.strides,p=h[0],m=h[1],g=h[2],v=h[3],x=this.readSync(r.dataId),y=r.strides,b=y[0],w=y[1],C=y[2],E=y[3],S=this.readSync(n.dataId),k=n.strides,_=k[0],A=k[1],D=k[2],T=k[3],W=o.padInfo.front,$=o.padInfo.left,q=o.padInfo.top,X=0;X<u;++X)for(var P=Math.max(0,Math.ceil((W-X)/a)),V=Math.min(o.outDepth,(o.inDepth+W-X)/a),G=X*p,L=0;L<c;++L)for(var H=Math.max(0,Math.ceil((q-L)/i)),K=Math.min(o.outHeight,(o.inHeight+q-L)/i),Y=L*m+G,fe=0;fe<l;++fe)for(var le=Math.max(0,Math.ceil(($-fe)/s)),we=Math.min(o.outWidth,(o.inWidth+$-fe)/s),ce=fe*g+Y,De=0;De<o.inChannels;++De)for(var qe=De*v+ce,Re=0;Re<o.outChannels;++Re){for(var Me=0,_e=0;_e<o.batchSize;++_e)for(var Be=_e*_,Ne=_e*b,He=P;He<V;++He)for(var Ut=(X+He*a-W)*A+Be,wt=He*w+Ne,Ct=H;Ct<K;++Ct)for(var an=(L+Ct*i-q)*D+Ut,ot=Ct*C+wt,st=le;st<we;++st){var Et=st*E+ot;Me+=S[(fe+st*s-$)*T+an+De]*x[Et+Re]}d[qe+Re]=Me}return f.toTensor()},t.prototype.fusedDepthwiseConv2D=function(n){var r=n.input,o=n.filter,a=n.convInfo,i=n.bias,s=n.activation,u=n.preluActivationWeights,c=this.depthwiseConv2D(r,o,a);return i&&(c=this.add(c,i)),s&&(c=Jh(this,c,s,u)),c},t.prototype.depthwiseConv2D=function(n,r,o){ne([n,r],"depthwiseConv2D");for(var a=o.filterHeight,i=o.filterWidth,s=o.dilationHeight,u=o.dilationWidth,c=o.padInfo.left,l=o.padInfo.top,f=o.outChannels/o.inChannels,d=Se(o.outShape,n.dtype),h=this.readSync(n.dataId),p=this.readSync(r.dataId),m=d.values,g=0;g<o.batchSize;++g)for(var v=g*n.strides[0],x=g*d.strides[0],y=0;y<o.outHeight;++y)for(var b=x+y*d.strides[1],w=y*o.strideHeight-c,C=0;C<a;++C){var E=w+C*s;if(!(E<0||E>=o.inHeight))for(var S=C*r.strides[0],k=v+E*n.strides[1],_=0;_<o.outWidth;++_)for(var A=b+_*d.strides[2],D=_*o.strideWidth-l,T=0;T<i;++T){var W=D+T*u;if(!(W<0||W>=o.inWidth))for(var $=S+T*r.strides[1],q=k+W*o.inChannels,X=A,P=$,V=0;V<o.inChannels;++V){for(var G=h[q+V],L=0;L<f;++L)m[X+L]+=G*p[P+L];X+=f,P+=f}}}return d.toTensor()},t.prototype.depthwiseConv2DDerInput=function(n,r,o){ne([n,r],"depthwiseConv2DDerInput");for(var a=Se(o.inShape,"float32"),i=a.values,s=a.strides,u=s[0],c=s[1],l=s[2],f=this.readSync(n.dataId),d=n.strides,h=d[0],p=d[1],m=d[2],g=this.readSync(r.dataId),v=r.strides,x=v[0],y=v[1],b=v[2],w=o.batchSize,C=o.filterHeight,E=o.filterWidth,S=o.inChannels,k=o.inHeight,_=o.inWidth,A=o.outChannels,D=o.outHeight,T=o.outWidth,W=o.strideHeight,$=o.strideWidth,q=C-1-o.padInfo.top,X=E-1-o.padInfo.left,P=A/S,V=0;V<w;++V)for(var G=0;G<S;++G)for(var L=0;L<k;++L)for(var H=L-q,K=Math.max(0,Math.ceil(H/W)),Y=Math.min(D,(C+H)/W),fe=0;fe<_;++fe){for(var le=fe-X,we=Math.max(0,Math.ceil(le/$)),ce=Math.min(T,(E+le)/$),De=0,qe=K;qe<Y;++qe)for(var Re=qe*W-H,Me=we;Me<ce;++Me)for(var _e=h*V+p*qe+m*Me,Be=x*(C-1-Re)+y*(E-1-(Me*$-le))+b*G,Ne=0;Ne<P;++Ne)De+=f[_e+(G*P+Ne)]*g[Be+Ne];i[u*V+c*L+l*fe+G]=De}return a.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(n,r,o){ne([n,r],"depthwiseConv2DDerFilter");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,c=Se(o.filterShape,"float32"),l=o.padInfo.left,f=o.padInfo.top,d=o.outChannels/o.inChannels,h=this.bufferSync(n),p=this.bufferSync(r),m=0;m<s;++m)for(var g=Math.max(0,Math.ceil((f-m)/a)),v=Math.min(o.outHeight,(o.inHeight+f-m)/a),x=0;x<u;++x)for(var y=Math.max(0,Math.ceil((l-x)/i)),b=Math.min(o.outWidth,(o.inWidth+l-x)/i),w=0;w<o.outChannels;++w){for(var C=Math.trunc(w/d),E=w%d,S=0,k=0;k<o.batchSize;++k)for(var _=g;_<v;++_)for(var A=m+_*a-f,D=y;D<b;++D){var T=x+D*i-l;S+=h.get(k,A,T,C)*p.get(k,_,D,w)}c.set(S,m,x,C,E)}return c.toTensor()},t.prototype.tile=function(n,r){return ne(n,"tile"),j_(this.bufferSync(n),r)},t.prototype.pad=function(n,r,o){ne(n,"pad");var a=r.map(function(d,h){return d[0]+n.shape[h]+d[1]}),i=r.map(function(d){return d[0]}),s=this.bufferSync(n),u=Se(a,n.dtype);o!==0&&u.values.fill(o);for(var c=0;c<n.size;c++){var l=s.indexToLoc(c),f=l.map(function(d,h){return d+i[h]});u.set.apply(u,[s.get.apply(s,l)].concat(f))}return u.toTensor()},t.prototype.transpose=function(n,r){ne(n,"transpose");for(var o=new Array(n.rank),a=0;a<o.length;a++)o[a]=n.shape[r[a]];var i=this.readSync(n.dataId),s=Se(o,n.dtype),u=this.bufferSync(n);for(a=0;a<n.size;++a){for(var c=u.indexToLoc(a),l=new Array(c.length),f=0;f<l.length;f++)l[f]=c[r[f]];var d=s.locToIndex(l);s.values[d]=i[a]}return s.toTensor()},t.prototype.gather=function(n,r,o){ne([n,r],"gather");var a=n.shape.slice(),i=this.readSync(r.dataId);a[o]=i.length;for(var s=Se(a,n.dtype),u=this.bufferSync(n),c=0;c<s.size;++c){var l=s.indexToLoc(c),f=l.slice();f[o]=i[l[o]];var d=u.locToIndex(f);s.values[c]=u.values[d]}return s.toTensor()},t.prototype.batchToSpaceND=function(n,r,o){ne([n],"batchToSpaceND");var a=r.reduce(function(f,d){return f*d}),i=vf(n.shape,r,a),s=mf(i.length,r.length),u=gf(n.shape,r,a),c=P_(o,r.length),l=N_(u,o,r.length);return n.reshape(i).transpose(s).reshape(u).slice(c,l)},t.prototype.spaceToBatchND=function(n,r,o){ne([n],"spaceToBatchND");var a=r.reduce(function(d,h){return d*h}),i=[[0,0]];i.push.apply(i,o);for(var s=1+r.length;s<n.shape.length;++s)i.push([0,0]);var u=n.pad(i),c=vf(u.shape,r,a,!1),l=mf(c.length,r.length,!1),f=gf(u.shape,r,a,!1);return u.reshape(c).transpose(l).reshape(f)},t.prototype.pool=function(n,r,o){ne(n,"pool");for(var a=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,p=this.readSync(n.dataId),m=Se(r.outShape,n.dtype),g=m.values,v=r.outShape[1]*r.outShape[2]*r.outShape[3],x=r.outShape[2]*r.outShape[3],y=r.outShape[3],b=0;b<r.batchSize;++b)for(var w=b*v,C=b*n.strides[0],E=0;E<r.inChannels;++E)for(var S=0;S<r.outHeight;++S)for(var k=S*a-f,_=Math.max(0,k),A=Math.min(r.inHeight,c+k),D=w+S*x,T=0;T<r.outWidth;++T){for(var W=T*i-d,$=Math.max(0,W),q=Math.min(r.inWidth,l+W),X=h,P=0,V=0,G=_;G<A;G+=s){for(var L=C+G*n.strides[1],H=$;H<q;H+=u){var K=p[L+H*n.strides[2]+E];o==="max"&&K>X?X=K:o==="avg"&&(P+=K,V++)}if(isNaN(X))break}g[D+T*y+E]=o==="avg"?P/V:X}return m.toTensor()},t.prototype.maxPool=function(n,r){return this.pool(n,r,"max")},t.prototype.maxPoolPositions=function(n,r){for(var o=Se(r.outShape,"int32"),a=r.strideHeight,i=r.strideWidth,s=r.dilationHeight,u=r.dilationWidth,c=r.effectiveFilterHeight,l=r.effectiveFilterWidth,f=r.padInfo.top,d=r.padInfo.left,h=this.bufferSync(n),p=0;p<r.batchSize;++p)for(var m=0;m<r.inChannels;++m)for(var g=0;g<r.outHeight;++g){for(var v=g*a-f,x=v;x<0;)x+=s;for(var y=Math.min(r.inHeight,c+v),b=0;b<r.outWidth;++b){for(var w=b*i-d,C=w;C<0;)C+=u;for(var E=Math.min(r.inWidth,l+w),S=Number.NEGATIVE_INFINITY,k=-1,_=x;_<y;_+=s)for(var A=_-v,D=C;D<E;D+=u){var T=D-w,W=h.get(p,_,D,m);W>S&&(S=W,k=A*l+T)}o.set(k,p,g,b,m)}}return o.toTensor()},t.prototype.maxPoolBackprop=function(n,r,o,a){ne([r,o],"maxPoolBackprop");for(var i=this.maxPoolPositions(r,a),s=a.strideHeight,u=a.strideWidth,c=a.dilationHeight,l=a.dilationWidth,f=a.effectiveFilterHeight,d=a.effectiveFilterWidth,h=d-1-a.padInfo.left,p=f-1-a.padInfo.top,m=Se(r.shape,"float32"),g=this.bufferSync(i),v=this.bufferSync(n),x=0;x<a.batchSize;++x)for(var y=0;y<a.inChannels;++y)for(var b=0;b<a.inHeight;++b)for(var w=0;w<a.inWidth;++w){for(var C=b-p,E=w-h,S=0,k=0;k<f;k+=c){var _=(C+k)/s;if(!(_<0||_>=a.outHeight||Math.floor(_)!==_))for(var A=0;A<d;A+=l){var D=(E+A)/u;if(!(D<0||D>=a.outWidth||Math.floor(D)!==D)){var T=f*d-1-g.get(x,_,D,y)===k*d+A?1:0;T!==0&&(S+=v.get(x,_,D,y)*T)}}}m.set(S,x,b,w,y)}return m.toTensor()},t.prototype.avgPoolBackprop=function(n,r,o){ne([n,r],"avgPoolBackprop");for(var a=o.strideHeight,i=o.strideWidth,s=o.filterHeight,u=o.filterWidth,c=o.dilationHeight,l=o.dilationWidth,f=o.effectiveFilterHeight,d=o.effectiveFilterWidth,h=d-1-o.padInfo.left,p=f-1-o.padInfo.top,m=Se(r.shape,"float32"),g=1/(s*u),v=this.bufferSync(n),x=0;x<o.batchSize;++x)for(var y=0;y<o.inChannels;++y)for(var b=0;b<o.inHeight;++b)for(var w=0;w<o.inWidth;++w){for(var C=b-p,E=w-h,S=0,k=0;k<f;k+=c){var _=(C+k)/a;if(!(_<0||_>=o.outHeight||Math.floor(_)!==_))for(var A=0;A<d;A+=l){var D=(E+A)/i;D<0||D>=o.outWidth||Math.floor(D)!==D||(S+=v.get(x,_,D,y))}}m.set(S*g,x,b,w,y)}return m.toTensor()},t.prototype.pool3d=function(n,r,o){ne(n,"pool3d");for(var a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,v=o==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(n.dataId),y=Se(r.outShape,n.dtype),b=y.values,w=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],C=r.outShape[2]*r.outShape[3]*r.outShape[4],E=r.outShape[3]*r.outShape[4],S=r.outShape[4],k=0;k<r.batchSize;++k)for(var _=k*w,A=k*n.strides[0],D=0;D<r.inChannels;++D)for(var T=0;T<r.outDepth;++T){for(var W=T*a-p,$=W;$<0;)$+=u;for(var q=Math.min(r.inDepth,f+W),X=_+T*C,P=0;P<r.outHeight;++P){for(var V=P*i-m,G=V;G<0;)G+=c;for(var L=Math.min(r.inHeight,d+V),H=X+P*E,K=0;K<r.outWidth;++K){for(var Y=K*s-g,fe=Y;fe<0;)fe+=l;for(var le=Math.min(r.inWidth,h+Y),we=H+K*S,ce=v,De=0,qe=0,Re=$;Re<q;Re+=u){for(var Me=A+Re*n.strides[1],_e=G;_e<L;_e+=c){for(var Be=Me+_e*n.strides[2],Ne=fe;Ne<le;Ne+=l){var He=x[Be+Ne*n.strides[3]+D];if(o==="max"&&He>ce?ce=He:o==="avg"&&(De+=He,qe++),isNaN(ce))break}if(isNaN(ce))break}if(isNaN(ce))break}b[we+D]=o==="avg"?De/qe:ce}}}return y.toTensor()},t.prototype.avgPool3d=function(n,r){return ne(n,"avgPool3d"),this.pool3d(n,r,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(n,r,o){ne([n,r],"avgPool3dBackprop");for(var a=o.strideDepth,i=o.strideHeight,s=o.strideWidth,u=o.filterDepth,c=o.filterHeight,l=o.filterWidth,f=o.dilationDepth,d=o.dilationHeight,h=o.dilationWidth,p=o.effectiveFilterDepth,m=o.effectiveFilterHeight,g=o.effectiveFilterWidth,v=p-1-o.padInfo.front,x=g-1-o.padInfo.left,y=m-1-o.padInfo.top,b=Se(r.shape,"float32"),w=1/(u*c*l),C=this.bufferSync(n),E=0;E<o.batchSize;++E)for(var S=0;S<o.inChannels;++S)for(var k=0;k<o.inDepth;++k)for(var _=0;_<o.inHeight;++_)for(var A=0;A<o.inWidth;++A){for(var D=k-v,T=_-y,W=A-x,$=0,q=0;q<p;q+=f){var X=(D+q)/a;if(!(X<0||X>=o.outDepth||Math.floor(X)!==X))for(var P=0;P<m;P+=d){var V=(T+P)/i;if(!(V<0||V>=o.outHeight||Math.floor(V)!==V))for(var G=0;G<g;G+=h){var L=(W+G)/s;L<0||L>=o.outWidth||Math.floor(L)!==L||($+=C.get(E,X,V,L,S))}}}b.set($*w,E,k,_,A,S)}return b.toTensor()},t.prototype.maxPool3d=function(n,r){return ne(n,"maxPool3d"),this.pool3d(n,r,"max").toFloat()},t.prototype.maxPool3dPositions=function(n,r){for(var o=Se(r.outShape,"int32"),a=r.strideDepth,i=r.strideHeight,s=r.strideWidth,u=r.dilationDepth,c=r.dilationHeight,l=r.dilationWidth,f=r.effectiveFilterDepth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,p=r.padInfo.front,m=r.padInfo.top,g=r.padInfo.left,v=this.bufferSync(n),x=0;x<r.batchSize;++x)for(var y=0;y<r.inChannels;++y)for(var b=0;b<r.outDepth;++b){for(var w=b*a-p,C=w;C<0;)C+=u;for(var E=Math.min(r.inDepth,f+w),S=0;S<r.outHeight;++S){for(var k=S*i-m,_=k;_<0;)_+=c;for(var A=Math.min(r.inHeight,d+k),D=0;D<r.outWidth;++D){for(var T=D*s-g,W=T;W<0;)W+=l;for(var $=Math.min(r.inWidth,h+T),q=Number.NEGATIVE_INFINITY,X=-1,P=C;P<E;P+=u)for(var V=P-w,G=_;G<A;G+=c)for(var L=G-k,H=W;H<$;H+=l){var K=H-T,Y=v.get(x,P,G,H,y);Y>=q&&(q=Y,X=V*d*h+L*d+K)}o.set(X,x,b,S,D,y)}}}return o.toTensor()},t.prototype.maxPool3dBackprop=function(n,r,o,a){ne([r,o],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(r,a),s=a.strideDepth,u=a.strideHeight,c=a.strideWidth,l=a.dilationDepth,f=a.dilationHeight,d=a.dilationWidth,h=a.effectiveFilterDepth,p=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=h-1-a.padInfo.front,v=m-1-a.padInfo.left,x=p-1-a.padInfo.top,y=Se(r.shape,"float32"),b=this.bufferSync(i),w=this.bufferSync(n),C=0;C<a.batchSize;++C)for(var E=0;E<a.inChannels;++E)for(var S=0;S<a.inDepth;++S)for(var k=0;k<a.inHeight;++k)for(var _=0;_<a.inWidth;++_){for(var A=S-g,D=k-x,T=_-v,W=0,$=0;$<h;$+=l){var q=(A+$)/s;if(!(q<0||q>=a.outDepth||Math.floor(q)!==q))for(var X=0;X<p;X+=f){var P=(D+X)/u;if(!(P<0||P>=a.outHeight||Math.floor(P)!==P))for(var V=0;V<m;V+=d){var G=(T+V)/c;if(!(G<0||G>=a.outWidth||Math.floor(G)!==G)){var L=h*p*m-1-b.get(C,q,P,G,E)===$*p*m+X*m+V?1:0;L!==0&&(W+=w.get(C,q,P,G,E)*L)}}}}y.set(W,C,S,k,_,E)}return y.toTensor()},t.prototype.cast=function(n,r){return mg(n,r,this)},t.prototype.reshape=function(n,r){return yf(n,r)},t.prototype.avgPool=function(n,r){return ne(n,"avgPool"),this.pool(n,r,"avg").toFloat()},t.prototype.resizeBilinear=function(n,r,o,a){ne(n,"resizeBilinear");for(var i=n.shape,s=i[0],u=i[1],c=i[2],l=i[3],f=this.readSync(n.dataId),d=new Float32Array(ge([s,r,o,l])),h=[a&&r>1?u-1:u,a&&o>1?c-1:c],p=[a&&r>1?r-1:r,a&&o>1?o-1:o],m=0,g=h[0]/p[0],v=h[1]/p[1],x=0;x<s;x++)for(var y=0;y<r;y++)for(var b=g*y,w=Math.floor(b),C=b-w,E=Math.min(u-1,Math.ceil(b)),S=x*n.strides[0]+w*n.strides[1],k=x*n.strides[0]+E*n.strides[1],_=0;_<o;_++)for(var A=v*_,D=Math.floor(A),T=A-D,W=Math.min(c-1,Math.ceil(A)),$=S+D*n.strides[2],q=k+D*n.strides[2],X=S+W*n.strides[2],P=k+W*n.strides[2],V=0;V<l;V++){var G=f[$+V],L=f[q+V],H=G+(f[X+V]-G)*T,K=H+(L+(f[P+V]-L)*T-H)*C;d[m++]=K}return Gt(d,[s,r,o,l])},t.prototype.resizeBilinearBackprop=function(n,r,o){ne([n,r],"resizeBilinearBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],c=a[3],l=n.shape,f=l[1],d=l[2],h=new Float32Array(i*s*u*c),p=[o&&f>1?s-1:s,o&&d>1?u-1:u],m=[o&&f>1?f-1:f,o&&d>1?d-1:d],g=p[0]/m[0],v=p[1]/m[1],x=this.readSync(n.dataId),y=0,b=0;b<i;b++)for(var w=b*r.strides[0],C=0;C<f;C++)for(var E=C*g,S=Math.floor(E),k=Math.min(Math.ceil(E),s-1),_=w+S*r.strides[1],A=w+k*r.strides[1],D=E-S,T=1-D,W=0;W<d;W++)for(var $=W*v,q=Math.floor($),X=Math.min(Math.ceil($),u-1),P=$-q,V=1-P,G=_+q*r.strides[2],L=_+X*r.strides[2],H=A+q*r.strides[2],K=A+X*r.strides[2],Y=T*V,fe=T*P,le=D*V,we=D*P,ce=0;ce<c;ce++){var De=x[y++];h[G+ce]+=De*Y,h[L+ce]+=De*fe,h[H+ce]+=De*le,h[K+ce]+=De*we}return bn(h,[i,u,s,c],r.dtype)},t.prototype.resizeNearestNeighbor=function(n,r,o,a){ne(n,"resizeNearestNeighbor");for(var i=n.shape,s=i[0],u=i[1],c=i[2],l=i[3],f=this.readSync(n.dataId),d=new Float32Array(s*r*o*l),h=[a&&r>1?u-1:u,a&&o>1?c-1:c],p=[a&&r>1?r-1:r,a&&o>1?o-1:o],m=h[0]/p[0],g=h[1]/p[1],v=0,x=0;x<s;x++)for(var y=x*n.strides[0],b=0;b<r;b++)for(var w=m*b,C=y+Math.min(u-1,a?Math.round(w):Math.floor(w))*n.strides[1],E=0;E<o;E++)for(var S=g*E,k=C+Math.min(c-1,a?Math.round(S):Math.floor(S))*n.strides[2],_=0;_<l;_++){var A=f[k+_];d[v++]=A}return Gt(d,[s,r,o,l],n.dtype)},t.prototype.resizeNearestNeighborBackprop=function(n,r,o){ne([n,r],"resizeNearestNeighborBackprop");for(var a=r.shape,i=a[0],s=a[1],u=a[2],c=a[3],l=n.shape,f=l[1],d=l[2],h=new Float32Array(i*s*u*c),p=this.readSync(n.dataId),m=[o&&f>1?s-1:s,o&&d>1?u-1:u],g=[o&&f>1?f-1:f,o&&d>1?d-1:d],v=m[0]/g[0],x=m[1]/g[1],y=1/v,b=1/x,w=2*Math.ceil(y)+2,C=2*Math.ceil(b)+2,E=0;E<i;E++)for(var S=E*r.strides[0],k=0;k<s;k++)for(var _=S+k*r.strides[1],A=Math.floor(k*y),D=Math.floor(A-w/2),T=0;T<u;T++)for(var W=_+T*r.strides[2],$=Math.floor(T*b),q=Math.floor($-C/2),X=0;X<c;X++){for(var P=0,V=0;V<w;V++){var G=V+D;if(!(G<0||G>=f)){var L=S+G*n.strides[1],H=G*v;if(k===Math.min(s-1,o?Math.round(H):Math.floor(H)))for(var K=0;K<C;K++){var Y=K+q;if(!(Y<0||Y>=d)){var fe=L+Y*n.strides[2],le=Y*x;T===Math.min(u-1,o?Math.round(le):Math.floor(le))&&(P+=p[fe+X])}}}}h[W+X]=P}return bn(h,r.shape,r.dtype)},t.prototype.batchNormalization=function(n,r,o,a,i,s){ne([n,r,o,i,s],"batchNorm");for(var u=this.readSync(n.dataId),c=this.readSync(r.dataId),l=this.readSync(o.dataId),f=i?this.readSync(i.dataId):new Float32Array([1]),d=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(u.length),p=d.length,m=f.length,g=l.length,v=c.length,x=0,y=0,b=0,w=0,C=0;C<u.length;++C)h[C]=d[x++]+(u[C]-c[y++])*f[b++]/Math.sqrt(l[w++]+a),x>=p&&(x=0),y>=v&&(y=0),b>=m&&(b=0),w>=g&&(w=0);return bn(h,n.shape)},t.prototype.localResponseNormalization4D=function(n,r,o,a,i){ne(n,"localResponseNormalization4D");var s=n.shape[3],u=s-1,c=this.readSync(n.dataId),l=n.size,f=new Float32Array(l);function d(g){for(var v=g%s,x=g-v+Math.max(0,v-r),y=g-v+Math.min(v+r,u),b=0;x<=y;x++){var w=c[x];b+=w*w}return b}for(var h=0;h<l;h++){var p=d(h),m=c[h]*Math.pow(o+a*p,-i);f[h]=m}return bn(f,n.shape)},t.prototype.LRNGrad=function(n,r,o,a,i,s,u){ne(n,"LRNGrad");for(var c=n.shape[3],l=this.readSync(n.dataId),f=this.readSync(r.dataId),d=this.readSync(o.dataId),h=new Float32Array(n.size),p=n.size,m=0;m<p;m++){for(var g=m%c,v=m-g+Math.max(0,g-a),x=m-g+Math.min(c,g+a+1),y=0,b=v;b<x;b++)y+=Math.pow(f[b],2);for(y=s*y+i,b=v;b<x;b++){var w=-2*s*u*f[b]*d[m]/y;m===b&&(w+=Math.pow(y,-u)),w*=l[m],h[b]+=w}}return bn(h,n.shape)},t.prototype.multinomial=function(n,r,o,a){ne(n,"multinomial");for(var i=r?n:ro(n),s=i.shape[0],u=i.shape[1],c=tt([s,o],"int32"),l=this.readSync(c.dataId),f=this.readSync(i.dataId),d=0;d<s;++d){var h=d*u,p=new Float32Array(u-1);p[0]=f[h];for(var m=1;m<p.length;++m)p[m]=p[m-1]+f[h+m];for(var g=Rd(a.toString()),v=d*o,x=0;x<o;++x){var y=g();l[v+x]=p.length;for(var b=0;b<p.length;b++)if(y<p[b]){l[v+x]=b;break}}}return c},t.prototype.oneHot=function(n,r,o,a){ne(n,"oneHot");var i=new Float32Array(n.size*r);i.fill(a);for(var s=this.readSync(n.dataId),u=0;u<n.size;++u)s[u]>=0&&s[u]<r&&(i[u*r+s[u]]=o);return xo(i,[n.size,r],"int32")},t.prototype.nonMaxSuppression=function(n,r,o,a,i){return ne(n,"nonMaxSuppression"),xg(this.readSync(n.dataId),this.readSync(r.dataId),o,a,i)},t.prototype.fft=function(n){return this.fftBatch(n,!1)},t.prototype.ifft=function(n){return this.fftBatch(n,!0)},t.prototype.fftBatch=function(n,r){for(var o=n.shape[0],a=n.shape[1],i=Se(n.shape,"float32"),s=Se(n.shape,"float32"),u=Hn(n).as2D(o,a),c=_r(n).as2D(o,a),l=0;l<o;l++)for(var f=u.slice([l,0],[1,a]),d=c.slice([l,0],[1,a]),h=Ht(f,d),p=this.readSync(this.fftImpl(h,r).dataId),m=0;m<a;m++){var g=By(p,m);i.values[l*a+m]=g.real,s.values[l*a+m]=g.imag}return Ht(i.toTensor(),s.toTensor()).as2D(o,a)},t.prototype.fftImpl=function(n,r){var o=n.as1D(),a=o.size;if(this.isExponentOf2(a)){var i=this.fftRadix2(o,a,r).as2D(n.shape[0],n.shape[1]);return r&&(i=Ht(Hn(i).div(ue(a)),_r(i).div(ue(a)))),i}var s=this.readSync(n.dataId),u=function(c){for(var l=new Float32Array(c.length/2),f=new Float32Array(c.length/2),d=0;d<c.length;d+=2)l[d/2]=c[d],f[d/2]=c[d+1];return{real:l,imag:f}}(this.fourierTransformByMatmul(s,a,r));return Ht(u.real,u.imag).as2D(n.shape[0],n.shape[1])},t.prototype.isExponentOf2=function(n){return(n&n-1)==0},t.prototype.fftRadix2=function(n,r,o){if(r===1)return n;var a=this.readSync(n.dataId),i=r/2,s=function(v){for(var x=Math.ceil(v.length/4),y=new Float32Array(x),b=new Float32Array(x),w=0;w<v.length;w+=4)y[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:y,imag:b}}(a),u=Ht(s.real,s.imag).as1D(),c=function(v){for(var x=Math.floor(v.length/4),y=new Float32Array(x),b=new Float32Array(x),w=2;w<v.length;w+=4)y[Math.floor(w/4)]=v[w],b[Math.floor(w/4)]=v[w+1];return{real:y,imag:b}}(a),l=Ht(c.real,c.imag).as1D();u=this.fftRadix2(u,i,o),l=this.fftRadix2(l,i,o);var f=function(v,x){for(var y=new Float32Array(v/2),b=new Float32Array(v/2),w=0;w<Math.ceil(v/2);w++){var C=(x?2:-2)*Math.PI*(w/v);y[w]=Math.cos(C),b[w]=Math.sin(C)}return{real:y,imag:b}}(r,o),d=Ht(f.real,f.imag).mul(l),h=u.add(d),p=u.sub(d),m=Hn(h).concat(Hn(p)),g=_r(h).concat(_r(p));return Ht(m,g).as1D()},t.prototype.fourierTransformByMatmul=function(n,r,o){for(var a=new Float32Array(2*r),i=0;i<r;i++){for(var s=0,u=0,c=0;c<r;c++){var l=A6(i*c,r,o),f=By(n,c);s+=f.real*l.real-f.imag*l.imag,u+=f.real*l.imag+f.imag*l.real}o&&(s/=r,u/=r),k6(a,s,u,i)}return a},t.prototype.depthToSpace=function(n,r,o){I(o==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+o}),I(r>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+r});for(var a=n.shape[0],i=n.shape[1],s=n.shape[2],u=n.shape[3],c=i*r,l=s*r,f=u/(r*r),d=this.readSync(n.dataId),h=new Float32Array(a*c*l*f),p=0,m=0;m<a;++m)for(var g=0;g<c;++g)for(var v=Math.floor(g/r),x=g%r,y=0;y<l;++y)for(var b=Math.floor(y/r),w=(x*r+y%r)*f,C=0;C<f;++C){var E=C+w+u*(b+s*(v+i*m));h[p++]=d[E]}return bn(h,[a,c,l,f])},t.prototype.broadcastedBinaryOp=function(n,r,o,a){var i=Pe(n.shape,r.shape),s=Se(i,o),u=this.readSync(n.dataId),c=this.readSync(r.dataId),l=vo(n.shape,i),f=vo(r.shape,i),d=s.values;if(l.length+f.length===0)for(var h=0;h<d.length;++h)d[h]=a(u[h%u.length],c[h%c.length]);else{var p=this.bufferSync(n),m=this.bufferSync(r),g=function(v){var x=s.indexToLoc(v),y=x.slice(-n.rank);l.forEach(function(E){return y[E]=0});var b=p.locToIndex(y),w=x.slice(-r.rank);f.forEach(function(E){return w[E]=0});var C=m.locToIndex(w);d[v]=a(u[b],c[C])};for(h=0;h<d.length;++h)g(h)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(n,r,o){var a=Pe(n.shape,r.shape),i=Se(a,"float32"),s=Se(a,"float32"),u=this.readSync(n.dataId),c=this.readSync(r.dataId),l=vo(n.shape,a),f=vo(r.shape,a),d=i.values,h=s.values;if(l.length+f.length===0)for(var p=0;p<d.length;p++){var m=p%u.length,g=p%c.length,v=o(u[2*m],u[2*m+1],c[2*g],c[2*g+1]);d[p]=v.real,h[p]=v.imag}else{var x=this.bufferSync(this.data.get(n.dataId).complexTensors.real),y=this.bufferSync(this.data.get(r.dataId).complexTensors.real),b=function(w){var C=i.indexToLoc(w),E=C.slice(-n.rank);l.forEach(function(D){return E[D]=0});var S=x.locToIndex(E),k=C.slice(-r.rank);f.forEach(function(D){return k[D]=0});var _=y.locToIndex(k),A=o(u[2*S],u[2*S+1],c[2*_],c[2*_+1]);d[w]=A.real,h[w]=A.imag};for(p=0;p<d.length;p++)b(p)}return this.complex(i.toTensor(),s.toTensor())},t.prototype.split=function(n,r,o){return V_(n,r,o)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(n,r,o,a,i,s){for(var u=n.shape,c=u[0],l=u[1],f=u[2],d=u[3],h=r.shape[0],p=a[0],m=a[1],g=Se([h,p,m,d],"float32"),v=this.readSync(r.dataId),x=this.readSync(o.dataId),y=this.readSync(n.dataId),b=n.strides,w=g.strides,C=0;C<h;C++){var E=4*C,S=v[E],k=v[E+1],_=v[E+2],A=v[E+3],D=x[C];if(!(D>=c))for(var T=p>1?(_-S)*(l-1)/(p-1):0,W=m>1?(A-k)*(f-1)/(m-1):0,$=0;$<p;$++){var q=p>1?S*(l-1)+$*T:.5*(S+_)*(l-1);if(q<0||q>l-1)for(var X=0;X<m;X++)for(var P=0;P<d;P++){var V=P+X*w[2]+$*w[1]+C*w[0];g.values[V]=s}else if(i==="bilinear"){var G=Math.floor(q),L=Math.ceil(q),H=q-G;for(X=0;X<m;X++)if((Re=m>1?k*(f-1)+X*W:.5*(k+A)*(f-1))<0||Re>f-1)for(P=0;P<d;P++)V=P+X*w[2]+$*w[1]+C*w[0],g.values[V]=s;else{var K=Math.floor(Re),Y=Math.ceil(Re),fe=Re-K;for(P=0;P<d;P++){var le=y[V=P+K*b[2]+G*b[1]+D*b[0]],we=y[V=P+Y*b[2]+G*b[1]+D*b[0]],ce=y[V=P+K*b[2]+L*b[1]+D*b[0]],De=le+(we-le)*fe,qe=ce+(y[V=P+Y*b[2]+L*b[1]+D*b[0]]-ce)*fe;V=P+X*w[2]+$*w[1]+C*w[0],g.values[V]=De+(qe-De)*H}}}else for(X=0;X<m;++X){var Re;if((Re=m>1?k*(f-1)+X*W:.5*(k+A)*(f-1))<0||Re>f-1)for(P=0;P<d;P++)V=P+X*w[2]+$*w[1]+C*w[0],g.values[V]=s;else{var Me=Math.round(Re),_e=Math.round(q);for(P=0;P<d;P++){var Be=P+Me*b[2]+_e*b[1]+D*b[0],Ne=P+X*w[2]+$*w[1]+C*w[0];g.values[Ne]=y[Be]}}}}}return g.toTensor()},t.prototype.sparseToDense=function(n,r,o,a){var i=Lu(0,n,o),s=i.sliceRank,u=i.numUpdates,c=i.sliceSize,l=i.strides,f=i.outputSize;return this.scatter(n,r,o,f,c,u,s,l,a,!1)},t.prototype.gatherND=function(n,r){var o=r.shape,a=o[o.length-1],i=cg(n,r),s=i[0],u=i[1],c=i[2],l=i[3];if(u===0)return Gt([],s,n.dtype);for(var f=new es([u,c],n.dtype),d=this.readSync(r.dataId),h=this.readSync(n.dataId),p=0;p<u;p++){for(var m=[],g=0,v=0;v<a;v++){var x=d[p*a+v];g+=x*l[v],m.push(x)}if(g<0||g>=n.size/c)throw new Error("Invalid indices: "+m+" does not index into "+n.shape);for(var y=0;y<c;y++)f.values[p*c+y]=h[g*c+y]}return f.toTensor().reshape(s)},t.prototype.scatterND=function(n,r,o){var a=Lu(0,n,o),i=a.sliceRank,s=a.numUpdates,u=a.sliceSize,c=a.strides,l=a.outputSize,f=ue(0);return this.scatter(n,r,o,l,u,s,i,c,f,!0)},t.prototype.fill=function(n,r,o){var a=Iu(o=o||ps(r),ge(n));return a.fill(r),N.makeTensor(a,n,o,this)},t.prototype.onesLike=function(n){if(n.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(n.shape,1,n.dtype)},t.prototype.zerosLike=function(n){var r=Iu(n.dtype,ge(n.shape));return this.makeOutput(r,n.shape,n.dtype)},t.prototype.linspace=function(n,r,o){return gg(n,r,o)},t.prototype.scatter=function(n,r,o,a,i,s,u,c,l,f){var d=[a/i,i],h=this.readSync(n.dataId),p=this.readSync(r.dataId);if(a===0)return Gt([],o,r.dtype);var m=new es(d,r.dtype);m.values.fill(this.readSync(l.dataId)[0]);for(var g=0;g<s;g++){for(var v=[],x=0,y=0;y<u;y++){var b=h[g*u+y];v.push(b),x+=b*c[y]}if(x<0||x>=a/i)throw new Error("Invalid indices: "+v+" does not index into "+o);for(var w=0;w<i;w++)f?m.values[x*i+w]+=p[g*i+w]:m.values[x*i+w]=r.rank===0?p[0]:p[g*i+w]}return m.toTensor().reshape(o)},t}(pg);N.registerBackend("cpu",function(){return new I5},1);for(var ep=0,e2=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,f=s.softNmsSigma,d=n;ne(a,"NonMaxSuppressionWithScore");var h=yg(d.data.get(a.dataId).values,d.data.get(i.dataId).values,u,c,l,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n;ne(r,"square");for(var a=o.data.get(r.dataId).values,i=new Float32Array(a.length),s=0;s<a.length;++s){var u=a[s];i[s]=u*u}return{dataId:o.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:$u,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,a=r.b,i=n;ne([o,a],$u);var s=i.data.get(o.dataId).values,u=i.data.get(a.dataId).values,c=function(d,h,p,m,g,v){var x=Pe(d,h),y=x.length,b=Ar(x),w=Ji(g,ge(x)),C=d.length,E=h.length,S=Ar(d),k=Ar(h),_=vo(d,x),A=vo(h,x);if(_.length+A.length===0)for(var D=0;D<w.length;++D)w[D]=v(p[D%p.length],m[D%m.length]);else{var T=function(W){var $=IE(W,y,b),q=$.slice(-C);_.forEach(function(G){return q[G]=0});var X=Q0(q,C,S),P=$.slice(-E);A.forEach(function(G){return P[G]=0});var V=Q0(P,E,k);w[W]=v(p[X],m[V])};for(D=0;D<w.length;++D)T(D)}return[w,x]}(o.shape,a.shape,s,u,o.dtype,function(d,h){var p=d-h;return p*p}),l=c[0],f=c[1];return{dataId:i.write(l,f,o.dtype),shape:f,dtype:o.dtype}}}];ep<e2.length;ep++)jm(e2[ep]);var li,B5=function(e){this.variableNames=["A"];var t=dn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+n+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},T5=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=dn(),n=e[0],r=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+n+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var tp=0,t2=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs,o=t.pixels,a=r.numChannels,i=typeof HTMLVideoElement<"u"&&o instanceof HTMLVideoElement,s=typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement,u=i?[o.videoWidth,o.videoHeight]:[o.width,o.height],c=u[0],l=u[1],f=[l,c],d=[l,c,a];(s||i)&&(li==null&&(li=document.createElement("canvas").getContext("2d")),li.canvas.width=c,li.canvas.height=l,li.drawImage(o,0,0,c,l),o=li.canvas);var h=n.makeTensorInfo(f,"int32");n.texData.get(h.dataId).usage=jn.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),o);var p=ee().getBool("WEBGL_PACK")?new T5(d):new B5(d),m=n.runWebGLProgram(p,[h],"int32");return n.disposeData(h.dataId),m}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=e.attrs;hf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var o=t,a=o.boxes,i=o.scores,s=r,u=s.maxOutputSize,c=s.iouThreshold,l=s.scoreThreshold,f=s.softNmsSigma,d=n,h=yg(d.readSync(a.dataId),d.readSync(i.dataId),u,c,l,f);return[h.selectedIndices,h.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t.x,o=n,a=new Fe(r.shape,"return x * x;");return o.runWebGLProgram(a,[r],r.dtype)}},{kernelName:$u,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,n=e.backend,r=t,o=r.a,a=r.b,i=n,s=ee().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new so("return (a - b) * (a - b);",o.shape,a.shape):new mt("return (a - b) * (a - b);",o.shape,a.shape);return i.compileAndRun(s,[o,a])}}];tp<t2.length;tp++)jm(t2[tp]);for(var np=0,n2=[{kernelName:"Square",gradFunc:function(e,t){var n=t[0];return{x:function(){return e.mul(n.toFloat().mul(2))}}}},{kernelName:$u,gradFunc:function(e,t){var n=t[0],r=t[1],o=ue(2);return{a:function(){return nn(e,nn(o,Ot(n,r)))},b:function(){return nn(e,nn(o,Ot(r,n)))}}}}];np<n2.length;np++)bE(n2[np]);var P5=function(){function e(){}return e.prototype.fetch=function(t,n){return fetch(t,n)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return new TextDecoder(n).decode(t)},e}();ee().get("IS_BROWSER")&&ee().setPlatform("browser",new P5);var rp,N5=function(){return require("node-fetch")},O5=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,n){return ee().global.fetch!=null?ee().global.fetch(t,n):(rp==null&&(rp=N5()),rp(t,n))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(t)},e.prototype.decode=function(t,n){return t.length===0?"":new this.util.TextDecoder(n).decode(t)},e}();ee().get("IS_NODE")&&ee().setPlatform("node",new O5);var lv={float32:4,int32:4,uint16:2,uint8:1,bool:1},wf=4;function TS(e,t){for(var n={},r=0,o=function(s){var u=s.name,c=s.dtype,l=s.shape,f=ge(l),d=void 0;if("quantization"in s){var h=s.quantization;if(h.dtype!=="uint8"&&h.dtype!=="uint16")throw new Error("Weight "+s.name+" has unknown quantization dtype "+h.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var p=lv[h.dtype],m=e.slice(r,r+f*p),g=h.dtype==="uint8"?new Uint8Array(m):new Uint16Array(m);if(c==="float32")d=Float32Array.from(g,function(C){return C*h.scale+h.min});else{if(c!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+c);d=Int32Array.from(g,function(C){return Math.round(C*h.scale+h.min)})}r+=f*p}else if(c==="string"){var v=ge(s.shape);d=[];for(var x=0;x<v;x++){var y=new Uint32Array(e.slice(r,r+wf))[0];r+=wf;var b=new Uint8Array(e.slice(r,r+y));d.push(b),r+=y}}else{var w=lv[c];if(m=e.slice(r,r+f*w),c==="float32")d=new Float32Array(m);else if(c==="int32")d=new Int32Array(m);else{if(c!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+c);d=new Uint8Array(m)}r+=f*w}n[u]=Gt(d,l,c)},a=0,i=t;a<i.length;a++)o(i[a]);return n}function M5(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach(function(a){if(t+=a.byteLength,n.push(a.byteLength===a.buffer.byteLength?a:new a.constructor(a)),!(a instanceof Float32Array||a instanceof Int32Array||a instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+a.constructor.name)});var r=new Uint8Array(t),o=0;return n.forEach(function(a){r.set(new Uint8Array(a.buffer),o),o+=a.byteLength}),r.buffer}var fv=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function r2(e){return fv?Buffer.byteLength(e):new Blob([e]).size}function Xg(e){var t=0;e.forEach(function(o){t+=o.byteLength});var n=new Uint8Array(t),r=0;return e.forEach(function(o){n.set(new Uint8Array(o),r),r+=o.byteLength}),n.buffer}function o2(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function xc(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:r2(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:r2(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var qn=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var o=[];return(n==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(a){var i=a(t,r);i!==null&&o.push(i)}),o},e}(),Wi="://",aa=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,n){I(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(Wi)&&(t=t.slice(0,t.indexOf(Wi))),I(t.length>0,function(){return"scheme must not be an empty string."});var r=e.getInstance();I(r.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),r.managers[t]=n},e.getManager=function(t){var n=this.getInstance().managers[t];if(n==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return n},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function Tl(e){if(e.indexOf(Wi)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+aa.getSchemes().join(","));return{scheme:e.split(Wi)[0],path:e.split(Wi)[1]}}function a2(e,t,n){return n===void 0&&(n=!1),ve(this,void 0,void 0,function(){var r,o,a,i,s,u,c,l,f;return me(this,function(d){switch(d.label){case 0:return I(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),I((r=qn.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),I(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."}),o=r[0],I((a=qn.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),I(a.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."}),i=a[0],s=Tl(e).scheme,u=Tl(e).path,c=s===Tl(e).scheme,[4,o.load()];case 1:return l=d.sent(),n&&c?[4,aa.getManager(s).removeModel(u)]:[3,3];case 2:d.sent(),d.label=3;case 3:return[4,i.save(l)];case 4:return f=d.sent(),!n||c?[3,6]:[4,aa.getManager(s).removeModel(u)];case 5:d.sent(),d.label=6;case 6:return[2,f.modelArtifactsInfo]}})})}var Na="models_store",Xo="model_info_store";function PS(){if(!ee().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function dv(e){var t=e.result;t.createObjectStore(Na,{keyPath:"modelPath"}),t.createObjectStore(Xo,{keyPath:"modelPath"})}var zi=function(){function e(t){if(this.indexedDB=PS(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return ve(this,void 0,void 0,function(){return me(this,function(n){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return ve(this,void 0,void 0,function(){return me(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,n){var r=this;return new Promise(function(o,a){var i=r.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return dv(i)},i.onsuccess=function(){var s=i.result;if(n==null){var u=s.transaction(Na,"readonly"),c=u.objectStore(Na).get(r.modelPath);c.onsuccess=function(){if(c.result==null)return s.close(),a(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));o(c.result.modelArtifacts)},c.onerror=function(m){return s.close(),a(c.error)},u.oncomplete=function(){return s.close()}}else{var l,f=xc(n),d=s.transaction(Xo,"readwrite"),h=d.objectStore(Xo),p=h.put({modelPath:r.modelPath,modelArtifactsInfo:f});p.onsuccess=function(){var m=(l=s.transaction(Na,"readwrite")).objectStore(Na).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:f});m.onsuccess=function(){return o({modelArtifactsInfo:f})},m.onerror=function(g){var v=(h=d.objectStore(Xo)).delete(r.modelPath);v.onsuccess=function(){return s.close(),a(m.error)},v.onerror=function(x){return s.close(),a(m.error)}}},p.onerror=function(m){return s.close(),a(p.error)},d.oncomplete=function(){l==null?s.close():l.oncomplete=function(){return s.close()}}}},i.onerror=function(s){return a(i.error)}})},e.URL_SCHEME="indexeddb://",e}(),i2=function(e){return ee().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(zi.URL_SCHEME)?(t=e.slice(zi.URL_SCHEME.length),new zi(t)):null;var t};qn.registerSaveRouter(i2),qn.registerLoadRouter(i2);var L5=function(){function e(){this.indexedDB=PS()}return e.prototype.listModels=function(){return ve(this,void 0,void 0,function(){var t=this;return me(this,function(n){return[2,new Promise(function(r,o){var a=t.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return dv(a)},a.onsuccess=function(){var i=a.result,s=i.transaction(Xo,"readonly"),u=s.objectStore(Xo).getAll();u.onsuccess=function(){for(var c={},l=0,f=u.result;l<f.length;l++){var d=f[l];c[d.modelPath]=d.modelArtifactsInfo}r(c)},u.onerror=function(c){return i.close(),o(u.error)},s.oncomplete=function(){return i.close()}},a.onerror=function(i){return o(a.error)}})]})})},e.prototype.removeModel=function(t){return ve(this,void 0,void 0,function(){var n=this;return me(this,function(r){var o;return t=(o=t).startsWith(zi.URL_SCHEME)?o.slice(zi.URL_SCHEME.length):o,[2,new Promise(function(a,i){var s=n.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return dv(s)},s.onsuccess=function(){var u,c=s.result,l=c.transaction(Xo,"readwrite"),f=l.objectStore(Xo),d=f.get(t);d.onsuccess=function(){if(d.result==null)return c.close(),i(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var h=f.delete(t),p=function(){var m=(u=c.transaction(Na,"readwrite")).objectStore(Na).delete(t);m.onsuccess=function(){return a(d.result.modelArtifactsInfo)},m.onerror=function(g){return i(d.error)}};h.onsuccess=p,h.onerror=function(m){return p(),c.close(),i(d.error)}},d.onerror=function(h){return c.close(),i(d.error)},l.oncomplete=function(){u==null?c.close():u.oncomplete=function(){return c.close()}}},s.onerror=function(u){return i(s.error)}})]})})},e}();if(ee().getBool("IS_BROWSER"))try{aa.registerManager(zi.URL_SCHEME,new L5)}catch{}var fo="/",gi="tensorflowjs_models",NS="info",W5="model_topology",z5="weight_specs",$5="weight_data",U5="model_metadata";function OS(e){return{info:[gi,e,NS].join(fo),topology:[gi,e,W5].join(fo),weightSpecs:[gi,e,z5].join(fo),weightData:[gi,e,$5].join(fo),modelMetadata:[gi,e,U5].join(fo)}}function H5(e){var t=e.split(fo);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(fo)}var $i=function(){function e(t){if(!ee().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=OS(this.modelPath)}return e.prototype.save=function(t){return ve(this,void 0,void 0,function(){var n,r,o;return me(this,function(a){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(t.modelTopology),r=JSON.stringify(t.weightSpecs),o=xc(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,function(i){if(fv)return Buffer.from(i).toString("base64");for(var s=new Uint8Array(i),u="",c=0,l=s.length;c<l;c++)u+=String.fromCharCode(s[c]);return btoa(u)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:o}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+o.modelTopologyBytes+", weightSpecsBytes="+o.weightSpecsBytes+", weightDataBytes="+o.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return ve(this,void 0,void 0,function(){var t,n,r,o,a,i,s;return me(this,function(u){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(o=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=o,(a=this.LS.getItem(this.keys.modelMetadata))!=null&&(i=JSON.parse(a),n.format=i.format,n.generatedBy=i.generatedBy,n.convertedBy=i.convertedBy,n.userDefinedMetadata=i.userDefinedMetadata),(s=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(c){if(fv){var l=Buffer.from(c,"base64");return l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength)}for(var f=atob(c),d=new Uint8Array(f.length),h=0;h<f.length;++h)d.set([f.charCodeAt(h)],h);return d.buffer}(s),[2,n]})})},e.URL_SCHEME="localstorage://",e}(),s2=function(e){return ee().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith($i.URL_SCHEME)?(t=e.slice($i.URL_SCHEME.length),new $i(t)):null;var t};qn.registerSaveRouter(s2),qn.registerLoadRouter(s2);var V5=function(){function e(){I(ee().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),I(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return ve(this,void 0,void 0,function(){var t,n,r,o,a,i;return me(this,function(s){for(t={},n=gi+fo,r=fo+NS,o=0;o<this.LS.length;++o)(a=this.LS.key(o)).startsWith(n)&&a.endsWith(r)&&(i=H5(a),t[i]=JSON.parse(this.LS.getItem(a)));return[2,t]})})},e.prototype.removeModel=function(t){return ve(this,void 0,void 0,function(){var n,r;return me(this,function(o){var a;if(t=(a=t).startsWith($i.URL_SCHEME)?a.slice($i.URL_SCHEME.length):a,n=OS(t),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+t+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},e}();if(ee().getBool("IS_BROWSER"))try{aa.registerManager($i.URL_SCHEME,new V5)}catch{}var j5="model",G5=".json",q5=".weights.bin";function u2(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var op=function(){function e(t){if(!ee().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=j5),this.modelTopologyFileName=t+G5,this.weightDataFileName=t+q5}return e.prototype.save=function(t){return ve(this,void 0,void 0,function(){var n,r,o,a,i,s;return me(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:r},a=window.URL.createObjectURL(new Blob([JSON.stringify(o)],{type:"application/json"})),(i=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,i.href=a,[4,u2(function(){return i.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),t.weightData==null?[3,4]:((s=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,s.href=n,[4,u2(function(){return s.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:xc(t)}]}})})},e.URL_SCHEME="downloads://",e}(),K5=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return ve(this,void 0,void 0,function(){var t,n,r=this;return me(this,function(o){return t=this.files[0],n=this.files.slice(1),[2,new Promise(function(a,i){var s=new FileReader;s.onload=function(u){var c=JSON.parse(u.target.result),l=c.modelTopology;if(l!=null){n.length===0&&a({modelTopology:l});var f=c.weightsManifest;if(f!=null){var d;try{d=r.checkManifestAndWeightFiles(f,n)}catch(g){return void i(g)}var h=[],p=[],m=[];f.forEach(function(g){g.paths.forEach(function(v){p.push(v),m.push(null)}),h.push.apply(h,g.weights)}),f.forEach(function(g){g.paths.forEach(function(v){var x=new FileReader;x.onload=function(y){var b=y.target.result,w=p.indexOf(v);m[w]=b,m.indexOf(null)===-1&&a({modelTopology:l,weightSpecs:h,weightData:Xg(m),format:c.format,generatedBy:c.generatedBy,convertedBy:c.convertedBy,userDefinedMetadata:c.userDefinedMetadata})},x.onerror=function(y){return i("Failed to weights data from file of path '"+v+"'.")},x.readAsArrayBuffer(d[v])})})}else i(new Error("weightManifest field is missing from file "+t.name))}else i(new Error("modelTopology field is missing from file "+t.name))},s.onerror=function(u){return i("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},s.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,n){for(var r=[],o=n.map(function(u){return o2(u.name)}),a={},i=0,s=t;i<s.length;i++)s[i].paths.forEach(function(u){var c=o2(u);if(r.indexOf(c)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+c+"'");if(r.push(c),o.indexOf(c)===-1)throw new Error("Weight file with basename '"+c+"' is not provided.");a[u]=n[o.indexOf(c)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return a},e}();function c2(e,t,n,r){(function(a){I(a!=null&&Array.isArray(a)&&a.length>0,function(){return"promises must be a none empty array"})})(e),function(a,i){I(a>=0&&a<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+a}),I(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+i}),I(i>=a,function(){return"startFraction must be no more than endFraction, but got startFraction "+a+" and endFraction "+i})}(n=n??0,r=r??1);var o=0;return Promise.all(e.map(function(a){return a.then(function(i){var s=n+ ++o/e.length*(r-n);return t(s),i}),a}))}function MS(e,t){return ve(this,void 0,void 0,function(){var n,r,o,a,i,s,u,c,l;return me(this,function(f){switch(f.label){case 0:return t==null&&(t={}),n=t.fetchFunc==null?ee().platform.fetch:t.fetchFunc,r=e.map(function(d){return n(d,t.requestInit,{isBinary:!0})}),o=0,a=.5,t.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return i=f.sent(),[3,4];case 2:return[4,c2(r,t.onProgress,o,a)];case 3:i=f.sent(),f.label=4;case 4:return s=i.map(function(d){return d.arrayBuffer()}),u=.5,c=1,t.onProgress!=null?[3,6]:[4,Promise.all(s)];case 5:return l=f.sent(),[3,8];case 6:return[4,c2(s,t.onProgress,u,c)];case 7:l=f.sent(),f.label=8;case 8:return[2,l]}})})}function l2(e){var t=this;return function(n,r,o){return r===void 0&&(r=""),ve(t,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p;return me(this,function(m){switch(m.label){case 0:if(a=n.map(function(){return!1}),i={},s=o!=null?o.map(function(){return!1}):[],u=[],n.forEach(function(g,v){var x=0;g.weights.forEach(function(y){var b="quantization"in y?y.quantization.dtype:y.dtype,w=lv[b]*ge(y.shape),C=function(){a[v]=!0,i[v]==null&&(i[v]=[]),i[v].push({manifestEntry:y,groupOffset:x,sizeBytes:w})};o!=null?o.forEach(function(E,S){E===y.name&&(C(),s[S]=!0)}):C(),u.push(y.name),x+=w})}),!s.every(function(g){return g}))throw c=o.filter(function(g,v){return!s[v]}),new Error("Could not find weights in manifest with names: "+c.join(", ")+`. 
Manifest JSON has weights with names: `+u.join(", ")+".");return l=a.reduce(function(g,v,x){return v&&g.push(x),g},[]),f=[],l.forEach(function(g){n[g].paths.forEach(function(v){var x=r+(r.endsWith("/")?"":"/")+v;f.push(x)})}),[4,e(f)];case 1:return d=m.sent(),h={},p=0,l.forEach(function(g){for(var v=n[g].paths.length,x=0,y=0;y<v;y++)x+=d[p+y].byteLength;for(var b=new ArrayBuffer(x),w=new Uint8Array(b),C=0,E=0;E<v;E++){var S=new Uint8Array(d[p+E]);w.set(S,C),C+=S.byteLength}i[g].forEach(function(k){var _=TS(b.slice(k.groupOffset,k.groupOffset+k.sizeBytes),[k.manifestEntry]);for(var A in _)h[A]=_[A]}),p+=v}),[2,h]}})})}}qn.registerSaveRouter(function(e){return ee().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(op.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new op(t)}(e.slice(op.URL_SCHEME.length)):null});var LS=function(){function e(t,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(I(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=ee().platform.fetch,I(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&I(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return e.prototype.save=function(t){return ve(this,void 0,void 0,function(){var n,r,o,a;return me(this,function(i){switch(i.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],o={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(o)],{type:"application/json"}),"model.json"),t.weightData!=null&&n.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((a=i.sent()).ok)return[2,{modelArtifactsInfo:xc(t),responses:[a]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+a.status+".")}})})},e.prototype.load=function(){return ve(this,void 0,void 0,function(){var t,n,r,o,a,i,s,u,c,l,f,d;return me(this,function(h){switch(h.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=h.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");h.label=2;case 2:return h.trys.push([2,4,,5]),[4,t.json()];case 3:return n=h.sent(),[3,5];case 4:throw h.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(o=n.modelTopology,a=n.weightsManifest,i=n.generatedBy,s=n.convertedBy,u=n.format,c=n.userDefinedMetadata,o==null&&a==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return a==null?[3,7]:[4,this.loadWeights(a)];case 6:d=h.sent(),l=d[0],f=d[1],h.label=7;case 7:return[2,{modelTopology:o,weightSpecs:l,weightData:f,userDefinedMetadata:c,generatedBy:i,convertedBy:s,format:u}]}})})},e.prototype.loadWeights=function(t){return ve(this,void 0,void 0,function(){var n,r,o,a,i,s,u,c,l,f,d;return me(this,function(h){switch(h.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(p){var m=p.lastIndexOf("/"),g=p.lastIndexOf("?"),v=p.substring(0,m),x=g>m?p.substring(g):"";return[v+"/",x]}(n),o=r[0],a=r[1],i=this.weightPathPrefix||o,s=[],u=0,c=t;u<c.length;u++)l=c[u],s.push.apply(s,l.weights);return f=[],t.forEach(function(p){p.paths.forEach(function(m){f.push(i+m+a)})}),[4,MS(f,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[s,Xg(d)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function hv(e){return e.match(LS.URL_SCHEME_REGEX)!=null}var f2=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(n){return hv(n)}):hv(e))?pv(e,{onProgress:t}):null};function pv(e,t){return new LS(e,t)}qn.registerSaveRouter(f2),qn.registerLoadRouter(f2);var ap=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return ve(this,void 0,void 0,function(){return me(this,function(t){return[2,this.modelArtifacts]})})},e}(),X5=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return ve(this,void 0,void 0,function(){return me(this,function(n){return[2,this.saveHandler(t)]})})},e}(),Yg=Object.freeze({browserFiles:function(e){return new K5(e)},browserHTTPRequest:function(e,t){return pv(e,t)},concatenateArrayBuffers:Xg,decodeWeights:TS,encodeWeights:function(e,t){return ve(this,void 0,void 0,function(){var n,r,o,a,i,s=this;return me(this,function(u){switch(u.label){case 0:for(n=[],r=[],o=Array.isArray(e)?e.map(function(c){return c.name}):Object.keys(e),a=function(c){var l=o[c],f=Array.isArray(e)?e[c].tensor:e[l];if(f.dtype!=="float32"&&f.dtype!=="int32"&&f.dtype!=="bool"&&f.dtype!=="string")throw new Error("Unsupported dtype in weight '"+l+"': "+f.dtype);var d={name:l,shape:f.shape,dtype:f.dtype};if(f.dtype==="string"){var h=new Promise(function(p){return ve(s,void 0,void 0,function(){var m,g,v,x,y,b,w;return me(this,function(C){switch(C.label){case 0:return[4,f.bytes()];case 1:for(m=C.sent(),g=m.reduce(function(E,S){return E+S.length},0)+wf*m.length,v=new Uint8Array(g),x=0,y=0;y<m.length;y++)b=m[y],w=new Uint8Array(new Uint32Array([b.length]).buffer),v.set(w,x),x+=wf,v.set(b,x),x+=b.length;return p(v),[2]}})})});r.push(h)}else r.push(f.data());t!=null&&(d.group=t),n.push(d)},i=0;i<o.length;++i)a(i);return[4,Promise.all(r)];case 1:return[2,{data:M5(u.sent()),specs:n}]}})})},fromMemory:function(e,t,n,r){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new ap(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ap({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new ap({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return qn.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:xc,getSaveHandlers:function(e){return qn.getSaveHandlers(e)},http:pv,isHTTPScheme:hv,loadWeights:function(e,t,n,r){return t===void 0&&(t=""),ve(this,void 0,void 0,function(){return me(this,function(o){return[2,l2(function(a){return MS(a,{requestInit:r})})(e,t,n)]})})},registerLoadRouter:function(e){return qn.registerLoadRouter(e)},registerSaveRouter:function(e){return qn.registerSaveRouter(e)},weightsLoaderFactory:l2,withSaveHandler:function(e){return new X5(e)},copyModel:function(e,t){return ve(this,void 0,void 0,function(){return me(this,function(n){return[2,a2(e,t,!1)]})})},listModels:function(){return ve(this,void 0,void 0,function(){var e,t,n,r,o,a,i;return me(this,function(s){switch(s.label){case 0:e=aa.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(o=r[n],[4,aa.getManager(o).listModels()]):[3,4];case 2:for(i in a=s.sent())t[o+Wi+i]=a[i];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return ve(this,void 0,void 0,function(){return me(this,function(n){return[2,a2(e,t,!0)]})})},removeModel:function(e){return ve(this,void 0,void 0,function(){var t;return me(this,function(n){return t=Tl(e),[2,aa.getManager(t.scheme).removeModel(t.path)]})})}}),fi,Y5=O({confusionMatrix_:function(e,t,n){var r=F(e,"labels","confusionMatrix"),o=F(t,"predictions","confusionMatrix");I(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),I(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),I(o.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+o.rank}),I(r.shape[0]===o.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+o.shape[0]+". Labels and predictions should have the same number of elements."}),I(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var a=pf(r.asType("int32"),n),i=pf(o.asType("int32"),n);return a.transpose().matMul(i).asType("int32")}}),Q5=Object.freeze({confusionMatrix:Y5}),Z5=O({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n=!1,r=!1,o=!1,a=!1,i=!1;if(e.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)o=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)a=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);i=!0}if(o&&o&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(Vm("FromPixels",N.backendName)!=null)return N.runKernel("FromPixels",{pixels:e},{numChannels:t});var s,u,c=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=c[0],f=c[1];if(i?s=e.getContext("2d").getImageData(0,0,l,f).data:r||n?s=e.data:(a||o)&&(fi==null&&(fi=document.createElement("canvas").getContext("2d")),fi.canvas.width=l,fi.canvas.height=f,fi.drawImage(e,0,0,l,f),s=fi.getImageData(0,0,l,f).data),t===4)u=new Int32Array(s);else{var d=l*f;u=new Int32Array(d*t);for(var h=0;h<d;h++)for(var p=0;p<t;++p)u[h*t+p]=s[4*h+p]}return Ad(u,[f,l,t],"int32")}}),Vd=Object.freeze({toPixels:function(e,t){return ve(this,void 0,void 0,function(){var n,r,o,a,i,s,u,c,l,f,d,h,p,m,g,v,x,y,b,w,C,E,S;return me(this,function(k){switch(k.label){case 0:if(n=F(e,"img","toPixels"),e instanceof Je||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),o=r[0],a=r[1],(i=n.rank===2?1:n.shape[2])>4||i===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+i);return[4,n.data()];case 1:return s=k.sent(),u=n.min(),c=n.max(),[4,Promise.all([u.data(),c.data()])];case 2:if(l=k.sent(),f=l[0],d=l[1],h=f[0],p=d[0],u.dispose(),c.dispose(),n.dtype==="float32"){if(h<0||p>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+h+" - "+p+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(h<0||p>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+h+" - "+p+"].")}for(m=n.dtype==="float32"?255:1,g=new Uint8ClampedArray(a*o*4),v=0;v<o*a;++v)x=void 0,y=void 0,b=void 0,w=void 0,i===1?(x=s[v]*m,y=s[v]*m,b=s[v]*m,w=255):i===3?(x=s[3*v]*m,y=s[3*v+1]*m,b=s[3*v+2]*m,w=255):i===4&&(x=s[4*v]*m,y=s[4*v+1]*m,b=s[4*v+2]*m,w=s[4*v+3]*m),g[(C=4*v)+0]=Math.round(x),g[C+1]=Math.round(y),g[C+2]=Math.round(b),g[C+3]=Math.round(w);return t!=null&&(t.width=a,t.height=o,E=t.getContext("2d"),S=new ImageData(g,a,o),E.putImageData(S,0,0)),n!==e&&n.dispose(),[2,g]}})})},fromPixels:Z5}),WS=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,n){return new t(n)},e}(),zS=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function ya(e){I(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),I(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),I(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),zS.register(e)}var J5=Object.freeze({Serializable:WS,SerializationMap:zS,registerClass:ya}),eO=.001,$S=.1;function ip(){return N.backend.floatPrecision()===32?eO:$S}function sp(e,t,n){var r=!0;if((en(e)||en(t))&&(r=!1),en(e)&&en(t)&&(r=!0),r){var o=e.constructor.name,a=t.constructor.name;if(o!==a)throw new Error("Arrays are of different type. Actual: "+o+". Expected: "+a)}if(Array.isArray(e)&&Array.isArray(t)){var i=Zr(e),s=Zr(t);if(!Bt(i,s))throw new Error("Arrays have different shapes. Actual: ["+i+"]. Expected: ["+s+"]")}var u=en(e)?e:So(e),c=en(t)?t:So(t);if(u.length!==c.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+c.length+`.
Actual:   `+u+`.
Expected: `+c+".");for(var l=0;l<c.length;++l){var f=u[l],d=c[l];if(!n(f,d))throw new Error("Arrays differ: actual["+l+"] = "+f+", expected["+l+"] = "+d+`.
Actual:   `+u+`.
Expected: `+c+".")}}function up(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}var tO=Object.freeze({TEST_EPSILON_FLOAT16:$S,expectArraysClose:function(e,t,n){return n==null&&(n=ip()),sp(e,t,function(r,o){return up(r,o,n)})},testEpsilon:ip,expectPromiseToFail:function(e,t){e().then(function(){return t.fail()},function(){return t()})},expectArraysEqual:function(e,t){var n=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return Ko(e)||Ko(e[0])||Ko(t)||Ko(t[0])?sp(e,n,function(r,o){return r==o}):sp(e,t,function(r,o){return up(r,o,0)})},expectNumbersClose:function(e,t,n){if(n==null&&(n=ip()),!up(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),nO="1.7.0",rO=Object.freeze({gpgpu_util:bN,webgl_util:G8,forceHalfFloat:function(){ee().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:w4,setWebGLContext:OE,GPGPUContext:p4}),ba=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Br(t,e),t.prototype.minimize=function(n,r,o){r===void 0&&(r=!1);var a=this.computeGradients(n,o),i=a.value,s=a.grads;if(o!=null){var u=o.map(function(c){return{name:c.name,tensor:s[c.name]}});this.applyGradients(u)}else this.applyGradients(s);return Cn(s),r?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(n,r){return $_(n,r)},t.prototype.dispose=function(){this.iterations_!=null&&Cn(this.iterations_)},t.prototype.saveIterations=function(){return ve(this,void 0,void 0,function(){return me(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:ue(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){return me(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){return me(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(n){return ve(this,void 0,void 0,function(){var r;return me(this,function(o){switch(o.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=o.sent()[0],[2,n.slice(1)]}})})},t}(WS);Object.defineProperty(ba,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var Qg=function(e){function t(n,r,o){o===void 0&&(o=null);var a=e.call(this)||this;return a.learningRate=n,a.rho=r,a.epsilon=o,a.accumulatedGrads=[],a.accumulatedUpdates=[],o==null&&(a.epsilon=N.backend.epsilon()),a}return Br(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,a){var i=N.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accum_grad",variable:de(function(){return Le(i).variable(!1)})}),r.accumulatedUpdates[a]==null&&(r.accumulatedUpdates[a]={originalName:o+"/accum_var",variable:de(function(){return Le(i).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[a].variable,c=r.accumulatedUpdates[a].variable;de(function(){var l=u.mul(r.rho).add(s.square().mul(1-r.rho)),f=c.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(s),d=c.mul(r.rho).add(f.square().mul(1-r.rho));u.assign(l),c.assign(d);var h=f.mul(-r.learningRate).add(i);i.assign(h)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Cn(this.accumulatedGrads.map(function(n){return n.variable})),Cn(this.accumulatedUpdates.map(function(n){return n.variable})))},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){var n;return me(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){var r;return me(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},t.className="Adadelta",t}(ba);ya(Qg);var Zg=function(e){function t(n,r){r===void 0&&(r=.1);var o=e.call(this)||this;return o.learningRate=n,o.initialAccumulatorValue=r,o.accumulatedGrads=[],o}return Br(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,a){var i=N.registeredVariables[o];r.accumulatedGrads[a]==null&&(r.accumulatedGrads[a]={originalName:o+"/accumulator",variable:de(function(){return Dr(i.shape,r.initialAccumulatorValue).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedGrads[a].variable;de(function(){var c=u.add(s.square());u.assign(c);var l=s.div(c.add(N.backend.epsilon()).sqrt()).mul(-r.learningRate).add(i);i.assign(l)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&Cn(this.accumulatedGrads.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){return me(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},t.className="Adagrad",t}(ba);ya(Zg);var Jg=function(e){function t(n,r,o,a){a===void 0&&(a=null);var i=e.call(this)||this;return i.learningRate=n,i.beta1=r,i.beta2=o,i.epsilon=a,i.accumulatedFirstMoment=[],i.accumulatedSecondMoment=[],de(function(){i.accBeta1=ue(r).variable(),i.accBeta2=ue(o).variable()}),a==null&&(i.epsilon=N.backend.epsilon()),i}return Br(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);de(function(){var a=Ot(1,r.accBeta1),i=Ot(1,r.accBeta2);o.forEach(function(s,u){var c=N.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:de(function(){return Le(c).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:s+"/v",variable:de(function(){return Le(c).variable(!1)})});var l=Array.isArray(n)?n[u].tensor:n[s];if(l!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedSecondMoment[u].variable,h=f.mul(r.beta1).add(l.mul(1-r.beta1)),p=d.mul(r.beta2).add(l.square().mul(1-r.beta2)),m=h.div(a),g=p.div(i);f.assign(h),d.assign(p);var v=m.div(g.sqrt().add(r.epsilon)).mul(-r.learningRate).add(c);c.assign(v)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Cn(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Cn(this.accumulatedSecondMoment.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){var n;return me(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){var r,o=this;return me(this,function(a){switch(a.label){case 0:return[4,this.extractIterations(n)];case 1:return n=a.sent(),de(function(){o.accBeta1.assign(Hu(o.beta1,o.iterations_+1)),o.accBeta2.assign(Hu(o.beta2,o.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},t.className="Adam",t}(ba);ya(Jg);var e1=function(e){function t(n,r,o,a,i){a===void 0&&(a=null),i===void 0&&(i=0);var s=e.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=o,s.epsilon=a,s.decay=i,s.accumulatedFirstMoment=[],s.accumulatedWeightedInfNorm=[],de(function(){s.iteration=ue(0).variable(),s.accBeta1=ue(r).variable()}),a==null&&(s.epsilon=N.backend.epsilon()),s}return Br(t,e),t.prototype.applyGradients=function(n){var r=this,o=Array.isArray(n)?n.map(function(a){return a.name}):Object.keys(n);de(function(){var a=Ot(1,r.accBeta1),i=sr(-r.learningRate,r.iteration.mul(r.decay).add(1));o.forEach(function(s,u){var c=N.registeredVariables[s];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:s+"/m",variable:Le(c).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:s+"/v",variable:Le(c).variable(!1)});var l=Array.isArray(n)?n[u].tensor:n[s];if(l!=null){var f=r.accumulatedFirstMoment[u].variable,d=r.accumulatedWeightedInfNorm[u].variable,h=f.mul(r.beta1).add(l.mul(1-r.beta1)),p=d.mul(r.beta2),m=l.abs(),g=p.maximum(m);f.assign(h),d.assign(g);var v=i.div(a).mul(h.div(g.add(r.epsilon))).add(c);c.assign(v)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Cn(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Cn(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){return me(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){return me(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},t.className="Adamax",t}(ba);ya(e1);var jd=function(e){function t(n){var r=e.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Br(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,a){var i=Array.isArray(n)?n[a].tensor:n[o];if(i!=null){var s=N.registeredVariables[o];de(function(){var u=r.c.mul(i).add(s);s.assign(u)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=s_(ue(-n))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){return me(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(n,r){return new n(r.learningRate)},t.className="SGD",t}(ba);ya(jd);var t1=function(e){function t(n,r,o){o===void 0&&(o=!1);var a=e.call(this,n)||this;return a.learningRate=n,a.momentum=r,a.useNesterov=o,a.accumulations=[],a.m=ue(a.momentum),a}return Br(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,a){var i=N.registeredVariables[o];r.accumulations[a]==null&&(r.accumulations[a]={originalName:o+"/momentum",variable:de(function(){return Le(i).variable(!1)})});var s=r.accumulations[a].variable,u=Array.isArray(n)?n[a].tensor:n[o];u!=null&&de(function(){var c,l=r.m.mul(s).add(u);c=r.useNesterov?r.c.mul(u.add(l.mul(r.m))).add(i):r.c.mul(l).add(i),s.assign(l),i.assign(c)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Cn(this.accumulations.map(function(n){return n.variable}))},t.prototype.setMomentum=function(n){this.momentum=n},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){return me(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},t.className="Momentum",t}(jd);ya(t1);var n1=function(e){function t(n,r,o,a,i){r===void 0&&(r=.9),o===void 0&&(o=0),a===void 0&&(a=null),i===void 0&&(i=!1);var s=e.call(this)||this;if(s.learningRate=n,s.decay=r,s.momentum=o,s.epsilon=a,s.accumulatedMeanSquares=[],s.accumulatedMoments=[],s.accumulatedMeanGrads=[],s.centered=i,a==null&&(s.epsilon=N.backend.epsilon()),n==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return s}return Br(t,e),t.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n)).forEach(function(o,a){var i=N.registeredVariables[o];r.accumulatedMeanSquares[a]==null&&(r.accumulatedMeanSquares[a]={originalName:o+"/rms",variable:de(function(){return Le(i).variable(!1)})}),r.accumulatedMoments[a]==null&&(r.accumulatedMoments[a]={originalName:o+"/momentum",variable:de(function(){return Le(i).variable(!1)})}),r.accumulatedMeanGrads[a]==null&&r.centered&&(r.accumulatedMeanGrads[a]={originalName:o+"/mg",variable:de(function(){return Le(i).variable(!1)})});var s=Array.isArray(n)?n[a].tensor:n[o];if(s!=null){var u=r.accumulatedMeanSquares[a].variable,c=r.accumulatedMoments[a].variable;de(function(){var l=u.mul(r.decay).add(s.square().mul(1-r.decay));if(r.centered){var f=r.accumulatedMeanGrads[a].variable,d=f.mul(r.decay).add(s.mul(1-r.decay)),h=c.mul(r.momentum).add(s.mul(r.learningRate).div(l.sub(d.square().add(r.epsilon)).sqrt()));u.assign(l),f.assign(d),c.assign(h);var p=i.sub(h);i.assign(p)}else{var m=u.mul(r.decay).add(s.square().mul(1-r.decay));h=c.mul(r.momentum).add(s.mul(r.learningRate).div(m.add(r.epsilon).sqrt())),u.assign(m),c.assign(h),p=i.sub(h),i.assign(p)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Cn(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Cn(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Cn(this.accumulatedMoments.map(function(n){return n.variable}))},t.prototype.getWeights=function(){return ve(this,void 0,void 0,function(){var n;return me(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(o){return{name:o.originalName,tensor:o.variable}}))]}})})},t.prototype.setWeights=function(n){return ve(this,void 0,void 0,function(){var r;return me(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},t.className="RMSProp",t}(ba);ya(n1);var Sa=function(){function e(){}return e.sgd=function(t){return new jd(t)},e.momentum=function(t,n,r){return r===void 0&&(r=!1),new t1(t,n,r)},e.rmsprop=function(t,n,r,o,a){return n===void 0&&(n=.9),r===void 0&&(r=0),o===void 0&&(o=null),a===void 0&&(a=!1),new n1(t,n,r,o,a)},e.adam=function(t,n,r,o){return t===void 0&&(t=.001),n===void 0&&(n=.9),r===void 0&&(r=.999),o===void 0&&(o=null),new Jg(t,n,r,o)},e.adadelta=function(t,n,r){return t===void 0&&(t=.001),n===void 0&&(n=.95),r===void 0&&(r=null),new Qg(t,n,r)},e.adamax=function(t,n,r,o,a){return t===void 0&&(t=.002),n===void 0&&(n=.9),r===void 0&&(r=.999),o===void 0&&(o=null),a===void 0&&(a=0),new e1(t,n,r,o,a)},e.adagrad=function(t,n){return n===void 0&&(n=.1),new Zg(t,n)},e}(),oO={sgd:Sa.sgd,momentum:Sa.momentum,adadelta:Sa.adadelta,adagrad:Sa.adagrad,rmsprop:Sa.rmsprop,adamax:Sa.adamax,adam:Sa.adam},aO=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(e){return e()};function iO(){return new Promise(function(e){return aO(function(){return e()})})}Je.prototype.squaredDifference=function(e){return _g(this,e)},J=F5;const UL=Object.freeze(Object.defineProperty({__proto__:null,AdadeltaOptimizer:Qg,AdagradOptimizer:Zg,AdamOptimizer:Jg,AdamaxOptimizer:e1,DataStorage:hg,get ENV(){return Hm},Environment:xE,KernelBackend:pg,MomentumOptimizer:t1,Optimizer:ba,RMSPropOptimizer:n1,get Rank(){return Z0},get Reduction(){return tn},SGDOptimizer:jd,Tensor:Je,TensorBuffer:es,Variable:ja,abs:E4,acos:_4,acosh:S4,add:Ie,addN:l3,addStrict:f3,all:oS,any:aS,argMax:iS,argMin:sS,asin:k4,asinh:A4,atan:D4,atan2:d3,atanh:R4,avgPool:gs,avgPool3d:J3,backend:u6,backend_util:S6,basicLSTMCell:mS,batchNorm:Ag,batchNorm2d:a3,batchNorm3d:i3,batchNorm4d:s3,batchNormalization:o3,batchNormalization2d:t3,batchNormalization3d:n3,batchNormalization4d:r3,batchToSpaceND:og,booleanMaskAsync:T3,broadcastTo:y_,browser:Vd,buffer:Se,cast:b_,ceil:F4,clipByValue:Td,clone:w_,complex:Ht,concat:Tt,concat1d:p_,concat2d:v_,concat3d:m_,concat4d:g_,conv1d:O3,conv2d:tr,conv2dTranspose:$3,conv3d:M3,conv3dTranspose:U3,cos:I4,cosh:B4,cumsum:C_,customGrad:fc,deprecationWarn:eg,depthToSpace:E_,depthwiseConv2d:vc,diag:SS,disableDeprecationWarnings:X8,dispose:Cn,disposeVariables:Y8,div:sr,divNoNan:h3,divStrict:p3,dot:H3,dropout:kS,elu:Lg,enableDebugMode:K8,enableProdMode:q8,engine:Q8,env:ee,equal:Bg,equalStrict:E3,erf:T4,exp:bf,expandDims:$n,expm1:P4,eye:ag,fft:Ld,fill:Dr,findBackend:a6,findBackendFactory:i6,floor:N4,floorDiv:Fg,frame:$d,fused:BS,gather:Od,gatherND:_S,gather_util:x6,getBackend:r6,getGradient:yE,getKernel:Vm,getKernelsForBackend:K0,grad:w6,grads:C6,greater:_3,greaterEqual:Tg,greaterEqualStrict:S3,greaterStrict:k3,hammingWindow:Hg,hannWindow:zd,ifft:Vu,imag:_r,image:Hd,inTopKAsync:RS,io:Yg,irfft:Ug,isFinite:V4,isInf:H4,isNaN:U4,keep:s_,leakyRelu:hS,less:A3,lessEqual:D3,lessEqualStrict:R3,lessStrict:F3,linalg:IS,linspace:h_,localResponseNormalization:vS,log:O4,log1p:M4,logSigmoid:L4,logSoftmax:U_,logSumExp:uS,logicalAnd:pc,logicalNot:u3,logicalOr:Dg,logicalXor:c3,losses:FS,matMul:mc,math:Q5,max:gc,maxPool:Wt,maxPool3d:Z3,maximum:Nd,maximumStrict:v3,mean:cS,memory:Z8,min:lS,minimum:Ig,minimumStrict:m3,mod:g3,modStrict:x3,moments:fS,movingAverage:xS,mul:nn,mulStrict:y3,multiRNNCell:gS,multinomial:__,neg:Uu,nextFrame:iO,norm:$g,notEqual:I3,notEqualStrict:B3,oneHot:pf,ones:Za,onesLike:ng,op:O,outerProduct:V3,pad:ga,pad1d:S_,pad2d:k_,pad3d:A_,pad4d:D_,pool:Q3,pow:Hu,powStrict:b3,prelu:Wg,print:x_,prod:dS,profile:J8,rand:R_,randomGamma:I_,randomNormal:F_,randomUniform:ig,range:Mu,ready:n6,real:Hn,reciprocal:W4,registerBackend:s6,registerGradient:bE,registerKernel:jm,relu:lt,relu6:zg,removeBackend:o6,reshape:cr,reverse:ms,reverse1d:j3,reverse2d:G3,reverse3d:q3,reverse4d:K3,rfft:Wd,round:z4,rsqrt:Sg,scalar:ue,scatterND:wS,scatter_util:y6,selu:pS,separableConv2d:Md,serialization:J5,setBackend:t6,setPlatform:c6,setdiff1dAsync:T_,sigmoid:kg,sign:$4,signal:DS,sin:j4,sinh:G4,slice:Ir,slice1d:eS,slice2d:tS,slice3d:Og,slice4d:nS,slice_util:b6,softmax:ro,softplus:q4,spaceToBatchND:sg,sparseToDense:ES,spectral:CS,split:Dd,sqrt:K4,square:C4,squaredDifference:_g,squaredDifferenceStrict:w3,squeeze:ug,stack:Nn,step:X4,stft:Vg,stridedSlice:yS,sub:Ot,subStrict:C3,sum:Mg,sumOutType:kl,tan:Y4,tanh:Q4,tensor:Gt,tensor1d:kt,tensor2d:xo,tensor3d:Ad,tensor4d:bn,tensor5d:l_,tensor6d:f_,tensor_util:$8,test_util:tO,tidy:de,tile:Wa,time:e6,topk:bS,train:oO,transpose:ko,truncatedNormal:B_,unregisterGradient:N8,unregisterKernel:P8,unsortedSegmentSum:Pg,unstack:Pt,util:O8,valueAndGrad:E6,valueAndGrads:_6,variable:d_,variableGrads:$_,version_core:nO,webgl:rO,where:fa,whereAsync:Rg,zeros:tt,zerosLike:Le},Symbol.toStringTag,{value:"Module"}));function ka(e,t,n){if(n===void 0&&(n=!1),e.beginPath(),t.slice(1).forEach(function(a,i){var s=a.x,u=a.y,c=t[i];e.moveTo(c.x,c.y),e.lineTo(s,u)}),n){var r=t[t.length-1],o=t[0];if(!r||!o)return;e.moveTo(r.x,r.y),e.lineTo(o.x,o.y)}e.stroke()}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var vv=function(e,t){return vv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o])},vv(e,t)};function ke(e,t){vv(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var fn=function(){return fn=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},fn.apply(this,arguments)};function ye(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function s(l){try{c(r.next(l))}catch(f){i(f)}}function u(l){try{c(r.throw(l))}catch(f){i(f)}}function c(l){l.done?a(l.value):o(l.value).then(s,u)}c((r=r.apply(e,[])).next())})}function be(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,i;return i={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function s(c){return function(l){return u([c,l])}}function u(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(a=c[0]&2?o.return:c[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,c[1])).done)return a;switch(o=0,a&&(c=[c[0]&2,a.value]),c[0]){case 0:case 1:a=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,o=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!a||c[1]>a[0]&&c[1]<a[3])){n.label=c[1];break}if(c[0]===6&&n.label<a[1]){n.label=a[1],a=c;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(c);break}a[2]&&n.ops.pop(),n.trys.pop();continue}c=t.call(e,n)}catch(l){c=[6,l],o=0}finally{r=a=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function iu(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),o=0,t=0;t<n;t++)for(var a=arguments[t],i=0,s=a.length;i<s;i++,o++)r[o]=a[i];return r}var Ui=function(){function e(t,n){if(!ia(t)||!ia(n))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:n}));this._width=t,this._height=n}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function xs(e,t){return e instanceof Je&&e.shape.length===t}function sO(e){return xs(e,1)}function US(e){return xs(e,2)}function yc(e){return xs(e,3)}function yo(e){return xs(e,4)}function HS(e){return e%1!==0}function mv(e){return e%2===0}function VS(e,t){t===void 0&&(t=2);var n=Math.pow(10,t);return Math.floor(e*n)/n}function gv(e){return e&&e.width&&e.height}function jS(e,t){var n=e.width,r=e.height,o=t/Math.max(r,n);return new Ui(Math.round(n*o),Math.round(r*o))}function Gd(e){return e.reduce(function(t,n){return t.add(n)},new Ge(0,0)).div(new Ge(e.length,e.length))}function ns(e,t,n){return Array(e).fill(0).map(function(r,o){return t+o*n})}function ia(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function Cf(e){return ia(e)&&0<=e&&e<=1}const HL=Object.freeze(Object.defineProperty({__proto__:null,computeReshapedDimensions:jS,getCenterPoint:Gd,isDimensions:gv,isEven:mv,isFloat:HS,isTensor:xs,isTensor1D:sO,isTensor2D:US,isTensor3D:yc,isTensor4D:yo,isValidNumber:ia,isValidProbablitiy:Cf,range:ns,round:VS},Symbol.toStringTag,{value:"Module"}));var Ge=function(){function e(t,n){this._x=t,this._y=n}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),Ao=function(){function e(t,n){n===void 0&&(n=!0);var r=t||{},o=[r.left,r.top,r.right,r.bottom].every(ia),a=[r.x,r.y,r.width,r.height].every(ia);if(!a&&!o)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var i=a?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],s=i[0],u=i[1],c=i[2],l=i[3];e.assertIsValidBox({x:s,y:u,width:c,height:l},"Box.constructor",n),this._x=s,this._y=u,this._width=c,this._height=l}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(ia)},e.assertIsValidBox=function(t,n,r){if(r===void 0&&(r=!1),!e.isRect(t))throw new Error(n+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!r&&(t.width<0||t.height<0))throw new Error(n+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new Ge(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new Ge(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new Ge(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new Ge(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(i){return Math.round(i)}),n=t[0],r=t[1],o=t[2],a=t[3];return new e({x:n,y:r,width:o,height:a})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(i){return Math.floor(i)}),n=t[0],r=t[1],o=t[2],a=t[3];return new e({x:n,y:r,width:o,height:a})},e.prototype.toSquare=function(){var t=this,n=t.x,r=t.y,o=t.width,a=t.height,i=Math.abs(o-a);return o<a&&(n-=i/2,o+=i),a<o&&(r-=i/2,a+=i),new e({x:n,y:r,width:o,height:a})},e.prototype.rescale=function(t){var n=gv(t)?t.width:t,r=gv(t)?t.height:t;return new e({x:this.x*n,y:this.y*r,width:this.width*n,height:this.height*r})},e.prototype.pad=function(t,n){var r=[this.x-t/2,this.y-n/2,this.width+t,this.height+n],o=r[0],a=r[1],i=r[2],s=r[3];return new e({x:o,y:a,width:i,height:s})},e.prototype.clipAtImageBorders=function(t,n){var r=this,o=r.x,a=r.y,i=r.right,s=r.bottom,u=Math.max(o,0),c=Math.max(a,0),l=i-u,f=s-c,d=Math.min(l,t-u),h=Math.min(f,n-c);return new e({x:u,y:c,width:d,height:h}).floor()},e.prototype.shift=function(t,n){var r=this,o=r.width,a=r.height,i=this.x+t,s=this.y+n;return new e({x:i,y:s,width:o,height:a})},e.prototype.padAtBorders=function(t,n){var r=this.width+1,o=this.height+1,a=1,i=1,s=r,u=o,c=this.left,l=this.top,f=this.right,d=this.bottom;return f>n&&(s=-f+n+r,f=n),d>t&&(u=-d+t+o,d=t),c<1&&(u=2-c,c=1),l<1&&(u=2-l,l=1),{dy:i,edy:u,dx:a,edx:s,y:l,ey:d,x:c,ex:f,w:r,h:o}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),qd=function(e){ke(t,e);function t(n,r,o,a,i){return i===void 0&&(i=!1),e.call(this,{left:n,top:r,right:o,bottom:a},i)||this}return t}(Ao),GS=function(){function e(t,n,r,o,a){this._imageDims=new Ui(a.width,a.height),this._score=t,this._classScore=n,this._className=r,this._box=new Ao(o).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new Ao(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:n})},e}(),oo=function(e){ke(t,e);function t(n,r,o){return e.call(this,n,n,"",r,o)||this}return t.prototype.forSize=function(n,r){var o=e.prototype.forSize.call(this,n,r),a=o.score,i=o.relativeBox,s=o.imageDims;return new t(a,i,s)},t}(GS);function uO(e,t,n){n===void 0&&(n=!0);var r=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),o=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),a=r*o;return n?a/(e.area+t.area-a):a/Math.min(e.area,t.area)}function cO(e){var t=e.map(function(s){return s.x}),n=e.map(function(s){return s.y}),r=t.reduce(function(s,u){return u<s?u:s},1/0),o=n.reduce(function(s,u){return u<s?u:s},1/0),a=t.reduce(function(s,u){return s<u?u:s},0),i=n.reduce(function(s,u){return s<u?u:s},0);return new qd(r,o,a,i)}function ju(e,t,n,r){r===void 0&&(r=!0);for(var o=t.map(function(s,u){return{score:s,boxIndex:u}}).sort(function(s,u){return s.score-u.score}).map(function(s){return s.boxIndex}),a=[],i=function(){var s=o.pop();a.push(s);for(var u=o,c=[],l=0;l<u.length;l++){var f=u[l],d=e[s],h=e[f];c.push(uO(d,h,r))}o=o.filter(function(p,m){return c[m]<=n})};o.length>0;)i();return a}function bc(e,t){return de(function(){var n=t[0],r=t[1],o=t[2],a=Dr(iu(e.shape.slice(0,3),[1]),n),i=Dr(iu(e.shape.slice(0,3),[1]),r),s=Dr(iu(e.shape.slice(0,3),[1]),o),u=Tt([a,i,s],3);return Ot(e,u)})}function lO(e,t){return t===void 0&&(t=!1),de(function(){var n=e.shape.slice(1),r=n[0],o=n[1];if(r===o)return e;var a=Math.abs(r-o),i=Math.round(a*(t?.5:1)),s=r>o?2:1,u=function(h){var p=e.shape.slice();return p[s]=h,Dr(p,0)},c=u(i),l=a-c.shape[s],f=t&&l?u(l):null,d=[f,e,c].filter(function(h){return!!h}).map(function(h){return h.toFloat()});return Tt(d,s)})}function cp(e){return 1/(1+Math.exp(-e))}function VL(e){return Math.log(e/(1-e))}var r1=function(e){ke(t,e);function t(n,r,o,a,i){return i===void 0&&(i=!1),e.call(this,{x:n,y:r,width:o,height:a},i)||this}return t}(Ao),fO=.5,dO=.43,hO=.45,Gu=function(){function e(t,n,r){r===void 0&&(r=new Ge(0,0));var o=n.width,a=n.height;this._imgDims=new Ui(o,a),this._shift=r,this._positions=t.map(function(i){return i.mul(new Ge(o,a)).add(r)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new Ge(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(n){return n.sub(t._shift).div(new Ge(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,n){return new this.constructor(this.relativePositions,{width:t,height:n})},e.prototype.shiftBy=function(t,n){return new this.constructor(this.relativePositions,this._imgDims,new Ge(t,n))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,n){if(n===void 0&&(n={}),t){var r=t instanceof oo?t.box.floor():new Ao(t);return this.shiftBy(r.x,r.y).align(null,n)}var o=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},n),a=o.useDlibAlignment,i=o.minBoxPadding;return a?this.alignDlib():this.alignMinBbox(i)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),n=t[0],r=t[1],o=t[2],a=function(f){return o.sub(f).magnitude()},i=(a(n)+a(r))/2,s=Math.floor(i/hO),u=Gd(t),c=Math.floor(Math.max(0,u.x-fO*s)),l=Math.floor(Math.max(0,u.y-dO*s));return new r1(c,l,Math.min(s,this.imageWidth+c),Math.min(s,this.imageHeight+l))},e.prototype.alignMinBbox=function(t){var n=cO(this.positions);return n.pad(n.width*t,n.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),pO=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var n=this.positions;return[n[0],n[1],Gd([n[3],n[4]])]},t}(Gu),qS=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Gd)},t}(Gu),d2=function(){function e(t,n){this._label=t,this._distance=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+VS(this.distance)+")":"")},e}(),h2=function(e){ke(t,e);function t(n,r){var o=e.call(this,n)||this;return o._label=r,o}return t.assertIsValidLabeledBox=function(n,r){if(Ao.assertIsValidBox(n,r),!ia(n.label))throw new Error(r+" - expected property label ("+n.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(Ao),tl=function(){function e(t,n){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(n)||n.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=n}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var n=t.descriptors.map(function(r){return new Float32Array(r)});return new e(t.label,n)},e}(),jL=function(e){ke(t,e);function t(n,r,o,a){var i=e.call(this,n,r)||this;return i._score=o,i._classScore=a,i}return t.assertIsValidPredictedBox=function(n,r){if(h2.assertIsValidLabeledBox(n,r),!Cf(n.score)||!Cf(n.classScore))throw new Error(r+" - expected properties score ("+n.score+") and ("+n.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t}(h2);function vO(e){return e.detection instanceof oo}function o1(e,t){var n={detection:t};return Object.assign({},e,n)}function KS(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function XS(e){var t="";if(!e)try{e=require("fs")}catch(r){t=r.toString()}var n=e?function(r){return new Promise(function(o,a){e.readFile(r,function(i,s){return i?a(i):o(s)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:n}}function YS(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,n=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},o=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},a=XS();return fn({Canvas:e||function(){function i(){}return i}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function i(){}return i}(),Image:t||function(){function i(){}return i}(),ImageData:global.ImageData||function(){function i(){}return i}(),Video:global.HTMLVideoElement||function(){function i(){}return i}(),createCanvasElement:n,createImageElement:r,fetch:o},a)}function QS(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function ZS(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var Lt;function mO(){if(!Lt)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Lt}function xv(e){Lt=e}function a1(){QS()&&xv(KS()),ZS()&&xv(YS())}function gO(e){if(Lt||a1(),!Lt)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,n=t===void 0?Lt.Canvas:t,r=e.Image,o=r===void 0?Lt.Image:r;Lt.Canvas=n,Lt.Image=o,Lt.createCanvasElement=e.createCanvasElement||function(){return new n},Lt.createImageElement=e.createImageElement||function(){return new o},Lt.ImageData=e.ImageData||Lt.ImageData,Lt.Video=e.Video||Lt.Video,Lt.fetch=e.fetch||Lt.fetch,Lt.readFile=e.readFile||Lt.readFile}var pn={getEnv:mO,setEnv:xv,initialize:a1,createBrowserEnv:KS,createFileSystem:XS,createNodejsEnv:YS,monkeyPatch:gO,isBrowser:QS,isNodejs:ZS};a1();function i1(e){return!pn.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Jr(e){var t=pn.getEnv(),n=t.Canvas,r=t.CanvasRenderingContext2D;if(e instanceof r)return e;var o=i1(e);if(!(o instanceof n))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var a=o.getContext("2d");if(!a)throw new Error("resolveContext2d - canvas 2d context is null");return a}var Yo;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(Yo||(Yo={}));var JS=function(){function e(t){t===void 0&&(t={});var n=t.anchorPosition,r=t.backgroundColor,o=t.fontColor,a=t.fontSize,i=t.fontStyle,s=t.padding;this.anchorPosition=n||Yo.TOP_LEFT,this.backgroundColor=r||"rgba(0, 0, 0, 0.5)",this.fontColor=o||"rgba(255, 255, 255, 1)",this.fontSize=a||14,this.fontStyle=i||"Georgia",this.padding=s||4}return e}(),xO=function(){function e(t,n,r){r===void 0&&(r={}),this.text=typeof t=="string"?[t]:t instanceof e?t.text:t,this.anchor=n,this.options=new JS(r)}return e.prototype.measureWidth=function(t){var n=this.options.padding;return this.text.map(function(r){return t.measureText(r).width}).reduce(function(r,o){return r<o?o:r},0)+2*n},e.prototype.measureHeight=function(){var t=this.options,n=t.fontSize,r=t.padding;return this.text.length*n+2*r},e.prototype.getUpperLeft=function(t,n){var r=this.options.anchorPosition,o=r===Yo.BOTTOM_RIGHT||r===Yo.TOP_RIGHT,a=r===Yo.BOTTOM_LEFT||r===Yo.BOTTOM_RIGHT,i=this.measureWidth(t),s=this.measureHeight(),u=o?this.anchor.x-i:this.anchor.x,c=a?this.anchor.y-s:this.anchor.y;if(n){var l=n.width,f=n.height,d=Math.max(Math.min(u,l-i),0),h=Math.max(Math.min(c,f-s),0);return{x:d,y:h}}return{x:u,y:c}},e.prototype.draw=function(t){var n=i1(t),r=Jr(n),o=this.options,a=o.backgroundColor,i=o.fontColor,s=o.fontSize,u=o.fontStyle,c=o.padding;r.font=s+"px "+u;var l=this.measureWidth(r),f=this.measureHeight();r.fillStyle=a;var d=this.getUpperLeft(r,n);r.fillRect(d.x,d.y,l,f),r.fillStyle=i,this.text.forEach(function(h,p){var m=c+d.x,g=c+d.y+(p+1)*s;r.fillText(h,m,g)})},e}(),yO=function(){function e(t){t===void 0&&(t={});var n=t.boxColor,r=t.lineWidth,o=t.label,a=t.drawLabelOptions;this.boxColor=n||"rgba(0, 0, 255, 1)",this.lineWidth=r||2,this.label=o;var i={anchorPosition:Yo.BOTTOM_LEFT,backgroundColor:this.boxColor};this.drawLabelOptions=new JS(Object.assign({},i,a))}return e}(),GL=function(){function e(t,n){n===void 0&&(n={}),this.box=new Ao(t),this.options=new yO(n)}return e.prototype.draw=function(t){var n=Jr(t),r=this.options,o=r.boxColor,a=r.lineWidth,i=this.box,s=i.x,u=i.y,c=i.width,l=i.height;n.strokeStyle=o,n.lineWidth=a,n.strokeRect(s,u,c,l);var f=this.options.label;f&&new xO([f],{x:s-a/2,y:u},this.options.drawLabelOptions).draw(t)},e}();function ek(e){var t=pn.getEnv(),n=t.Image,r=t.Video;return e instanceof n&&e.complete||e instanceof r&&e.readyState>=3}function bO(e){return new Promise(function(t,n){if(e instanceof pn.getEnv().Canvas||ek(e))return t();function r(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),t(a))}function o(a){a.currentTarget&&(a.currentTarget.removeEventListener("load",r),a.currentTarget.removeEventListener("error",o),n(a))}e.addEventListener("load",r),e.addEventListener("error",o)})}function tk(e){var t=pn.getEnv(),n=t.Image,r=t.Video;return e instanceof n?new Ui(e.naturalWidth,e.naturalHeight):e instanceof r?new Ui(e.videoWidth,e.videoHeight):new Ui(e.width,e.height)}function Kd(e){var t=e.width,n=e.height,r=pn.getEnv().createCanvasElement,o=r();return o.width=t,o.height=n,o}function s1(e,t){var n=pn.getEnv().ImageData;if(!(e instanceof n)&&!ek(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=t||tk(e),o=r.width,a=r.height,i=Kd({width:o,height:a});return e instanceof n?Jr(i).putImageData(e,0,0):Jr(i).drawImage(e,0,0,o,a),i}function wO(e,t){return ye(this,void 0,void 0,function(){var n,r,o,a,i,s;return be(this,function(u){switch(u.label){case 0:return n=t||pn.getEnv().createCanvasElement(),r=e.shape.slice(yo(e)?1:0),o=r[0],a=r[1],i=r[2],s=de(function(){return e.as3D(o,a,i).toInt()}),[4,Vd.toPixels(s,n)];case 1:return u.sent(),s.dispose(),[2,n]}})})}function p2(e){var t=pn.getEnv(),n=t.Image,r=t.Canvas,o=t.Video;return e instanceof n||e instanceof r||e instanceof o}function CO(e,t,n){n===void 0&&(n=!1);var r=pn.getEnv(),o=r.Image,a=r.Canvas;if(!(e instanceof o||e instanceof a))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var i=tk(e),s=t/Math.max(i.height,i.width),u=s*i.width,c=s*i.height,l=Kd({width:t,height:t}),f=e instanceof a?e:s1(e),d=Math.abs(u-c)/2,h=n&&u<c?d:0,p=n&&c<u?d:0;return Jr(l).drawImage(f,h,p,u,c),l}var Ef=function(){function e(t,n){var r=this;if(n===void 0&&(n=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=n,this._batchSize=t.length,t.forEach(function(o,a){if(yc(o)){r._imageTensors[a]=o,r._inputDimensions[a]=o.shape;return}if(yo(o)){var i=o.shape[0];if(i!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+i+" passed, but not supported in input array");r._imageTensors[a]=o,r._inputDimensions[a]=o.shape.slice(1);return}var s=o instanceof pn.getEnv().Canvas?o:s1(o);r._canvases[a]=s,r._inputDimensions[a]=[s.height,s.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return ns(this.batchSize,0,1).map(function(n,r){return t.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var n=this.getInputWidth(t),r=this.getInputHeight(t);return jS({width:n,height:r},this.inputSize)},e.prototype.toBatchTensor=function(t,n){var r=this;return n===void 0&&(n=!0),this._inputSize=t,de(function(){var o=ns(r.batchSize,0,1).map(function(i){var s=r.getInput(i);if(s instanceof Je){var u=yo(s)?s:s.expandDims();return u=lO(u,n),(u.shape[1]!==t||u.shape[2]!==t)&&(u=Hd.resizeBilinear(u,[t,t])),u.as3D(t,t,3)}if(s instanceof pn.getEnv().Canvas)return Vd.fromPixels(CO(s,t,n));throw new Error("toBatchTensor - at batchIdx "+i+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+s)}),a=Nn(o.map(function(i){return i.toFloat()})).as4D(r.batchSize,t,t,3);return a})},e}();function Kt(e){return ye(this,void 0,void 0,function(){var t,n,r;return be(this,function(o){switch(o.label){case 0:if(e instanceof Ef)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return n=function(a){return Array.isArray(e)?" at input index "+a+":":""},r=t.map(i1),r.forEach(function(a,i){if(!p2(a)&&!yc(a)&&!yo(a))throw typeof t[i]=="string"?new Error("toNetInput -"+n(i)+" string passed, but could not resolve HTMLElement for element id "+t[i]):new Error("toNetInput -"+n(i)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(yo(a)){var s=a.shape[0];if(s!==1)throw new Error("toNetInput -"+n(i)+" tf.Tensor4D with batchSize "+s+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(a){return p2(a)&&bO(a)}))];case 1:return o.sent(),[2,new Ef(r,Array.isArray(e))]}})})}function u1(e,t){return ye(this,void 0,void 0,function(){var n,r,o,a,i,s,u;return be(this,function(c){switch(c.label){case 0:return n=pn.getEnv().Canvas,r=e,e instanceof n?[3,5]:[4,Kt(e)];case 1:if(o=c.sent(),o.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return a=o.getInput(0),a instanceof n?(i=a,[3,4]):[3,2];case 2:return[4,wO(a)];case 3:i=c.sent(),c.label=4;case 4:r=i,c.label=5;case 5:return s=Jr(r),u=t.map(function(l){return l instanceof oo?l.forSize(r.width,r.height).box.floor():l}).map(function(l){return l.clipAtImageBorders(r.width,r.height)}),[2,u.map(function(l){var f=l.x,d=l.y,h=l.width,p=l.height,m=Kd({width:h,height:p});return Jr(m).putImageData(s.getImageData(f,d,h,p),0,0),m})]}})})}function c1(e,t){return ye(this,void 0,void 0,function(){return be(this,function(n){if(!yc(e)&&!yo(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(yo(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,de(function(){var r=e.shape.slice(yo(e)?1:0),o=r[0],a=r[1],i=r[2],s=t.map(function(c){return c instanceof oo?c.forSize(a,o).box:c}).map(function(c){return c.clipAtImageBorders(a,o)}),u=s.map(function(c){var l=c.x,f=c.y,d=c.width,h=c.height;return Og(e.as3D(o,a,i),[f,l,0],[h,d,i])});return u})]})})}function EO(e,t){return ye(this,void 0,void 0,function(){var n,r;return be(this,function(o){switch(o.label){case 0:return n=pn.getEnv().fetch,[4,n(e,t)];case 1:if(r=o.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function _O(e){return ye(this,void 0,void 0,function(){return be(this,function(t){switch(t.label){case 0:return[4,EO(e)];case 1:return[2,t.sent().json()]}})})}function nk(e,t){var n=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:n};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+n};var r=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(r,"");var o=e.split("/").filter(function(s){return s}),a=e.endsWith(".json")?o[o.length-1]:n,i=r+(e.endsWith(".json")?o.slice(0,o.length-1):o).join("/");return i=e.startsWith("/")?"/"+i:i,{modelBaseUri:i,manifestUri:i==="/"?"/"+a:i+"/"+a}}function SO(e,t){return ye(this,void 0,void 0,function(){var n,r,o,a;return be(this,function(i){switch(i.label){case 0:return n=nk(e,t),r=n.manifestUri,o=n.modelBaseUri,[4,_O(r)];case 1:return a=i.sent(),[2,Yg.loadWeights(a,o)]}})})}var Bo=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var n=this.traversePropertyPath(t),r=n.obj,o=n.objProp;return r[o]},e.prototype.reassignParamFromPath=function(t,n){var r=this.traversePropertyPath(t),o=r.obj,a=r.objProp;o[a].dispose(),o[a]=n},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(n){var r=n.paramPath;return{path:r,tensor:t.getParamFromPath(r)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof ja})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof ja)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(n){var r=n.path,o=n.tensor;t.reassignParamFromPath(r,o.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(n){var r=n.path,o=n.tensor,a=Gt(o.dataSync());o.dispose(),t.reassignParamFromPath(r,a)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(n){if(t&&n.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+n.path);n.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var n=t.tensor;return Array.from(n.dataSync())}).reduce(function(t,n){return t.concat(n)}))},e.prototype.load=function(t){return ye(this,void 0,void 0,function(){return be(this,function(n){switch(n.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return n.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return ye(this,void 0,void 0,function(){var n;return be(this,function(r){switch(r.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,SO(t,this.getDefaultModelName())];case 1:return n=r.sent(),this.loadFromWeightMap(n),[2]}})})},e.prototype.loadFromDisk=function(t){return ye(this,void 0,void 0,function(){var n,r,o,a,i,s,u,c,l,f;return be(this,function(d){switch(d.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return n=pn.getEnv().readFile,r=nk(t,this.getDefaultModelName()),o=r.manifestUri,a=r.modelBaseUri,i=function(h){return Promise.all(h.map(function(p){return n(p).then(function(m){return m.buffer})}))},s=Yg.weightsLoaderFactory(i),l=(c=JSON).parse,[4,n(o)];case 1:return u=l.apply(c,[d.sent().toString()]),[4,s(u,a)];case 2:return f=d.sent(),this.loadFromWeightMap(f),[2]}})})},e.prototype.loadFromWeightMap=function(t){var n=this.extractParamsFromWeigthMap(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.extractWeights=function(t){var n=this.extractParams(t),r=n.paramMappings,o=n.params;this._paramMappings=r,this._params=o},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var n=t.split("/").reduce(function(a,i){if(!a.nextObj.hasOwnProperty(i))throw new Error("traversePropertyPath - object does not have property "+i+", for path "+t);return{obj:a.nextObj,objProp:i,nextObj:a.nextObj[i]}},{nextObj:this.params}),r=n.obj,o=n.objProp;if(!r||!o||!(r[o]instanceof Je))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:r,objProp:o}},e}();function Kn(e,t,n){return de(function(){var r=Md(e,t.depthwise_filter,t.pointwise_filter,n,"same");return r=Ie(r,t.bias),r})}function lp(e,t,n){return n===void 0&&(n=!1),de(function(){var r=lt(n?Ie(tr(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Kn(e,t.conv0,[2,2])),o=Kn(r,t.conv1,[1,1]),a=lt(Ie(r,o)),i=Kn(a,t.conv2,[1,1]);return lt(Ie(r,Ie(o,i)))})}function nl(e,t,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!0),de(function(){var o=lt(n?Ie(tr(e,t.conv0.filters,r?[2,2]:[1,1],"same"),t.conv0.bias):Kn(e,t.conv0,r?[2,2]:[1,1])),a=Kn(o,t.conv1,[1,1]),i=lt(Ie(o,a)),s=Kn(i,t.conv2,[1,1]),u=lt(Ie(o,Ie(a,s))),c=Kn(u,t.conv3,[1,1]);return lt(Ie(o,Ie(a,Ie(s,c))))})}function Rr(e,t,n,r){return n===void 0&&(n="same"),r===void 0&&(r=!1),de(function(){var o=Ie(tr(e,t.filters,[1,1],n),t.bias);return r?lt(o):o})}function To(e,t){Object.keys(e).forEach(function(n){t.some(function(r){return r.originalPath===n})||e[n].dispose()})}function Xd(e,t){return function(n,r,o,a){var i=bn(e(n*r*o*o),[o,o,n,r]),s=kt(e(r));return t.push({paramPath:a+"/filters"},{paramPath:a+"/bias"}),{filters:i,bias:s}}}function l1(e,t){return function(n,r,o){var a=xo(e(n*r),[n,r]),i=kt(e(r));return t.push({paramPath:o+"/weights"},{paramPath:o+"/bias"}),{weights:a,bias:i}}}var rk=function(){function e(t,n,r){this.depthwise_filter=t,this.pointwise_filter=n,this.bias=r}return e}();function f1(e,t){return function(n,r,o){var a=bn(e(9*n),[3,3,n,1]),i=bn(e(n*r),[1,1,n,r]),s=kt(e(r));return t.push({paramPath:o+"/depthwise_filter"},{paramPath:o+"/pointwise_filter"},{paramPath:o+"/bias"}),new rk(a,i,s)}}function d1(e){return function(t){var n=e(t+"/depthwise_filter",4),r=e(t+"/pointwise_filter",4),o=e(t+"/bias",1);return new rk(n,r,o)}}function wa(e,t){return function(n,r,o){var a=e[n];if(!xs(a,r))throw new Error("expected weightMap["+n+"] to be a Tensor"+r+"D, instead have "+a);return t.push({originalPath:n,paramPath:o||n}),a}}function Po(e){var t=e;function n(o){var a=t.slice(0,o);return t=t.slice(o),a}function r(){return t}return{extractWeights:n,getRemainingWeights:r}}function ok(e,t){var n=Xd(e,t),r=f1(e,t);function o(i,s,u,c){c===void 0&&(c=!1);var l=c?n(i,s,3,u+"/conv0"):r(i,s,u+"/conv0"),f=r(s,s,u+"/conv1"),d=r(s,s,u+"/conv2");return{conv0:l,conv1:f,conv2:d}}function a(i,s,u,c){c===void 0&&(c=!1);var l=o(i,s,u,c),f=l.conv0,d=l.conv1,h=l.conv2,p=r(s,s,u+"/conv3");return{conv0:f,conv1:d,conv2:h,conv3:p}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:a}}function kO(e){var t=[],n=Po(e),r=n.extractWeights,o=n.getRemainingWeights,a=ok(r,t).extractDenseBlock4Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2"),c=a(128,256,"dense3");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u,dense3:c}}}function ak(e){return function(t){var n=e(t+"/filters",4),r=e(t+"/bias",1);return{filters:n,bias:r}}}function ik(e,t){var n=wa(e,t),r=ak(n),o=d1(n);function a(s,u){u===void 0&&(u=!1);var c=u?r(s+"/conv0"):o(s+"/conv0"),l=o(s+"/conv1"),f=o(s+"/conv2");return{conv0:c,conv1:l,conv2:f}}function i(s,u){u===void 0&&(u=!1);var c=u?r(s+"/conv0"):o(s+"/conv0"),l=o(s+"/conv1"),f=o(s+"/conv2"),d=o(s+"/conv3");return{conv0:c,conv1:l,conv2:f,conv3:d}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:i}}function AO(e){var t=[],n=ik(e,t).extractDenseBlock4Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2"),dense3:n("dense3")};return To(e,t),{params:r,paramMappings:t}}var sk=function(e){ke(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return de(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=bc(o,a).div(ue(255)),s=nl(i,r.dense0,!0);return s=nl(s,r.dense1),s=nl(s,r.dense2),s=nl(s,r.dense3),s=gs(s,[7,7],[2,2],"valid"),s})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(n){return AO(n)},t.prototype.extractParams=function(n){return kO(n)},t}(Bo);function qr(e,t){return de(function(){return Ie(mc(e,t.weights),t.bias)})}function DO(e,t,n){var r=[],o=Po(e),a=o.extractWeights,i=o.getRemainingWeights,s=l1(a,r),u=s(t,n,"fc");if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{fc:u}}}function RO(e){var t=[],n=wa(e,t);function r(a){var i=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:i,bias:s}}var o={fc:r("fc")};return To(e,t),{params:o,paramMappings:t}}function uk(e){var t={},n={};return Object.keys(e).forEach(function(r){var o=r.startsWith("fc")?n:t;o[r]=e[r]}),{featureExtractorMap:t,classifierMap:n}}var ck=function(e){ke(t,e);function t(n,r){var o=e.call(this,n)||this;return o._faceFeatureExtractor=r,o}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return de(function(){var a=n instanceof Ef?r.faceFeatureExtractor.forwardInput(n):n;return qr(a.as2D(a.shape[0],-1),o.fc)})},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},t.prototype.extractClassifierParams=function(n){return DO(n,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(n){var r=uk(n),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),RO(a)},t.prototype.extractParams=function(n){var r=this.getClassifierChannelsIn(),o=this.getClassifierChannelsOut(),a=o*r+o,i=n.slice(0,n.length-a),s=n.slice(n.length-a);return this.faceFeatureExtractor.extractWeights(i),this.extractClassifierParams(s)},t}(Bo),v2=["neutral","happy","sad","angry","fearful","disgusted","surprised"],lk=function(){function e(t){var n=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);v2.forEach(function(r,o){n[r]=t[o]})}return e.prototype.asSortedArray=function(){var t=this;return v2.map(function(n){return{expression:n,probability:t[n]}}).sort(function(n,r){return r.probability-n.probability})},e}(),FO=function(e){ke(t,e);function t(n){return n===void 0&&(n=new sk),e.call(this,"FaceExpressionNet",n)||this}return t.prototype.forwardInput=function(n){var r=this;return de(function(){return ro(r.runNet(n))})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictExpressions=function(n){return ye(this,void 0,void 0,function(){var r,o,a,i,s=this;return be(this,function(u){switch(u.label){case 0:return[4,Kt(n)];case 1:return r=u.sent(),[4,this.forwardInput(r)];case 2:return o=u.sent(),[4,Promise.all(Pt(o).map(function(c){return ye(s,void 0,void 0,function(){var l;return be(this,function(f){switch(f.label){case 0:return[4,c.data()];case 1:return l=f.sent(),c.dispose(),[2,l]}})})}))];case 3:return a=u.sent(),o.dispose(),i=a.map(function(c){return new lk(c)}),[2,r.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(ck);function qL(e){return e.expressions instanceof lk}function fk(e,t){var n={expressions:t};return Object.assign({},e,n)}function dk(e){return vO(e)&&e.landmarks instanceof Gu&&e.unshiftedLandmarks instanceof Gu&&e.alignedRect instanceof oo}function h1(e,t){var n=e.detection.box,r=t.shiftBy(n.x,n.y),o=r.align(),a=e.detection.imageDims,i=new oo(e.detection.score,o.rescale(a.reverse()),a),s={landmarks:r,unshiftedLandmarks:t,alignedRect:i};return Object.assign({},e,s)}var IO=function(){function e(t){t===void 0&&(t={});var n=t.drawLines,r=n===void 0?!0:n,o=t.drawPoints,a=o===void 0?!0:o,i=t.lineWidth,s=t.lineColor,u=t.pointSize,c=t.pointColor;this.drawLines=r,this.drawPoints=a,this.lineWidth=i||1,this.pointSize=u||2,this.lineColor=s||"rgba(0, 255, 255, 1)",this.pointColor=c||"rgba(255, 0, 255, 1)"}return e}(),BO=function(){function e(t,n){n===void 0&&(n={}),this.faceLandmarks=t,this.options=new IO(n)}return e.prototype.draw=function(t){var n=Jr(t),r=this.options,o=r.drawLines,a=r.drawPoints,i=r.lineWidth,s=r.lineColor,u=r.pointSize,c=r.pointColor;if(o&&this.faceLandmarks instanceof qS&&(n.strokeStyle=s,n.lineWidth=i,ka(n,this.faceLandmarks.getJawOutline()),ka(n,this.faceLandmarks.getLeftEyeBrow()),ka(n,this.faceLandmarks.getRightEyeBrow()),ka(n,this.faceLandmarks.getNose()),ka(n,this.faceLandmarks.getLeftEye(),!0),ka(n,this.faceLandmarks.getRightEye(),!0),ka(n,this.faceLandmarks.getMouth(),!0)),a){n.strokeStyle=c,n.fillStyle=c;var l=function(f){n.beginPath(),n.arc(f.x,f.y,u,0,2*Math.PI),n.fill()};this.faceLandmarks.positions.forEach(l)}},e}();function KL(e,t){var n=Array.isArray(t)?t:[t];n.forEach(function(r){var o=r instanceof Gu?r:dk(r)?r.landmarks:void 0;if(!o)throw new Error("drawFaceLandmarks - expected faceExpressions to be FaceLandmarks | WithFaceLandmarks<WithFaceDetection<{}>> or array thereof");new BO(o).draw(e)})}function TO(e,t){var n=Xd(e,t),r=f1(e,t);function o(i,s,u){var c=r(i,s,u+"/separable_conv0"),l=r(s,s,u+"/separable_conv1"),f=n(i,s,1,u+"/expansion_conv");return{separable_conv0:c,separable_conv1:l,expansion_conv:f}}function a(i,s){var u=r(i,i,s+"/separable_conv0"),c=r(i,i,s+"/separable_conv1"),l=r(i,i,s+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:l}}return{extractConvParams:n,extractSeparableConvParams:r,extractReductionBlockParams:o,extractMainBlockParams:a}}function PO(e,t){var n=[],r=Po(e),o=r.extractWeights,a=r.getRemainingWeights,i=TO(o,n),s=i.extractConvParams,u=i.extractSeparableConvParams,c=i.extractReductionBlockParams,l=i.extractMainBlockParams,f=s(3,32,3,"entry_flow/conv_in"),d=c(32,64,"entry_flow/reduction_block_0"),h=c(64,128,"entry_flow/reduction_block_1"),p={conv_in:f,reduction_block_0:d,reduction_block_1:h},m={};ns(t,0,1).forEach(function(y){m["main_block_"+y]=l(128,"middle_flow/main_block_"+y)});var g=c(128,256,"exit_flow/reduction_block"),v=u(256,512,"exit_flow/separable_conv"),x={reduction_block:g,separable_conv:v};if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:n,params:{entry_flow:p,middle_flow:m,exit_flow:x}}}function NO(e,t){var n=wa(e,t),r=ak(n),o=d1(n);function a(s){var u=o(s+"/separable_conv0"),c=o(s+"/separable_conv1"),l=r(s+"/expansion_conv");return{separable_conv0:u,separable_conv1:c,expansion_conv:l}}function i(s){var u=o(s+"/separable_conv0"),c=o(s+"/separable_conv1"),l=o(s+"/separable_conv2");return{separable_conv0:u,separable_conv1:c,separable_conv2:l}}return{extractConvParams:r,extractSeparableConvParams:o,extractReductionBlockParams:a,extractMainBlockParams:i}}function OO(e,t){var n=[],r=NO(e,n),o=r.extractConvParams,a=r.extractSeparableConvParams,i=r.extractReductionBlockParams,s=r.extractMainBlockParams,u=o("entry_flow/conv_in"),c=i("entry_flow/reduction_block_0"),l=i("entry_flow/reduction_block_1"),f={conv_in:u,reduction_block_0:c,reduction_block_1:l},d={};ns(t,0,1).forEach(function(g){d["main_block_"+g]=s("middle_flow/main_block_"+g)});var h=i("exit_flow/reduction_block"),p=a("exit_flow/separable_conv"),m={reduction_block:h,separable_conv:p};return To(e,n),{params:{entry_flow:f,middle_flow:d,exit_flow:m},paramMappings:n}}function hk(e,t,n){return Ie(tr(e,t.filters,n,"same"),t.bias)}function fp(e,t,n){n===void 0&&(n=!0);var r=n?lt(e):e;return r=Kn(r,t.separable_conv0,[1,1]),r=Kn(lt(r),t.separable_conv1,[1,1]),r=Wt(r,[3,3],[2,2],"same"),r=Ie(r,hk(e,t.expansion_conv,[2,2])),r}function MO(e,t){var n=Kn(lt(e),t.separable_conv0,[1,1]);return n=Kn(lt(n),t.separable_conv1,[1,1]),n=Kn(lt(n),t.separable_conv2,[1,1]),n=Ie(n,e),n}var LO=function(e){ke(t,e);function t(n){var r=e.call(this,"TinyXception")||this;return r._numMainBlocks=n,r}return t.prototype.forwardInput=function(n){var r=this,o=this.params;if(!o)throw new Error("TinyXception - load model before inference");return de(function(){var a=n.toBatchTensor(112,!0),i=[122.782,117.001,104.298],s=bc(a,i).div(ue(256)),u=lt(hk(s,o.entry_flow.conv_in,[2,2]));return u=fp(u,o.entry_flow.reduction_block_0,!1),u=fp(u,o.entry_flow.reduction_block_1),ns(r._numMainBlocks,0,1).forEach(function(c){u=MO(u,o.middle_flow["main_block_"+c])}),u=fp(u,o.exit_flow.reduction_block),u=lt(Kn(u,o.exit_flow.separable_conv,[1,1])),u})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(n){return OO(n,this._numMainBlocks)},t.prototype.extractParams=function(n){return PO(n,this._numMainBlocks)},t}(Bo);function WO(e){var t=[],n=Po(e),r=n.extractWeights,o=n.getRemainingWeights,a=l1(r,t),i=a(512,1,"fc/age"),s=a(512,2,"fc/gender");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{fc:{age:i,gender:s}}}}function zO(e){var t=[],n=wa(e,t);function r(a){var i=n(a+"/weights",2),s=n(a+"/bias",1);return{weights:i,bias:s}}var o={fc:{age:r("fc/age"),gender:r("fc/gender")}};return To(e,t),{params:o,paramMappings:t}}var rs;(function(e){e.FEMALE="female",e.MALE="male"})(rs||(rs={}));var $O=function(e){ke(t,e);function t(n){n===void 0&&(n=new LO(2));var r=e.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=n,r}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(n){var r=this,o=this.params;if(!o)throw new Error(this._name+" - load model before inference");return de(function(){var a=n instanceof Ef?r.faceFeatureExtractor.forwardInput(n):n,i=gs(a,[7,7],[2,2],"valid").as2D(a.shape[0],-1),s=qr(i,o.fc.age).as1D(),u=qr(i,o.fc.gender);return{age:s,gender:u}})},t.prototype.forwardInput=function(n){var r=this;return de(function(){var o=r.runNet(n),a=o.age,i=o.gender;return{age:a,gender:ro(i)}})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.predictAgeAndGender=function(n){return ye(this,void 0,void 0,function(){var r,o,a,i,s,u,c=this;return be(this,function(l){switch(l.label){case 0:return[4,Kt(n)];case 1:return r=l.sent(),[4,this.forwardInput(r)];case 2:return o=l.sent(),a=Pt(o.age),i=Pt(o.gender),s=a.map(function(f,d){return{ageTensor:f,genderTensor:i[d]}}),[4,Promise.all(s.map(function(f){var d=f.ageTensor,h=f.genderTensor;return ye(c,void 0,void 0,function(){var p,m,g,v,x;return be(this,function(y){switch(y.label){case 0:return[4,d.data()];case 1:return p=y.sent()[0],[4,h.data()];case 2:return m=y.sent()[0],g=m>.5,v=g?rs.MALE:rs.FEMALE,x=g?m:1-m,d.dispose(),h.dispose(),[2,{age:p,gender:v,genderProbability:x}]}})})}))];case 3:return u=l.sent(),o.age.dispose(),o.gender.dispose(),[2,r.isBatchInput?u:u[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(n){n===void 0&&(n=!0),this.faceFeatureExtractor.dispose(n),e.prototype.dispose.call(this,n)},t.prototype.loadClassifierParams=function(n){var r=this.extractClassifierParams(n),o=r.params,a=r.paramMappings;this._params=o,this._paramMappings=a},t.prototype.extractClassifierParams=function(n){return WO(n)},t.prototype.extractParamsFromWeigthMap=function(n){var r=uk(n),o=r.featureExtractorMap,a=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(o),zO(a)},t.prototype.extractParams=function(n){var r=1539,o=n.slice(0,n.length-r),a=n.slice(n.length-r);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(a)},t}(Bo),pk=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(n,r,o){var a=o.map(function(s){var u=s.width,c=s.height,l=r/Math.max(c,u);return{width:u*l,height:c*l}}),i=a.length;return de(function(){var s=function(d,h){return Nn([Dr([68],d),Dr([68],h)],1).as2D(1,136).as1D()},u=function(d,h){var p=a[d],m=p.width,g=p.height;return h(m,g)?Math.abs(m-g)/2:0},c=function(d){return u(d,function(h,p){return h<p})},l=function(d){return u(d,function(h,p){return p<h})},f=n.mul(Dr([i,136],r)).sub(Nn(Array.from(Array(i),function(d,h){return s(c(h),l(h))}))).div(Nn(Array.from(Array(i),function(d,h){return s(a[h].width,a[h].height)})));return f})},t.prototype.forwardInput=function(n){var r=this;return de(function(){var o=r.runNet(n);return r.postProcess(o,n.inputSize,n.inputDimensions.map(function(a){var i=a[0],s=a[1];return{height:i,width:s}}))})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.detectLandmarks=function(n){return ye(this,void 0,void 0,function(){var r,o,a,i=this;return be(this,function(s){switch(s.label){case 0:return[4,Kt(n)];case 1:return r=s.sent(),o=de(function(){return Pt(i.forwardInput(r))}),[4,Promise.all(o.map(function(u,c){return ye(i,void 0,void 0,function(){var l,f,d,h,p;return be(this,function(m){switch(m.label){case 0:return d=(f=Array).from,[4,u.data()];case 1:return l=d.apply(f,[m.sent()]),h=l.filter(function(g,v){return mv(v)}),p=l.filter(function(g,v){return!mv(v)}),[2,new qS(Array(68).fill(0).map(function(g,v){return new Ge(h[v],p[v])}),{height:r.getInputHeight(c),width:r.getInputWidth(c)})]}})})}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(ck),vk=function(e){ke(t,e);function t(n){return n===void 0&&(n=new sk),e.call(this,"FaceLandmark68Net",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(pk);function UO(e){var t=[],n=ik(e,t).extractDenseBlock3Params,r={dense0:n("dense0",!0),dense1:n("dense1"),dense2:n("dense2")};return To(e,t),{params:r,paramMappings:t}}function HO(e){var t=[],n=Po(e),r=n.extractWeights,o=n.getRemainingWeights,a=ok(r,t).extractDenseBlock3Params,i=a(3,32,"dense0",!0),s=a(32,64,"dense1"),u=a(64,128,"dense2");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{dense0:i,dense1:s,dense2:u}}}var VO=function(e){ke(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return de(function(){var o=n.toBatchTensor(112,!0),a=[122.782,117.001,104.298],i=bc(o,a).div(ue(255)),s=lp(i,r.dense0,!0);return s=lp(s,r.dense1),s=lp(s,r.dense2),s=gs(s,[14,14],[2,2],"valid"),s})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(n){return UO(n)},t.prototype.extractParams=function(n){return HO(n)},t}(Bo),jO=function(e){ke(t,e);function t(n){return n===void 0&&(n=new VO),e.call(this,"FaceLandmark68TinyNet",n)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(pk),XL=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(vk);function GO(e,t){return Ie(nn(e,t.weights),t.biases)}function p1(e,t,n,r,o){o===void 0&&(o="same");var a=t.conv,i=a.filters,s=a.bias,u=tr(e,i,n,o);return u=Ie(u,s),u=GO(u,t.scale),r?lt(u):u}function qO(e,t){return p1(e,t,[1,1],!0)}function mk(e,t){return p1(e,t,[1,1],!1)}function gk(e,t){return p1(e,t,[2,2],!0,"valid")}function KO(e,t){function n(s,u,c){var l=e(s),f=l.length/(u*c*c);if(HS(f))throw new Error("depth has to be an integer: "+f+", weights.length: "+l.length+", numFilters: "+u+", filterSize: "+c);return de(function(){return ko(bn(l,[u,f,c,c]),[2,3,1,0])})}function r(s,u,c,l){var f=n(s,u,c),d=kt(e(u));return t.push({paramPath:l+"/filters"},{paramPath:l+"/bias"}),{filters:f,bias:d}}function o(s,u){var c=kt(e(s)),l=kt(e(s));return t.push({paramPath:u+"/weights"},{paramPath:u+"/biases"}),{weights:c,biases:l}}function a(s,u,c,l){var f=r(s,u,c,l+"/conv"),d=o(u,l+"/scale");return{conv:f,scale:d}}function i(s,u,c,l,f){f===void 0&&(f=!1);var d=a((f?.5:1)*s,u,c,l+"/conv1"),h=a(s,u,c,l+"/conv2");return{conv1:d,conv2:h}}return{extractConvLayerParams:a,extractResidualLayerParams:i}}function XO(e){var t=Po(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],a=KO(n,o),i=a.extractConvLayerParams,s=a.extractResidualLayerParams,u=i(4704,32,7,"conv32_down"),c=s(9216,32,3,"conv32_1"),l=s(9216,32,3,"conv32_2"),f=s(9216,32,3,"conv32_3"),d=s(36864,64,3,"conv64_down",!0),h=s(36864,64,3,"conv64_1"),p=s(36864,64,3,"conv64_2"),m=s(36864,64,3,"conv64_3"),g=s(147456,128,3,"conv128_down",!0),v=s(147456,128,3,"conv128_1"),x=s(147456,128,3,"conv128_2"),y=s(589824,256,3,"conv256_down",!0),b=s(589824,256,3,"conv256_1"),w=s(589824,256,3,"conv256_2"),C=s(589824,256,3,"conv256_down_out"),E=de(function(){return ko(xo(n(256*128),[128,256]),[1,0])});if(o.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var S={conv32_down:u,conv32_1:c,conv32_2:l,conv32_3:f,conv64_down:d,conv64_1:h,conv64_2:p,conv64_3:m,conv128_down:g,conv128_1:v,conv128_2:x,conv256_down:y,conv256_1:b,conv256_2:w,conv256_down_out:C,fc:E};return{params:S,paramMappings:o}}function YO(e,t){var n=wa(e,t);function r(i){var s=n(i+"/scale/weights",1),u=n(i+"/scale/biases",1);return{weights:s,biases:u}}function o(i){var s=n(i+"/conv/filters",4),u=n(i+"/conv/bias",1),c=r(i);return{conv:{filters:s,bias:u},scale:c}}function a(i){return{conv1:o(i+"/conv1"),conv2:o(i+"/conv2")}}return{extractConvLayerParams:o,extractResidualLayerParams:a}}function QO(e){var t=[],n=YO(e,t),r=n.extractConvLayerParams,o=n.extractResidualLayerParams,a=r("conv32_down"),i=o("conv32_1"),s=o("conv32_2"),u=o("conv32_3"),c=o("conv64_down"),l=o("conv64_1"),f=o("conv64_2"),d=o("conv64_3"),h=o("conv128_down"),p=o("conv128_1"),m=o("conv128_2"),g=o("conv256_down"),v=o("conv256_1"),x=o("conv256_2"),y=o("conv256_down_out"),b=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!US(b))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+b);var w={conv32_down:a,conv32_1:i,conv32_2:s,conv32_3:u,conv64_down:c,conv64_1:l,conv64_2:f,conv64_3:d,conv128_down:h,conv128_1:p,conv128_2:m,conv256_down:g,conv256_1:v,conv256_2:x,conv256_down_out:y,fc:b};return To(e,t),{params:w,paramMappings:t}}function zr(e,t){var n=qO(e,t.conv1);return n=mk(n,t.conv2),n=Ie(n,e),n=lt(n),n}function rl(e,t){var n=gk(e,t.conv1);n=mk(n,t.conv2);var r=gs(e,2,2,"valid"),o=tt(r.shape),a=r.shape[3]!==n.shape[3],i=r.shape[1]!==n.shape[1]||r.shape[2]!==n.shape[2];if(i){var s=iu(n.shape);s[1]=1;var u=tt(s);n=Tt([n,u],1);var c=iu(n.shape);c[2]=1;var l=tt(c);n=Tt([n,l],2)}return r=a?Tt([r,o],3):r,n=Ie(r,n),n=lt(n),n}var ZO=function(e){ke(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return de(function(){var o=n.toBatchTensor(150,!0).toFloat(),a=[122.782,117.001,104.298],i=bc(o,a).div(ue(256)),s=gk(i,r.conv32_down);s=Wt(s,3,2,"valid"),s=zr(s,r.conv32_1),s=zr(s,r.conv32_2),s=zr(s,r.conv32_3),s=rl(s,r.conv64_down),s=zr(s,r.conv64_1),s=zr(s,r.conv64_2),s=zr(s,r.conv64_3),s=rl(s,r.conv128_down),s=zr(s,r.conv128_1),s=zr(s,r.conv128_2),s=rl(s,r.conv256_down),s=zr(s,r.conv256_1),s=zr(s,r.conv256_2),s=rl(s,r.conv256_down_out);var u=s.mean([1,2]),c=mc(u,r.fc);return c})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.computeFaceDescriptor=function(n){return ye(this,void 0,void 0,function(){var r,o,a,i=this;return be(this,function(s){switch(s.label){case 0:return[4,Kt(n)];case 1:return r=s.sent(),o=de(function(){return Pt(i.forwardInput(r))}),[4,Promise.all(o.map(function(u){return u.data()}))];case 2:return a=s.sent(),o.forEach(function(u){return u.dispose()}),[2,r.isBatchInput?a:a[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(n){return QO(n)},t.prototype.extractParams=function(n){return XO(n)},t}(Bo);function xk(e,t){var n={descriptor:t};return Object.assign({},e,n)}function YL(e){return typeof e.age=="number"}function yk(e,t){var n={age:t};return Object.assign({},e,n)}function QL(e){return(e.gender===rs.MALE||e.gender===rs.FEMALE)&&Cf(e.genderProbability)}function bk(e,t,n){var r={gender:t,genderProbability:n};return Object.assign({},e,r)}var wk=function(){function e(t){var n=t===void 0?{}:t,r=n.minFaceSize,o=n.scaleFactor,a=n.maxNumScales,i=n.scoreThresholds,s=n.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=o||.709,this._maxNumScales=a||10,this._scoreThresholds=i||[.6,.7,.7],this._scaleSteps=s,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(u){return typeof u!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(u){return typeof u!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function JO(e,t){function n(u,c){var l=bn(e(9*u),[3,3,u,1]),f=kt(e(u)),d=kt(e(u)),h=kt(e(u)),p=kt(e(u));return t.push({paramPath:c+"/filters"},{paramPath:c+"/batch_norm_scale"},{paramPath:c+"/batch_norm_offset"},{paramPath:c+"/batch_norm_mean"},{paramPath:c+"/batch_norm_variance"}),{filters:l,batch_norm_scale:f,batch_norm_offset:d,batch_norm_mean:h,batch_norm_variance:p}}function r(u,c,l,f,d){var h=bn(e(u*c*l*l),[l,l,u,c]),p=kt(e(c));return t.push({paramPath:f+"/filters"},{paramPath:f+"/"+(d?"batch_norm_offset":"bias")}),{filters:h,bias:p}}function o(u,c,l,f){var d=r(u,c,l,f,!0),h=d.filters,p=d.bias;return{filters:h,batch_norm_offset:p}}function a(u,c,l){var f=n(u,l+"/depthwise_conv"),d=o(u,c,1,l+"/pointwise_conv");return{depthwise_conv:f,pointwise_conv:d}}function i(){var u=o(3,32,3,"mobilenetv1/conv_0"),c=a(32,64,"mobilenetv1/conv_1"),l=a(64,128,"mobilenetv1/conv_2"),f=a(128,128,"mobilenetv1/conv_3"),d=a(128,256,"mobilenetv1/conv_4"),h=a(256,256,"mobilenetv1/conv_5"),p=a(256,512,"mobilenetv1/conv_6"),m=a(512,512,"mobilenetv1/conv_7"),g=a(512,512,"mobilenetv1/conv_8"),v=a(512,512,"mobilenetv1/conv_9"),x=a(512,512,"mobilenetv1/conv_10"),y=a(512,512,"mobilenetv1/conv_11"),b=a(512,1024,"mobilenetv1/conv_12"),w=a(1024,1024,"mobilenetv1/conv_13");return{conv_0:u,conv_1:c,conv_2:l,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:m,conv_8:g,conv_9:v,conv_10:x,conv_11:y,conv_12:b,conv_13:w}}function s(){var u=o(1024,256,1,"prediction_layer/conv_0"),c=o(256,512,3,"prediction_layer/conv_1"),l=o(512,128,1,"prediction_layer/conv_2"),f=o(128,256,3,"prediction_layer/conv_3"),d=o(256,128,1,"prediction_layer/conv_4"),h=o(128,256,3,"prediction_layer/conv_5"),p=o(256,64,1,"prediction_layer/conv_6"),m=o(64,128,3,"prediction_layer/conv_7"),g=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),v=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),x=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),y=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),b=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),w=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),C=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),S=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),k=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),_=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),A=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),D={box_encoding_predictor:g,class_predictor:v},T={box_encoding_predictor:x,class_predictor:y},W={box_encoding_predictor:b,class_predictor:w},$={box_encoding_predictor:C,class_predictor:E},q={box_encoding_predictor:S,class_predictor:k},X={box_encoding_predictor:_,class_predictor:A};return{conv_0:u,conv_1:c,conv_2:l,conv_3:f,conv_4:d,conv_5:h,conv_6:p,conv_7:m,box_predictor_0:D,box_predictor_1:T,box_predictor_2:W,box_predictor_3:$,box_predictor_4:q,box_predictor_5:X}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:s}}function eM(e){var t=[],n=Po(e),r=n.extractWeights,o=n.getRemainingWeights,a=JO(r,t),i=a.extractMobilenetV1Params,s=a.extractPredictionLayerParams,u=i(),c=s(),l=Ad(r(5118*4),[1,5118,4]),f={extra_dim:l};if(t.push({paramPath:"output_layer/extra_dim"}),o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:{mobilenetv1:u,prediction_layer:c,output_layer:f},paramMappings:t}}function tM(e,t){var n=wa(e,t);function r(c,l,f){var d=n(c+"/Conv2d_"+l+"_pointwise/weights",4,f+"/filters"),h=n(c+"/Conv2d_"+l+"_pointwise/convolution_bn_offset",1,f+"/batch_norm_offset");return{filters:d,batch_norm_offset:h}}function o(c){var l="mobilenetv1/conv_"+c,f="MobilenetV1/Conv2d_"+c+"_depthwise",d=l+"/depthwise_conv",h=l+"/pointwise_conv",p=n(f+"/depthwise_weights",4,d+"/filters"),m=n(f+"/BatchNorm/gamma",1,d+"/batch_norm_scale"),g=n(f+"/BatchNorm/beta",1,d+"/batch_norm_offset"),v=n(f+"/BatchNorm/moving_mean",1,d+"/batch_norm_mean"),x=n(f+"/BatchNorm/moving_variance",1,d+"/batch_norm_variance");return{depthwise_conv:{filters:p,batch_norm_scale:m,batch_norm_offset:g,batch_norm_mean:v,batch_norm_variance:x},pointwise_conv:r("MobilenetV1",c,h)}}function a(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:o(1),conv_2:o(2),conv_3:o(3),conv_4:o(4),conv_5:o(5),conv_6:o(6),conv_7:o(7),conv_8:o(8),conv_9:o(9),conv_10:o(10),conv_11:o(11),conv_12:o(12),conv_13:o(13)}}function i(c,l){var f=n(c+"/weights",4,l+"/filters"),d=n(c+"/biases",1,l+"/bias");return{filters:f,bias:d}}function s(c){var l=i("Prediction/BoxPredictor_"+c+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+c+"/box_encoding_predictor"),f=i("Prediction/BoxPredictor_"+c+"/ClassPredictor","prediction_layer/box_predictor_"+c+"/class_predictor");return{box_encoding_predictor:l,class_predictor:f}}function u(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:s(0),box_predictor_1:s(1),box_predictor_2:s(2),box_predictor_3:s(3),box_predictor_4:s(4),box_predictor_5:s(5)}}return{extractMobilenetV1Params:a,extractPredictionLayerParams:u}}function nM(e){var t=[],n=tM(e,t),r=n.extractMobilenetV1Params,o=n.extractPredictionLayerParams,a=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!yc(a))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+a);var i={mobilenetv1:r(),prediction_layer:o(),output_layer:{extra_dim:a}};return To(e,t),{params:i,paramMappings:t}}function Ur(e,t,n){return de(function(){var r=tr(e,t.filters,n,"same");return r=Ie(r,t.batch_norm_offset),Td(r,0,6)})}var rM=.0010000000474974513;function oM(e,t,n){return de(function(){var r=vc(e,t.filters,n,"same");return r=Ag(r,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,rM),Td(r,0,6)})}function aM(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function iM(e,t){return de(function(){var n=null,r=Ur(e,t.conv_0,[2,2]),o=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(o.forEach(function(a,i){var s=i+1,u=aM(s);r=oM(r,a.depthwise_conv,u),r=Ur(r,a.pointwise_conv,[1,1]),s===11&&(n=r)}),n===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:n}})}function sM(e,t,n,r,o){var a=e.shape[0],i=Math.min(n,a),s=t.map(function(l,f){return{score:l,boxIndex:f}}).filter(function(l){return l.score>o}).sort(function(l,f){return f.score-l.score}),u=function(l){return l<=r?1:0},c=[];return s.forEach(function(l){if(!(c.length>=i)){for(var f=l.score,d=c.length-1;d>=0;--d){var h=uM(e,l.boxIndex,c[d]);if(h!==0&&(l.score*=u(h),l.score<=o))break}f===l.score&&c.push(l.boxIndex)}}),c}function uM(e,t,n){var r=e.arraySync(),o=Math.min(r[t][0],r[t][2]),a=Math.min(r[t][1],r[t][3]),i=Math.max(r[t][0],r[t][2]),s=Math.max(r[t][1],r[t][3]),u=Math.min(r[n][0],r[n][2]),c=Math.min(r[n][1],r[n][3]),l=Math.max(r[n][0],r[n][2]),f=Math.max(r[n][1],r[n][3]),d=(i-o)*(s-a),h=(l-u)*(f-c);if(d<=0||h<=0)return 0;var p=Math.max(o,u),m=Math.max(a,c),g=Math.min(i,l),v=Math.min(s,f),x=Math.max(g-p,0)*Math.max(v-m,0);return x/(d+h-x)}function cM(e){var t=Pt(ko(e,[1,0])),n=[Ot(t[2],t[0]),Ot(t[3],t[1])],r=[Ie(t[0],sr(n[0],ue(2))),Ie(t[1],sr(n[1],ue(2)))];return{sizes:n,centers:r}}function lM(e,t){var n=cM(e),r=n.sizes,o=n.centers,a=Pt(ko(t,[1,0])),i=sr(nn(bf(sr(a[2],ue(5))),r[0]),ue(2)),s=Ie(nn(sr(a[0],ue(10)),r[0]),o[0]),u=sr(nn(bf(sr(a[3],ue(5))),r[1]),ue(2)),c=Ie(nn(sr(a[1],ue(10)),r[1]),o[1]);return ko(Nn([Ot(s,i),Ot(c,u),Ie(s,i),Ie(c,u)]),[1,0])}function fM(e,t,n){return de(function(){var r=e.shape[0],o=lM(cr(Wa(n.extra_dim,[r,1,1]),[-1,4]),cr(e,[-1,4]));o=cr(o,[r,o.shape[0]/r,4]);var a=kg(Ir(t,[0,0,1],[-1,-1,-1])),i=Ir(a,[0,0,0],[-1,-1,1]);i=cr(i,[r,i.shape[1]]);var s=Pt(o),u=Pt(i);return{boxes:s,scores:u}})}function di(e,t){return de(function(){var n=e.shape[0],r=cr(Rr(e,t.box_encoding_predictor),[n,-1,1,4]),o=cr(Rr(e,t.class_predictor),[n,-1,3]);return{boxPredictionEncoding:r,classPrediction:o}})}function dM(e,t,n){return de(function(){var r=Ur(e,n.conv_0,[1,1]),o=Ur(r,n.conv_1,[2,2]),a=Ur(o,n.conv_2,[1,1]),i=Ur(a,n.conv_3,[2,2]),s=Ur(i,n.conv_4,[1,1]),u=Ur(s,n.conv_5,[2,2]),c=Ur(u,n.conv_6,[1,1]),l=Ur(c,n.conv_7,[2,2]),f=di(t,n.box_predictor_0),d=di(e,n.box_predictor_1),h=di(o,n.box_predictor_2),p=di(i,n.box_predictor_3),m=di(u,n.box_predictor_4),g=di(l,n.box_predictor_5),v=Tt([f.boxPredictionEncoding,d.boxPredictionEncoding,h.boxPredictionEncoding,p.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding],1),x=Tt([f.classPrediction,d.classPrediction,h.classPrediction,p.classPrediction,m.classPrediction,g.classPrediction],1);return{boxPredictions:v,classPredictions:x}})}var v1=function(){function e(t){var n=t===void 0?{}:t,r=n.minConfidence,o=n.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=o||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),m1=function(e){ke(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(n){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return de(function(){var o=n.toBatchTensor(512,!1).toFloat(),a=Ot(nn(o,ue(.007843137718737125)),ue(1)),i=iM(a,r.mobilenetv1),s=dM(i.out,i.conv11,r.prediction_layer),u=s.boxPredictions,c=s.classPredictions;return fM(u,c,r.output_layer)})},t.prototype.forward=function(n){return ye(this,void 0,void 0,function(){var r;return be(this,function(o){switch(o.label){case 0:return r=this.forwardInput,[4,Kt(n)];case 1:return[2,r.apply(this,[o.sent()])]}})})},t.prototype.locateFaces=function(n,r){return r===void 0&&(r={}),ye(this,void 0,void 0,function(){var o,a,i,s,u,c,l,f,d,h,p,m,g,v,x,y,b,w,C,E,S;return be(this,function(k){switch(k.label){case 0:return o=new v1(r),a=o.maxResults,i=o.minConfidence,[4,Kt(n)];case 1:for(s=k.sent(),u=this.forwardInput(s),c=u.boxes,l=u.scores,f=c[0],d=l[0],h=1;h<c.length;h++)c[h].dispose(),l[h].dispose();return g=(m=Array).from,[4,d.data()];case 2:return p=g.apply(m,[k.sent()]),v=.5,x=sM(f,p,a,v,i),y=s.getReshapedInputDimensions(0),b=s.inputSize,w=b/y.width,C=b/y.height,E=f.arraySync(),S=x.map(function(_){var A=[Math.max(0,E[_][0]),Math.min(1,E[_][2])].map(function(X){return X*C}),D=A[0],T=A[1],W=[Math.max(0,E[_][1]),Math.min(1,E[_][3])].map(function(X){return X*w}),$=W[0],q=W[1];return new oo(p[_],new r1($,D,q-$,T-D),{height:s.getInputHeight(0),width:s.getInputWidth(0)})}),f.dispose(),d.dispose(),[2,S]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(n){return nM(n)},t.prototype.extractParams=function(n){return eM(n)},t}(Bo);function hM(e){var t=new m1;return t.extractWeights(e),t}function ZL(e){return hM(e)}var JL=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(m1),pM=.4,vM=[new Ge(.738768,.874946),new Ge(2.42204,2.65704),new Ge(4.30971,7.04493),new Ge(10.246,4.59428),new Ge(12.6868,11.8741)],mM=[new Ge(1.603231,2.094468),new Ge(6.041143,7.080126),new Ge(2.882459,3.518061),new Ge(4.266906,5.178857),new Ge(9.041765,10.66308)],gM=[117.001,114.697,97.404],xM="tiny_yolov2_model",yM="tiny_yolov2_separable_conv_model",ol=function(e){return typeof e=="number"};function bM(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!ol(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return ol(t.x)&&ol(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(ol)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function g1(e){return de(function(){var t=nn(e,ue(.10000000149011612));return Ie(lt(Ot(e,t)),t)})}function Wo(e,t){return de(function(){var n=ga(e,[[0,0],[1,1],[1,1],[0,0]]);return n=tr(n,t.conv.filters,[1,1],"valid"),n=Ot(n,t.bn.sub),n=nn(n,t.bn.truediv),n=Ie(n,t.conv.bias),g1(n)})}function zo(e,t){return de(function(){var n=ga(e,[[0,0],[1,1],[1,1],[0,0]]);return n=Md(n,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),n=Ie(n,t.bias),g1(n)})}function wM(e,t){var n=Xd(e,t);function r(i,s){var u=kt(e(i)),c=kt(e(i));return t.push({paramPath:s+"/sub"},{paramPath:s+"/truediv"}),{sub:u,truediv:c}}function o(i,s,u){var c=n(i,s,3,u+"/conv"),l=r(s,u+"/bn");return{conv:c,bn:l}}var a=f1(e,t);return{extractConvParams:n,extractConvWithBatchNormParams:o,extractSeparableConvParams:a}}function CM(e,t,n,r){var o=Po(e),a=o.extractWeights,i=o.getRemainingWeights,s=[],u=wM(a,s),c=u.extractConvParams,l=u.extractConvWithBatchNormParams,f=u.extractSeparableConvParams,d;if(t.withSeparableConvs){var h=r[0],p=r[1],m=r[2],g=r[3],v=r[4],x=r[5],y=r[6],b=r[7],w=r[8],C=t.isFirstLayerConv2d?c(h,p,3,"conv0"):f(h,p,"conv0"),E=f(p,m,"conv1"),S=f(m,g,"conv2"),k=f(g,v,"conv3"),_=f(v,x,"conv4"),A=f(x,y,"conv5"),D=b?f(y,b,"conv6"):void 0,T=w?f(b,w,"conv7"):void 0,W=c(w||b||y,5*n,1,"conv8");d={conv0:C,conv1:E,conv2:S,conv3:k,conv4:_,conv5:A,conv6:D,conv7:T,conv8:W}}else{var h=r[0],p=r[1],m=r[2],g=r[3],v=r[4],x=r[5],y=r[6],b=r[7],w=r[8],C=l(h,p,"conv0"),E=l(p,m,"conv1"),S=l(m,g,"conv2"),k=l(g,v,"conv3"),_=l(v,x,"conv4"),A=l(x,y,"conv5"),D=l(y,b,"conv6"),T=l(b,w,"conv7"),W=c(w,5*n,1,"conv8");d={conv0:C,conv1:E,conv2:S,conv3:k,conv4:_,conv5:A,conv6:D,conv7:T,conv8:W}}if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{params:d,paramMappings:s}}function EM(e,t){var n=wa(e,t);function r(s){var u=n(s+"/sub",1),c=n(s+"/truediv",1);return{sub:u,truediv:c}}function o(s){var u=n(s+"/filters",4),c=n(s+"/bias",1);return{filters:u,bias:c}}function a(s){var u=o(s+"/conv"),c=r(s+"/bn");return{conv:u,bn:c}}var i=d1(n);return{extractConvParams:o,extractConvWithBatchNormParams:a,extractSeparableConvParams:i}}function _M(e,t){var n=[],r=EM(e,n),o=r.extractConvParams,a=r.extractConvWithBatchNormParams,i=r.extractSeparableConvParams,s;if(t.withSeparableConvs){var u=t.filterSizes&&t.filterSizes.length||9;s={conv0:t.isFirstLayerConv2d?o("conv0"):i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:u>7?i("conv6"):void 0,conv7:u>8?i("conv7"):void 0,conv8:o("conv8")}}else s={conv0:a("conv0"),conv1:a("conv1"),conv2:a("conv2"),conv3:a("conv3"),conv4:a("conv4"),conv5:a("conv5"),conv6:a("conv6"),conv7:a("conv7"),conv8:o("conv8")};return To(e,n),{params:s,paramMappings:n}}var m2;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(m2||(m2={}));var x1=function(){function e(t){var n=t===void 0?{}:t,r=n.inputSize,o=n.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=o||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),Ck=function(e){ke(t,e);function t(n){var r=e.call(this,"TinyYolov2")||this;return bM(n),r._config=n,r}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(n,r){var o=Wo(n,r.conv0);return o=Wt(o,[2,2],[2,2],"same"),o=Wo(o,r.conv1),o=Wt(o,[2,2],[2,2],"same"),o=Wo(o,r.conv2),o=Wt(o,[2,2],[2,2],"same"),o=Wo(o,r.conv3),o=Wt(o,[2,2],[2,2],"same"),o=Wo(o,r.conv4),o=Wt(o,[2,2],[2,2],"same"),o=Wo(o,r.conv5),o=Wt(o,[2,2],[1,1],"same"),o=Wo(o,r.conv6),o=Wo(o,r.conv7),Rr(o,r.conv8,"valid",!1)},t.prototype.runMobilenet=function(n,r){var o=this.config.isFirstLayerConv2d?g1(Rr(n,r.conv0,"valid",!1)):zo(n,r.conv0);return o=Wt(o,[2,2],[2,2],"same"),o=zo(o,r.conv1),o=Wt(o,[2,2],[2,2],"same"),o=zo(o,r.conv2),o=Wt(o,[2,2],[2,2],"same"),o=zo(o,r.conv3),o=Wt(o,[2,2],[2,2],"same"),o=zo(o,r.conv4),o=Wt(o,[2,2],[2,2],"same"),o=zo(o,r.conv5),o=Wt(o,[2,2],[1,1],"same"),o=r.conv6?zo(o,r.conv6):o,o=r.conv7?zo(o,r.conv7):o,Rr(o,r.conv8,"valid",!1)},t.prototype.forwardInput=function(n,r){var o=this,a=this.params;if(!a)throw new Error("TinyYolov2 - load model before inference");return de(function(){var i=n.toBatchTensor(r,!1).toFloat();return i=o.config.meanRgb?bc(i,o.config.meanRgb):i,i=i.div(ue(256)),o.config.withSeparableConvs?o.runMobilenet(i,a):o.runTinyYolov2(i,a)})},t.prototype.forward=function(n,r){return ye(this,void 0,void 0,function(){var o;return be(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,Kt(n)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent()]}})})},t.prototype.detect=function(n,r){return r===void 0&&(r={}),ye(this,void 0,void 0,function(){var o,a,i,s,u,c,l,f,d,h,p,m,g,v,x=this;return be(this,function(y){switch(y.label){case 0:return o=new x1(r),a=o.inputSize,i=o.scoreThreshold,[4,Kt(n)];case 1:return s=y.sent(),[4,this.forwardInput(s,a)];case 2:return u=y.sent(),c=de(function(){return Pt(u)[0].expandDims()}),l={width:s.getInputWidth(0),height:s.getInputHeight(0)},[4,this.extractBoxes(c,s.getReshapedInputDimensions(0),i)];case 3:return f=y.sent(),u.dispose(),c.dispose(),d=f.map(function(b){return b.box}),h=f.map(function(b){return b.score}),p=f.map(function(b){return b.classScore}),m=f.map(function(b){return x.config.classes[b.label]}),g=ju(d.map(function(b){return b.rescale(a)}),h,this.config.iouThreshold,!0),v=g.map(function(b){return new GS(h[b],p[b],m[b],d[b],l)}),[2,v]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(n){return _M(n,this.config)},t.prototype.extractParams=function(n){var r=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,o=r?r.length:void 0;if(o!==7&&o!==8&&o!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+o+" filterSizes in config");return CM(n,this.config,this.boxEncodingSize,r)},t.prototype.extractBoxes=function(n,r,o){return ye(this,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p,m,g,v,x,y,b,w,C,E,S,k,_,A,D,T,W,$,q,X,P=this;return be(this,function(V){switch(V.label){case 0:return a=r.width,i=r.height,s=Math.max(a,i),u=s/a,c=s/i,l=n.shape[1],f=this.config.anchors.length,d=de(function(){var G=n.reshape([l,l,f,P.boxEncodingSize]),L=G.slice([0,0,0,0],[l,l,f,4]),H=G.slice([0,0,0,4],[l,l,f,1]),K=P.withClassScores?ro(G.slice([0,0,0,5],[l,l,f,P.config.classes.length]),3):ue(0);return[L,H,K]}),h=d[0],p=d[1],m=d[2],g=[],[4,p.array()];case 1:return v=V.sent(),[4,h.array()];case 2:x=V.sent(),y=0,V.label=3;case 3:if(!(y<l))return[3,12];b=0,V.label=4;case 4:if(!(b<l))return[3,11];w=0,V.label=5;case 5:return w<f?(C=cp(v[y][b][w][0]),!o||C>o?(E=(b+cp(x[y][b][w][0]))/l*u,S=(y+cp(x[y][b][w][1]))/l*c,k=Math.exp(x[y][b][w][2])*this.config.anchors[w].x/l*u,_=Math.exp(x[y][b][w][3])*this.config.anchors[w].y/l*c,A=E-k/2,D=S-_/2,T={row:y,col:b,anchor:w},this.withClassScores?[4,this.extractPredictedClass(m,T)]:[3,7]):[3,9]):[3,10];case 6:return X=V.sent(),[3,8];case 7:X={classScore:1,label:0},V.label=8;case 8:W=X,$=W.classScore,q=W.label,g.push(fn({box:new qd(A,D,A+k,D+_),score:C,classScore:C*$,label:q},T)),V.label=9;case 9:return w++,[3,5];case 10:return b++,[3,4];case 11:return y++,[3,3];case 12:return h.dispose(),p.dispose(),m.dispose(),[2,g]}})})},t.prototype.extractPredictedClass=function(n,r){return ye(this,void 0,void 0,function(){var o,a,i,s;return be(this,function(u){switch(u.label){case 0:return o=r.row,a=r.col,i=r.anchor,[4,n.array()];case 1:return s=u.sent(),[2,Array(this.config.classes.length).fill(0).map(function(c,l){return s[o][a][i][l]}).map(function(c,l){return{classScore:c,label:l}}).reduce(function(c,l){return c.classScore>l.classScore?c:l})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(Bo),SM=function(e){ke(t,e);function t(n){n===void 0&&(n=!0);var r=this,o=Object.assign({},{withSeparableConvs:n,iouThreshold:pM,classes:["face"]},n?{anchors:mM,meanRgb:gM}:{anchors:vM,withClassScores:!0});return r=e.call(this,o)||this,r}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return ye(this,void 0,void 0,function(){var o;return be(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new oo(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?yM:xM},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(Ck),kM=function(e){ke(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n._name="TinyFaceDetectorOptions",n}return t}(x1),wc=function(){function e(){}return e.prototype.then=function(t){return ye(this,void 0,void 0,function(){var n;return be(this,function(r){switch(r.label){case 0:return n=t,[4,this.run()];case 1:return[2,n.apply(void 0,[r.sent()])]}})})},e.prototype.run=function(){return ye(this,void 0,void 0,function(){return be(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function Yd(e,t,n,r,o){return o===void 0&&(o=function(a){var i=a.alignedRect;return i}),ye(this,void 0,void 0,function(){var a,i,s,u,c;return be(this,function(l){switch(l.label){case 0:return a=e.map(function(f){return dk(f)?o(f):f.detection}),s=r,s?[3,5]:t instanceof Je?[4,c1(t,a)]:[3,2];case 1:return u=l.sent(),[3,4];case 2:return[4,u1(t,a)];case 3:u=l.sent(),l.label=4;case 4:s=u,l.label=5;case 5:return i=s,[4,n(i)];case 6:return c=l.sent(),i.forEach(function(f){return f instanceof Je&&f.dispose()}),[2,c]}})})}function y1(e,t,n,r,o){return ye(this,void 0,void 0,function(){var a=this;return be(this,function(i){return[2,Yd([e],t,function(s){return ye(a,void 0,void 0,function(){return be(this,function(u){return[2,n(s[0])]})})},r,o)]})})}function AM(e){return de(function(){return Nn(Pt(e,3).reverse(),3)})}var al=2,_f=12;function DM(e,t){var n=Xd(e,t),r=l1(e,t);function o(c,l){var f=kt(e(c));return t.push({paramPath:l}),f}function a(c,l,f){f===void 0&&(f=!1);var d=n(c[0],c[1],3,l+"/conv1"),h=o(c[1],l+"/prelu1_alpha"),p=n(c[1],c[2],3,l+"/conv2"),m=o(c[2],l+"/prelu2_alpha"),g=n(c[2],c[3],f?2:3,l+"/conv3"),v=o(c[3],l+"/prelu3_alpha");return{conv1:d,prelu1_alpha:h,conv2:p,prelu2_alpha:m,conv3:g,prelu3_alpha:v}}function i(){var c=a([3,10,16,32],"pnet"),l=n(32,2,1,"pnet/conv4_1"),f=n(32,4,1,"pnet/conv4_2");return fn(fn({},c),{conv4_1:l,conv4_2:f})}function s(){var c=a([3,28,48,64],"rnet",!0),l=r(576,128,"rnet/fc1"),f=o(128,"rnet/prelu4_alpha"),d=r(128,2,"rnet/fc2_1"),h=r(128,4,"rnet/fc2_2");return fn(fn({},c),{fc1:l,prelu4_alpha:f,fc2_1:d,fc2_2:h})}function u(){var c=a([3,32,64,64],"onet"),l=n(64,128,2,"onet/conv4"),f=o(128,"onet/prelu4_alpha"),d=r(1152,256,"onet/fc1"),h=o(256,"onet/prelu5_alpha"),p=r(256,2,"onet/fc2_1"),m=r(256,4,"onet/fc2_2"),g=r(256,10,"onet/fc2_3");return fn(fn({},c),{conv4:l,prelu4_alpha:f,fc1:d,prelu5_alpha:h,fc2_1:p,fc2_2:m,fc2_3:g})}return{extractPNetParams:i,extractRNetParams:s,extractONetParams:u}}function RM(e){var t=Po(e),n=t.extractWeights,r=t.getRemainingWeights,o=[],a=DM(n,o),i=a.extractPNetParams,s=a.extractRNetParams,u=a.extractONetParams,c=i(),l=s(),f=u();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:c,rnet:l,onet:f},paramMappings:o}}function FM(e,t){var n=wa(e,t);function r(l){var f=n(l+"/weights",4,l+"/filters"),d=n(l+"/bias",1);return{filters:f,bias:d}}function o(l){var f=n(l+"/weights",2),d=n(l+"/bias",1);return{weights:f,bias:d}}function a(l){return n(l,1)}function i(l){var f=r(l+"/conv1"),d=a(l+"/prelu1_alpha"),h=r(l+"/conv2"),p=a(l+"/prelu2_alpha"),m=r(l+"/conv3"),g=a(l+"/prelu3_alpha");return{conv1:f,prelu1_alpha:d,conv2:h,prelu2_alpha:p,conv3:m,prelu3_alpha:g}}function s(){var l=i("pnet"),f=r("pnet/conv4_1"),d=r("pnet/conv4_2");return fn(fn({},l),{conv4_1:f,conv4_2:d})}function u(){var l=i("rnet"),f=o("rnet/fc1"),d=a("rnet/prelu4_alpha"),h=o("rnet/fc2_1"),p=o("rnet/fc2_2");return fn(fn({},l),{fc1:f,prelu4_alpha:d,fc2_1:h,fc2_2:p})}function c(){var l=i("onet"),f=r("onet/conv4"),d=a("onet/prelu4_alpha"),h=o("onet/fc1"),p=a("onet/prelu5_alpha"),m=o("onet/fc2_1"),g=o("onet/fc2_2"),v=o("onet/fc2_3");return fn(fn({},l),{conv4:f,prelu4_alpha:d,fc1:h,prelu5_alpha:p,fc2_1:m,fc2_2:g,fc2_3:v})}return{extractPNetParams:s,extractRNetParams:u,extractONetParams:c}}function IM(e){var t=[],n=FM(e,t),r=n.extractPNetParams,o=n.extractRNetParams,a=n.extractONetParams,i=r(),s=o(),u=a();return To(e,t),{params:{pnet:i,rnet:s,onet:u},paramMappings:t}}function yv(e,t){var n=t[0],r=t[1];return{height:Math.floor(n*e),width:Math.floor(r*e)}}function BM(e,t,n){for(var r=n[0],o=n[1],a=_f/e,i=[],s=Math.min(r,o)*a,u=0;s>=12;)i.push(a*Math.pow(t,u)),s=s*t,u+=1;return i}var b1=function(e){ke(t,e);function t(n,r,o,a){return e.call(this,{left:n,top:r,right:o,bottom:a},!0)||this}return t}(Ao);function Ek(e){return de(function(){return nn(Ot(e,ue(127.5)),ue(.0078125))})}function Hi(e,t){return de(function(){return Ie(lt(e),nn(t,Uu(lt(Uu(e)))))})}function w1(e,t,n){return n===void 0&&(n=!1),de(function(){var r=Rr(e,t.conv1,"valid");return r=Hi(r,t.prelu1_alpha),r=Wt(r,n?[2,2]:[3,3],[2,2],"same"),r=Rr(r,t.conv2,"valid"),r=Hi(r,t.prelu2_alpha),r=n?r:Wt(r,[3,3],[2,2],"valid"),r=Rr(r,t.conv3,"valid"),r=Hi(r,t.prelu3_alpha),r})}function TM(e,t){return de(function(){var n=w1(e,t,!0),r=Rr(n,t.conv4_1,"valid"),o=$n(gc(r,3),3),a=ro(Ot(r,o),3),i=Rr(n,t.conv4_2,"valid");return{prob:a,regions:i}})}function PM(e,t){return de(function(){var n=yv(t,e.shape.slice(1)),r=n.height,o=n.width,a=Hd.resizeBilinear(e,[r,o]),i=Ek(a);return ko(i,[0,2,1,3])})}function NM(e,t,n,r){for(var o=[],a=e.arraySync(),i=0;i<e.shape[0];i++)for(var s=0;s<e.shape[1];s++)a[i][s]>=r&&o.push(new Ge(s,i));var u=o.map(function(c){var l=new qd(Math.round((c.y*al+1)/n),Math.round((c.x*al+1)/n),Math.round((c.y*al+_f)/n),Math.round((c.x*al+_f)/n)),f=a[c.y][c.x],d=t.arraySync(),h=new b1(d[c.y][c.x][0],d[c.y][c.x][1],d[c.y][c.x][2],d[c.y][c.x][3]);return{cell:l,score:f,region:h}});return u}function OM(e,t,n,r,o){o.stage1=[];var a=t.map(function(d){return de(function(){var h={scale:d},p=PM(e,d),m=Date.now(),g=TM(p,r),v=g.prob,x=g.regions;h.pnet=Date.now()-m;var y=Pt(Pt(v,3)[1])[0],b=Pt(x)[0];return{scoresTensor:y,regionsTensor:b,scale:d,statsForScale:h}})}),i=a.map(function(d){var h=d.scoresTensor,p=d.regionsTensor,m=d.scale,g=d.statsForScale,v=NM(h,p,m,n);if(h.dispose(),p.dispose(),!v.length)return o.stage1.push(g),[];var x=Date.now(),y=ju(v.map(function(b){return b.cell}),v.map(function(b){return b.score}),.5);return g.nms=Date.now()-x,g.numBoxes=y.length,o.stage1.push(g),y.map(function(b){return v[b]})}),s=i.reduce(function(d,h){return d.concat(h)},[]),u=[],c=[];if(s.length>0){var l=Date.now(),f=ju(s.map(function(d){return d.cell}),s.map(function(d){return d.score}),.7);o.stage1_nms=Date.now()-l,c=f.map(function(d){return s[d].score}),u=f.map(function(d){return s[d]}).map(function(d){var h=d.cell,p=d.region;return new qd(h.left+p.left*h.width,h.top+p.top*h.height,h.right+p.right*h.width,h.bottom+p.bottom*h.height).toSquare().round()})}return{boxes:u,scores:c}}function _k(e,t,n){var r=n.width,o=n.height;return ye(this,void 0,void 0,function(){var a,i,s,u=this;return be(this,function(c){switch(c.label){case 0:return a=Jr(e),[4,Promise.all(t.map(function(l){return ye(u,void 0,void 0,function(){var f,d,h,p,m,g,v,x;return be(this,function(y){return f=l.padAtBorders(e.height,e.width),d=f.y,h=f.ey,p=f.x,m=f.ex,g=p-1,v=d-1,x=a.getImageData(g,v,m-g,h-v),[2,pn.isNodejs()?s1(x):createImageBitmap(x)]})})}))];case 1:return i=c.sent(),s=[],i.forEach(function(l){var f=Kd({width:r,height:o}),d=Jr(f);d.drawImage(l,0,0,r,o);for(var h=d.getImageData(0,0,r,o).data,p=[],m=0;m<h.length;m+=4)p.push(h[m+2]),p.push(h[m+1]),p.push(h[m]);s.push(p)}),[2,s.map(function(l){var f=de(function(){var d=ko(bn(l,[1,r,o,3]),[0,2,1,3]).toFloat();return Ek(d)});return f})]}})})}function MM(e,t){return de(function(){var n=w1(e,t),r=cr(n,[n.shape[0],t.fc1.weights.shape[0]]),o=qr(r,t.fc1),a=Hi(o,t.prelu4_alpha),i=qr(a,t.fc2_1),s=$n(gc(i,1),1),u=ro(Ot(i,s),1),c=qr(a,t.fc2_2),l=Pt(u,1)[1];return{scores:l,regions:c}})}function LM(e,t,n,r,o){return ye(this,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p,m,g,v,x;return be(this,function(y){switch(y.label){case 0:return a=Date.now(),[4,_k(e,t,{width:24,height:24})];case 1:return i=y.sent(),o.stage2_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(b){var w=MM(b,r);return b.dispose(),w}),o.stage2_rnet=Date.now()-a,u=s.length>1?Tt(s.map(function(b){return b.scores})):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[y.sent()]),u.dispose(),d=c.map(function(b,w){return{score:b,idx:w}}).filter(function(b){return b.score>n}).map(function(b){var w=b.idx;return w}),h=d.map(function(b){return t[b]}),p=d.map(function(b){return c[b]}),m=[],g=[],h.length>0&&(a=Date.now(),v=ju(h,p,.7),o.stage2_nms=Date.now()-a,x=v.map(function(b){var w=s[d[b]].regions.arraySync();return new b1(w[0][0],w[0][1],w[0][2],w[0][3])}),g=v.map(function(b){return p[b]}),m=v.map(function(b,w){return h[b].calibrate(x[w])})),s.forEach(function(b){b.regions.dispose(),b.scores.dispose()}),[2,{boxes:m,scores:g}]}})})}function WM(e,t){return de(function(){var n=w1(e,t);n=Wt(n,[2,2],[2,2],"same"),n=Rr(n,t.conv4,"valid"),n=Hi(n,t.prelu4_alpha);var r=cr(n,[n.shape[0],t.fc1.weights.shape[0]]),o=qr(r,t.fc1),a=Hi(o,t.prelu5_alpha),i=qr(a,t.fc2_1),s=$n(gc(i,1),1),u=ro(Ot(i,s),1),c=qr(a,t.fc2_2),l=qr(a,t.fc2_3),f=Pt(u,1)[1];return{scores:f,regions:c,points:l}})}function zM(e,t,n,r,o){return ye(this,void 0,void 0,function(){var a,i,s,u,c,l,f,d,h,p,m,g,v,x,y;return be(this,function(b){switch(b.label){case 0:return a=Date.now(),[4,_k(e,t,{width:48,height:48})];case 1:return i=b.sent(),o.stage3_extractImagePatches=Date.now()-a,a=Date.now(),s=i.map(function(w){var C=WM(w,r);return w.dispose(),C}),o.stage3_onet=Date.now()-a,u=s.length>1?Tt(s.map(function(w){return w.scores})):s[0].scores,f=(l=Array).from,[4,u.data()];case 2:return c=f.apply(l,[b.sent()]),u.dispose(),d=c.map(function(w,C){return{score:w,idx:C}}).filter(function(w){return w.score>n}).map(function(w){var C=w.idx;return C}),h=d.map(function(w){var C=s[w].regions.arraySync();return new b1(C[0][0],C[0][1],C[0][2],C[0][3])}),p=d.map(function(w,C){return t[w].calibrate(h[C])}),m=d.map(function(w){return c[w]}),g=[],v=[],x=[],p.length>0&&(a=Date.now(),y=ju(p,m,.7,!1),o.stage3_nms=Date.now()-a,g=y.map(function(w){return p[w]}),v=y.map(function(w){return m[w]}),x=y.map(function(w,C){return Array(5).fill(0).map(function(E,S){var k=s[w].points.arraySync();return new Ge(k[0][S]*(g[C].width+1)+g[C].left,k[0][S+5]*(g[C].height+1)+g[C].top)})})),s.forEach(function(w){w.regions.dispose(),w.scores.dispose(),w.points.dispose()}),[2,{boxes:g,scores:v,points:x}]}})})}var $M=function(e){ke(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(n){return ye(this,void 0,void 0,function(){return be(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,n)]})})},t.prototype.loadFromDisk=function(n){return ye(this,void 0,void 0,function(){return be(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,n)]})})},t.prototype.forwardInput=function(n,r){return r===void 0&&(r={}),ye(this,void 0,void 0,function(){var o,a,i,s,u,c,l,f,d,h,p,m,g,v,x,y,b,w,C,E,S;return be(this,function(k){switch(k.label){case 0:if(o=this.params,!o)throw new Error("Mtcnn - load model before inference");if(a=n.canvases[0],!a)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return i={},s=Date.now(),u=de(function(){return AM($n(Vd.fromPixels(a)).toFloat())}),c=function(_){return u.dispose(),i.total=Date.now()-s,_},l=u.shape.slice(1),f=l[0],d=l[1],h=new wk(r),p=h.minFaceSize,m=h.scaleFactor,g=h.maxNumScales,v=h.scoreThresholds,x=h.scaleSteps,y=(x||BM(p,m,[f,d])).filter(function(_){var A=yv(_,[f,d]);return Math.min(A.width,A.height)>_f}).slice(0,g),i.scales=y,i.pyramid=y.map(function(_){return yv(_,[f,d])}),b=Date.now(),[4,OM(u,y,v[0],o.pnet,i)];case 1:return w=k.sent(),i.total_stage1=Date.now()-b,w.boxes.length?(i.stage2_numInputBoxes=w.boxes.length,b=Date.now(),[4,LM(a,w.boxes,v[1],o.rnet,i)]):[2,c({results:[],stats:i})];case 2:return C=k.sent(),i.total_stage2=Date.now()-b,C.boxes.length?(i.stage3_numInputBoxes=C.boxes.length,b=Date.now(),[4,zM(a,C.boxes,v[2],o.onet,i)]):[2,c({results:[],stats:i})];case 3:return E=k.sent(),i.total_stage3=Date.now()-b,S=E.boxes.map(function(_,A){return h1(o1({},new oo(E.scores[A],new r1(_.left/d,_.top/f,_.width/d,_.height/f),{height:f,width:d})),new pO(E.points[A].map(function(D){return D.sub(new Ge(_.left,_.top)).div(new Ge(_.width,_.height))}),{width:_.width,height:_.height}))}),[2,c({results:S,stats:i})]}})})},t.prototype.forward=function(n,r){return r===void 0&&(r={}),ye(this,void 0,void 0,function(){var o;return be(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,Kt(n)];case 1:return[4,o.apply(this,[a.sent(),r])];case 2:return[2,a.sent().results]}})})},t.prototype.forwardWithStats=function(n,r){return r===void 0&&(r={}),ye(this,void 0,void 0,function(){var o;return be(this,function(a){switch(a.label){case 0:return o=this.forwardInput,[4,Kt(n)];case 1:return[2,o.apply(this,[a.sent(),r])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(n){return IM(n)},t.prototype.extractParams=function(n){return RM(n)},t}(Bo),UM=.4,HM=[new Ge(1.603231,2.094468),new Ge(6.041143,7.080126),new Ge(2.882459,3.518061),new Ge(4.266906,5.178857),new Ge(9.041765,10.66308)],VM=[117.001,114.697,97.404],jM=function(e){ke(t,e);function t(){var n=this,r={withSeparableConvs:!0,iouThreshold:UM,classes:["face"],anchors:HM,meanRgb:VM,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return n=e.call(this,r)||this,n}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(n,r){return ye(this,void 0,void 0,function(){var o;return be(this,function(a){switch(a.label){case 0:return[4,this.detect(n,r)];case 1:return o=a.sent(),[2,o.map(function(i){return new oo(i.score,i.relativeBox,{width:i.imageWidth,height:i.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(n){return e.prototype.extractParamsFromWeigthMap.call(this,n)},t}(Ck),Ue={ssdMobilenetv1:new m1,tinyFaceDetector:new jM,tinyYolov2:new SM,mtcnn:new $M,faceLandmark68Net:new vk,faceLandmark68TinyNet:new jO,faceRecognitionNet:new ZO,faceExpressionNet:new FO,ageGenderNet:new $O},GM=function(e,t){return Ue.ssdMobilenetv1.locateFaces(e,t)},e7=function(e,t){return Ue.tinyFaceDetector.locateFaces(e,t)},t7=function(e,t){return Ue.tinyYolov2.locateFaces(e,t)},n7=function(e,t){return Ue.mtcnn.forward(e,t)},qM=function(e){return Ue.faceLandmark68Net.detectLandmarks(e)},r7=function(e){return Ue.faceLandmark68TinyNet.detectLandmarks(e)},o7=function(e){return Ue.faceRecognitionNet.computeFaceDescriptor(e)},a7=function(e){return Ue.faceExpressionNet.predictExpressions(e)},i7=function(e){return Ue.ageGenderNet.predictAgeAndGender(e)},KM=function(e){return Ue.ssdMobilenetv1.load(e)},s7=function(e){return Ue.tinyFaceDetector.load(e)},u7=function(e){return Ue.mtcnn.load(e)},c7=function(e){return Ue.tinyYolov2.load(e)},l7=function(e){return Ue.faceLandmark68Net.load(e)},f7=function(e){return Ue.faceLandmark68TinyNet.load(e)},d7=function(e){return Ue.faceRecognitionNet.load(e)},h7=function(e){return Ue.faceExpressionNet.load(e)},p7=function(e){return Ue.ageGenderNet.load(e)},v7=KM,m7=GM,g7=qM,Sk=function(e){ke(t,e);function t(n,r,o){var a=e.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=o,a}return t}(wc),C1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r,o=this;return be(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,Yd(n,this.input,function(i){return ye(o,void 0,void 0,function(){return be(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Ue.faceExpressionNet.predictExpressions(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(i,s){return fk(i,r[s])})]}})})},t.prototype.withAgeAndGender=function(){return new k1(this,this.input)},t}(Sk),E1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r;return be(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,y1(n,this.input,function(a){return Ue.faceExpressionNet.predictExpressions(a)},this.extractedFaces)]:[2];case 2:return r=o.sent(),[2,fk(n,r)]}})})},t.prototype.withAgeAndGender=function(){return new A1(this,this.input)},t}(Sk),_1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new D1(this,this.input)},t.prototype.withFaceDescriptors=function(){return new F1(this,this.input)},t}(C1),S1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new R1(this,this.input)},t.prototype.withFaceDescriptor=function(){return new I1(this,this.input)},t}(E1),kk=function(e){ke(t,e);function t(n,r,o){var a=e.call(this)||this;return a.parentTask=n,a.input=r,a.extractedFaces=o,a}return t}(wc),k1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r,o=this;return be(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return n=a.sent(),[4,Yd(n,this.input,function(i){return ye(o,void 0,void 0,function(){return be(this,function(s){switch(s.label){case 0:return[4,Promise.all(i.map(function(u){return Ue.ageGenderNet.predictAgeAndGender(u)}))];case 1:return[2,s.sent()]}})})},this.extractedFaces)];case 2:return r=a.sent(),[2,n.map(function(i,s){var u=r[s],c=u.age,l=u.gender,f=u.genderProbability;return yk(bk(i,l,f),c)})]}})})},t.prototype.withFaceExpressions=function(){return new C1(this,this.input)},t}(kk),A1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r,o,a,i;return be(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?[4,y1(n,this.input,function(u){return Ue.ageGenderNet.predictAgeAndGender(u)},this.extractedFaces)]:[2];case 2:return r=s.sent(),o=r.age,a=r.gender,i=r.genderProbability,[2,yk(bk(n,a,i),o)]}})})},t.prototype.withFaceExpressions=function(){return new E1(this,this.input)},t}(kk),D1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new _1(this,this.input)},t.prototype.withFaceDescriptors=function(){return new F1(this,this.input)},t}(k1),R1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new S1(this,this.input)},t.prototype.withFaceDescriptor=function(){return new I1(this,this.input)},t}(A1),Ak=function(e){ke(t,e);function t(n,r){var o=e.call(this)||this;return o.parentTask=n,o.input=r,o}return t}(wc),F1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r;return be(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),[4,Yd(n,this.input,function(a){return Promise.all(a.map(function(i){return Ue.faceRecognitionNet.computeFaceDescriptor(i)}))},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=o.sent(),[2,r.map(function(a,i){return xk(n[i],a)})]}})})},t.prototype.withFaceExpressions=function(){return new _1(this,this.input)},t.prototype.withAgeAndGender=function(){return new D1(this,this.input)},t}(Ak),I1=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r;return be(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return n=o.sent(),n?[4,y1(n,this.input,function(a){return Ue.faceRecognitionNet.computeFaceDescriptor(a)},null,function(a){return a.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=o.sent(),[2,xk(n,r)]}})})},t.prototype.withFaceExpressions=function(){return new S1(this,this.input)},t.prototype.withAgeAndGender=function(){return new R1(this,this.input)},t}(Ak),Dk=function(e){ke(t,e);function t(n,r,o){var a=e.call(this)||this;return a.parentTask=n,a.input=r,a.useTinyLandmarkNet=o,a}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Ue.faceLandmark68TinyNet:Ue.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(wc),XM=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r,o,a,i,s=this;return be(this,function(u){switch(u.label){case 0:return[4,this.parentTask];case 1:return n=u.sent(),r=n.map(function(c){return c.detection}),this.input instanceof Je?[4,c1(this.input,r)]:[3,3];case 2:return a=u.sent(),[3,5];case 3:return[4,u1(this.input,r)];case 4:a=u.sent(),u.label=5;case 5:return o=a,[4,Promise.all(o.map(function(c){return s.landmarkNet.detectLandmarks(c)}))];case 6:return i=u.sent(),o.forEach(function(c){return c instanceof Je&&c.dispose()}),[2,n.map(function(c,l){return h1(c,i[l])})]}})})},t.prototype.withFaceExpressions=function(){return new _1(this,this.input)},t.prototype.withAgeAndGender=function(){return new D1(this,this.input)},t.prototype.withFaceDescriptors=function(){return new F1(this,this.input)},t}(Dk),YM=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r,o,a,i;return be(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return n=s.sent(),n?(r=n.detection,this.input instanceof Je?[4,c1(this.input,[r])]:[3,3]):[2];case 2:return a=s.sent(),[3,5];case 3:return[4,u1(this.input,[r])];case 4:a=s.sent(),s.label=5;case 5:return o=a,[4,this.landmarkNet.detectLandmarks(o[0])];case 6:return i=s.sent(),o.forEach(function(u){return u instanceof Je&&u.dispose()}),[2,h1(n,i)]}})})},t.prototype.withFaceExpressions=function(){return new S1(this,this.input)},t.prototype.withAgeAndGender=function(){return new R1(this,this.input)},t.prototype.withFaceDescriptor=function(){return new I1(this,this.input)},t}(Dk),Rk=function(e){ke(t,e);function t(n,r){r===void 0&&(r=new v1);var o=e.call(this)||this;return o.input=n,o.options=r,o}return t}(wc),QM=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r,o,a;return be(this,function(i){switch(i.label){case 0:return n=this,r=n.input,o=n.options,o instanceof wk?[4,Ue.mtcnn.forward(r,o)]:[3,2];case 1:return[2,i.sent().map(function(s){return s.detection})];case 2:if(a=o instanceof kM?function(s){return Ue.tinyFaceDetector.locateFaces(s,o)}:o instanceof v1?function(s){return Ue.ssdMobilenetv1.locateFaces(s,o)}:o instanceof x1?function(s){return Ue.tinyYolov2.locateFaces(s,o)}:null,!a)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,a(r)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var n=this;return new Promise(function(r){return ye(n,void 0,void 0,function(){var o;return be(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o.map(function(i){return o1({},i)}))]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new XM(this.runAndExtendWithFaceDetections(),this.input,n)},t.prototype.withFaceExpressions=function(){return new C1(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new k1(this.runAndExtendWithFaceDetections(),this.input)},t}(Rk),x7=function(e){ke(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return ye(this,void 0,void 0,function(){var n,r;return be(this,function(o){switch(o.label){case 0:return[4,new QM(this.input,this.options)];case 1:return n=o.sent(),r=n[0],n.forEach(function(a){a.score>r.score&&(r=a)}),[2,r]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var n=this;return new Promise(function(r){return ye(n,void 0,void 0,function(){var o;return be(this,function(a){switch(a.label){case 0:return[4,this.run()];case 1:return o=a.sent(),[2,r(o?o1({},o):void 0)]}})})})},t.prototype.withFaceLandmarks=function(n){return n===void 0&&(n=!1),new YM(this.runAndExtendWithFaceDetection(),this.input,n)},t.prototype.withFaceExpressions=function(){return new E1(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new A1(this.runAndExtendWithFaceDetection(),this.input)},t}(Rk);function ZM(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var n=Array.from(e),r=Array.from(t);return Math.sqrt(n.map(function(o,a){return o-r[a]}).reduce(function(o,a){return o+Math.pow(a,2)},0))}var y7=function(){function e(t,n){n===void 0&&(n=.6),this._distanceThreshold=n;var r=Array.isArray(t)?t:[t];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var o=1,a=function(){return"person "+o++};this._labeledDescriptors=r.map(function(i){if(i instanceof tl)return i;if(i instanceof Float32Array)return new tl(a(),[i]);if(i.descriptor&&i.descriptor instanceof Float32Array)return new tl(a(),[i.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,n){return n.map(function(r){return ZM(r,t)}).reduce(function(r,o){return r+o},0)/(n.length||1)},e.prototype.matchDescriptor=function(t){var n=this;return this.labeledDescriptors.map(function(r){var o=r.descriptors,a=r.label;return new d2(a,n.computeMeanDistance(t,o))}).reduce(function(r,o){return r.distance<o.distance?r:o})},e.prototype.findBestMatch=function(t){var n=this.matchDescriptor(t);return n.distance<this.distanceThreshold?n:new d2("unknown",n.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var n=t.labeledDescriptors.map(function(r){return tl.fromJSON(r)});return new e(n,t.distanceThreshold)},e}(),Fk={exports:{}};function qs(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var dp={exports:{}};const JM={},eL=Object.freeze(Object.defineProperty({__proto__:null,default:JM},Symbol.toStringTag,{value:"Module"})),tL=eo(eL);var g2;function We(){return g2||(g2=1,function(e,t){(function(n,r){e.exports=r()})(Ae,function(){var n=n||function(r,o){var a;if(typeof window<"u"&&window.crypto&&(a=window.crypto),typeof self<"u"&&self.crypto&&(a=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(a=globalThis.crypto),!a&&typeof window<"u"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof Ae<"u"&&Ae.crypto&&(a=Ae.crypto),!a&&typeof qs=="function")try{a=tL}catch{}var i=function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function x(){}return function(y){var b;return x.prototype=y,b=new x,x.prototype=null,b}}(),u={},c=u.lib={},l=c.Base=function(){return{extend:function(x){var y=s(this);return x&&y.mixIn(x),(!y.hasOwnProperty("init")||this.init===y.init)&&(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var y in x)x.hasOwnProperty(y)&&(this[y]=x[y]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=c.WordArray=l.extend({init:function(x,y){x=this.words=x||[],y!=o?this.sigBytes=y:this.sigBytes=x.length*4},toString:function(x){return(x||h).stringify(this)},concat:function(x){var y=this.words,b=x.words,w=this.sigBytes,C=x.sigBytes;if(this.clamp(),w%4)for(var E=0;E<C;E++){var S=b[E>>>2]>>>24-E%4*8&255;y[w+E>>>2]|=S<<24-(w+E)%4*8}else for(var k=0;k<C;k+=4)y[w+k>>>2]=b[k>>>2];return this.sigBytes+=C,this},clamp:function(){var x=this.words,y=this.sigBytes;x[y>>>2]&=4294967295<<32-y%4*8,x.length=r.ceil(y/4)},clone:function(){var x=l.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var y=[],b=0;b<x;b+=4)y.push(i());return new f.init(y,x)}}),d=u.enc={},h=d.Hex={stringify:function(x){for(var y=x.words,b=x.sigBytes,w=[],C=0;C<b;C++){var E=y[C>>>2]>>>24-C%4*8&255;w.push((E>>>4).toString(16)),w.push((E&15).toString(16))}return w.join("")},parse:function(x){for(var y=x.length,b=[],w=0;w<y;w+=2)b[w>>>3]|=parseInt(x.substr(w,2),16)<<24-w%8*4;return new f.init(b,y/2)}},p=d.Latin1={stringify:function(x){for(var y=x.words,b=x.sigBytes,w=[],C=0;C<b;C++){var E=y[C>>>2]>>>24-C%4*8&255;w.push(String.fromCharCode(E))}return w.join("")},parse:function(x){for(var y=x.length,b=[],w=0;w<y;w++)b[w>>>2]|=(x.charCodeAt(w)&255)<<24-w%4*8;return new f.init(b,y)}},m=d.Utf8={stringify:function(x){try{return decodeURIComponent(escape(p.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return p.parse(unescape(encodeURIComponent(x)))}},g=c.BufferedBlockAlgorithm=l.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(x){typeof x=="string"&&(x=m.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var y,b=this._data,w=b.words,C=b.sigBytes,E=this.blockSize,S=E*4,k=C/S;x?k=r.ceil(k):k=r.max((k|0)-this._minBufferSize,0);var _=k*E,A=r.min(_*4,C);if(_){for(var D=0;D<_;D+=E)this._doProcessBlock(w,D);y=w.splice(0,_),b.sigBytes-=A}return new f.init(y,A)},clone:function(){var x=l.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0});c.Hasher=g.extend({cfg:l.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){x&&this._append(x);var y=this._doFinalize();return y},blockSize:16,_createHelper:function(x){return function(y,b){return new x.init(b).finalize(y)}},_createHmacHelper:function(x){return function(y,b){return new v.HMAC.init(x,b).finalize(y)}}});var v=u.algo={};return u}(Math);return n})}(dp)),dp.exports}var hp={exports:{}},x2;function Qd(){return x2||(x2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(r){var o=n,a=o.lib,i=a.Base,s=a.WordArray,u=o.x64={};u.Word=i.extend({init:function(c,l){this.high=c,this.low=l}}),u.WordArray=i.extend({init:function(c,l){c=this.words=c||[],l!=r?this.sigBytes=l:this.sigBytes=c.length*8},toX32:function(){for(var c=this.words,l=c.length,f=[],d=0;d<l;d++){var h=c[d];f.push(h.high),f.push(h.low)}return s.create(f,this.sigBytes)},clone:function(){for(var c=i.clone.call(this),l=c.words=this.words.slice(0),f=l.length,d=0;d<f;d++)l[d]=l[d].clone();return c}})}(),n})}(hp)),hp.exports}var pp={exports:{}},y2;function nL(){return y2||(y2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,o=r.lib,a=o.WordArray,i=a.init,s=a.init=function(u){if(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),(u instanceof Int8Array||typeof Uint8ClampedArray<"u"&&u instanceof Uint8ClampedArray||u instanceof Int16Array||u instanceof Uint16Array||u instanceof Int32Array||u instanceof Uint32Array||u instanceof Float32Array||u instanceof Float64Array)&&(u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength)),u instanceof Uint8Array){for(var c=u.byteLength,l=[],f=0;f<c;f++)l[f>>>2]|=u[f]<<24-f%4*8;i.call(this,l,c)}else i.apply(this,arguments)};s.prototype=a}}(),n.lib.WordArray})}(pp)),pp.exports}var vp={exports:{}},b2;function rL(){return b2||(b2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.WordArray,i=r.enc;i.Utf16=i.Utf16BE={stringify:function(u){for(var c=u.words,l=u.sigBytes,f=[],d=0;d<l;d+=2){var h=c[d>>>2]>>>16-d%4*8&65535;f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var c=u.length,l=[],f=0;f<c;f++)l[f>>>1]|=u.charCodeAt(f)<<16-f%2*16;return a.create(l,c*2)}},i.Utf16LE={stringify:function(u){for(var c=u.words,l=u.sigBytes,f=[],d=0;d<l;d+=2){var h=s(c[d>>>2]>>>16-d%4*8&65535);f.push(String.fromCharCode(h))}return f.join("")},parse:function(u){for(var c=u.length,l=[],f=0;f<c;f++)l[f>>>1]|=s(u.charCodeAt(f)<<16-f%2*16);return a.create(l,c*2)}};function s(u){return u<<8&4278255360|u>>>8&16711935}}(),n.enc.Utf16})}(vp)),vp.exports}var mp={exports:{}},w2;function ei(){return w2||(w2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.WordArray,i=r.enc;i.Base64={stringify:function(u){var c=u.words,l=u.sigBytes,f=this._map;u.clamp();for(var d=[],h=0;h<l;h+=3)for(var p=c[h>>>2]>>>24-h%4*8&255,m=c[h+1>>>2]>>>24-(h+1)%4*8&255,g=c[h+2>>>2]>>>24-(h+2)%4*8&255,v=p<<16|m<<8|g,x=0;x<4&&h+x*.75<l;x++)d.push(f.charAt(v>>>6*(3-x)&63));var y=f.charAt(64);if(y)for(;d.length%4;)d.push(y);return d.join("")},parse:function(u){var c=u.length,l=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<l.length;d++)f[l.charCodeAt(d)]=d}var h=l.charAt(64);if(h){var p=u.indexOf(h);p!==-1&&(c=p)}return s(u,c,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(u,c,l){for(var f=[],d=0,h=0;h<c;h++)if(h%4){var p=l[u.charCodeAt(h-1)]<<h%4*2,m=l[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return a.create(f,d)}}(),n.enc.Base64})}(mp)),mp.exports}var gp={exports:{}},C2;function oL(){return C2||(C2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.WordArray,i=r.enc;i.Base64url={stringify:function(u,c){c===void 0&&(c=!0);var l=u.words,f=u.sigBytes,d=c?this._safe_map:this._map;u.clamp();for(var h=[],p=0;p<f;p+=3)for(var m=l[p>>>2]>>>24-p%4*8&255,g=l[p+1>>>2]>>>24-(p+1)%4*8&255,v=l[p+2>>>2]>>>24-(p+2)%4*8&255,x=m<<16|g<<8|v,y=0;y<4&&p+y*.75<f;y++)h.push(d.charAt(x>>>6*(3-y)&63));var b=d.charAt(64);if(b)for(;h.length%4;)h.push(b);return h.join("")},parse:function(u,c){c===void 0&&(c=!0);var l=u.length,f=c?this._safe_map:this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var h=0;h<f.length;h++)d[f.charCodeAt(h)]=h}var p=f.charAt(64);if(p){var m=u.indexOf(p);m!==-1&&(l=m)}return s(u,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function s(u,c,l){for(var f=[],d=0,h=0;h<c;h++)if(h%4){var p=l[u.charCodeAt(h-1)]<<h%4*2,m=l[u.charCodeAt(h)]>>>6-h%4*2,g=p|m;f[d>>>2]|=g<<24-d%4*8,d++}return a.create(f,d)}}(),n.enc.Base64url})}(gp)),gp.exports}var xp={exports:{}},E2;function ti(){return E2||(E2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(r){var o=n,a=o.lib,i=a.WordArray,s=a.Hasher,u=o.algo,c=[];(function(){for(var m=0;m<64;m++)c[m]=r.abs(r.sin(m+1))*4294967296|0})();var l=u.MD5=s.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(m,g){for(var v=0;v<16;v++){var x=g+v,y=m[x];m[x]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var b=this._hash.words,w=m[g+0],C=m[g+1],E=m[g+2],S=m[g+3],k=m[g+4],_=m[g+5],A=m[g+6],D=m[g+7],T=m[g+8],W=m[g+9],$=m[g+10],q=m[g+11],X=m[g+12],P=m[g+13],V=m[g+14],G=m[g+15],L=b[0],H=b[1],K=b[2],Y=b[3];L=f(L,H,K,Y,w,7,c[0]),Y=f(Y,L,H,K,C,12,c[1]),K=f(K,Y,L,H,E,17,c[2]),H=f(H,K,Y,L,S,22,c[3]),L=f(L,H,K,Y,k,7,c[4]),Y=f(Y,L,H,K,_,12,c[5]),K=f(K,Y,L,H,A,17,c[6]),H=f(H,K,Y,L,D,22,c[7]),L=f(L,H,K,Y,T,7,c[8]),Y=f(Y,L,H,K,W,12,c[9]),K=f(K,Y,L,H,$,17,c[10]),H=f(H,K,Y,L,q,22,c[11]),L=f(L,H,K,Y,X,7,c[12]),Y=f(Y,L,H,K,P,12,c[13]),K=f(K,Y,L,H,V,17,c[14]),H=f(H,K,Y,L,G,22,c[15]),L=d(L,H,K,Y,C,5,c[16]),Y=d(Y,L,H,K,A,9,c[17]),K=d(K,Y,L,H,q,14,c[18]),H=d(H,K,Y,L,w,20,c[19]),L=d(L,H,K,Y,_,5,c[20]),Y=d(Y,L,H,K,$,9,c[21]),K=d(K,Y,L,H,G,14,c[22]),H=d(H,K,Y,L,k,20,c[23]),L=d(L,H,K,Y,W,5,c[24]),Y=d(Y,L,H,K,V,9,c[25]),K=d(K,Y,L,H,S,14,c[26]),H=d(H,K,Y,L,T,20,c[27]),L=d(L,H,K,Y,P,5,c[28]),Y=d(Y,L,H,K,E,9,c[29]),K=d(K,Y,L,H,D,14,c[30]),H=d(H,K,Y,L,X,20,c[31]),L=h(L,H,K,Y,_,4,c[32]),Y=h(Y,L,H,K,T,11,c[33]),K=h(K,Y,L,H,q,16,c[34]),H=h(H,K,Y,L,V,23,c[35]),L=h(L,H,K,Y,C,4,c[36]),Y=h(Y,L,H,K,k,11,c[37]),K=h(K,Y,L,H,D,16,c[38]),H=h(H,K,Y,L,$,23,c[39]),L=h(L,H,K,Y,P,4,c[40]),Y=h(Y,L,H,K,w,11,c[41]),K=h(K,Y,L,H,S,16,c[42]),H=h(H,K,Y,L,A,23,c[43]),L=h(L,H,K,Y,W,4,c[44]),Y=h(Y,L,H,K,X,11,c[45]),K=h(K,Y,L,H,G,16,c[46]),H=h(H,K,Y,L,E,23,c[47]),L=p(L,H,K,Y,w,6,c[48]),Y=p(Y,L,H,K,D,10,c[49]),K=p(K,Y,L,H,V,15,c[50]),H=p(H,K,Y,L,_,21,c[51]),L=p(L,H,K,Y,X,6,c[52]),Y=p(Y,L,H,K,S,10,c[53]),K=p(K,Y,L,H,$,15,c[54]),H=p(H,K,Y,L,C,21,c[55]),L=p(L,H,K,Y,T,6,c[56]),Y=p(Y,L,H,K,G,10,c[57]),K=p(K,Y,L,H,A,15,c[58]),H=p(H,K,Y,L,P,21,c[59]),L=p(L,H,K,Y,k,6,c[60]),Y=p(Y,L,H,K,q,10,c[61]),K=p(K,Y,L,H,E,15,c[62]),H=p(H,K,Y,L,W,21,c[63]),b[0]=b[0]+L|0,b[1]=b[1]+H|0,b[2]=b[2]+K|0,b[3]=b[3]+Y|0},_doFinalize:function(){var m=this._data,g=m.words,v=this._nDataBytes*8,x=m.sigBytes*8;g[x>>>5]|=128<<24-x%32;var y=r.floor(v/4294967296),b=v;g[(x+64>>>9<<4)+15]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,g[(x+64>>>9<<4)+14]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,m.sigBytes=(g.length+1)*4,this._process();for(var w=this._hash,C=w.words,E=0;E<4;E++){var S=C[E];C[E]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360}return w},clone:function(){var m=s.clone.call(this);return m._hash=this._hash.clone(),m}});function f(m,g,v,x,y,b,w){var C=m+(g&v|~g&x)+y+w;return(C<<b|C>>>32-b)+g}function d(m,g,v,x,y,b,w){var C=m+(g&x|v&~x)+y+w;return(C<<b|C>>>32-b)+g}function h(m,g,v,x,y,b,w){var C=m+(g^v^x)+y+w;return(C<<b|C>>>32-b)+g}function p(m,g,v,x,y,b,w){var C=m+(v^(g|~x))+y+w;return(C<<b|C>>>32-b)+g}o.MD5=s._createHelper(l),o.HmacMD5=s._createHmacHelper(l)}(Math),n.MD5})}(xp)),xp.exports}var yp={exports:{}},_2;function Ik(){return _2||(_2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.WordArray,i=o.Hasher,s=r.algo,u=[],c=s.SHA1=i.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,f){for(var d=this._hash.words,h=d[0],p=d[1],m=d[2],g=d[3],v=d[4],x=0;x<80;x++){if(x<16)u[x]=l[f+x]|0;else{var y=u[x-3]^u[x-8]^u[x-14]^u[x-16];u[x]=y<<1|y>>>31}var b=(h<<5|h>>>27)+v+u[x];x<20?b+=(p&m|~p&g)+1518500249:x<40?b+=(p^m^g)+1859775393:x<60?b+=(p&m|p&g|m&g)-1894007588:b+=(p^m^g)-899497514,v=g,g=m,m=p<<30|p>>>2,p=h,h=b}d[0]=d[0]+h|0,d[1]=d[1]+p|0,d[2]=d[2]+m|0,d[3]=d[3]+g|0,d[4]=d[4]+v|0},_doFinalize:function(){var l=this._data,f=l.words,d=this._nDataBytes*8,h=l.sigBytes*8;return f[h>>>5]|=128<<24-h%32,f[(h+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(h+64>>>9<<4)+15]=d,l.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var l=i.clone.call(this);return l._hash=this._hash.clone(),l}});r.SHA1=i._createHelper(c),r.HmacSHA1=i._createHmacHelper(c)}(),n.SHA1})}(yp)),yp.exports}var bp={exports:{}},S2;function B1(){return S2||(S2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){return function(r){var o=n,a=o.lib,i=a.WordArray,s=a.Hasher,u=o.algo,c=[],l=[];(function(){function h(v){for(var x=r.sqrt(v),y=2;y<=x;y++)if(!(v%y))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var m=2,g=0;g<64;)h(m)&&(g<8&&(c[g]=p(r.pow(m,1/2))),l[g]=p(r.pow(m,1/3)),g++),m++})();var f=[],d=u.SHA256=s.extend({_doReset:function(){this._hash=new i.init(c.slice(0))},_doProcessBlock:function(h,p){for(var m=this._hash.words,g=m[0],v=m[1],x=m[2],y=m[3],b=m[4],w=m[5],C=m[6],E=m[7],S=0;S<64;S++){if(S<16)f[S]=h[p+S]|0;else{var k=f[S-15],_=(k<<25|k>>>7)^(k<<14|k>>>18)^k>>>3,A=f[S-2],D=(A<<15|A>>>17)^(A<<13|A>>>19)^A>>>10;f[S]=_+f[S-7]+D+f[S-16]}var T=b&w^~b&C,W=g&v^g&x^v&x,$=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),q=(b<<26|b>>>6)^(b<<21|b>>>11)^(b<<7|b>>>25),X=E+q+T+l[S]+f[S],P=$+W;E=C,C=w,w=b,b=y+X|0,y=x,x=v,v=g,g=X+P|0}m[0]=m[0]+g|0,m[1]=m[1]+v|0,m[2]=m[2]+x|0,m[3]=m[3]+y|0,m[4]=m[4]+b|0,m[5]=m[5]+w|0,m[6]=m[6]+C|0,m[7]=m[7]+E|0},_doFinalize:function(){var h=this._data,p=h.words,m=this._nDataBytes*8,g=h.sigBytes*8;return p[g>>>5]|=128<<24-g%32,p[(g+64>>>9<<4)+14]=r.floor(m/4294967296),p[(g+64>>>9<<4)+15]=m,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=s.clone.call(this);return h._hash=this._hash.clone(),h}});o.SHA256=s._createHelper(d),o.HmacSHA256=s._createHmacHelper(d)}(Math),n.SHA256})}(bp)),bp.exports}var wp={exports:{}},k2;function aL(){return k2||(k2=1,function(e,t){(function(n,r,o){e.exports=r(We(),B1())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.WordArray,i=r.algo,s=i.SHA256,u=i.SHA224=s.extend({_doReset:function(){this._hash=new a.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var c=s._doFinalize.call(this);return c.sigBytes-=4,c}});r.SHA224=s._createHelper(u),r.HmacSHA224=s._createHmacHelper(u)}(),n.SHA224})}(wp)),wp.exports}var Cp={exports:{}},A2;function Bk(){return A2||(A2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Qd())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.Hasher,i=r.x64,s=i.Word,u=i.WordArray,c=r.algo;function l(){return s.create.apply(s,arguments)}var f=[l(1116352408,3609767458),l(1899447441,602891725),l(3049323471,3964484399),l(3921009573,2173295548),l(961987163,4081628472),l(1508970993,3053834265),l(2453635748,2937671579),l(2870763221,3664609560),l(3624381080,2734883394),l(310598401,1164996542),l(607225278,1323610764),l(1426881987,3590304994),l(1925078388,4068182383),l(2162078206,991336113),l(2614888103,633803317),l(3248222580,3479774868),l(3835390401,2666613458),l(4022224774,944711139),l(264347078,2341262773),l(604807628,2007800933),l(770255983,1495990901),l(1249150122,1856431235),l(1555081692,3175218132),l(1996064986,2198950837),l(2554220882,3999719339),l(2821834349,766784016),l(2952996808,2566594879),l(3210313671,3203337956),l(3336571891,1034457026),l(3584528711,2466948901),l(113926993,3758326383),l(338241895,168717936),l(666307205,1188179964),l(773529912,1546045734),l(1294757372,1522805485),l(1396182291,2643833823),l(1695183700,2343527390),l(1986661051,1014477480),l(2177026350,1206759142),l(2456956037,344077627),l(2730485921,1290863460),l(2820302411,3158454273),l(3259730800,3505952657),l(3345764771,106217008),l(3516065817,3606008344),l(3600352804,1432725776),l(4094571909,1467031594),l(275423344,851169720),l(430227734,3100823752),l(506948616,1363258195),l(659060556,3750685593),l(883997877,3785050280),l(958139571,3318307427),l(1322822218,3812723403),l(1537002063,2003034995),l(1747873779,3602036899),l(1955562222,1575990012),l(2024104815,1125592928),l(2227730452,2716904306),l(2361852424,442776044),l(2428436474,593698344),l(2756734187,3733110249),l(3204031479,2999351573),l(3329325298,3815920427),l(3391569614,3928383900),l(3515267271,566280711),l(3940187606,3454069534),l(4118630271,4000239992),l(116418474,1914138554),l(174292421,2731055270),l(289380356,3203993006),l(460393269,320620315),l(685471733,587496836),l(852142971,1086792851),l(1017036298,365543100),l(1126000580,2618297676),l(1288033470,3409855158),l(1501505948,4234509866),l(1607167915,987167468),l(1816402316,1246189591)],d=[];(function(){for(var p=0;p<80;p++)d[p]=l()})();var h=c.SHA512=a.extend({_doReset:function(){this._hash=new u.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(p,m){for(var g=this._hash.words,v=g[0],x=g[1],y=g[2],b=g[3],w=g[4],C=g[5],E=g[6],S=g[7],k=v.high,_=v.low,A=x.high,D=x.low,T=y.high,W=y.low,$=b.high,q=b.low,X=w.high,P=w.low,V=C.high,G=C.low,L=E.high,H=E.low,K=S.high,Y=S.low,fe=k,le=_,we=A,ce=D,De=T,qe=W,Re=$,Me=q,_e=X,Be=P,Ne=V,He=G,Ut=L,wt=H,Ct=K,an=Y,ot=0;ot<80;ot++){var st,Et,An=d[ot];if(ot<16)Et=An.high=p[m+ot*2]|0,st=An.low=p[m+ot*2+1]|0;else{var vn=d[ot-15],Ln=vn.high,mn=vn.low,gn=(Ln>>>1|mn<<31)^(Ln>>>8|mn<<24)^Ln>>>7,ao=(mn>>>1|Ln<<31)^(mn>>>8|Ln<<24)^(mn>>>7|Ln<<25),Ea=d[ot-2],gr=Ea.high,Or=Ea.low,No=(gr>>>19|Or<<13)^(gr<<3|Or>>>29)^gr>>>6,Mr=(Or>>>19|gr<<13)^(Or<<3|gr>>>29)^(Or>>>6|gr<<26),Oo=d[ot-7],Zd=Oo.high,ys=Oo.low,bs=d[ot-16],Jd=bs.high,xr=bs.low;st=ao+ys,Et=gn+Zd+(st>>>0<ao>>>0?1:0),st=st+Mr,Et=Et+No+(st>>>0<Mr>>>0?1:0),st=st+xr,Et=Et+Jd+(st>>>0<xr>>>0?1:0),An.high=Et,An.low=st}var eh=_e&Ne^~_e&Ut,Cc=Be&He^~Be&wt,Ec=fe&we^fe&De^we&De,th=le&ce^le&qe^ce&qe,nh=(fe>>>28|le<<4)^(fe<<30|le>>>2)^(fe<<25|le>>>7),_c=(le>>>28|fe<<4)^(le<<30|fe>>>2)^(le<<25|fe>>>7),rh=(_e>>>14|Be<<18)^(_e>>>18|Be<<14)^(_e<<23|Be>>>9),oh=(Be>>>14|_e<<18)^(Be>>>18|_e<<14)^(Be<<23|_e>>>9),Sc=f[ot],ah=Sc.high,kc=Sc.low,xn=an+oh,Lr=Ct+rh+(xn>>>0<an>>>0?1:0),xn=xn+Cc,Lr=Lr+eh+(xn>>>0<Cc>>>0?1:0),xn=xn+kc,Lr=Lr+ah+(xn>>>0<kc>>>0?1:0),xn=xn+st,Lr=Lr+Et+(xn>>>0<st>>>0?1:0),ws=_c+th,ih=nh+Ec+(ws>>>0<_c>>>0?1:0);Ct=Ut,an=wt,Ut=Ne,wt=He,Ne=_e,He=Be,Be=Me+xn|0,_e=Re+Lr+(Be>>>0<Me>>>0?1:0)|0,Re=De,Me=qe,De=we,qe=ce,we=fe,ce=le,le=xn+ws|0,fe=Lr+ih+(le>>>0<xn>>>0?1:0)|0}_=v.low=_+le,v.high=k+fe+(_>>>0<le>>>0?1:0),D=x.low=D+ce,x.high=A+we+(D>>>0<ce>>>0?1:0),W=y.low=W+qe,y.high=T+De+(W>>>0<qe>>>0?1:0),q=b.low=q+Me,b.high=$+Re+(q>>>0<Me>>>0?1:0),P=w.low=P+Be,w.high=X+_e+(P>>>0<Be>>>0?1:0),G=C.low=G+He,C.high=V+Ne+(G>>>0<He>>>0?1:0),H=E.low=H+wt,E.high=L+Ut+(H>>>0<wt>>>0?1:0),Y=S.low=Y+an,S.high=K+Ct+(Y>>>0<an>>>0?1:0)},_doFinalize:function(){var p=this._data,m=p.words,g=this._nDataBytes*8,v=p.sigBytes*8;m[v>>>5]|=128<<24-v%32,m[(v+128>>>10<<5)+30]=Math.floor(g/4294967296),m[(v+128>>>10<<5)+31]=g,p.sigBytes=m.length*4,this._process();var x=this._hash.toX32();return x},clone:function(){var p=a.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=a._createHelper(h),r.HmacSHA512=a._createHmacHelper(h)}(),n.SHA512})}(Cp)),Cp.exports}var Ep={exports:{}},D2;function iL(){return D2||(D2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Qd(),Bk())})(Ae,function(n){return function(){var r=n,o=r.x64,a=o.Word,i=o.WordArray,s=r.algo,u=s.SHA512,c=s.SHA384=u.extend({_doReset:function(){this._hash=new i.init([new a.init(3418070365,3238371032),new a.init(1654270250,914150663),new a.init(2438529370,812702999),new a.init(355462360,4144912697),new a.init(1731405415,4290775857),new a.init(2394180231,1750603025),new a.init(3675008525,1694076839),new a.init(1203062813,3204075428)])},_doFinalize:function(){var l=u._doFinalize.call(this);return l.sigBytes-=16,l}});r.SHA384=u._createHelper(c),r.HmacSHA384=u._createHmacHelper(c)}(),n.SHA384})}(Ep)),Ep.exports}var _p={exports:{}},R2;function sL(){return R2||(R2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Qd())})(Ae,function(n){return function(r){var o=n,a=o.lib,i=a.WordArray,s=a.Hasher,u=o.x64,c=u.Word,l=o.algo,f=[],d=[],h=[];(function(){for(var g=1,v=0,x=0;x<24;x++){f[g+5*v]=(x+1)*(x+2)/2%64;var y=v%5,b=(2*g+3*v)%5;g=y,v=b}for(var g=0;g<5;g++)for(var v=0;v<5;v++)d[g+5*v]=v+(2*g+3*v)%5*5;for(var w=1,C=0;C<24;C++){for(var E=0,S=0,k=0;k<7;k++){if(w&1){var _=(1<<k)-1;_<32?S^=1<<_:E^=1<<_-32}w&128?w=w<<1^113:w<<=1}h[C]=c.create(E,S)}})();var p=[];(function(){for(var g=0;g<25;g++)p[g]=c.create()})();var m=l.SHA3=s.extend({cfg:s.cfg.extend({outputLength:512}),_doReset:function(){for(var g=this._state=[],v=0;v<25;v++)g[v]=new c.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(g,v){for(var x=this._state,y=this.blockSize/2,b=0;b<y;b++){var w=g[v+2*b],C=g[v+2*b+1];w=(w<<8|w>>>24)&16711935|(w<<24|w>>>8)&4278255360,C=(C<<8|C>>>24)&16711935|(C<<24|C>>>8)&4278255360;var E=x[b];E.high^=C,E.low^=w}for(var S=0;S<24;S++){for(var k=0;k<5;k++){for(var _=0,A=0,D=0;D<5;D++){var E=x[k+5*D];_^=E.high,A^=E.low}var T=p[k];T.high=_,T.low=A}for(var k=0;k<5;k++)for(var W=p[(k+4)%5],$=p[(k+1)%5],q=$.high,X=$.low,_=W.high^(q<<1|X>>>31),A=W.low^(X<<1|q>>>31),D=0;D<5;D++){var E=x[k+5*D];E.high^=_,E.low^=A}for(var P=1;P<25;P++){var _,A,E=x[P],V=E.high,G=E.low,L=f[P];L<32?(_=V<<L|G>>>32-L,A=G<<L|V>>>32-L):(_=G<<L-32|V>>>64-L,A=V<<L-32|G>>>64-L);var H=p[d[P]];H.high=_,H.low=A}var K=p[0],Y=x[0];K.high=Y.high,K.low=Y.low;for(var k=0;k<5;k++)for(var D=0;D<5;D++){var P=k+5*D,E=x[P],fe=p[P],le=p[(k+1)%5+5*D],we=p[(k+2)%5+5*D];E.high=fe.high^~le.high&we.high,E.low=fe.low^~le.low&we.low}var E=x[0],ce=h[S];E.high^=ce.high,E.low^=ce.low}},_doFinalize:function(){var g=this._data,v=g.words;this._nDataBytes*8;var x=g.sigBytes*8,y=this.blockSize*32;v[x>>>5]|=1<<24-x%32,v[(r.ceil((x+1)/y)*y>>>5)-1]|=128,g.sigBytes=v.length*4,this._process();for(var b=this._state,w=this.cfg.outputLength/8,C=w/8,E=[],S=0;S<C;S++){var k=b[S],_=k.high,A=k.low;_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360,E.push(A),E.push(_)}return new i.init(E,w)},clone:function(){for(var g=s.clone.call(this),v=g._state=this._state.slice(0),x=0;x<25;x++)v[x]=v[x].clone();return g}});o.SHA3=s._createHelper(m),o.HmacSHA3=s._createHmacHelper(m)}(Math),n.SHA3})}(_p)),_p.exports}var Sp={exports:{}},F2;function uL(){return F2||(F2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var o=n,a=o.lib,i=a.WordArray,s=a.Hasher,u=o.algo,c=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),f=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=i.create([0,1518500249,1859775393,2400959708,2840853838]),p=i.create([1352829926,1548603684,1836072691,2053994217,0]),m=u.RIPEMD160=s.extend({_doReset:function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(C,E){for(var S=0;S<16;S++){var k=E+S,_=C[k];C[k]=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360}var A=this._hash.words,D=h.words,T=p.words,W=c.words,$=l.words,q=f.words,X=d.words,P,V,G,L,H,K,Y,fe,le,we;K=P=A[0],Y=V=A[1],fe=G=A[2],le=L=A[3],we=H=A[4];for(var ce,S=0;S<80;S+=1)ce=P+C[E+W[S]]|0,S<16?ce+=g(V,G,L)+D[0]:S<32?ce+=v(V,G,L)+D[1]:S<48?ce+=x(V,G,L)+D[2]:S<64?ce+=y(V,G,L)+D[3]:ce+=b(V,G,L)+D[4],ce=ce|0,ce=w(ce,q[S]),ce=ce+H|0,P=H,H=L,L=w(G,10),G=V,V=ce,ce=K+C[E+$[S]]|0,S<16?ce+=b(Y,fe,le)+T[0]:S<32?ce+=y(Y,fe,le)+T[1]:S<48?ce+=x(Y,fe,le)+T[2]:S<64?ce+=v(Y,fe,le)+T[3]:ce+=g(Y,fe,le)+T[4],ce=ce|0,ce=w(ce,X[S]),ce=ce+we|0,K=we,we=le,le=w(fe,10),fe=Y,Y=ce;ce=A[1]+G+le|0,A[1]=A[2]+L+we|0,A[2]=A[3]+H+K|0,A[3]=A[4]+P+Y|0,A[4]=A[0]+V+fe|0,A[0]=ce},_doFinalize:function(){var C=this._data,E=C.words,S=this._nDataBytes*8,k=C.sigBytes*8;E[k>>>5]|=128<<24-k%32,E[(k+64>>>9<<4)+14]=(S<<8|S>>>24)&16711935|(S<<24|S>>>8)&4278255360,C.sigBytes=(E.length+1)*4,this._process();for(var _=this._hash,A=_.words,D=0;D<5;D++){var T=A[D];A[D]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}return _},clone:function(){var C=s.clone.call(this);return C._hash=this._hash.clone(),C}});function g(C,E,S){return C^E^S}function v(C,E,S){return C&E|~C&S}function x(C,E,S){return(C|~E)^S}function y(C,E,S){return C&S|E&~S}function b(C,E,S){return C^(E|~S)}function w(C,E){return C<<E|C>>>32-E}o.RIPEMD160=s._createHelper(m),o.HmacRIPEMD160=s._createHmacHelper(m)}(),n.RIPEMD160})}(Sp)),Sp.exports}var kp={exports:{}},I2;function T1(){return I2||(I2=1,function(e,t){(function(n,r){e.exports=r(We())})(Ae,function(n){(function(){var r=n,o=r.lib,a=o.Base,i=r.enc,s=i.Utf8,u=r.algo;u.HMAC=a.extend({init:function(c,l){c=this._hasher=new c.init,typeof l=="string"&&(l=s.parse(l));var f=c.blockSize,d=f*4;l.sigBytes>d&&(l=c.finalize(l)),l.clamp();for(var h=this._oKey=l.clone(),p=this._iKey=l.clone(),m=h.words,g=p.words,v=0;v<f;v++)m[v]^=1549556828,g[v]^=909522486;h.sigBytes=p.sigBytes=d,this.reset()},reset:function(){var c=this._hasher;c.reset(),c.update(this._iKey)},update:function(c){return this._hasher.update(c),this},finalize:function(c){var l=this._hasher,f=l.finalize(c);l.reset();var d=l.finalize(this._oKey.clone().concat(f));return d}})})()})}(kp)),kp.exports}var Ap={exports:{}},B2;function cL(){return B2||(B2=1,function(e,t){(function(n,r,o){e.exports=r(We(),B1(),T1())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.Base,i=o.WordArray,s=r.algo,u=s.SHA256,c=s.HMAC,l=s.PBKDF2=a.extend({cfg:a.extend({keySize:128/32,hasher:u,iterations:25e4}),init:function(f){this.cfg=this.cfg.extend(f)},compute:function(f,d){for(var h=this.cfg,p=c.create(h.hasher,f),m=i.create(),g=i.create([1]),v=m.words,x=g.words,y=h.keySize,b=h.iterations;v.length<y;){var w=p.update(d).finalize(g);p.reset();for(var C=w.words,E=C.length,S=w,k=1;k<b;k++){S=p.finalize(S),p.reset();for(var _=S.words,A=0;A<E;A++)C[A]^=_[A]}m.concat(w),x[0]++}return m.sigBytes=y*4,m}});r.PBKDF2=function(f,d,h){return l.create(h).compute(f,d)}}(),n.PBKDF2})}(Ap)),Ap.exports}var Dp={exports:{}},T2;function Ca(){return T2||(T2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Ik(),T1())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.Base,i=o.WordArray,s=r.algo,u=s.MD5,c=s.EvpKDF=a.extend({cfg:a.extend({keySize:128/32,hasher:u,iterations:1}),init:function(l){this.cfg=this.cfg.extend(l)},compute:function(l,f){for(var d,h=this.cfg,p=h.hasher.create(),m=i.create(),g=m.words,v=h.keySize,x=h.iterations;g.length<v;){d&&p.update(d),d=p.update(l).finalize(f),p.reset();for(var y=1;y<x;y++)d=p.finalize(d),p.reset();m.concat(d)}return m.sigBytes=v*4,m}});r.EvpKDF=function(l,f,d){return c.create(d).compute(l,f)}}(),n.EvpKDF})}(Dp)),Dp.exports}var Rp={exports:{}},P2;function Yt(){return P2||(P2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Ca())})(Ae,function(n){n.lib.Cipher||function(r){var o=n,a=o.lib,i=a.Base,s=a.WordArray,u=a.BufferedBlockAlgorithm,c=o.enc;c.Utf8;var l=c.Base64,f=o.algo,d=f.EvpKDF,h=a.Cipher=u.extend({cfg:i.extend(),createEncryptor:function(_,A){return this.create(this._ENC_XFORM_MODE,_,A)},createDecryptor:function(_,A){return this.create(this._DEC_XFORM_MODE,_,A)},init:function(_,A,D){this.cfg=this.cfg.extend(D),this._xformMode=_,this._key=A,this.reset()},reset:function(){u.reset.call(this),this._doReset()},process:function(_){return this._append(_),this._process()},finalize:function(_){_&&this._append(_);var A=this._doFinalize();return A},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function _(A){return typeof A=="string"?k:C}return function(A){return{encrypt:function(D,T,W){return _(T).encrypt(A,D,T,W)},decrypt:function(D,T,W){return _(T).decrypt(A,D,T,W)}}}}()});a.StreamCipher=h.extend({_doFinalize:function(){var _=this._process(!0);return _},blockSize:1});var p=o.mode={},m=a.BlockCipherMode=i.extend({createEncryptor:function(_,A){return this.Encryptor.create(_,A)},createDecryptor:function(_,A){return this.Decryptor.create(_,A)},init:function(_,A){this._cipher=_,this._iv=A}}),g=p.CBC=function(){var _=m.extend();_.Encryptor=_.extend({processBlock:function(D,T){var W=this._cipher,$=W.blockSize;A.call(this,D,T,$),W.encryptBlock(D,T),this._prevBlock=D.slice(T,T+$)}}),_.Decryptor=_.extend({processBlock:function(D,T){var W=this._cipher,$=W.blockSize,q=D.slice(T,T+$);W.decryptBlock(D,T),A.call(this,D,T,$),this._prevBlock=q}});function A(D,T,W){var $,q=this._iv;q?($=q,this._iv=r):$=this._prevBlock;for(var X=0;X<W;X++)D[T+X]^=$[X]}return _}(),v=o.pad={},x=v.Pkcs7={pad:function(_,A){for(var D=A*4,T=D-_.sigBytes%D,W=T<<24|T<<16|T<<8|T,$=[],q=0;q<T;q+=4)$.push(W);var X=s.create($,T);_.concat(X)},unpad:function(_){var A=_.words[_.sigBytes-1>>>2]&255;_.sigBytes-=A}};a.BlockCipher=h.extend({cfg:h.cfg.extend({mode:g,padding:x}),reset:function(){var _;h.reset.call(this);var A=this.cfg,D=A.iv,T=A.mode;this._xformMode==this._ENC_XFORM_MODE?_=T.createEncryptor:(_=T.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==_?this._mode.init(this,D&&D.words):(this._mode=_.call(T,this,D&&D.words),this._mode.__creator=_)},_doProcessBlock:function(_,A){this._mode.processBlock(_,A)},_doFinalize:function(){var _,A=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(A.pad(this._data,this.blockSize),_=this._process(!0)):(_=this._process(!0),A.unpad(_)),_},blockSize:128/32});var y=a.CipherParams=i.extend({init:function(_){this.mixIn(_)},toString:function(_){return(_||this.formatter).stringify(this)}}),b=o.format={},w=b.OpenSSL={stringify:function(_){var A,D=_.ciphertext,T=_.salt;return T?A=s.create([1398893684,1701076831]).concat(T).concat(D):A=D,A.toString(l)},parse:function(_){var A,D=l.parse(_),T=D.words;return T[0]==1398893684&&T[1]==1701076831&&(A=s.create(T.slice(2,4)),T.splice(0,4),D.sigBytes-=16),y.create({ciphertext:D,salt:A})}},C=a.SerializableCipher=i.extend({cfg:i.extend({format:w}),encrypt:function(_,A,D,T){T=this.cfg.extend(T);var W=_.createEncryptor(D,T),$=W.finalize(A),q=W.cfg;return y.create({ciphertext:$,key:D,iv:q.iv,algorithm:_,mode:q.mode,padding:q.padding,blockSize:_.blockSize,formatter:T.format})},decrypt:function(_,A,D,T){T=this.cfg.extend(T),A=this._parse(A,T.format);var W=_.createDecryptor(D,T).finalize(A.ciphertext);return W},_parse:function(_,A){return typeof _=="string"?A.parse(_,this):_}}),E=o.kdf={},S=E.OpenSSL={execute:function(_,A,D,T,W){if(T||(T=s.random(64/8)),W)var $=d.create({keySize:A+D,hasher:W}).compute(_,T);else var $=d.create({keySize:A+D}).compute(_,T);var q=s.create($.words.slice(A),D*4);return $.sigBytes=A*4,y.create({key:$,iv:q,salt:T})}},k=a.PasswordBasedCipher=C.extend({cfg:C.cfg.extend({kdf:S}),encrypt:function(_,A,D,T){T=this.cfg.extend(T);var W=T.kdf.execute(D,_.keySize,_.ivSize,T.salt,T.hasher);T.iv=W.iv;var $=C.encrypt.call(this,_,A,W.key,T);return $.mixIn(W),$},decrypt:function(_,A,D,T){T=this.cfg.extend(T),A=this._parse(A,T.format);var W=T.kdf.execute(D,_.keySize,_.ivSize,A.salt,T.hasher);T.iv=W.iv;var $=C.decrypt.call(this,_,A,W.key,T);return $}})}()})}(Rp)),Rp.exports}var Fp={exports:{}},N2;function lL(){return N2||(N2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(a,i){var s=this._cipher,u=s.blockSize;o.call(this,a,i,u,s),this._prevBlock=a.slice(i,i+u)}}),r.Decryptor=r.extend({processBlock:function(a,i){var s=this._cipher,u=s.blockSize,c=a.slice(i,i+u);o.call(this,a,i,u,s),this._prevBlock=c}});function o(a,i,s,u){var c,l=this._iv;l?(c=l.slice(0),this._iv=void 0):c=this._prevBlock,u.encryptBlock(c,0);for(var f=0;f<s;f++)a[i+f]^=c[f]}return r}(),n.mode.CFB})}(Fp)),Fp.exports}var Ip={exports:{}},O2;function fL(){return O2||(O2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(a,i){var s=this._cipher,u=s.blockSize,c=this._iv,l=this._counter;c&&(l=this._counter=c.slice(0),this._iv=void 0);var f=l.slice(0);s.encryptBlock(f,0),l[u-1]=l[u-1]+1|0;for(var d=0;d<u;d++)a[i+d]^=f[d]}});return r.Decryptor=o,r}(),n.mode.CTR})}(Ip)),Ip.exports}var Bp={exports:{}},M2;function dL(){return M2||(M2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function o(s){if((s>>24&255)===255){var u=s>>16&255,c=s>>8&255,l=s&255;u===255?(u=0,c===255?(c=0,l===255?l=0:++l):++c):++u,s=0,s+=u<<16,s+=c<<8,s+=l}else s+=1<<24;return s}function a(s){return(s[0]=o(s[0]))===0&&(s[1]=o(s[1])),s}var i=r.Encryptor=r.extend({processBlock:function(s,u){var c=this._cipher,l=c.blockSize,f=this._iv,d=this._counter;f&&(d=this._counter=f.slice(0),this._iv=void 0),a(d);var h=d.slice(0);c.encryptBlock(h,0);for(var p=0;p<l;p++)s[u+p]^=h[p]}});return r.Decryptor=i,r}(),n.mode.CTRGladman})}(Bp)),Bp.exports}var Tp={exports:{}},L2;function hL(){return L2||(L2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),o=r.Encryptor=r.extend({processBlock:function(a,i){var s=this._cipher,u=s.blockSize,c=this._iv,l=this._keystream;c&&(l=this._keystream=c.slice(0),this._iv=void 0),s.encryptBlock(l,0);for(var f=0;f<u;f++)a[i+f]^=l[f]}});return r.Decryptor=o,r}(),n.mode.OFB})}(Tp)),Tp.exports}var Pp={exports:{}},W2;function pL(){return W2||(W2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(o,a){this._cipher.encryptBlock(o,a)}}),r.Decryptor=r.extend({processBlock:function(o,a){this._cipher.decryptBlock(o,a)}}),r}(),n.mode.ECB})}(Pp)),Pp.exports}var Np={exports:{}},z2;function vL(){return z2||(z2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.pad.AnsiX923={pad:function(r,o){var a=r.sigBytes,i=o*4,s=i-a%i,u=a+s-1;r.clamp(),r.words[u>>>2]|=s<<24-u%4*8,r.sigBytes+=s},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},n.pad.Ansix923})}(Np)),Np.exports}var Op={exports:{}},$2;function mL(){return $2||($2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.pad.Iso10126={pad:function(r,o){var a=o*4,i=a-r.sigBytes%a;r.concat(n.lib.WordArray.random(i-1)).concat(n.lib.WordArray.create([i<<24],1))},unpad:function(r){var o=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=o}},n.pad.Iso10126})}(Op)),Op.exports}var Mp={exports:{}},U2;function gL(){return U2||(U2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.pad.Iso97971={pad:function(r,o){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,o)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(Mp)),Mp.exports}var Lp={exports:{}},H2;function xL(){return H2||(H2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.pad.ZeroPadding={pad:function(r,o){var a=o*4;r.clamp(),r.sigBytes+=a-(r.sigBytes%a||a)},unpad:function(r){for(var o=r.words,a=r.sigBytes-1,a=r.sigBytes-1;a>=0;a--)if(o[a>>>2]>>>24-a%4*8&255){r.sigBytes=a+1;break}}},n.pad.ZeroPadding})}(Lp)),Lp.exports}var Wp={exports:{}},V2;function yL(){return V2||(V2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(Wp)),Wp.exports}var zp={exports:{}},j2;function bL(){return j2||(j2=1,function(e,t){(function(n,r,o){e.exports=r(We(),Yt())})(Ae,function(n){return function(r){var o=n,a=o.lib,i=a.CipherParams,s=o.enc,u=s.Hex,c=o.format;c.Hex={stringify:function(l){return l.ciphertext.toString(u)},parse:function(l){var f=u.parse(l);return i.create({ciphertext:f})}}}(),n.format.Hex})}(zp)),zp.exports}var $p={exports:{}},G2;function wL(){return G2||(G2=1,function(e,t){(function(n,r,o){e.exports=r(We(),ei(),ti(),Ca(),Yt())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.BlockCipher,i=r.algo,s=[],u=[],c=[],l=[],f=[],d=[],h=[],p=[],m=[],g=[];(function(){for(var y=[],b=0;b<256;b++)b<128?y[b]=b<<1:y[b]=b<<1^283;for(var w=0,C=0,b=0;b<256;b++){var E=C^C<<1^C<<2^C<<3^C<<4;E=E>>>8^E&255^99,s[w]=E,u[E]=w;var S=y[w],k=y[S],_=y[k],A=y[E]*257^E*16843008;c[w]=A<<24|A>>>8,l[w]=A<<16|A>>>16,f[w]=A<<8|A>>>24,d[w]=A;var A=_*16843009^k*65537^S*257^w*16843008;h[E]=A<<24|A>>>8,p[E]=A<<16|A>>>16,m[E]=A<<8|A>>>24,g[E]=A,w?(w=S^y[y[y[_^S]]],C^=y[y[C]]):w=C=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],x=i.AES=a.extend({_doReset:function(){var y;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var b=this._keyPriorReset=this._key,w=b.words,C=b.sigBytes/4,E=this._nRounds=C+6,S=(E+1)*4,k=this._keySchedule=[],_=0;_<S;_++)_<C?k[_]=w[_]:(y=k[_-1],_%C?C>6&&_%C==4&&(y=s[y>>>24]<<24|s[y>>>16&255]<<16|s[y>>>8&255]<<8|s[y&255]):(y=y<<8|y>>>24,y=s[y>>>24]<<24|s[y>>>16&255]<<16|s[y>>>8&255]<<8|s[y&255],y^=v[_/C|0]<<24),k[_]=k[_-C]^y);for(var A=this._invKeySchedule=[],D=0;D<S;D++){var _=S-D;if(D%4)var y=k[_];else var y=k[_-4];D<4||_<=4?A[D]=y:A[D]=h[s[y>>>24]]^p[s[y>>>16&255]]^m[s[y>>>8&255]]^g[s[y&255]]}}},encryptBlock:function(y,b){this._doCryptBlock(y,b,this._keySchedule,c,l,f,d,s)},decryptBlock:function(y,b){var w=y[b+1];y[b+1]=y[b+3],y[b+3]=w,this._doCryptBlock(y,b,this._invKeySchedule,h,p,m,g,u);var w=y[b+1];y[b+1]=y[b+3],y[b+3]=w},_doCryptBlock:function(y,b,w,C,E,S,k,_){for(var A=this._nRounds,D=y[b]^w[0],T=y[b+1]^w[1],W=y[b+2]^w[2],$=y[b+3]^w[3],q=4,X=1;X<A;X++){var P=C[D>>>24]^E[T>>>16&255]^S[W>>>8&255]^k[$&255]^w[q++],V=C[T>>>24]^E[W>>>16&255]^S[$>>>8&255]^k[D&255]^w[q++],G=C[W>>>24]^E[$>>>16&255]^S[D>>>8&255]^k[T&255]^w[q++],L=C[$>>>24]^E[D>>>16&255]^S[T>>>8&255]^k[W&255]^w[q++];D=P,T=V,W=G,$=L}var P=(_[D>>>24]<<24|_[T>>>16&255]<<16|_[W>>>8&255]<<8|_[$&255])^w[q++],V=(_[T>>>24]<<24|_[W>>>16&255]<<16|_[$>>>8&255]<<8|_[D&255])^w[q++],G=(_[W>>>24]<<24|_[$>>>16&255]<<16|_[D>>>8&255]<<8|_[T&255])^w[q++],L=(_[$>>>24]<<24|_[D>>>16&255]<<16|_[T>>>8&255]<<8|_[W&255])^w[q++];y[b]=P,y[b+1]=V,y[b+2]=G,y[b+3]=L},keySize:256/32});r.AES=a._createHelper(x)}(),n.AES})}($p)),$p.exports}var Up={exports:{}},q2;function CL(){return q2||(q2=1,function(e,t){(function(n,r,o){e.exports=r(We(),ei(),ti(),Ca(),Yt())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.WordArray,i=o.BlockCipher,s=r.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],l=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],f=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=s.DES=i.extend({_doReset:function(){for(var v=this._key,x=v.words,y=[],b=0;b<56;b++){var w=u[b]-1;y[b]=x[w>>>5]>>>31-w%32&1}for(var C=this._subKeys=[],E=0;E<16;E++){for(var S=C[E]=[],k=l[E],b=0;b<24;b++)S[b/6|0]|=y[(c[b]-1+k)%28]<<31-b%6,S[4+(b/6|0)]|=y[28+(c[b+24]-1+k)%28]<<31-b%6;S[0]=S[0]<<1|S[0]>>>31;for(var b=1;b<7;b++)S[b]=S[b]>>>(b-1)*4+3;S[7]=S[7]<<5|S[7]>>>27}for(var _=this._invSubKeys=[],b=0;b<16;b++)_[b]=C[15-b]},encryptBlock:function(v,x){this._doCryptBlock(v,x,this._subKeys)},decryptBlock:function(v,x){this._doCryptBlock(v,x,this._invSubKeys)},_doCryptBlock:function(v,x,y){this._lBlock=v[x],this._rBlock=v[x+1],p.call(this,4,252645135),p.call(this,16,65535),m.call(this,2,858993459),m.call(this,8,16711935),p.call(this,1,1431655765);for(var b=0;b<16;b++){for(var w=y[b],C=this._lBlock,E=this._rBlock,S=0,k=0;k<8;k++)S|=f[k][((E^w[k])&d[k])>>>0];this._lBlock=E,this._rBlock=C^S}var _=this._lBlock;this._lBlock=this._rBlock,this._rBlock=_,p.call(this,1,1431655765),m.call(this,8,16711935),m.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[x]=this._lBlock,v[x+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,x){var y=(this._lBlock>>>v^this._rBlock)&x;this._rBlock^=y,this._lBlock^=y<<v}function m(v,x){var y=(this._rBlock>>>v^this._lBlock)&x;this._lBlock^=y,this._rBlock^=y<<v}r.DES=i._createHelper(h);var g=s.TripleDES=i.extend({_doReset:function(){var v=this._key,x=v.words;if(x.length!==2&&x.length!==4&&x.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var y=x.slice(0,2),b=x.length<4?x.slice(0,2):x.slice(2,4),w=x.length<6?x.slice(0,2):x.slice(4,6);this._des1=h.createEncryptor(a.create(y)),this._des2=h.createEncryptor(a.create(b)),this._des3=h.createEncryptor(a.create(w))},encryptBlock:function(v,x){this._des1.encryptBlock(v,x),this._des2.decryptBlock(v,x),this._des3.encryptBlock(v,x)},decryptBlock:function(v,x){this._des3.decryptBlock(v,x),this._des2.encryptBlock(v,x),this._des1.decryptBlock(v,x)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=i._createHelper(g)}(),n.TripleDES})}(Up)),Up.exports}var Hp={exports:{}},K2;function EL(){return K2||(K2=1,function(e,t){(function(n,r,o){e.exports=r(We(),ei(),ti(),Ca(),Yt())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.StreamCipher,i=r.algo,s=i.RC4=a.extend({_doReset:function(){for(var l=this._key,f=l.words,d=l.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,m=0;p<256;p++){var g=p%d,v=f[g>>>2]>>>24-g%4*8&255;m=(m+h[p]+v)%256;var x=h[p];h[p]=h[m],h[m]=x}this._i=this._j=0},_doProcessBlock:function(l,f){l[f]^=u.call(this)},keySize:256/32,ivSize:0});function u(){for(var l=this._S,f=this._i,d=this._j,h=0,p=0;p<4;p++){f=(f+1)%256,d=(d+l[f])%256;var m=l[f];l[f]=l[d],l[d]=m,h|=l[(l[f]+l[d])%256]<<24-p*8}return this._i=f,this._j=d,h}r.RC4=a._createHelper(s);var c=i.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var l=this.cfg.drop;l>0;l--)u.call(this)}});r.RC4Drop=a._createHelper(c)}(),n.RC4})}(Hp)),Hp.exports}var Vp={exports:{}},X2;function _L(){return X2||(X2=1,function(e,t){(function(n,r,o){e.exports=r(We(),ei(),ti(),Ca(),Yt())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.StreamCipher,i=r.algo,s=[],u=[],c=[],l=i.Rabbit=a.extend({_doReset:function(){for(var d=this._key.words,h=this.cfg.iv,p=0;p<4;p++)d[p]=(d[p]<<8|d[p]>>>24)&16711935|(d[p]<<24|d[p]>>>8)&4278255360;var m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var p=0;p<4;p++)f.call(this);for(var p=0;p<8;p++)g[p]^=m[p+4&7];if(h){var v=h.words,x=v[0],y=v[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,C=b>>>16|w&4294901760,E=w<<16|b&65535;g[0]^=b,g[1]^=C,g[2]^=w,g[3]^=E,g[4]^=b,g[5]^=C,g[6]^=w,g[7]^=E;for(var p=0;p<4;p++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)s[m]=(s[m]<<8|s[m]>>>24)&16711935|(s[m]<<24|s[m]>>>8)&4278255360,d[h+m]^=s[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,v=m>>>16,x=((g*g>>>17)+g*v>>>15)+v*v,y=((m&4294901760)*m|0)+((m&65535)*m|0);c[p]=x^y}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.Rabbit=a._createHelper(l)}(),n.Rabbit})}(Vp)),Vp.exports}var jp={exports:{}},Y2;function SL(){return Y2||(Y2=1,function(e,t){(function(n,r,o){e.exports=r(We(),ei(),ti(),Ca(),Yt())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.StreamCipher,i=r.algo,s=[],u=[],c=[],l=i.RabbitLegacy=a.extend({_doReset:function(){var d=this._key.words,h=this.cfg.iv,p=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],m=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)f.call(this);for(var g=0;g<8;g++)m[g]^=p[g+4&7];if(h){var v=h.words,x=v[0],y=v[1],b=(x<<8|x>>>24)&16711935|(x<<24|x>>>8)&4278255360,w=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,C=b>>>16|w&4294901760,E=w<<16|b&65535;m[0]^=b,m[1]^=C,m[2]^=w,m[3]^=E,m[4]^=b,m[5]^=C,m[6]^=w,m[7]^=E;for(var g=0;g<4;g++)f.call(this)}},_doProcessBlock:function(d,h){var p=this._X;f.call(this),s[0]=p[0]^p[5]>>>16^p[3]<<16,s[1]=p[2]^p[7]>>>16^p[5]<<16,s[2]=p[4]^p[1]>>>16^p[7]<<16,s[3]=p[6]^p[3]>>>16^p[1]<<16;for(var m=0;m<4;m++)s[m]=(s[m]<<8|s[m]>>>24)&16711935|(s[m]<<24|s[m]>>>8)&4278255360,d[h+m]^=s[m]},blockSize:128/32,ivSize:64/32});function f(){for(var d=this._X,h=this._C,p=0;p<8;p++)u[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<u[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<u[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<u[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<u[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<u[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<u[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<u[6]>>>0?1:0)|0,this._b=h[7]>>>0<u[7]>>>0?1:0;for(var p=0;p<8;p++){var m=d[p]+h[p],g=m&65535,v=m>>>16,x=((g*g>>>17)+g*v>>>15)+v*v,y=((m&4294901760)*m|0)+((m&65535)*m|0);c[p]=x^y}d[0]=c[0]+(c[7]<<16|c[7]>>>16)+(c[6]<<16|c[6]>>>16)|0,d[1]=c[1]+(c[0]<<8|c[0]>>>24)+c[7]|0,d[2]=c[2]+(c[1]<<16|c[1]>>>16)+(c[0]<<16|c[0]>>>16)|0,d[3]=c[3]+(c[2]<<8|c[2]>>>24)+c[1]|0,d[4]=c[4]+(c[3]<<16|c[3]>>>16)+(c[2]<<16|c[2]>>>16)|0,d[5]=c[5]+(c[4]<<8|c[4]>>>24)+c[3]|0,d[6]=c[6]+(c[5]<<16|c[5]>>>16)+(c[4]<<16|c[4]>>>16)|0,d[7]=c[7]+(c[6]<<8|c[6]>>>24)+c[5]|0}r.RabbitLegacy=a._createHelper(l)}(),n.RabbitLegacy})}(jp)),jp.exports}var Gp={exports:{}},Q2;function kL(){return Q2||(Q2=1,function(e,t){(function(n,r,o){e.exports=r(We(),ei(),ti(),Ca(),Yt())})(Ae,function(n){return function(){var r=n,o=r.lib,a=o.BlockCipher,i=r.algo;const s=16,u=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],c=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var l={pbox:[],sbox:[]};function f(g,v){let x=v>>24&255,y=v>>16&255,b=v>>8&255,w=v&255,C=g.sbox[0][x]+g.sbox[1][y];return C=C^g.sbox[2][b],C=C+g.sbox[3][w],C}function d(g,v,x){let y=v,b=x,w;for(let C=0;C<s;++C)y=y^g.pbox[C],b=f(g,y)^b,w=y,y=b,b=w;return w=y,y=b,b=w,b=b^g.pbox[s],y=y^g.pbox[s+1],{left:y,right:b}}function h(g,v,x){let y=v,b=x,w;for(let C=s+1;C>1;--C)y=y^g.pbox[C],b=f(g,y)^b,w=y,y=b,b=w;return w=y,y=b,b=w,b=b^g.pbox[1],y=y^g.pbox[0],{left:y,right:b}}function p(g,v,x){for(let E=0;E<4;E++){g.sbox[E]=[];for(let S=0;S<256;S++)g.sbox[E][S]=c[E][S]}let y=0;for(let E=0;E<s+2;E++)g.pbox[E]=u[E]^v[y],y++,y>=x&&(y=0);let b=0,w=0,C=0;for(let E=0;E<s+2;E+=2)C=d(g,b,w),b=C.left,w=C.right,g.pbox[E]=b,g.pbox[E+1]=w;for(let E=0;E<4;E++)for(let S=0;S<256;S+=2)C=d(g,b,w),b=C.left,w=C.right,g.sbox[E][S]=b,g.sbox[E][S+1]=w;return!0}var m=i.Blowfish=a.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,v=g.words,x=g.sigBytes/4;p(l,v,x)}},encryptBlock:function(g,v){var x=d(l,g[v],g[v+1]);g[v]=x.left,g[v+1]=x.right},decryptBlock:function(g,v){var x=h(l,g[v],g[v+1]);g[v]=x.left,g[v+1]=x.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=a._createHelper(m)}(),n.Blowfish})}(Gp)),Gp.exports}(function(e,t){(function(n,r,o){e.exports=r(We(),Qd(),nL(),rL(),ei(),oL(),ti(),Ik(),B1(),aL(),Bk(),iL(),sL(),uL(),T1(),cL(),Ca(),Yt(),lL(),fL(),dL(),hL(),pL(),vL(),mL(),gL(),xL(),yL(),bL(),wL(),CL(),EL(),_L(),SL(),kL())})(Ae,function(n){return n})})(Fk);var Z2=Fk.exports,Tk={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,o,a){function i(c,l){if(!o[c]){if(!r[c]){var f=typeof qs=="function"&&qs;if(!l&&f)return f(c,!0);if(s)return s(c,!0);var d=new Error("Cannot find module '"+c+"'");throw d.code="MODULE_NOT_FOUND",d}var h=o[c]={exports:{}};r[c][0].call(h.exports,function(p){var m=r[c][1][p];return i(m||p)},h,h.exports,n,r,o,a)}return o[c].exports}for(var s=typeof qs=="function"&&qs,u=0;u<a.length;u++)i(a[u]);return i}({1:[function(n,r,o){(function(a){var i=a.MutationObserver||a.WebKitMutationObserver,s;if(i){var u=0,c=new i(p),l=a.document.createTextNode("");c.observe(l,{characterData:!0}),s=function(){l.data=u=++u%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var f=new a.MessageChannel;f.port1.onmessage=p,s=function(){f.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?s=function(){var g=a.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},a.document.documentElement.appendChild(g)}:s=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,v,x=h.length;x;){for(v=h,h=[],g=-1;++g<x;)v[g]();x=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&s()}}).call(this,typeof Ae<"u"?Ae:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,o){var a=n(1);function i(){}var s={},u=["REJECTED"],c=["FULFILLED"],l=["PENDING"];r.exports=f;function f(w){if(typeof w!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,w!==i&&m(this,w)}f.prototype.catch=function(w){return this.then(null,w)},f.prototype.then=function(w,C){if(typeof w!="function"&&this.state===c||typeof C!="function"&&this.state===u)return this;var E=new this.constructor(i);if(this.state!==l){var S=this.state===c?w:C;h(E,S,this.outcome)}else this.queue.push(new d(E,w,C));return E};function d(w,C,E){this.promise=w,typeof C=="function"&&(this.onFulfilled=C,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(w){s.resolve(this.promise,w)},d.prototype.otherCallFulfilled=function(w){h(this.promise,this.onFulfilled,w)},d.prototype.callRejected=function(w){s.reject(this.promise,w)},d.prototype.otherCallRejected=function(w){h(this.promise,this.onRejected,w)};function h(w,C,E){a(function(){var S;try{S=C(E)}catch(k){return s.reject(w,k)}S===w?s.reject(w,new TypeError("Cannot resolve promise with itself")):s.resolve(w,S)})}s.resolve=function(w,C){var E=g(p,C);if(E.status==="error")return s.reject(w,E.value);var S=E.value;if(S)m(w,S);else{w.state=c,w.outcome=C;for(var k=-1,_=w.queue.length;++k<_;)w.queue[k].callFulfilled(C)}return w},s.reject=function(w,C){w.state=u,w.outcome=C;for(var E=-1,S=w.queue.length;++E<S;)w.queue[E].callRejected(C);return w};function p(w){var C=w&&w.then;if(w&&(typeof w=="object"||typeof w=="function")&&typeof C=="function")return function(){C.apply(w,arguments)}}function m(w,C){var E=!1;function S(D){E||(E=!0,s.reject(w,D))}function k(D){E||(E=!0,s.resolve(w,D))}function _(){C(k,S)}var A=g(_);A.status==="error"&&S(A.value)}function g(w,C){var E={};try{E.value=w(C),E.status="success"}catch(S){E.status="error",E.value=S}return E}f.resolve=v;function v(w){return w instanceof this?w:s.resolve(new this(i),w)}f.reject=x;function x(w){var C=new this(i);return s.reject(C,w)}f.all=y;function y(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,S=!1;if(!E)return this.resolve([]);for(var k=new Array(E),_=0,A=-1,D=new this(i);++A<E;)T(w[A],A);return D;function T(W,$){C.resolve(W).then(q,function(X){S||(S=!0,s.reject(D,X))});function q(X){k[$]=X,++_===E&&!S&&(S=!0,s.resolve(D,k))}}}f.race=b;function b(w){var C=this;if(Object.prototype.toString.call(w)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=w.length,S=!1;if(!E)return this.resolve([]);for(var k=-1,_=new this(i);++k<E;)A(w[k]);return _;function A(D){C.resolve(D).then(function(T){S||(S=!0,s.resolve(_,T))},function(T){S||(S=!0,s.reject(_,T))})}}},{1:1}],3:[function(n,r,o){(function(a){typeof a.Promise!="function"&&(a.Promise=n(2))}).call(this,typeof Ae<"u"?Ae:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,o){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R};function i(R,M){if(!(R instanceof M))throw new TypeError("Cannot call a class as a function")}function s(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=s();function c(){try{if(!u||!u.open)return!1;var R=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),M=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!R||M)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function l(R,M){R=R||[],M=M||{};try{return new Blob(R,M)}catch(z){if(z.name!=="TypeError")throw z;for(var B=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,U=new B,j=0;j<R.length;j+=1)U.append(R[j]);return U.getBlob(M.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(R,M){M&&R.then(function(B){M(null,B)},function(B){M(B)})}function h(R,M,B){typeof M=="function"&&R.then(M),typeof B=="function"&&R.catch(B)}function p(R){return typeof R!="string"&&(console.warn(R+" used as a key, but it is not a string."),R=String(R)),R}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",v=void 0,x={},y=Object.prototype.toString,b="readonly",w="readwrite";function C(R){for(var M=R.length,B=new ArrayBuffer(M),U=new Uint8Array(B),j=0;j<M;j++)U[j]=R.charCodeAt(j);return B}function E(R){return new f(function(M){var B=R.transaction(g,w),U=l([""]);B.objectStore(g).put(U,"key"),B.onabort=function(j){j.preventDefault(),j.stopPropagation(),M(!1)},B.oncomplete=function(){var j=navigator.userAgent.match(/Chrome\/(\d+)/),z=navigator.userAgent.match(/Edge\//);M(z||!j||parseInt(j[1],10)>=43)}}).catch(function(){return!1})}function S(R){return typeof v=="boolean"?f.resolve(v):E(R).then(function(M){return v=M,v})}function k(R){var M=x[R.name],B={};B.promise=new f(function(U,j){B.resolve=U,B.reject=j}),M.deferredOperations.push(B),M.dbReady?M.dbReady=M.dbReady.then(function(){return B.promise}):M.dbReady=B.promise}function _(R){var M=x[R.name],B=M.deferredOperations.pop();if(B)return B.resolve(),B.promise}function A(R,M){var B=x[R.name],U=B.deferredOperations.pop();if(U)return U.reject(M),U.promise}function D(R,M){return new f(function(B,U){if(x[R.name]=x[R.name]||H(),R.db)if(M)k(R),R.db.close();else return B(R.db);var j=[R.name];M&&j.push(R.version);var z=u.open.apply(u,j);M&&(z.onupgradeneeded=function(te){var re=z.result;try{re.createObjectStore(R.storeName),te.oldVersion<=1&&re.createObjectStore(g)}catch(ae){if(ae.name==="ConstraintError")console.warn('The database "'+R.name+'" has been upgraded from version '+te.oldVersion+" to version "+te.newVersion+', but the storage "'+R.storeName+'" already exists.');else throw ae}}),z.onerror=function(te){te.preventDefault(),U(z.error)},z.onsuccess=function(){var te=z.result;te.onversionchange=function(re){re.target.close()},B(te),_(R)}})}function T(R){return D(R,!1)}function W(R){return D(R,!0)}function $(R,M){if(!R.db)return!0;var B=!R.db.objectStoreNames.contains(R.storeName),U=R.version<R.db.version,j=R.version>R.db.version;if(U&&(R.version!==M&&console.warn('The database "'+R.name+`" can't be downgraded from version `+R.db.version+" to version "+R.version+"."),R.version=R.db.version),j||B){if(B){var z=R.db.version+1;z>R.version&&(R.version=z)}return!0}return!1}function q(R){return new f(function(M,B){var U=new FileReader;U.onerror=B,U.onloadend=function(j){var z=btoa(j.target.result||"");M({__local_forage_encoded_blob:!0,data:z,type:R.type})},U.readAsBinaryString(R)})}function X(R){var M=C(atob(R.data));return l([M],{type:R.type})}function P(R){return R&&R.__local_forage_encoded_blob}function V(R){var M=this,B=M._initReady().then(function(){var U=x[M._dbInfo.name];if(U&&U.dbReady)return U.dbReady});return h(B,R,R),B}function G(R){k(R);for(var M=x[R.name],B=M.forages,U=0;U<B.length;U++){var j=B[U];j._dbInfo.db&&(j._dbInfo.db.close(),j._dbInfo.db=null)}return R.db=null,T(R).then(function(z){return R.db=z,$(R)?W(R):z}).then(function(z){R.db=M.db=z;for(var te=0;te<B.length;te++)B[te]._dbInfo.db=z}).catch(function(z){throw A(R,z),z})}function L(R,M,B,U){U===void 0&&(U=1);try{var j=R.db.transaction(R.storeName,M);B(null,j)}catch(z){if(U>0&&(!R.db||z.name==="InvalidStateError"||z.name==="NotFoundError"))return f.resolve().then(function(){if(!R.db||z.name==="NotFoundError"&&!R.db.objectStoreNames.contains(R.storeName)&&R.version<=R.db.version)return R.db&&(R.version=R.db.version+1),W(R)}).then(function(){return G(R).then(function(){L(R,M,B,U-1)})}).catch(B);B(z)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function K(R){var M=this,B={db:null};if(R)for(var U in R)B[U]=R[U];var j=x[B.name];j||(j=H(),x[B.name]=j),j.forages.push(M),M._initReady||(M._initReady=M.ready,M.ready=V);var z=[];function te(){return f.resolve()}for(var re=0;re<j.forages.length;re++){var ae=j.forages[re];ae!==M&&z.push(ae._initReady().catch(te))}var ie=j.forages.slice(0);return f.all(z).then(function(){return B.db=j.db,T(B)}).then(function(se){return B.db=se,$(B,M._defaultConfig.version)?W(B):se}).then(function(se){B.db=j.db=se,M._dbInfo=B;for(var xe=0;xe<ie.length;xe++){var Te=ie[xe];Te!==M&&(Te._dbInfo.db=B.db,Te._dbInfo.version=B.version)}})}function Y(R,M){var B=this;R=p(R);var U=new f(function(j,z){B.ready().then(function(){L(B._dbInfo,b,function(te,re){if(te)return z(te);try{var ae=re.objectStore(B._dbInfo.storeName),ie=ae.get(R);ie.onsuccess=function(){var se=ie.result;se===void 0&&(se=null),P(se)&&(se=X(se)),j(se)},ie.onerror=function(){z(ie.error)}}catch(se){z(se)}})}).catch(z)});return d(U,M),U}function fe(R,M){var B=this,U=new f(function(j,z){B.ready().then(function(){L(B._dbInfo,b,function(te,re){if(te)return z(te);try{var ae=re.objectStore(B._dbInfo.storeName),ie=ae.openCursor(),se=1;ie.onsuccess=function(){var xe=ie.result;if(xe){var Te=xe.value;P(Te)&&(Te=X(Te));var Ke=R(Te,xe.key,se++);Ke!==void 0?j(Ke):xe.continue()}else j()},ie.onerror=function(){z(ie.error)}}catch(xe){z(xe)}})}).catch(z)});return d(U,M),U}function le(R,M,B){var U=this;R=p(R);var j=new f(function(z,te){var re;U.ready().then(function(){return re=U._dbInfo,y.call(M)==="[object Blob]"?S(re.db).then(function(ae){return ae?M:q(M)}):M}).then(function(ae){L(U._dbInfo,w,function(ie,se){if(ie)return te(ie);try{var xe=se.objectStore(U._dbInfo.storeName);ae===null&&(ae=void 0);var Te=xe.put(ae,R);se.oncomplete=function(){ae===void 0&&(ae=null),z(ae)},se.onabort=se.onerror=function(){var Ke=Te.error?Te.error:Te.transaction.error;te(Ke)}}catch(Ke){te(Ke)}})}).catch(te)});return d(j,B),j}function we(R,M){var B=this;R=p(R);var U=new f(function(j,z){B.ready().then(function(){L(B._dbInfo,w,function(te,re){if(te)return z(te);try{var ae=re.objectStore(B._dbInfo.storeName),ie=ae.delete(R);re.oncomplete=function(){j()},re.onerror=function(){z(ie.error)},re.onabort=function(){var se=ie.error?ie.error:ie.transaction.error;z(se)}}catch(se){z(se)}})}).catch(z)});return d(U,M),U}function ce(R){var M=this,B=new f(function(U,j){M.ready().then(function(){L(M._dbInfo,w,function(z,te){if(z)return j(z);try{var re=te.objectStore(M._dbInfo.storeName),ae=re.clear();te.oncomplete=function(){U()},te.onabort=te.onerror=function(){var ie=ae.error?ae.error:ae.transaction.error;j(ie)}}catch(ie){j(ie)}})}).catch(j)});return d(B,R),B}function De(R){var M=this,B=new f(function(U,j){M.ready().then(function(){L(M._dbInfo,b,function(z,te){if(z)return j(z);try{var re=te.objectStore(M._dbInfo.storeName),ae=re.count();ae.onsuccess=function(){U(ae.result)},ae.onerror=function(){j(ae.error)}}catch(ie){j(ie)}})}).catch(j)});return d(B,R),B}function qe(R,M){var B=this,U=new f(function(j,z){if(R<0){j(null);return}B.ready().then(function(){L(B._dbInfo,b,function(te,re){if(te)return z(te);try{var ae=re.objectStore(B._dbInfo.storeName),ie=!1,se=ae.openKeyCursor();se.onsuccess=function(){var xe=se.result;if(!xe){j(null);return}R===0||ie?j(xe.key):(ie=!0,xe.advance(R))},se.onerror=function(){z(se.error)}}catch(xe){z(xe)}})}).catch(z)});return d(U,M),U}function Re(R){var M=this,B=new f(function(U,j){M.ready().then(function(){L(M._dbInfo,b,function(z,te){if(z)return j(z);try{var re=te.objectStore(M._dbInfo.storeName),ae=re.openKeyCursor(),ie=[];ae.onsuccess=function(){var se=ae.result;if(!se){U(ie);return}ie.push(se.key),se.continue()},ae.onerror=function(){j(ae.error)}}catch(se){j(se)}})}).catch(j)});return d(B,R),B}function Me(R,M){M=m.apply(this,arguments);var B=this.config();R=typeof R!="function"&&R||{},R.name||(R.name=R.name||B.name,R.storeName=R.storeName||B.storeName);var U=this,j;if(!R.name)j=f.reject("Invalid arguments");else{var z=R.name===B.name&&U._dbInfo.db,te=z?f.resolve(U._dbInfo.db):T(R).then(function(re){var ae=x[R.name],ie=ae.forages;ae.db=re;for(var se=0;se<ie.length;se++)ie[se]._dbInfo.db=re;return re});R.storeName?j=te.then(function(re){if(re.objectStoreNames.contains(R.storeName)){var ae=re.version+1;k(R);var ie=x[R.name],se=ie.forages;re.close();for(var xe=0;xe<se.length;xe++){var Te=se[xe];Te._dbInfo.db=null,Te._dbInfo.version=ae}var Ke=new f(function(Xe,Rt){var _t=u.open(R.name,ae);_t.onerror=function(nr){var Es=_t.result;Es.close(),Rt(nr)},_t.onupgradeneeded=function(){var nr=_t.result;nr.deleteObjectStore(R.storeName)},_t.onsuccess=function(){var nr=_t.result;nr.close(),Xe(nr)}});return Ke.then(function(Xe){ie.db=Xe;for(var Rt=0;Rt<se.length;Rt++){var _t=se[Rt];_t._dbInfo.db=Xe,_(_t._dbInfo)}}).catch(function(Xe){throw(A(R,Xe)||f.resolve()).catch(function(){}),Xe})}}):j=te.then(function(re){k(R);var ae=x[R.name],ie=ae.forages;re.close();for(var se=0;se<ie.length;se++){var xe=ie[se];xe._dbInfo.db=null}var Te=new f(function(Ke,Xe){var Rt=u.deleteDatabase(R.name);Rt.onerror=function(){var _t=Rt.result;_t&&_t.close(),Xe(Rt.error)},Rt.onblocked=function(){console.warn('dropInstance blocked for database "'+R.name+'" until all open connections are closed')},Rt.onsuccess=function(){var _t=Rt.result;_t&&_t.close(),Ke(_t)}});return Te.then(function(Ke){ae.db=Ke;for(var Xe=0;Xe<ie.length;Xe++){var Rt=ie[Xe];_(Rt._dbInfo)}}).catch(function(Ke){throw(A(R,Ke)||f.resolve()).catch(function(){}),Ke})})}return d(j,M),j}var _e={_driver:"asyncStorage",_initStorage:K,_support:c(),iterate:fe,getItem:Y,setItem:le,removeItem:we,clear:ce,length:De,key:qe,keys:Re,dropInstance:Me};function Be(){return typeof openDatabase=="function"}var Ne="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",He="~~local_forage_type~",Ut=/^~~local_forage_type~([^~]+)~/,wt="__lfsc__:",Ct=wt.length,an="arbf",ot="blob",st="si08",Et="ui08",An="uic8",vn="si16",Ln="si32",mn="ur16",gn="ui32",ao="fl32",Ea="fl64",gr=Ct+an.length,Or=Object.prototype.toString;function No(R){var M=R.length*.75,B=R.length,U,j=0,z,te,re,ae;R[R.length-1]==="="&&(M--,R[R.length-2]==="="&&M--);var ie=new ArrayBuffer(M),se=new Uint8Array(ie);for(U=0;U<B;U+=4)z=Ne.indexOf(R[U]),te=Ne.indexOf(R[U+1]),re=Ne.indexOf(R[U+2]),ae=Ne.indexOf(R[U+3]),se[j++]=z<<2|te>>4,se[j++]=(te&15)<<4|re>>2,se[j++]=(re&3)<<6|ae&63;return ie}function Mr(R){var M=new Uint8Array(R),B="",U;for(U=0;U<M.length;U+=3)B+=Ne[M[U]>>2],B+=Ne[(M[U]&3)<<4|M[U+1]>>4],B+=Ne[(M[U+1]&15)<<2|M[U+2]>>6],B+=Ne[M[U+2]&63];return M.length%3===2?B=B.substring(0,B.length-1)+"=":M.length%3===1&&(B=B.substring(0,B.length-2)+"=="),B}function Oo(R,M){var B="";if(R&&(B=Or.call(R)),R&&(B==="[object ArrayBuffer]"||R.buffer&&Or.call(R.buffer)==="[object ArrayBuffer]")){var U,j=wt;R instanceof ArrayBuffer?(U=R,j+=an):(U=R.buffer,B==="[object Int8Array]"?j+=st:B==="[object Uint8Array]"?j+=Et:B==="[object Uint8ClampedArray]"?j+=An:B==="[object Int16Array]"?j+=vn:B==="[object Uint16Array]"?j+=mn:B==="[object Int32Array]"?j+=Ln:B==="[object Uint32Array]"?j+=gn:B==="[object Float32Array]"?j+=ao:B==="[object Float64Array]"?j+=Ea:M(new Error("Failed to get type for BinaryArray"))),M(j+Mr(U))}else if(B==="[object Blob]"){var z=new FileReader;z.onload=function(){var te=He+R.type+"~"+Mr(this.result);M(wt+ot+te)},z.readAsArrayBuffer(R)}else try{M(JSON.stringify(R))}catch(te){console.error("Couldn't convert value into a JSON string: ",R),M(null,te)}}function Zd(R){if(R.substring(0,Ct)!==wt)return JSON.parse(R);var M=R.substring(gr),B=R.substring(Ct,gr),U;if(B===ot&&Ut.test(M)){var j=M.match(Ut);U=j[1],M=M.substring(j[0].length)}var z=No(M);switch(B){case an:return z;case ot:return l([z],{type:U});case st:return new Int8Array(z);case Et:return new Uint8Array(z);case An:return new Uint8ClampedArray(z);case vn:return new Int16Array(z);case mn:return new Uint16Array(z);case Ln:return new Int32Array(z);case gn:return new Uint32Array(z);case ao:return new Float32Array(z);case Ea:return new Float64Array(z);default:throw new Error("Unkown type: "+B)}}var ys={serialize:Oo,deserialize:Zd,stringToBuffer:No,bufferToString:Mr};function bs(R,M,B,U){R.executeSql("CREATE TABLE IF NOT EXISTS "+M.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],B,U)}function Jd(R){var M=this,B={db:null};if(R)for(var U in R)B[U]=typeof R[U]!="string"?R[U].toString():R[U];var j=new f(function(z,te){try{B.db=openDatabase(B.name,String(B.version),B.description,B.size)}catch(re){return te(re)}B.db.transaction(function(re){bs(re,B,function(){M._dbInfo=B,z()},function(ae,ie){te(ie)})},te)});return B.serializer=ys,j}function xr(R,M,B,U,j,z){R.executeSql(B,U,j,function(te,re){re.code===re.SYNTAX_ERR?te.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[M.storeName],function(ae,ie){ie.rows.length?z(ae,re):bs(ae,M,function(){ae.executeSql(B,U,j,z)},z)},z):z(te,re)},z)}function eh(R,M){var B=this;R=p(R);var U=new f(function(j,z){B.ready().then(function(){var te=B._dbInfo;te.db.transaction(function(re){xr(re,te,"SELECT * FROM "+te.storeName+" WHERE key = ? LIMIT 1",[R],function(ae,ie){var se=ie.rows.length?ie.rows.item(0).value:null;se&&(se=te.serializer.deserialize(se)),j(se)},function(ae,ie){z(ie)})})}).catch(z)});return d(U,M),U}function Cc(R,M){var B=this,U=new f(function(j,z){B.ready().then(function(){var te=B._dbInfo;te.db.transaction(function(re){xr(re,te,"SELECT * FROM "+te.storeName,[],function(ae,ie){for(var se=ie.rows,xe=se.length,Te=0;Te<xe;Te++){var Ke=se.item(Te),Xe=Ke.value;if(Xe&&(Xe=te.serializer.deserialize(Xe)),Xe=R(Xe,Ke.key,Te+1),Xe!==void 0){j(Xe);return}}j()},function(ae,ie){z(ie)})})}).catch(z)});return d(U,M),U}function Ec(R,M,B,U){var j=this;R=p(R);var z=new f(function(te,re){j.ready().then(function(){M===void 0&&(M=null);var ae=M,ie=j._dbInfo;ie.serializer.serialize(M,function(se,xe){xe?re(xe):ie.db.transaction(function(Te){xr(Te,ie,"INSERT OR REPLACE INTO "+ie.storeName+" (key, value) VALUES (?, ?)",[R,se],function(){te(ae)},function(Ke,Xe){re(Xe)})},function(Te){if(Te.code===Te.QUOTA_ERR){if(U>0){te(Ec.apply(j,[R,ae,B,U-1]));return}re(Te)}})})}).catch(re)});return d(z,B),z}function th(R,M,B){return Ec.apply(this,[R,M,B,1])}function nh(R,M){var B=this;R=p(R);var U=new f(function(j,z){B.ready().then(function(){var te=B._dbInfo;te.db.transaction(function(re){xr(re,te,"DELETE FROM "+te.storeName+" WHERE key = ?",[R],function(){j()},function(ae,ie){z(ie)})})}).catch(z)});return d(U,M),U}function _c(R){var M=this,B=new f(function(U,j){M.ready().then(function(){var z=M._dbInfo;z.db.transaction(function(te){xr(te,z,"DELETE FROM "+z.storeName,[],function(){U()},function(re,ae){j(ae)})})}).catch(j)});return d(B,R),B}function rh(R){var M=this,B=new f(function(U,j){M.ready().then(function(){var z=M._dbInfo;z.db.transaction(function(te){xr(te,z,"SELECT COUNT(key) as c FROM "+z.storeName,[],function(re,ae){var ie=ae.rows.item(0).c;U(ie)},function(re,ae){j(ae)})})}).catch(j)});return d(B,R),B}function oh(R,M){var B=this,U=new f(function(j,z){B.ready().then(function(){var te=B._dbInfo;te.db.transaction(function(re){xr(re,te,"SELECT key FROM "+te.storeName+" WHERE id = ? LIMIT 1",[R+1],function(ae,ie){var se=ie.rows.length?ie.rows.item(0).key:null;j(se)},function(ae,ie){z(ie)})})}).catch(z)});return d(U,M),U}function Sc(R){var M=this,B=new f(function(U,j){M.ready().then(function(){var z=M._dbInfo;z.db.transaction(function(te){xr(te,z,"SELECT key FROM "+z.storeName,[],function(re,ae){for(var ie=[],se=0;se<ae.rows.length;se++)ie.push(ae.rows.item(se).key);U(ie)},function(re,ae){j(ae)})})}).catch(j)});return d(B,R),B}function ah(R){return new f(function(M,B){R.transaction(function(U){U.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(j,z){for(var te=[],re=0;re<z.rows.length;re++)te.push(z.rows.item(re).name);M({db:R,storeNames:te})},function(j,z){B(z)})},function(U){B(U)})})}function kc(R,M){M=m.apply(this,arguments);var B=this.config();R=typeof R!="function"&&R||{},R.name||(R.name=R.name||B.name,R.storeName=R.storeName||B.storeName);var U=this,j;return R.name?j=new f(function(z){var te;R.name===B.name?te=U._dbInfo.db:te=openDatabase(R.name,"","",0),R.storeName?z({db:te,storeNames:[R.storeName]}):z(ah(te))}).then(function(z){return new f(function(te,re){z.db.transaction(function(ae){function ie(Ke){return new f(function(Xe,Rt){ae.executeSql("DROP TABLE IF EXISTS "+Ke,[],function(){Xe()},function(_t,nr){Rt(nr)})})}for(var se=[],xe=0,Te=z.storeNames.length;xe<Te;xe++)se.push(ie(z.storeNames[xe]));f.all(se).then(function(){te()}).catch(function(Ke){re(Ke)})},function(ae){re(ae)})})}):j=f.reject("Invalid arguments"),d(j,M),j}var xn={_driver:"webSQLStorage",_initStorage:Jd,_support:Be(),iterate:Cc,getItem:eh,setItem:th,removeItem:nh,clear:_c,length:rh,key:oh,keys:Sc,dropInstance:kc};function Lr(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function ws(R,M){var B=R.name+"/";return R.storeName!==M.storeName&&(B+=R.storeName+"/"),B}function ih(){var R="_localforage_support_test";try{return localStorage.setItem(R,!0),localStorage.removeItem(R),!1}catch{return!0}}function Pk(){return!ih()||localStorage.length>0}function Nk(R){var M=this,B={};if(R)for(var U in R)B[U]=R[U];return B.keyPrefix=ws(R,M._defaultConfig),Pk()?(M._dbInfo=B,B.serializer=ys,f.resolve()):f.reject()}function Ok(R){var M=this,B=M.ready().then(function(){for(var U=M._dbInfo.keyPrefix,j=localStorage.length-1;j>=0;j--){var z=localStorage.key(j);z.indexOf(U)===0&&localStorage.removeItem(z)}});return d(B,R),B}function Mk(R,M){var B=this;R=p(R);var U=B.ready().then(function(){var j=B._dbInfo,z=localStorage.getItem(j.keyPrefix+R);return z&&(z=j.serializer.deserialize(z)),z});return d(U,M),U}function Lk(R,M){var B=this,U=B.ready().then(function(){for(var j=B._dbInfo,z=j.keyPrefix,te=z.length,re=localStorage.length,ae=1,ie=0;ie<re;ie++){var se=localStorage.key(ie);if(se.indexOf(z)===0){var xe=localStorage.getItem(se);if(xe&&(xe=j.serializer.deserialize(xe)),xe=R(xe,se.substring(te),ae++),xe!==void 0)return xe}}});return d(U,M),U}function Wk(R,M){var B=this,U=B.ready().then(function(){var j=B._dbInfo,z;try{z=localStorage.key(R)}catch{z=null}return z&&(z=z.substring(j.keyPrefix.length)),z});return d(U,M),U}function zk(R){var M=this,B=M.ready().then(function(){for(var U=M._dbInfo,j=localStorage.length,z=[],te=0;te<j;te++){var re=localStorage.key(te);re.indexOf(U.keyPrefix)===0&&z.push(re.substring(U.keyPrefix.length))}return z});return d(B,R),B}function $k(R){var M=this,B=M.keys().then(function(U){return U.length});return d(B,R),B}function Uk(R,M){var B=this;R=p(R);var U=B.ready().then(function(){var j=B._dbInfo;localStorage.removeItem(j.keyPrefix+R)});return d(U,M),U}function Hk(R,M,B){var U=this;R=p(R);var j=U.ready().then(function(){M===void 0&&(M=null);var z=M;return new f(function(te,re){var ae=U._dbInfo;ae.serializer.serialize(M,function(ie,se){if(se)re(se);else try{localStorage.setItem(ae.keyPrefix+R,ie),te(z)}catch(xe){(xe.name==="QuotaExceededError"||xe.name==="NS_ERROR_DOM_QUOTA_REACHED")&&re(xe),re(xe)}})})});return d(j,B),j}function Vk(R,M){if(M=m.apply(this,arguments),R=typeof R!="function"&&R||{},!R.name){var B=this.config();R.name=R.name||B.name,R.storeName=R.storeName||B.storeName}var U=this,j;return R.name?j=new f(function(z){R.storeName?z(ws(R,U._defaultConfig)):z(R.name+"/")}).then(function(z){for(var te=localStorage.length-1;te>=0;te--){var re=localStorage.key(te);re.indexOf(z)===0&&localStorage.removeItem(re)}}):j=f.reject("Invalid arguments"),d(j,M),j}var jk={_driver:"localStorageWrapper",_initStorage:Nk,_support:Lr(),iterate:Lk,getItem:Mk,setItem:Hk,removeItem:Uk,clear:Ok,length:$k,key:Wk,keys:zk,dropInstance:Vk},Gk=function(M,B){return M===B||typeof M=="number"&&typeof B=="number"&&isNaN(M)&&isNaN(B)},qk=function(M,B){for(var U=M.length,j=0;j<U;){if(Gk(M[j],B))return!0;j++}return!1},P1=Array.isArray||function(R){return Object.prototype.toString.call(R)==="[object Array]"},Cs={},N1={},ni={INDEXEDDB:_e,WEBSQL:xn,LOCALSTORAGE:jk},Kk=[ni.INDEXEDDB._driver,ni.WEBSQL._driver,ni.LOCALSTORAGE._driver],Ac=["dropInstance"],sh=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ac),Xk={description:"",driver:Kk.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Yk(R,M){R[M]=function(){var B=arguments;return R.ready().then(function(){return R[M].apply(R,B)})}}function uh(){for(var R=1;R<arguments.length;R++){var M=arguments[R];if(M)for(var B in M)M.hasOwnProperty(B)&&(P1(M[B])?arguments[0][B]=M[B].slice():arguments[0][B]=M[B])}return arguments[0]}var Qk=function(){function R(M){i(this,R);for(var B in ni)if(ni.hasOwnProperty(B)){var U=ni[B],j=U._driver;this[B]=j,Cs[j]||this.defineDriver(U)}this._defaultConfig=uh({},Xk),this._config=uh({},this._defaultConfig,M),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return R.prototype.config=function(B){if((typeof B>"u"?"undefined":a(B))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var U in B){if(U==="storeName"&&(B[U]=B[U].replace(/\W/g,"_")),U==="version"&&typeof B[U]!="number")return new Error("Database version must be a number.");this._config[U]=B[U]}return"driver"in B&&B.driver?this.setDriver(this._config.driver):!0}else return typeof B=="string"?this._config[B]:this._config},R.prototype.defineDriver=function(B,U,j){var z=new f(function(te,re){try{var ae=B._driver,ie=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!B._driver){re(ie);return}for(var se=sh.concat("_initStorage"),xe=0,Te=se.length;xe<Te;xe++){var Ke=se[xe],Xe=!qk(Ac,Ke);if((Xe||B[Ke])&&typeof B[Ke]!="function"){re(ie);return}}var Rt=function(){for(var Es=function(eA){return function(){var tA=new Error("Method "+eA+" is not implemented by the current driver"),O1=f.reject(tA);return d(O1,arguments[arguments.length-1]),O1}},ch=0,Jk=Ac.length;ch<Jk;ch++){var lh=Ac[ch];B[lh]||(B[lh]=Es(lh))}};Rt();var _t=function(Es){Cs[ae]&&console.info("Redefining LocalForage driver: "+ae),Cs[ae]=B,N1[ae]=Es,te()};"_support"in B?B._support&&typeof B._support=="function"?B._support().then(_t,re):_t(!!B._support):_t(!0)}catch(nr){re(nr)}});return h(z,U,j),z},R.prototype.driver=function(){return this._driver||null},R.prototype.getDriver=function(B,U,j){var z=Cs[B]?f.resolve(Cs[B]):f.reject(new Error("Driver not found."));return h(z,U,j),z},R.prototype.getSerializer=function(B){var U=f.resolve(ys);return h(U,B),U},R.prototype.ready=function(B){var U=this,j=U._driverSet.then(function(){return U._ready===null&&(U._ready=U._initDriver()),U._ready});return h(j,B,B),j},R.prototype.setDriver=function(B,U,j){var z=this;P1(B)||(B=[B]);var te=this._getSupportedDrivers(B);function re(){z._config.driver=z.driver()}function ae(xe){return z._extend(xe),re(),z._ready=z._initStorage(z._config),z._ready}function ie(xe){return function(){var Te=0;function Ke(){for(;Te<xe.length;){var Xe=xe[Te];return Te++,z._dbInfo=null,z._ready=null,z.getDriver(Xe).then(ae).catch(Ke)}re();var Rt=new Error("No available storage method found.");return z._driverSet=f.reject(Rt),z._driverSet}return Ke()}}var se=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=se.then(function(){var xe=te[0];return z._dbInfo=null,z._ready=null,z.getDriver(xe).then(function(Te){z._driver=Te._driver,re(),z._wrapLibraryMethodsWithReady(),z._initDriver=ie(te)})}).catch(function(){re();var xe=new Error("No available storage method found.");return z._driverSet=f.reject(xe),z._driverSet}),h(this._driverSet,U,j),this._driverSet},R.prototype.supports=function(B){return!!N1[B]},R.prototype._extend=function(B){uh(this,B)},R.prototype._getSupportedDrivers=function(B){for(var U=[],j=0,z=B.length;j<z;j++){var te=B[j];this.supports(te)&&U.push(te)}return U},R.prototype._wrapLibraryMethodsWithReady=function(){for(var B=0,U=sh.length;B<U;B++)Yk(this,sh[B])},R.prototype.createInstance=function(B){return new R(B)},R}(),Zk=new Qk;r.exports=Zk},{3:3}]},{},[4])(4)})})(Tk);var AL=Tk.exports;const hi=J2(AL),DL=async(e,t,n)=>{const r="https://modelstorage2024.blob.core.windows.net/models",o="v1";hi.config({driver:[hi.INDEXEDDB,hi.WEBSQL,hi.LOCALSTORAGE],name:"FaceApiModelsCache",version:1});const a={startTime:null,start(){this.startTime=performance.now()},end(u){const c=performance.now()-this.startTime;return console.log(`${u} took ${c.toFixed(2)}ms`),c}},i=()=>{const u=`faceapi_encryption_key_${o}`;let c=localStorage.getItem(u);return c||(c=Z2.lib.WordArray.random(256/8).toString(),localStorage.setItem(u,c)),c},s=(u,c)=>{try{return Z2.AES.encrypt(JSON.stringify(u),c).toString()}catch(l){return console.error("Encryption failed:",l),u}};try{a.start();const u=i(),c=["ssd_mobilenetv1_model-shard1","ssd_mobilenetv1_model-shard2","ssd_mobilenetv1_model-weights_manifest.json","face_landmark_68_model-shard1","face_landmark_68_model-weights_manifest.json","face_recognition_model-shard1","face_recognition_model-shard2","face_recognition_model-weights_manifest.json"],l=async d=>{try{const h=await hi.getItem(d);if(h)return console.log(`Using cached model: ${d}`),h;const p=await fetch(`${r}/${d}`);if(!p.ok)throw new Error(`Failed to fetch ${d}`);const m=await p.arrayBuffer(),g=s(Array.from(new Uint8Array(m)),u);return await hi.setItem(d,g),m}catch(h){throw console.error(`Error loading model ${d}:`,h),h}};await Promise.all([Ue.ssdMobilenetv1.loadFromUri(r),Ue.faceLandmark68Net.loadFromUri(r),Ue.faceRecognitionNet.loadFromUri(r)]),e(!0),t(null),(async()=>{try{await Promise.all(c.map(async d=>{try{await l(d)}catch(h){console.error(`Background caching failed for ${d}:`,h)}}))}catch(d){console.error("Background caching failed:",d)}})(),a.end("Initial Model Load"),e&&setInterval(async()=>{console.log("Checking model integrity...")},3e4)}catch(u){console.error("Model loading failed:",u),e(!1),t(u.message||"Failed to load face recognition models")}},RL=Z.lazy(()=>Zu(()=>import("./FaceAuthentication-B5DaSLHQ.js"),__vite__mapDeps([0,1,2]))),FL=Z.lazy(()=>Zu(()=>import("./AuthenticatedProfile-CTOFASH8.js"),__vite__mapDeps([3,4,1]))),IL=Z.lazy(()=>Zu(()=>import("./Header-tcN0EYqN.js"),[])),BL=Z.lazy(()=>Zu(()=>import("./TeamPage-k34W0MCQ.js"),__vite__mapDeps([5,6]))),TL=Z.lazy(()=>Zu(()=>import("./HomePage-DqUod3N2.js"),__vite__mapDeps([7,2,1,4,6,8])));function PL(){const[e,t]=Z.useState(null),[n,r]=Z.useState(null),[o,a]=Z.useState(!1),[i,s]=Z.useState(null),[u,c]=Z.useState(null),l=lE(),f=(d,h)=>{d&&(t(d),r(h),l("/profile"))};return Z.useEffect(()=>{DL(a,c)},[]),et.jsx(JT,{maxWidth:"lg",children:et.jsx(HT,{sx:{my:4},children:et.jsxs(Z.Suspense,{fallback:et.jsx(ZT,{}),children:[et.jsx(IL,{}),et.jsxs(JP,{children:[et.jsx(Hs,{path:"/",element:et.jsx(TL,{})}),et.jsx(Hs,{path:"/authenticate",element:et.jsx(RL,{onAuthenticated:f,modelsLoaded:o,loadingError:u,hashVerificationError:i})}),et.jsx(Hs,{path:"/profile",element:e&&n?et.jsx(FL,{name:e,image:n.image,number:n.aadharNumber}):et.jsx(zT,{variant:"h5",sx:{textAlign:"center",mt:5},children:"Unauthorized Access"})}),et.jsx(Hs,{path:"/TeamPage",element:et.jsx(BL,{})})]})]})})})}function NL(){return et.jsx(E8,{children:et.jsx(PL,{})})}dC(document.getElementById("root")).render(et.jsx(Z.StrictMode,{children:et.jsx(NL,{})}));export{jO as $,Yo as A,Ao as B,WC as C,GL as D,o1 as E,oo as F,Gu as G,$O as H,qd as I,wc as J,F1 as K,Ak as L,wk as M,I1 as N,XM as O,Ge as P,Dk as Q,z1 as R,v1 as S,SM as T,Rk as U,YM as V,v2 as W,JL as X,FO as Y,vk as Z,ye as _,VS as a,cp as a$,XL as a0,pO as a1,qS as a2,d2 as a3,y7 as a4,rs as a5,h2 as a6,tl as a7,Ef as a8,Bo as a9,VL as aA,uO as aB,p2 as aC,ek as aD,YL as aE,QL as aF,p7 as aG,v7 as aH,h7 as aI,l7 as aJ,f7 as aK,d7 as aL,u7 as aM,KM as aN,s7 as aO,c7 as aP,SO as aQ,m7 as aR,cO as aS,n7 as aT,Ue as aU,ju as aV,bc as aW,lO as aX,i7 as aY,a7 as aZ,i1 as a_,GS as aa,jL as ab,r1 as ac,m1 as ad,kM as ae,m2 as af,bO as ag,o7 as ah,Kd as ai,s1 as aj,ZL as ak,hM as al,qM as am,r7 as an,g7 as ao,ZM as ap,yk as aq,xk as ar,fk as as,bk as at,c1 as au,u1 as av,_O as aw,Jr as ax,wO as ay,CO as az,be as b,GM as b0,UL as b1,e7 as b2,t7 as b3,Kt as b4,HL as b5,bM as b6,eo as b7,GC as b8,et as b9,WL as bA,rd as bB,vE as bC,JT as bD,xA as bE,TT as bF,$L as bG,sf as bH,Ae as ba,J2 as bb,HT as bc,zT as bd,ZT as be,Ce as bf,ld as bg,On as bh,Rm as bi,fd as bj,ic as bk,Om as bl,Bm as bm,UI as bn,dB as bo,LC as bp,hC as bq,cT as br,Dm as bs,zL as bt,_o as bu,FC as bv,LL as bw,ML as bx,Cm as by,iy as bz,hr as c,lk as d,pn as e,EO as f,tk as g,qL as h,vO as i,xO as j,yO as k,BO as l,IO as m,JS as n,ka as o,KL as p,ZO as q,Z as r,x7 as s,QM as t,x1 as u,$M as v,jM as w,Ui as x,dk as y,h1 as z};
